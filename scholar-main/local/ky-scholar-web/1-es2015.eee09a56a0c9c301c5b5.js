(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"19W7":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("WTGI"),c=n("mhyn"),a=n("+O+V"),o=n("Vhue"),s=n("55n1"),r=n("fXoL"),l=n("JFwS");let d=(()=>{class e{constructor(e){this.http=e}statisticsPacketInfoLog(e){const t=o.a.getPacketInfo();if("1"===t.status){const n={isCommonHttpHeader:!0};this.http.postBody(a.j.recordControlUrl,Object.assign(Object.assign({},e),{businessCode:a.j.packetInfo.businessId,orgCode:i.a.getOrgCode(),source:1,informationId:t.pcode,userName:s.a.getUser().userName,userId:s.a.getUserId()}),n).subscribe(()=>{},()=>{})}}packageOperatLog(e){return this.http.postBody(a.j.pageListUrl,e,{isCommonHttpHeader:!0})}}return e.\u0275fac=function(t){return new(t||e)(r.ec(l.a))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac,providedIn:c.a}),e})()},"6iFG":function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var i=n("mrSG"),c=n("fXoL"),a=n("odmk"),o=n("ApCc"),s=n("5+WD"),r=n("WTGI"),l=n("HDdC"),d=n("4tR+"),u=n("Vhue"),h=n("wsOq"),p=n("tyNb"),b=n("uMH2"),g=n("PScX"),m=n("dEAy"),f=n("Wc2E"),z=n("3Pt+"),v=n("ofXK"),y=n("IvDN"),S=n("OzZK"),k=n("RwU8"),P=n("C2AL"),C=n("FwiY"),E=n("ocnv"),w=n("B+r4"),x=n("qAZ0"),M=n("D9mS");const O=["localuploadmodal"],I=["qkcupload"];function Z(e,t){1&e&&(c.ac(0,"div",10),c.Pc(1," \u8be5\u8bfe\u5305\u5c1a\u672a\u5efa\u7acb\u7ae0\u8282\u5185\u5bb9 "),c.Zb())}function T(e,t){if(1&e){const e=c.bc();c.ac(0,"button",11),c.ic("click",(function(){return c.Ec(e),c.lc().chapterImport()})),c.Pc(1,"excel\u5bfc\u5165\u7ae0\u8282 "),c.Zb()}}function L(e,t){if(1&e){const e=c.bc();c.ac(0,"button",12),c.ic("click",(function(){return c.Ec(e),c.lc().knowledgeGraph()})),c.Pc(1,"\u77e5\u8bc6\u56fe\u8c31\u5bfc\u5165\u7ae0\u8282"),c.Zb()}if(2&e){const e=c.lc();c.tc("nzLoading",e.knowledgeGraphLoading)}}function N(e,t){if(1&e){const e=c.bc();c.ac(0,"button",13),c.ic("click",(function(){return c.Ec(e),c.lc().chapterExport()})),c.Pc(1,"\u7ae0\u8282\u5bfc\u51fa"),c.Zb()}if(2&e){const e=c.lc();c.tc("nzLoading",e.chapterExportLoading)}}function V(e,t){if(1&e&&(c.ac(0,"span"),c.ac(1,"span",20),c.Pc(2),c.Zb(),c.ac(3,"span"),c.Pc(4),c.Zb(),c.Zb()),2&e){const e=c.lc(),t=e.index,n=e.$implicit,i=c.lc();c.Mc("cursor",i.isStandard||"0"!==i.preview?"not-allowed":"inherit"),c.Eb(2),c.Rc("\u7b2c",t+1,"\u7ae0"),c.Eb(2),c.Qc(n.name)}}function F(e,t){if(1&e){const e=c.bc();c.ac(0,"a",23),c.ic("click",(function(t){c.Ec(e);const n=c.lc(2).$implicit,i=c.lc();return t.stopPropagation(),i.addChapter(n)})),c.Vb(1,"i",24),c.Pc(2," \u91cd\u547d\u540d "),c.Zb()}}const D=function(){return{color:"#f53131","margin-left":"20px"}};function j(e,t){if(1&e){const e=c.bc();c.ac(0,"a",23),c.ic("click",(function(t){c.Ec(e);const n=c.lc(2).$implicit,i=c.lc();return t.stopPropagation(),i.delChapter(n)})),c.Vb(1,"i",25),c.Pc(2," \u5220\u9664 "),c.Zb()}2&e&&c.Lc(c.wc(2,D))}function _(e,t){if(1&e&&(c.Nc(0,F,3,0,"a",21),c.Nc(1,j,3,3,"a",22)),2&e){const e=c.lc(2);c.tc("ngIf","0"===e.preview),c.Eb(1),c.tc("ngIf",!e.isStandard&&"0"===e.preview)}}function q(e,t){if(1&e){const e=c.bc();c.ac(0,"a",30),c.ic("click",(function(){c.Ec(e);const t=c.lc().$implicit,n=c.lc().$implicit;return c.lc().addSection(n,t)})),c.Vb(1,"i",24),c.Pc(2," \u91cd\u547d\u540d "),c.Zb()}}const A=function(){return{color:"#f53131"}};function U(e,t){if(1&e){const e=c.bc();c.ac(0,"a",30),c.ic("click",(function(){c.Ec(e);const t=c.lc().$implicit,n=c.lc().$implicit;return c.lc().delSection(n,t)})),c.Vb(1,"i",25),c.Pc(2," \u5220\u9664 "),c.Zb()}2&e&&c.Lc(c.wc(2,A))}function B(e,t){if(1&e&&(c.Yb(0),c.ac(1,"div",26),c.ac(2,"div"),c.ac(3,"span",20),c.Pc(4),c.Zb(),c.ac(5,"span"),c.Pc(6),c.Zb(),c.Zb(),c.ac(7,"div",27),c.Nc(8,q,3,0,"a",28),c.Nc(9,U,3,3,"a",29),c.Zb(),c.Zb(),c.Xb()),2&e){const e=t.$implicit,n=t.index,i=c.lc().index,a=c.lc();c.Eb(1),c.Mc("cursor",a.isStandard||"0"!==a.preview?"not-allowed":"inherit"),c.Eb(3),c.Sc("",i+1,".",n+1,"\u8282"),c.Eb(2),c.Qc(e.name),c.Eb(2),c.tc("ngIf","0"===a.preview),c.Eb(1),c.tc("ngIf",!a.isStandard&&"0"===a.preview)}}function R(e,t){if(1&e){const e=c.bc();c.ac(0,"div",31),c.ac(1,"div"),c.ac(2,"a",30),c.ic("click",(function(){c.Ec(e);const t=c.lc().$implicit;return c.lc().addSection(t,null)})),c.Vb(3,"i",32),c.Pc(4," \u6dfb\u52a0\u5c0f\u8282 "),c.Zb(),c.Zb(),c.Vb(5,"div"),c.Zb()}}function $(e,t){if(1&e){const e=c.bc();c.ac(0,"nz-collapse-panel",14),c.ic("nzActiveChange",(function(n){return c.Ec(e),t.$implicit.active=n}))("nzActiveChange",(function(){c.Ec(e);const n=t.$implicit;return c.lc().sectionChange(n)})),c.Nc(1,V,5,4,"ng-template",null,15,c.Oc),c.Nc(3,_,2,2,"ng-template",null,16,c.Oc),c.ac(5,"div",17),c.ic("cdkDropListDropped",(function(t){return c.Ec(e),c.lc().sectionDrop(t)})),c.Nc(6,B,10,7,"ng-container",18),c.Nc(7,R,6,0,"div",19),c.Zb(),c.Zb()}if(2&e){const e=t.$implicit,n=c.Cc(2),i=c.Cc(4),a=c.lc();c.Mc("cursor",a.isStandard||"0"!==a.preview?"not-allowed":"inherit"),c.tc("nzActive",e.active)("nzHeader",n)("nzExtra",i),c.Eb(5),c.Mc("cursor",a.isStandard||"0"!==a.preview?"not-allowed":"inherit"),c.Eb(1),c.tc("ngForOf",e.children),c.Eb(1),c.tc("ngIf",!a.isStandard&&"0"===a.preview)}}function Q(e,t){if(1&e){const e=c.bc();c.ac(0,"button",33),c.ic("click",(function(){return c.Ec(e),c.lc().addChapter(null)})),c.Vb(1,"i",32),c.Pc(2," \u65b0\u589e\u7ae0 "),c.Zb()}2&e&&c.tc("nzSize","large")}const W=function(){return{showPreviewIcon:!1,showRemoveIcon:!0,showDownloadIcon:!1}};function J(e,t){if(1&e){const e=c.bc();c.ac(0,"form",34),c.ac(1,"nz-form-item"),c.ac(2,"nz-form-label",35),c.Pc(3,"\u7ae0\u8282\u7ed3\u6784"),c.Zb(),c.ac(4,"nz-form-control",36),c.ac(5,"nz-spin",37),c.ac(6,"nz-upload",38,39),c.ac(8,"button",40),c.ac(9,"span"),c.Vb(10,"i",41),c.Pc(11,"\u4e0a\u4f20\u6587\u4ef6"),c.Zb(),c.Zb(),c.Zb(),c.ac(12,"div",42),c.Pc(13,"excel\u5bfc\u5165\u7ae0\u8282\u540c\u65f6\u5c06\u4f1a\u6e05\u9664\u5df2\u6709\u7684\u7ae0\u8282\u7ed3\u6784\uff01"),c.Zb(),c.ac(14,"button",43),c.ic("click",(function(){return c.Ec(e),c.lc().downTemplate()})),c.ac(15,"span"),c.Vb(16,"i",44),c.Pc(17,"\u6a21\u677f\u4e0b\u8f7d"),c.Zb(),c.Zb(),c.Zb(),c.Zb(),c.Zb(),c.Zb()}if(2&e){const e=c.lc();c.tc("formGroup",e.localUploadChapter),c.Eb(2),c.tc("nzSpan",5),c.Eb(3),c.tc("nzSpinning",e.loading)("nzDelay",0),c.Eb(1),c.tc("nzShowUploadList",c.wc(11,W))("nzFileList",!1)("nzRemove",e.removeFileSelf())("nzBeforeUpload",e.beforeChapterUpload())("nzCustomRequest",e.customChapterRequest()),c.Eb(2),c.tc("disabled",""!==e.localUploadChapter.value.chapterUrl),c.Eb(6),c.tc("nzLoading",e.downTemplateLoading)}}const H=function(){return{border:"none","background-color":"#fff"}};let K=(()=>{class e{constructor(e,t,n,i,a,o,s){this.route=e,this.courseMgService=t,this.nzMesService=n,this.nzModalService=i,this.uploadOssService=a,this.fb=o,this.modalService=s,this.courseId="",this.coursePacketId="",this.packageName="",this.isStandard=!1,this.preview="0",this.nodes=[],this.isVisible=!1,this.fileList=[],this.loading=!1,this.afterOpen=new c.n,this.downTemplateLoading=!1,this.knowledgeGraphLoading=!1,this.chapterExportLoading=!1}ngOnInit(){this.initParams(),this.afterOpen.subscribe(e=>{this.localUploadChapter.patchValue({chapterUrl:""}),this.qkcupload.nzFileList=[]})}ngOnDestroy(){this.afterOpen.unsubscribe()}initParams(){const{courseId:e,id:t,preview:n,isUsed:i,name:c}=u.a.getPacketInfo();this.courseId=e,this.coursePacketId=t,this.packageName=c,this.isStandard=i>0,this.preview=n,this.getChapter(),this.localUploadChapter=this.fb.group({chapterUrl:[""]})}checkStructure(){if(0===this.nodes.length)return!1;for(const e of this.nodes)if(e.children&&0===e.children.length)return!1;return!0}getChapter(){this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe(e=>{200===e.status&&(e.data.forEach(e=>{e.active=!1}),this.nodes=e.data,this.nodes.length>0&&(this.nodes[0].active=!0,this.sectionChange(this.nodes[0])))})}getSection(e){this.courseMgService.getList_courseSection(e.id).subscribe(t=>{200===t.status?e.children=t.data:e.isLoading=!1})}sectionChange(e){this.setChapter(e),e.children&&0!==e.children.length||this.getSection(e)}setChapter(e){this.curChapter=e}addChapter(e){const t=!!e;this.nzModalService.create({nzTitle:t?"\u91cd\u547d\u540d\u7ae0":"\u65b0\u589e\u7ae0",nzContent:o.a,nzComponentParams:{courseId:this.courseId,coursePacketId:this.coursePacketId,data:this.nodes,formData:e},nzMaskClosable:!1,nzFooter:null}).afterClose.subscribe(n=>{if(n)if(t){const{name:t}=n;e.name=t}else{n.active||(n.active=!0);const e=this.nodes.findIndex(e=>e.id===n.id);this.nodes.splice(-1===e?this.nodes.length:e,-1===e?0:1,n)}})}addSection(e,t){this.setChapter(e),this.nzModalService.create({nzTitle:t?"\u91cd\u547d\u540d\u8282":"\u65b0\u589e\u8282",nzContent:a.a,nzComponentParams:{courseId:this.courseId,coursePacketId:this.coursePacketId,data:e,formData:t},nzMaskClosable:!1,nzFooter:null}).afterClose.subscribe(e=>{e&&this.getSection(this.curChapter)})}delSection(e,t){this.setChapter(e),this.nzModalService.confirm({nzTitle:"\u8b66\u544a",nzContent:`\u786e\u5b9a\u8981\u5220\u9664${t.name}\u5417`,nzOnOk:()=>new Promise((n,i)=>{this.courseMgService.delTreeNode(t.id,"section").subscribe(i=>{if(204!==i.status)return this.nzMesService.error(i.message),void n(!1);const c=e.children.findIndex(e=>e.id===t.id);e.children.splice(c,1);const a={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.curChapter.id,seq:this.curChapter.seq,sections:e.children.map((e,t)=>({id:e.id,seq:t+1}))}]};this.sort(a),n(!0)})})})}delChapter(e){this.nzModalService.confirm({nzTitle:"\u8b66\u544a",nzContent:`\u786e\u5b9a\u8981\u5220\u9664${e.name}\u5417`,nzOnOk:()=>new Promise((t,n)=>{this.courseMgService.delTreeNode(e.id,"chapter").subscribe(n=>{if(204!==n.status)return this.nzMesService.error(n.message),void t(!1);const i=this.nodes.findIndex(t=>t.id===e.id);this.nodes.splice(i,1);const c={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:this.nodes.map((e,t)=>({id:e.id,seq:t+1}))};this.sort(c),t(!0)})})})}sort(e){this.courseMgService.save_courseChapter(e).subscribe(e=>{200===e.status||this.nzMesService.error(e.message||"\u79fb\u52a8\u5931\u8d25\uff0c\u672a\u77e5\u9519\u8bef\uff01")},e=>{this.nzMesService.error(JSON.stringify(e))})}chapterDrop(e){if(!this.isStandard&&"0"===this.preview){const t=this.nodes||[];Object(s.g)(t,e.previousIndex,e.currentIndex);const n={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:t.map((e,t)=>({id:e.id,seq:t+1}))};this.sort(n)}}sectionDrop(e){const t=this.curChapter.children||[];Object(s.g)(t,e.previousIndex,e.currentIndex);const n={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.curChapter.id,seq:this.curChapter.seq,sections:t.map((e,t)=>({id:e.id,seq:t+1}))}]};this.sort(n)}chapterImport(){this.modalFormRef=this.modalService.create({nzTitle:"excel\u5bfc\u5165\u7ae0\u8282",nzContent:this.localuploadmodal,nzMaskClosable:!1,nzWrapClassName:"vertical-center-modal",nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a\u4e0a\u4f20",nzAfterOpen:this.afterOpen,nzOnOk:e=>new Promise((e,t)=>{if(!this.localUploadChapter.value.chapterUrl)return this.nzMesService.warning("\u8bf7\u5148\u4e0a\u4f20\u6587\u4ef6"),void e(!1);this.courseMgService.excelImportChapter({courseId:this.courseId,coursePacketId:this.coursePacketId,fileUrl:this.localUploadChapter.value.chapterUrl}).subscribe(t=>{200===t.status?(this.getChapter(),e(!0)):(500===t.status&&this.nzMesService.warning(t.message),e(!1))},t=>{e(!1)})})})}chapterExport(){this.chapterExportLoading=!0,this.courseMgService.packetChapterExport(this.coursePacketId).subscribe(e=>{this.chapterExportLoading=!1;const t=document.createElement("a"),n=URL.createObjectURL(e.body);t.setAttribute("href",n),t.setAttribute("download",this.packageName+"\u7ae0\u8282\u7ed3\u6784.xls"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},()=>{this.chapterExportLoading=!1})}knowledgeGraph(e){return new Promise(t=>{this.knowledgeGraphLoading=e.loading=!0,this.courseMgService.synchronizedKnowledge({courseId:this.courseId,coursePacketId:this.coursePacketId}).subscribe(n=>{this.knowledgeGraphLoading=e.loading=!1,201===n.status?(this.getChapter(),t(!0)):t(!1)},()=>{this.knowledgeGraphLoading=e.loading=!1,t(!1)})})}customChapterRequest(){const e=this;return t=>{this.loading=!0,e.uploadOssService.uploadOss(t.file,d.a.knowledge_file).subscribe(e=>{this.loading=!1,this.localUploadChapter.patchValue({chapterUrl:e}),t.onSuccess(Object.assign({},t),t.file,{})},n=>{this.loading=!1,t.onError(n,t.file),e.nzMesService.error(JSON.stringify(n))})}}beforeChapterUpload(){const e=this;return t=>"excel"!==r.a.getFileType(t.name)?(e.nzMesService.error("\u8bf7\u4e0a\u4f20excel,\u652f\u6301\u540e\u7f00xls, xlsx"),!1):new l.a(e=>{e.next(!0)})}removeFileSelf(){const e=this;return function(){e.localUploadChapter.patchValue({chapterUrl:""}),this.nzFileList=[]}}downTemplate(){this.downTemplateLoading=!0,this.courseMgService.exportExcel().subscribe(e=>{const t=document.createElement("a"),n=URL.createObjectURL(e.body);t.setAttribute("href",n),t.setAttribute("download","\u7ae0\u8282\u7ed3\u6784\u6a21\u677f"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.downTemplateLoading=!1},e=>{this.nzMesService.error(JSON.stringify(e)),this.downTemplateLoading=!1})}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(p.a),c.Ub(b.a),c.Ub(g.e),c.Ub(m.e),c.Ub(f.a),c.Ub(z.d),c.Ub(m.e))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-structure-adjustment"]],viewQuery:function(e,t){var n;1&e&&(c.Vc(O,!0),c.Vc(I,!0)),2&e&&(c.Bc(n=c.jc())&&(t.localuploadmodal=n.first),c.Bc(n=c.jc())&&(t.qkcupload=n.first))},decls:11,vars:11,consts:[[1,"container"],["class","not-content",4,"ngIf"],[1,"operation-button"],["nz-button","","nzType","primary","style","margin-right:20px;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-right:20px;",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["cdkDropList","",3,"cdkDropListDropped"],["class","collapse-panel","cdkDrag","",3,"cursor","nzActive","nzHeader","nzExtra","nzActiveChange",4,"ngFor","ngForOf"],["nz-button","","nzType","primary","nzBlock","",3,"nzSize","click",4,"ngIf"],["localuploadmodal",""],[1,"not-content"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"click"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"nzLoading","click"],["nz-button","","nzType","primary",3,"nzLoading","click"],["cdkDrag","",1,"collapse-panel",3,"nzActive","nzHeader","nzExtra","nzActiveChange"],["panelHeaderTpl",""],["panelExtraTpl",""],["cdkDropList","",1,"list",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","add-section",4,"ngIf"],[2,"margin-right","20px"],[3,"click",4,"ngIf"],[3,"style","click",4,"ngIf"],[3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["cdkDrag","",1,"list-item"],[1,"action-group"],["nz-button","","nzType","link",3,"click",4,"ngIf"],["nz-button","","nzType","link",3,"style","click",4,"ngIf"],["nz-button","","nzType","link",3,"click"],[1,"add-section"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-button","","nzType","primary","nzBlock","",3,"nzSize","click"],["nz-form","",3,"formGroup"],["nzRequired","",2,"max-width","100px",3,"nzSpan"],[2,"position","relative"],[3,"nzSpinning","nzDelay"],["nzListType","picture",1,"upload-list-inline-strure",3,"nzShowUploadList","nzFileList","nzRemove","nzBeforeUpload","nzCustomRequest"],["qkcupload",""],["nz-button","",2,"margin-bottom","20px",3,"disabled"],["nz-icon","","nzType","upload",2,"font-size","20px"],[2,"position","absolute","top","35px"],["nz-button","",2,"position","absolute","left","126px","top","0",3,"nzLoading","click"],["nz-icon","","nzType","snippets","nzTheme","outline",2,"font-size","20px","margin-right","20px"]],template:function(e,t){1&e&&(c.ac(0,"div",0),c.Nc(1,Z,2,0,"div",1),c.ac(2,"div",2),c.Nc(3,T,2,0,"button",3),c.Nc(4,L,2,1,"button",4),c.Nc(5,N,2,1,"button",5),c.Zb(),c.ac(6,"nz-collapse",6),c.ic("cdkDropListDropped",(function(e){return t.chapterDrop(e)})),c.Nc(7,$,8,9,"nz-collapse-panel",7),c.Zb(),c.Nc(8,Q,3,1,"button",8),c.Zb(),c.Nc(9,J,18,12,"ng-template",null,9,c.Oc)),2&e&&(c.Eb(1),c.tc("ngIf","1"===t.preview&&!t.nodes.length),c.Eb(2),c.tc("ngIf",!t.isStandard&&"0"===t.preview),c.Eb(1),c.tc("ngIf",!t.isStandard&&"0"===t.preview),c.Eb(1),c.tc("ngIf","0"===t.preview),c.Eb(1),c.Lc(c.wc(10,H)),c.Mc("cursor",t.isStandard||"0"!==t.preview?"not-allowed":"inherit"),c.Eb(1),c.tc("ngForOf",t.nodes),c.Eb(1),c.tc("ngIf",!t.isStandard&&"0"===t.preview))},directives:[v.n,y.a,s.d,v.m,S.a,k.a,P.a,y.c,s.a,C.a,z.y,z.p,E.b,z.i,w.c,E.c,w.a,E.d,E.a,x.a,M.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:15px;background-color:#fff}.container[_ngcontent-%COMP%]   .operation-button[_ngcontent-%COMP%]{margin-bottom:20px}.not-content[_ngcontent-%COMP%]{font-size:20px;text-align:center;margin-top:200px}.list[_ngcontent-%COMP%]{position:relative;width:100%}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;cursor:pointer;padding:0 10px;transition:all .3s}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{opacity:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{padding:0 12px 0 0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#fafafa}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .action-group[_ngcontent-%COMP%]{opacity:1}.list[_ngcontent-%COMP%]   .add-section[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}.collapse-panel[_ngcontent-%COMP%]{margin-bottom:24px;border:1px solid #d9d9d9}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header{background-color:#fafafa}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header .ant-collapse-extra{opacity:0}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header:hover .ant-collapse-extra{opacity:1}[_nghost-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:13px 30px 0}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-header{position:relative;padding:12px 16px 12px 20px;color:rgba(0,0,0,.85);line-height:22px;background-color:#fafafa}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-header .ant-collapse-arrow{margin-right:10px}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-header .ant-collapse-extra{display:none}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:13px 30px 0}.cdk-drag-preview.list-item[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;padding:0 10px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview.list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{opacity:0}.cdk-drag-preview.list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{padding:0 12px 0 0}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     .ant-upload-list-picture .ant-upload-list-item{margin-top:20px}.upload-list-inline-strure[_ngcontent-%COMP%]{display:inline-block;max-width:330px}"]}),Object(i.b)([Object(h.b)({title:"\u5bfc\u5165\u77e5\u8bc6\u56fe\u8c31",content:"\u60a8\u786e\u5b9a\u5c06\u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u7ae0\u8282\u7ed3\u6784\u4e00\u952e\u540c\u6b65\u5230\u8bfe\u5305\u7ed3\u6784\u5417\uff1f\u5c06\u4f1a\u6e05\u9664\u5df2\u6709\u7684\u7ae0\u8282\u7ed3\u6784\u3002",type:"warning"})],e.prototype,"knowledgeGraph",null),e})()},"7lsC":function(e,t,n){"use strict";n.d(t,"a",(function(){return et}));var i=n("mrSG"),c=n("AytR"),a=n("wsOq"),o=n("55n1"),s=n("ngz8"),r=n("HDdC"),l=n("quSY"),d=n("7Hc7"),u=n("jtHE"),h=n("7+OI"),p=n("LRne"),b=n("7HRe"),g=n("qgXg"),m=n("z6cu"),f=n("itXk"),z=n("XNiG"),v=n("EY2u"),y=n("bOdf"),S=n("zp1y"),k=n("1G5W"),P=n("IzEk"),C=n("lJxs"),E=n("/uUt"),w=n("UXun"),x=n("vkgz"),M=n("JIr8"),O=n("fXoL");function I(){return e=>new r.a(t=>{let n,i;const c=new l.a;return c.add(e.subscribe({complete:()=>{n&&t.next(i),t.complete()},error:e=>{t.error(e)},next:e=>{i=e,n||(n=d.a.schedule(()=>{t.next(i),n=void 0}),c.add(n))}})),c})}const Z=new O.q("ComponentStore InitState");let T=(()=>{class e{constructor(e){this.destroySubject$=new u.a(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new u.a(1),this.isInitialized=!1,this.notInitializedErrorMessage=this.constructor.name+" has not been initialized yet. Please make sure it is initialized before updating/getting.",this.state$=this.select(e=>e),e&&this.initState(e)}ngOnDestroy(){this.stateSubject$.complete(),this.destroySubject$.next()}updater(e){return t=>{let n;const i=(Object(h.a)(t)?t:Object(p.a)(t)).pipe(Object(y.a)(e=>this.isInitialized?Object(b.a)([e],g.a).pipe(Object(S.a)(this.stateSubject$)):Object(m.a)(new Error(this.notInitializedErrorMessage))),Object(k.a)(this.destroy$)).subscribe({next:([t,n])=>{this.stateSubject$.next(e(n,t))},error:e=>{n=e,this.stateSubject$.error(e)}});if(n)throw n;return i}}initState(e){Object(b.a)([e],g.a).subscribe(e=>{this.isInitialized=!0,this.stateSubject$.next(e)})}setState(e){"function"!=typeof e?this.initState(e):this.updater(e)()}patchState(e){this.setState(t=>{const n="function"==typeof e?e(t):e;return Object.assign(Object.assign({},t),n)})}get(e){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);let t;return this.stateSubject$.pipe(Object(P.a)(1)).subscribe(n=>{t=e?e(n):n}),t}select(...e){const{observables:t,projector:n,config:i}=function(e){const t=Array.from(e);let n,i={debounce:!1};const c=t.pop();return"function"!=typeof c?(i=Object.assign(Object.assign({},i),c),n=t.pop()):n=c,{observables:t,projector:n,config:i}}(e);let c;return c=0===t.length?this.stateSubject$.pipe(i.debounce?I():e=>e,Object(C.a)(n)):Object(f.a)(t).pipe(i.debounce?I():e=>e,Object(C.a)(e=>n(...e))),c.pipe(Object(E.a)(),Object(w.a)({refCount:!0,bufferSize:1}),Object(k.a)(this.destroy$))}effect(e){const t=new z.a;return e(t).pipe(Object(k.a)(this.destroy$)).subscribe(),e=>(Object(h.a)(e)?e:Object(p.a)(e)).pipe(Object(k.a)(this.destroy$)).subscribe(e=>{t.next(e)})}}return e.\u0275fac=function(t){return new(t||e)(O.ec(Z,8))},e.\u0275prov=O.Qb({token:e,factory:e.\u0275fac}),e})();function L(e,t,n){return i=>i.pipe(Object(x.a)({next:e,error:t,complete:n}),Object(M.a)(()=>v.a))}function N(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}var V=n("SeVD"),F=n("pLZG");function D(e,t,n){return[Object(F.a)(t,n)(new r.a(Object(V.a)(e))),Object(F.a)(N(t,n))(new r.a(Object(V.a)(e)))]}var j=n("eIep"),_=n("7o/Q");function q(e){return t=>t.lift(new A(e))}class A{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new U(e,this.predicate))}}class U extends _.a{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var B=n("VRyK");function R(...e){return t=>t.lift.call(Object(B.a)(t,...e))}var $=n("Vhue"),Q=n("WTGI"),W=n("mhyn"),J=n("BmWY"),H=n("i+L+"),K=n("bSaw"),G=n("5+WD"),X=n("+O+V"),Y=n("mwdn"),ee=n("PScX"),te=n("dEAy"),ne=n("19W7");let ie=(()=>{class e extends T{constructor(e,t,n,i){super({packetInfo:$.a.getPacketInfo(),isLoading:!1,searchLoad:!1,exam:[],intelligent:[],subQuestionBankCurrent:[],subQuestionBankCurrentPre:[],subQuestionBank:[],subQuestionBankInt:[],listSublibrary:[],subQuestionBankIntCurrent:[],subQuestionBankIntCurrentPre:[],moduleArr:[],levelLists:[],companyLists:[],listOfData:[],idMap:{},breakthroughMode:!1,practiceOn:!1,isBet:!1,knowledgeNum:0}),this.courseManageService=e,this.message=t,this.modalService=n,this.statisticsLogService=i,this.packetInfo$=this.select(({packetInfo:e})=>e),this.listSublibrary$=this.select(({listSublibrary:e})=>e),this.listOfData$=this.select(({listOfData:e})=>e),this.moduleArr$=this.select(({moduleArr:e})=>e),this.levelLists$=this.select(({levelLists:e})=>e),this.companyLists$=this.select(({companyLists:e})=>e),this.knowledgeNum$=this.select(({knowledgeNum:e})=>e),this.idMap$=this.select(({idMap:e})=>e),this.subQuestionBankCurrentPre$=this.select(({subQuestionBankCurrentPre:e})=>e),this.subQuestionBank$=this.select(({subQuestionBank:e})=>e),this.subQuestionBankIntCurrentPre$=this.select(({subQuestionBankIntCurrentPre:e})=>e),this.subQuestionBankInt$=this.select(({subQuestionBankInt:e})=>e),this.vm$=this.select(e=>e,{debounce:!0}),this.setPacketInfo=this.updater((e,t)=>Object.assign(Object.assign({},e),{packetInfo:t})),this.setLoading=this.updater((e,t)=>Object.assign(Object.assign({},e),{loadObj:t})),this.getLevel=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(j.a)(([,e])=>"1"===e.isCard?this.courseManageService.levelList(e.id).pipe(L(e=>{if(200===e.status){const t=e.data.sort((e,t)=>e.seq>t.seq?1:e.seq<t.seq?-1:0);t.forEach(e=>{e.coursePacketCardRecourseList&&(e.coursePacketCardRecourseList=e.coursePacketCardRecourseList.sort((e,t)=>e.seq>t.seq?1:e.seq<t.seq?-1:0))}),this.patchState({levelLists:t})}},()=>v.a)):Object(p.a)([])))),this.getCompany=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(j.a)(([,e])=>"1"===e.is99Train?this.courseManageService.getCompany(e.id).pipe(L(e=>{200===e.status&&this.patchState({companyLists:e.data})},()=>v.a)):Object(p.a)([])))),this.setBreakthroughMode=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(x.a)(([,e])=>{this.patchState({breakthroughMode:"1"===e.isCard})}))),this.setPracticeOn=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(x.a)(([,e])=>{this.patchState({practiceOn:"1"===e.is99Train})}))),this.setIsBet=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(x.a)(([,e])=>{"22"!==e.teacherType&&this.patchState({isBet:"1"===e.isBet})}))),this.getSubLibrary=this.effect(e=>e.pipe(Object(S.a)(Object(f.a)([this.packetInfo$,this.listSublibrary$])),Object(j.a)(([,[e]])=>this.courseManageService.getSubLibrary({coursePacketId:e.id,quebankType:1}).pipe(L(e=>{if(200===e.status){const t=e.data.sort((e,t)=>Number(e.quebankId)>Number(t.quebankId)?1:Number(e.quebankId)<Number(t.quebankId)?-1:0),n=t.filter(e=>"1"===e.busType).sort((e,t)=>e.seq>t.seq?1:e.seq<t.seq?-1:0),i=t.filter(e=>"2"===e.busType).sort((e,t)=>e.seq>t.seq?1:e.seq<t.seq?-1:0),c=n.map(e=>String(e.quebankId)),a=JSON.parse(JSON.stringify(c)),o=i.map(e=>String(e.quebankId)),s=JSON.parse(JSON.stringify(o));this.patchState({subQuestionBankCurrentPre:c,subQuestionBankCurrent:a,subQuestionBankIntCurrentPre:o,subQuestionBankIntCurrent:s,listSublibrary:t,subQuestionBank:n,subQuestionBankInt:i})}},()=>v.a))))),this.getLessonCountTable=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),q(([,e])=>"22"===e.teachType),Object(j.a)(([,e])=>this.courseManageService.getLessonPackageTable(e.id).pipe(L(t=>{200===t.status&&(t.data&&t.data.length?(t.data.forEach((e,n)=>{t.data[n].index=n+1}),this.patchState({listOfData:t.data,packetInfo:Object.assign(Object.assign({},e),{lessonCount:t.data.length})})):this.patchState({listOfData:[]}))},()=>v.a))))),this.getSubQuestionBank=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(x.a)(()=>this.patchState({searchLoad:!1})),Object(j.a)(([,e])=>Q.a.getAjax(c.a.questionBankApi+"system/qkcPaper/courseCode",{courseCode:e.code,type:""}).pipe(L(e=>{this.patchState({searchLoad:!1});const t=JSON.parse(e);if(200===t.code)if(t.data&&t.data.length){const e=JSON.parse(JSON.stringify(t.data)),n=JSON.parse(JSON.stringify(t.data));let i=[];n.forEach(e=>{i=e.sublibraryModuleList.filter(e=>"EXAM"===e.type).concat(i)}),e.forEach(e=>{e.sublibraryModuleList=e.sublibraryModuleList.filter(e=>"PRACTICE"===e.type)});const c={};t.data.forEach(e=>{e.sublibraryModuleList.forEach(e=>{c[e.id]=e.type})});const a=this.conversionNode(e).sort((e,t)=>e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0),o=this.conversionNode(t.data).sort((e,t)=>e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0);this.patchState({exam:o,intelligent:a,moduleArr:i,idMap:c})}else this.patchState({exam:[],intelligent:[],moduleArr:[]});else this.message.error(t.message)},()=>{this.patchState({searchLoad:!1}),this.message.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38")}))))),this.dellistSublibraryItem=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),q(([,e])=>+e.isUsed>0),Object(j.a)(([e])=>(e.loadingControl.loading=!0,this.courseManageService.delSubLibrary({id:e.data.id}).pipe(L(t=>{e.loadingControl.loading=!1,204===t.status&&this.getSubLibrary()},()=>e.loadingControl.loading=!1)))))),this.deleteGift=this.effect(e=>e.pipe(Object(j.a)(e=>(e.loadingControl.loading=!0,this.courseManageService.levelDataDeletion(e.id).pipe(L(t=>{e.loadingControl.loading=!1,204===t.status&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u5956\u52b1",actionCode:X.j.packetInfo["otherSet-levelthrough-action"].modify,content:e.id}),this.getLevel())},()=>e.loadingControl.loading=!1)))))),this.levelDeletion=this.effect(e=>e.pipe(Object(j.a)(e=>(e.loadingControl.loading=!0,this.courseManageService.levelDeletion(e.id).pipe(L(t=>{e.loadingControl.loading=!1,204===t.status&&(this.getLevel(),this.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u5173\u5361",actionCode:X.j.packetInfo["otherSet-levelthrough-action"].delCode,content:e.id}))},()=>e.loadingControl.loading=!1)))))),this.companyDeletion=this.effect(e=>e.pipe(Object(j.a)(e=>(e.loadingControl.loading=!0,this.courseManageService.companyDeletion(e.id).pipe(L(t=>{e.loadingControl.loading=!1,this.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u516c\u53f8",actionCode:X.j.packetInfo["otherSet-99train-action"].delCode,content:e.id}),204===t.status&&this.getCompany()},()=>e.loadingControl.loading=!1)))))),this.delTable=this.effect(e=>e.pipe(Object(j.a)(e=>(e.loadingControl.loading=!0,this.courseManageService.delTable(e.id).pipe(L(t=>{e.loadingControl.loading=!1,this.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u8bfe\u6b21",actionCode:X.j.packetInfo["otherSet-lessons-action"].delCode,content:e.id}),204===t.status&&this.getLessonCountTable()},()=>e.loadingControl.loading=!1)))))),this.dataInit=this.effect(e=>e.pipe(Object(x.a)({next:e=>{this.setBreakthroughMode(),this.setPracticeOn(),this.setIsBet(),this.setLoading({isLoading:!0,searchLoad:!0}),this.getKnowledgeNum(),this.getLessonCountTable(),this.getLevel(),this.getCompany(),this.getSubLibrary(),this.getSubQuestionBank()},error:()=>{}}))),this.getKnowledgeNum=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(j.a)(([,e])=>this.courseManageService.getKnos({knowledgeSubjectId:e.knowledgeSubjectId}).pipe(L(e=>{this.patchState(200===e.status?{knowledgeNum:e.data.num||0}:{knowledgeNum:0})},()=>this.patchState({knowledgeNum:0})))))),this.subQuestionBankChange=this.effect(e=>{const[t,n]=D(e.pipe(Object(S.a)(Object(f.a)([this.packetInfo$,this.idMap$])),Object(j.a)(([e,[t,n]])=>Object(p.a)(e).pipe(Object(S.a)(Object(f.a)([this[e.type+"CurrentPre$"],this[e.type+"$"],Object(p.a)(t),Object(p.a)(n),this[e.type+"$"]]))))),([e,[t]])=>t.length<e.data.length);return t.pipe(Object(j.a)(([e,[t,,n,i,c]])=>{const a=e.treeSelect.getTreeNodeByKey(String(e.data[e.data.length-1]));return this.courseManageService.callSubLibrary({courseId:n.courseId,coursePacketId:n.id,busType:"subQuestionBank"===e.type?"1":"2",quebankId:a.origin.id,quebankName:a.origin.name,quebankType:1,seq:Q.a.getMaxSeq(c),quebankModuleType:"subQuestionBankInt"===e.type?"1":"EXAM"===i[e.data[e.data.length-1]]?"2":"1"}).pipe(L(e=>{201===e.status&&this.getSubLibrary()},()=>v.a))}),R(n.pipe(Object(x.a)(([e,[t,n]])=>{t.every((t,i)=>{if(!(e.data.indexOf(t)<0))return!0;this.courseManageService.delSubLibrary({id:n[i].id}).subscribe(e=>{204===e.status&&this.getSubLibrary()})})}))))}),this.generateLessonsReal=this.effect(e=>e.pipe(Object(S.a)(this.packetInfo$),Object(j.a)(([e,t])=>(this.patchState({isLoading:!0}),this.courseManageService.lessonPackage(t.id,t.lessonCount,t.courseId).pipe(L(n=>{this.patchState({isLoading:!1}),this.statisticsLogService.statisticsPacketInfoLog({name:"\u751f\u6210\u8bfe\u6b21",actionCode:X.j.packetInfo["otherSet-lessons-action"].addCode,content:JSON.stringify({coursePacketId:t.id,lessonCount:t.lessonCount,courseId:t.courseId})}),201===n.status&&(this.getLessonCountTable(),e(!0))},()=>{this.patchState({isLoading:!1}),e(!1)})))))),this.generateLessonsEffect=this.effect(e=>{const[t,n]=D(e.pipe(Object(S.a)(Object(f.a)([this.listOfData$,this.packetInfo$])),q(([,[,e]])=>"1"===e.preview),Object(j.a)(([,[e]])=>Object(p.a)(e))),e=>!!e.length);return t.pipe(Object(x.a)(()=>{this.generateLessonsAlert()}),R(n.pipe(Object(x.a)(()=>{this.generateLessonsReal(()=>{})}))))}),this.newClass=this.effect(e=>e.pipe(Object(S.a)(Object(f.a)([this.listOfData$,this.packetInfo$])),Object(j.a)(([,[e,t]])=>{if(e.length>=200)return this.message.warning("\u8bfe\u6b21\u6700\u591a\u53ea\u80fd\u65b0\u589e200\u4e2a"),Object(p.a)([]);const n=Q.a.getMaxSeq(e.filter(e=>e.seq));this.patchState({isLoading:!0});const i={name:"\u7b2c"+n+"\u8bfe\u6b21",courseId:t.courseId,coursePacketId:t.id,seq:n};return this.courseManageService.saveTable(i).pipe(L(e=>{this.patchState({isLoading:!1}),this.statisticsLogService.statisticsPacketInfoLog({name:"\u65b0\u589e\u8bfe\u6b21",actionCode:X.j.packetInfo["otherSet-lessons-action"].addCode,content:JSON.stringify(i)}),201===e.status&&this.getLessonCountTable()},()=>this.patchState({isLoading:!1})))}))),this.addLevelEffect=this.effect(e=>e.pipe(Object(S.a)(Object(f.a)([this.packetInfo$,this.moduleArr$,this.levelLists$])),Object(j.a)(([e,[t,n,i]])=>Q.a.getAjax(c.a.questionBankApi+"system/qkcPaper/courseCode",{courseCode:t.code,type:""}).pipe(L(c=>{try{const a=JSON.parse(c);if(200===a.code){if(a.data){let c=[];a.data.length?(JSON.parse(JSON.stringify(a.data)).forEach(e=>{c=e.sublibraryModuleList.filter(e=>"EXAM"===e.type).concat(c)}),this.patchState({moduleArr:c})):this.patchState({exam:[],intelligent:[],moduleArr:[]}),c.length?this.modalService.create({nzTitle:e.id?"\u7f16\u8f91\u5173\u5361":"\u65b0\u589e\u5173\u5361",nzContent:J.a,nzComponentParams:{courseId:t.courseId,coursePacketId:t.id,moduleArr:n,levelLists:i,levelItem:e},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzWidth:900}).afterClose.subscribe(e=>{e&&this.getLevel()}):this.message.warning("\u8be5\u8bfe\u5305\u7684\u8bfe\u7a0b\u5c1a\u6ca1\u6709\u5b50\u6a21\u5757\uff0c\u8bf7\u5230\u9898\u5e93\u65b0\u52a0\u5b50\u6a21\u5757\u518d\u6765\u65b0\u589e\u5173\u5361")}}else this.message.error(a.message)}catch(a){this.message.error("\u83b7\u53d6\u9898\u5e93\u5b50\u6a21\u5757\u5217\u8868\u5931\u8d25\uff0c\u65b0\u589e\u5173\u5361\u9700\u8981\u5b50\u6a21\u5757\u4fe1\u606f\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u65b0\u589e")}},()=>{this.patchState({searchLoad:!1}),this.message.error("\u83b7\u53d6\u9898\u5e93\u5b50\u6a21\u5757\u5217\u8868\u5931\u8d25\uff0c\u65b0\u589e\u5173\u5361\u9700\u8981\u5b50\u6a21\u5757\u4fe1\u606f\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u65b0\u589e")}))))),this.addCompanyEffect=this.effect(e=>e.pipe(Object(S.a)(Object(f.a)([this.packetInfo$,this.companyLists$])),Object(x.a)(([e,[t,n]])=>{this.modalService.create({nzTitle:e.id?"\u7f16\u8f91\u516c\u53f8":"\u65b0\u589e\u516c\u53f8",nzContent:K.a,nzComponentParams:{courseId:t.courseId,coursePacketId:t.id,companyLists:n,companyItem:e},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzWidth:600}).afterClose.subscribe(e=>{e&&this.getCompany()})}))),this.rewardSettings=this.effect(e=>e.pipe(Object(x.a)(e=>{e.coursePacketCardRecourseList&&e.coursePacketCardRecourseList.length&&e.coursePacketCardRecourseList.forEach((e,t)=>{e.thumbUrl=null,e.name=e.title})}),Object(S.a)(this.packetInfo$),Object(x.a)(([e,t])=>this.modalService.create({nzTitle:"\u5956\u52b1\u8bbe\u7f6e",nzContent:H.a,nzComponentParams:{courseId:t.courseId,coursePacketId:t.id,professionId:t.professionId,currentCard:e},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a\u4e0a\u4f20"}).afterClose.subscribe(e=>{e&&this.getLevel()})))),this.listDrop=this.effect(e=>e.pipe(Object(j.a)(e=>Object(p.a)(e).pipe(Object(S.a)(this[e.label+"$"]))),Object(x.a)(([e,t])=>{if(e.data.previousIndex===e.data.currentIndex)return;Object(G.g)(t,e.data.previousIndex,e.data.currentIndex);const n=t.map(e=>String(e.quebankId));this.patchState({[e.label+"CurrentPre"]:n,[e.label+"Current"]:JSON.parse(JSON.stringify(n)),[e.label]:t});const i=[];t.forEach((e,t)=>{i.push({id:e.id,seq:t})}),this.courseManageService.sortSubQuestionBank(i).subscribe(e=>{201!==e.status&&this.message.error(e.message||"\u79fb\u52a8\u5931\u8d25\uff0c\u672a\u77e5\u9519\u8bef\uff01")})}))),this.breakthroughModeChange=e=>{const t=e?"1":"0",n=Object(p.a)(null).pipe(Object(S.a)(this.packetInfo$),Object(x.a)(([,e])=>{this.setPacketInfo(Object.assign(Object.assign({},e),{isCard:t}))}),Object(j.a)(([,e])=>this.courseManageService.isCardUpdate(e.id,t).pipe(L(e=>{201===e.status&&("1"===t&&this.getLevel(),$.a.putPacketInfoItem("isCard",t))},()=>v.a)))).subscribe(()=>n.unsubscribe())},this.practiceOnChange=e=>{const t=e?"1":"0",n=Object(p.a)(null).pipe(Object(S.a)(this.packetInfo$),Object(x.a)(([,e])=>{this.setPacketInfo(Object.assign(Object.assign({},e),{is99Train:t}))}),Object(j.a)(([,e])=>this.courseManageService.is99TrainUpdate(e.id,t).pipe(L(e=>{201===e.status&&("1"===t&&this.getCompany(),$.a.putPacketInfoItem("is99Train",t))},()=>v.a)))).subscribe(()=>n.unsubscribe())},this.isBetChange=e=>{const t=e?"1":"0",n=Object(p.a)(null).pipe(Object(S.a)(this.packetInfo$),Object(x.a)(([,t])=>{this.setPacketInfo(Object.assign(Object.assign({},t),{isBet:e}))}),Object(j.a)(([,e])=>this.courseManageService.isBetUpdate(e.id,t).pipe(L(e=>{201===e.status&&$.a.putPacketInfoItem("isBet",t)},()=>v.a)))).subscribe(()=>n.unsubscribe())},this.conversionNode=e=>(e.length&&e.forEach((t,n)=>{t.sublibraryModuleList&&t.sublibraryModuleList.length&&(e[n].children=t.sublibraryModuleList,e[n].children.forEach((t,i)=>{e[n].children[i].title=t.name,e[n].children[i].key=String(t.id),e[n].children[i].isLeaf=!0})),e[n].title=t.name,e[n].key=t.code,e[n].disabled=!0,e[n].selectable=!1,t.sublibraryModuleList&&t.sublibraryModuleList.length||(e[n].isLeaf=!0)}),e)}generateLessonsAlert(){return new Promise(e=>{this.generateLessonsReal(e)})}}return e.\u0275fac=function(t){return new(t||e)(O.ec(Y.b),O.ec(ee.e),O.ec(te.e),O.ec(ne.a))},e.\u0275prov=O.Qb({token:e,factory:e.\u0275fac,providedIn:W.a}),Object(i.b)([Object(a.a)({title:"\u63d0\u793a",content:"\u91cd\u65b0\u751f\u6210\u8bfe\u6b21\u4f1a\u8986\u76d6\u5df2\u751f\u6210\u7684\u8bfe\u6b21\uff0c\u786e\u5b9a\u91cd\u65b0\u751f\u6210\u5417\uff1f",type:"warning"})],e.prototype,"generateLessonsAlert",null),e})();var ce=n("tyNb"),ae=n("FwiY"),oe=n("ofXK"),se=n("qAZ0"),re=n("VXpv"),le=n("3Pt+"),de=n("EGpF"),ue=n("OzZK"),he=n("RwU8"),pe=n("C2AL"),be=n("z4wI"),ge=n("rMZv"),me=n("5vDB");const fe=["treeSelect"],ze=["treeSelectInt"];function ve(e,t){1&e&&(O.ac(0,"span"),O.Pc(1,"\u65e0\u5b50\u9898\u5e93"),O.Zb())}function ye(e,t){if(1&e&&(O.ac(0,"span"),O.Vb(1,"i",24),O.ac(2,"span",25),O.Pc(3),O.Zb(),O.Zb()),2&e){const e=O.lc().$implicit;O.Eb(1),O.tc("nzType",e.isExpanded?"folder-open":"folder"),O.Eb(2),O.Qc(e.title)}}function Se(e,t){if(1&e&&(O.ac(0,"span"),O.Vb(1,"i",26),O.ac(2,"span",27),O.Pc(3),O.Zb(),O.Zb()),2&e){const e=O.lc().$implicit;O.Eb(3),O.Qc(e.title)}}function ke(e,t){if(1&e&&(O.ac(0,"span",23),O.Nc(1,ye,4,2,"span",2),O.Nc(2,Se,4,1,"span",2),O.Zb()),2&e){const e=t.$implicit;O.Eb(1),O.tc("ngIf",!e.isLeaf),O.Eb(1),O.tc("ngIf",e.isLeaf)}}function Pe(e,t){if(1&e){const e=O.bc();O.ac(0,"span",36),O.ic("click",(function(){O.Ec(e);const t=O.lc(2).$implicit;return O.lc(3).dellistSublibraryItem(t)})),O.Pc(1,"\u5220\u9664"),O.Zb()}}function Ce(e,t){if(1&e){const e=O.bc();O.ac(0,"div",33),O.ac(1,"i",34),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).dellistSublibraryItem(t)})),O.Zb(),O.Nc(2,Pe,2,0,"span",35),O.Zb()}if(2&e){const e=O.lc(2).ngIf;O.Eb(2),O.tc("ngIf",!("1"===e.preview||e.isUsed>0))}}function Ee(e,t){if(1&e&&(O.ac(0,"div",28),O.ac(1,"div",29),O.Vb(2,"i",30),O.ac(3,"span",31),O.Pc(4),O.Zb(),O.Zb(),O.Nc(5,Ce,3,1,"div",32),O.Zb()),2&e){const e=t.$implicit,n=O.lc().ngIf;O.Mc("cursor","1"===n.preview||n.isUsed>0?"not-allowed":"move"),O.Eb(1),O.tc("title",e.quebankName),O.Eb(3),O.Qc(e.quebankName),O.Eb(1),O.tc("ngIf",!("1"===n.preview||n.isUsed>0))}}function we(e,t){1&e&&(O.ac(0,"span"),O.Pc(1," \u65e0\u5b50\u9898\u5e93 "),O.Zb())}function xe(e,t){if(1&e&&(O.ac(0,"span"),O.Vb(1,"i",24),O.ac(2,"span",25),O.Pc(3),O.Zb(),O.Zb()),2&e){const e=O.lc().$implicit;O.Eb(1),O.tc("nzType",e.isExpanded?"folder-open":"folder"),O.Eb(2),O.Qc(e.title)}}function Me(e,t){if(1&e&&(O.ac(0,"span"),O.Vb(1,"i",26),O.ac(2,"span",27),O.Pc(3),O.Zb(),O.Zb()),2&e){const e=O.lc().$implicit;O.Eb(3),O.Qc(e.title)}}function Oe(e,t){if(1&e&&(O.ac(0,"span",23),O.Nc(1,xe,4,2,"span",2),O.Nc(2,Me,4,1,"span",2),O.Zb()),2&e){const e=t.$implicit;O.Eb(1),O.tc("ngIf",!e.isLeaf),O.Eb(1),O.tc("ngIf",e.isLeaf)}}function Ie(e,t){if(1&e){const e=O.bc();O.ac(0,"span",36),O.ic("click",(function(){O.Ec(e);const t=O.lc(2).$implicit;return O.lc(3).dellistSublibraryItem(t)})),O.Pc(1,"\u5220\u9664"),O.Zb()}}function Ze(e,t){if(1&e){const e=O.bc();O.ac(0,"div",33),O.ac(1,"i",34),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).dellistSublibraryItem(t)})),O.Zb(),O.Nc(2,Ie,2,0,"span",35),O.Zb()}if(2&e){const e=O.lc(2).ngIf;O.Eb(2),O.tc("ngIf",!("1"===e.preview||e.isUsed>0))}}function Te(e,t){if(1&e&&(O.ac(0,"div",28),O.ac(1,"div",29),O.Vb(2,"i",30),O.ac(3,"span",31),O.Pc(4),O.Zb(),O.Zb(),O.Nc(5,Ze,3,1,"div",32),O.Zb()),2&e){const e=t.$implicit,n=O.lc().ngIf;O.Mc("cursor","1"===n.preview||n.isUsed>0?"not-allowed":"move"),O.Eb(1),O.tc("title",e.quebankName),O.Eb(3),O.Qc(e.quebankName),O.Eb(1),O.tc("ngIf",!("1"===n.preview||n.isUsed>0))}}function Le(e,t){if(1&e){const e=O.bc();O.ac(0,"a",50),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).editLevel(t)})),O.Vb(1,"i",51),O.ac(2,"span",52),O.Pc(3,"\u7f16\u8f91"),O.Zb(),O.Zb()}}function Ne(e,t){if(1&e){const e=O.bc();O.Yb(0),O.ac(1,"i",53),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).deleteLevel(t)})),O.Zb(),O.ac(2,"span",54),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).deleteLevel(t)})),O.Pc(3,"\u5220\u9664"),O.Zb(),O.Xb()}}function Ve(e,t){1&e&&(O.ac(0,"a",55),O.Vb(1,"i",56),O.ac(2,"span",57),O.Pc(3,"\u7f16\u8f91"),O.Zb(),O.Zb())}function Fe(e,t){1&e&&(O.Vb(0,"i",58),O.ac(1,"span",59),O.Pc(2,"\u5220\u9664"),O.Zb())}function De(e,t){if(1&e){const e=O.bc();O.Yb(0),O.ac(1,"i",53),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(4).deleteGift(t.id)})),O.Zb(),O.ac(2,"span",54),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(4).deleteGift(t.id)})),O.Pc(3,"\u5220\u9664"),O.Zb(),O.Xb()}}function je(e,t){if(1&e&&(O.ac(0,"div",60),O.ac(1,"div",40),O.ac(2,"span",61),O.Pc(3,"\u8d44"),O.Zb(),O.ac(4,"span",42),O.Pc(5),O.Zb(),O.Zb(),O.ac(6,"div",43),O.Nc(7,De,4,0,"ng-container",46),O.Zb(),O.Zb()),2&e){const e=t.$implicit;O.lc();const n=O.Cc(17),i=O.lc().ngIf;O.Eb(5),O.Qc(e.title),O.Eb(2),O.tc("ngIf","1"!==i.preview)("ngIfElse",n)}}function _e(e,t){if(1&e){const e=O.bc();O.ac(0,"div",37),O.ac(1,"div",38),O.Pc(2),O.Zb(),O.ac(3,"div",39),O.ac(4,"div",40),O.ac(5,"span",41),O.Pc(6,"\u8bd5"),O.Zb(),O.ac(7,"span",42),O.Pc(8),O.Zb(),O.Zb(),O.ac(9,"div",43),O.ac(10,"button",44),O.ic("click",(function(){O.Ec(e);const n=t.$implicit;return O.lc(3).rewardSettings(n)})),O.Pc(11," \u5956\u52b1\u8bbe\u7f6e "),O.Zb(),O.Nc(12,Le,4,0,"a",45),O.Nc(13,Ne,4,0,"ng-container",46),O.Nc(14,Ve,4,0,"ng-template",null,47,O.Oc),O.Nc(16,Fe,3,0,"ng-template",null,48,O.Oc),O.Zb(),O.Zb(),O.Nc(18,je,8,3,"div",49),O.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=O.Cc(15),c=O.Cc(17),a=O.lc().ngIf,o=O.lc().ngIf;O.Eb(2),O.Rc(" \u5173\u5361",n+1,"\uff1a "),O.Eb(6),O.Qc(e.name),O.Eb(2),O.Kb("disable-edit","1"===a.preview||null),O.tc("disabled","1"===a.preview||null),O.Eb(2),O.tc("ngIf","1"!==a.preview)("ngIfElse",i),O.Eb(1),O.tc("ngIf",!("1"===a.preview||a.isUsed>0&&n!==o.levelLists.length-1))("ngIfElse",c),O.Eb(5),O.tc("ngForOf",e.coursePacketCardRecourseList)}}function qe(e,t){if(1&e){const e=O.bc();O.ac(0,"a",50),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).editCompany(t)})),O.Vb(1,"i",62),O.ac(2,"span",52),O.Pc(3,"\u7f16\u8f91"),O.Zb(),O.Zb()}}function Ae(e,t){1&e&&(O.ac(0,"a",55),O.Vb(1,"i",56),O.ac(2,"span",57),O.Pc(3,"\u7f16\u8f91"),O.Zb(),O.Zb())}function Ue(e,t){if(1&e){const e=O.bc();O.Yb(0),O.ac(1,"i",63),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).deleteCompany(t)})),O.Zb(),O.ac(2,"span",54),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(3).deleteCompany(t)})),O.Pc(3,"\u5220\u9664"),O.Zb(),O.Xb()}}function Be(e,t){1&e&&(O.Vb(0,"i",64),O.ac(1,"span",57),O.Pc(2,"\u5220\u9664"),O.Zb())}function Re(e,t){if(1&e&&(O.ac(0,"div",37),O.ac(1,"div",38),O.Pc(2),O.Zb(),O.ac(3,"div",39),O.ac(4,"div",40),O.ac(5,"span",41),O.Pc(6,"\u516c"),O.Zb(),O.ac(7,"span",42),O.Pc(8),O.Zb(),O.Zb(),O.ac(9,"div",43),O.Nc(10,qe,4,0,"a",45),O.Nc(11,Ae,4,0,"ng-template",null,47,O.Oc),O.Nc(13,Ue,4,0,"ng-container",46),O.Nc(14,Be,3,0,"ng-template",null,48,O.Oc),O.Zb(),O.Zb(),O.Zb()),2&e){const e=t.$implicit,n=t.index,i=O.Cc(12),c=O.Cc(15),a=O.lc().ngIf;O.Eb(2),O.Rc(" \u516c\u53f8",n+1,"\uff1a "),O.Eb(6),O.Qc(e.name),O.Eb(2),O.tc("ngIf",!("1"===a.preview))("ngIfElse",i),O.Eb(3),O.tc("ngIf",!("1"===a.preview||a.isUsed>0))("ngIfElse",c)}}function $e(e,t){if(1&e){const e=O.bc();O.ac(0,"div",15),O.ac(1,"div",4),O.ac(2,"span",5),O.Pc(3," \u62bc\u9898\u5b9d\uff1a"),O.ac(4,"nz-switch",16),O.ic("ngModelChange",(function(t){return O.Ec(e),O.lc(2).ngIf.isBet=t}))("ngModelChange",(function(t){return O.Ec(e),O.lc(3).otherSettingStoreService.isBetChange(t)})),O.mc(5,"async"),O.Zb(),O.Zb(),O.ac(6,"div",65),O.Pc(7,"\u63d0\u793a\uff1a\u77e5\u8bc6\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e100\u4e2a\u624d\u53ef\u4ee5\u5f00\u542f\u62bc\u9898\u5b9d"),O.Zb(),O.Zb(),O.Zb()}if(2&e){const e=O.lc().ngIf,t=O.lc().ngIf,n=O.lc();O.Eb(4),O.tc("ngModel",t.isBet)("nzDisabled","1"===e.preview||e.isUsed>0||O.nc(5,2,n.knowledgeNum$)<100)}}function Qe(e,t){1&e&&(O.ac(0,"th"),O.Pc(1,"\u64cd\u4f5c"),O.Zb())}function We(e,t){if(1&e){const e=O.bc();O.Yb(0),O.Vb(1,"nz-divider",74),O.ac(2,"a",73),O.ic("click",(function(){O.Ec(e);const t=O.lc(2).$implicit;return O.lc(4).delTable(t.id)})),O.Pc(3,"\u5220\u9664"),O.Zb(),O.Xb()}}function Je(e,t){if(1&e){const e=O.bc();O.ac(0,"td"),O.ac(1,"a",73),O.ic("click",(function(){O.Ec(e);const t=O.lc().$implicit;return O.lc(4).edit(t)})),O.Pc(2,"\u7f16\u8f91"),O.Zb(),O.Nc(3,We,4,0,"ng-container",2),O.Zb()}if(2&e){const e=O.lc(3).ngIf,t=O.lc(2);O.Eb(3),O.tc("ngIf",!(e.isUsed>0&&t.userId!==e.majorLeaderId))}}function He(e,t){if(1&e&&(O.ac(0,"tr"),O.ac(1,"td"),O.Pc(2),O.Zb(),O.ac(3,"td"),O.Pc(4),O.Zb(),O.Nc(5,Je,4,1,"td",2),O.Zb()),2&e){const e=t.$implicit,n=O.lc(2).ngIf;O.Eb(2),O.Qc(e.index),O.Eb(2),O.Qc(e.name),O.Eb(1),O.tc("ngIf","1"!==n.preview)}}function Ke(e,t){if(1&e){const e=O.bc();O.Yb(0),O.ac(1,"div",4),O.ac(2,"span",5),O.Pc(3," \u603b\u8bfe\u6b21\uff1a "),O.Zb(),O.ac(4,"nz-input-number",66),O.ic("ngModelChange",(function(t){return O.Ec(e),O.lc().ngIf.lessonCount=t})),O.Zb(),O.ac(5,"button",67),O.ic("click",(function(){return O.Ec(e),O.lc(3).generateLessons()})),O.Pc(6," \u751f\u6210\u8bfe\u6b21 "),O.Zb(),O.ac(7,"button",68),O.ic("click",(function(){return O.Ec(e),O.lc(3).newClass()})),O.Pc(8," \u65b0\u589e\u8bfe\u6b21 "),O.Zb(),O.Zb(),O.ac(9,"nz-spin",69),O.ac(10,"nz-table",70,71),O.ac(12,"thead"),O.ac(13,"tr"),O.ac(14,"th"),O.Pc(15,"\u8bfe\u6b21\u5e8f\u53f7"),O.Zb(),O.ac(16,"th"),O.Pc(17,"\u540d\u79f0"),O.Zb(),O.Nc(18,Qe,2,0,"th",2),O.Zb(),O.Zb(),O.ac(19,"tbody"),O.Nc(20,He,6,3,"tr",72),O.Zb(),O.Zb(),O.Zb(),O.Xb()}if(2&e){const e=O.Cc(11),t=O.lc().ngIf,n=O.lc().ngIf,i=O.lc();O.Eb(4),O.tc("ngModel",t.lessonCount)("nzMin",1)("nzStep",1)("nzMax",200)("nzDisabled","1"===t.preview||t.isUsed>0&&i.userId!==t.majorLeaderId),O.Eb(1),O.tc("disabled",t.isUsed>0||"1"===t.preview||null)("nzLoading",n.isLoading),O.Eb(2),O.tc("nzLoading",n.isLoading)("disabled",t.isUsed>0&&i.userId!==t.majorLeaderId||"1"===t.preview||null),O.Eb(2),O.tc("nzSpinning",n.isLoading)("nzDelay",0),O.Eb(1),O.tc("nzData",n.listOfData)("nzFrontPagination",!0),O.Eb(8),O.tc("ngIf","1"!==t.preview),O.Eb(2),O.tc("ngForOf",e.data)}}const Ge=function(){return{"max-height":"200px"}};function Xe(e,t){if(1&e){const e=O.bc();O.Yb(0),O.ac(1,"div",3),O.ac(2,"div",4),O.ac(3,"span",5),O.Pc(4," \u8003\u6838\u4e13\u7528\uff1a "),O.Zb(),O.Nc(5,ve,2,0,"span",2),O.ac(6,"nz-spin",6),O.ac(7,"nz-tree-select",7,8),O.ic("ngModelChange",(function(t){return O.Ec(e),O.lc().ngIf.subQuestionBankCurrent=t}))("ngModelChange",(function(t){return O.Ec(e),O.lc(2).subQuestionBankChange(t,"subQuestionBank")})),O.Zb(),O.Nc(9,ke,3,2,"ng-template",null,9,O.Oc),O.Zb(),O.Zb(),O.ac(11,"div",10),O.ic("cdkDropListDropped",(function(t){return O.Ec(e),O.lc(2).listDrop(t,"subQuestionBank")})),O.Nc(12,Ee,6,5,"div",11),O.Zb(),O.ac(13,"div",4),O.ac(14,"span",5),O.Pc(15,"\u667a\u9002\u5e94\u4e13\u7528\uff1a"),O.Zb(),O.Nc(16,we,2,0,"span",2),O.ac(17,"nz-spin",6),O.ac(18,"nz-tree-select",12,13),O.ic("ngModelChange",(function(t){return O.Ec(e),O.lc().ngIf.subQuestionBankIntCurrent=t}))("ngModelChange",(function(t){return O.Ec(e),O.lc(2).subQuestionBankChange(t,"subQuestionBankInt")})),O.Zb(),O.Nc(20,Oe,3,2,"ng-template",null,14,O.Oc),O.Zb(),O.Zb(),O.ac(22,"div",10),O.ic("cdkDropListDropped",(function(t){return O.Ec(e),O.lc(2).listDrop(t,"subQuestionBankInt")})),O.Nc(23,Te,6,5,"div",11),O.Zb(),O.Zb(),O.ac(24,"div",15),O.ac(25,"div",4),O.ac(26,"span",5),O.Pc(27," \u95ef\u5173\u6a21\u5f0f\uff1a"),O.ac(28,"nz-switch",16),O.ic("ngModelChange",(function(t){return O.Ec(e),O.lc().ngIf.breakthroughMode=t}))("ngModelChange",(function(t){return O.Ec(e),O.lc(2).otherSettingStoreService.breakthroughModeChange(t)})),O.Zb(),O.Zb(),O.Zb(),O.ac(29,"div",17),O.Nc(30,_e,19,10,"div",18),O.Zb(),O.ac(31,"div",19),O.ac(32,"button",20),O.ic("click",(function(){return O.Ec(e),O.lc(2).addLevel()})),O.Vb(33,"i",21),O.Pc(34," \u65b0\u589e\u5173\u5361 "),O.Zb(),O.Zb(),O.Zb(),O.ac(35,"div",15),O.ac(36,"div",4),O.ac(37,"span",5),O.Pc(38," 99\u5b9e\u8bad\uff1a"),O.ac(39,"nz-switch",16),O.ic("ngModelChange",(function(t){return O.Ec(e),O.lc().ngIf.practiceOn=t}))("ngModelChange",(function(t){return O.Ec(e),O.lc(2).otherSettingStoreService.practiceOnChange(t)})),O.Zb(),O.Zb(),O.Zb(),O.ac(40,"div",17),O.Nc(41,Re,16,6,"div",18),O.Zb(),O.ac(42,"div",19),O.ac(43,"button",20),O.ic("click",(function(){return O.Ec(e),O.lc(2).addCompany()})),O.Vb(44,"i",21),O.Pc(45," \u65b0\u589e\u516c\u53f8 "),O.Zb(),O.Zb(),O.Zb(),O.Nc(46,$e,8,4,"div",22),O.Nc(47,Ke,21,15,"ng-container",2),O.Xb()}if(2&e){const e=t.ngIf,n=O.Cc(10),i=O.Cc(21),c=O.lc().ngIf;O.Eb(5),O.tc("ngIf","1"===e.preview&&!c.subQuestionBank.length),O.Eb(1),O.tc("nzSpinning",c.searchLoad)("nzDelay",0),O.Eb(1),O.tc("disabled","1"===e.preview||e.isUsed>0)("nzMultiple",!0)("nzNodes",c.exam)("nzAllowClear",!1)("ngModel",c.subQuestionBankCurrent)("nzDropdownStyle",O.wc(44,Ge))("nzTreeTemplate",n),O.Eb(4),O.Mc("margin",c.subQuestionBank.length?"20px 60px":"0"),O.Eb(1),O.tc("ngForOf",c.subQuestionBank),O.Eb(4),O.tc("ngIf","1"===e.preview&&!c.subQuestionBankInt.length),O.Eb(1),O.tc("nzSpinning",c.searchLoad)("nzDelay",0),O.Eb(1),O.tc("disabled","1"===e.preview||e.isUsed>0)("nzMultiple",!0)("nzAllowClear",!1)("nzNodes",c.intelligent)("ngModel",c.subQuestionBankIntCurrent)("nzDropdownStyle",O.wc(45,Ge))("nzTreeTemplate",i),O.Eb(4),O.Mc("margin",c.subQuestionBankInt.length?"20px 60px":"0"),O.Eb(1),O.tc("ngForOf",c.subQuestionBankInt),O.Eb(5),O.tc("ngModel",c.breakthroughMode)("nzDisabled","1"===e.preview||e.isUsed>0),O.Eb(1),O.tc("hidden",!c.breakthroughMode),O.Eb(1),O.tc("ngForOf",c.levelLists),O.Eb(1),O.tc("hidden",!c.breakthroughMode),O.Eb(1),O.Kb("disable-edit","1"===e.preview||null),O.tc("disabled","1"===e.preview||null),O.Eb(7),O.tc("ngModel",c.practiceOn)("nzDisabled","1"===e.preview||e.isUsed>0),O.Eb(1),O.tc("hidden",!c.practiceOn),O.Eb(1),O.tc("ngForOf",c.companyLists),O.Eb(1),O.tc("hidden",!c.practiceOn),O.Eb(1),O.Kb("disable-edit","1"===e.preview||e.isUsed>0||null),O.tc("disabled","1"===e.preview||e.isUsed>0||null),O.Eb(3),O.tc("ngIf","22"!==e.teachType),O.Eb(1),O.tc("ngIf","22"!==e.teachType)}}function Ye(e,t){if(1&e&&(O.ac(0,"div",1),O.Nc(1,Xe,48,46,"ng-container",2),O.mc(2,"async"),O.Zb()),2&e){const e=O.lc();O.Eb(1),O.tc("ngIf",O.nc(2,1,e.packetInfo$))}}let et=(()=>{class e{constructor(e,t,n){this.route=e,this.modalService=t,this.otherSettingStoreService=n,this.vm$=this.otherSettingStoreService.vm$,this.knowledgeNum$=this.otherSettingStoreService.knowledgeNum$,this.packetInfo$=this.otherSettingStoreService.packetInfo$,this.ossUrl=c.a.OSS_URL,this.userId=o.a.getUserId(),this.status=$.a.getPacketInfoItem("isUsed")>0,this.knoNumLimit=!1}ngOnInit(){this.otherSettingStoreService.dataInit()}delTable(e,t){this.otherSettingStoreService.delTable({id:e,loadingControl:t})}deleteLevel(e,t){this.otherSettingStoreService.levelDeletion({id:e.id,loadingControl:t})}deleteCompany(e,t){this.otherSettingStoreService.companyDeletion({id:e.id,loadingControl:t})}editCompany(e){this.otherSettingStoreService.addCompanyEffect(e)}deleteGift(e,t){this.otherSettingStoreService.deleteGift({id:e,loadingControl:t})}dellistSublibraryItem(e,t){this.otherSettingStoreService.dellistSublibraryItem({data:e,loadingControl:t})}formatProgress(e){return Math.trunc(e)+"%"}generateLessons(){this.otherSettingStoreService.generateLessonsEffect()}newClass(){this.otherSettingStoreService.newClass()}edit(e){this.modalService.create({nzTitle:"\u7f16\u8f91\u8bfe\u6b21",nzContent:s.a,nzComponentParams:{data:e},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a"}).afterClose.subscribe(e=>{e&&this.otherSettingStoreService.getLessonCountTable()})}subQuestionBankChange(e,t){const{treeSelect:n,treeSelectInt:i}=this;this.otherSettingStoreService.subQuestionBankChange({data:e,type:t,treeSelect:"subQuestionBank"===t?n:i})}rewardSettings(e){this.otherSettingStoreService.rewardSettings(e)}addLevel(){this.otherSettingStoreService.addLevelEffect({})}editLevel(e){this.otherSettingStoreService.addLevelEffect(e)}addCompany(){this.otherSettingStoreService.addCompanyEffect({})}listDrop(e,t){this.otherSettingStoreService.listDrop({data:e,label:t})}}return e.\u0275fac=function(t){return new(t||e)(O.Ub(ce.a),O.Ub(te.e),O.Ub(ie))},e.\u0275cmp=O.Ob({type:e,selectors:[["app-other-setting"]],viewQuery:function(e,t){var n;1&e&&(O.Vc(fe,!0),O.Vc(ze,!0)),2&e&&(O.Bc(n=O.jc())&&(t.treeSelect=n.first),O.Bc(n=O.jc())&&(t.treeSelectInt=n.first))},features:[O.Db([ie])],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngIf"],[1,"module-tree","pt20"],[1,"item"],[1,"item-label"],[2,"width","calc(100% - 100px)","display","inline-block",3,"nzSpinning","nzDelay"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u7ed1\u5b9a\u5b50\u9898\u5e93",2,"width","100%",3,"disabled","nzMultiple","nzNodes","nzAllowClear","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["treeSelect",""],["nzTreeTemplate",""],["cdkDropList","",1,"list-container",3,"cdkDropListDropped"],["class","list","cdkDrag","",3,"cursor",4,"ngFor","ngForOf"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u7ed1\u5b9a\u5b50\u9898\u5e93",2,"width","100%",3,"disabled","nzMultiple","nzAllowClear","nzNodes","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["treeSelectInt",""],["nzTreeTemplateInt",""],[1,"module-tree"],["nzCheckedChildren","\u5f00","nzUnCheckedChildren","\u5173",3,"ngModel","nzDisabled","ngModelChange"],[1,"list-container",3,"hidden"],["class","list-item",4,"ngFor","ngForOf"],[1,"item","pt0",3,"hidden"],["nz-button","","nzType","primary",1,"other-button",2,"margin-left","70px",3,"disabled","click"],["nz-icon","","nzType","plus","nzTheme","outline",1,"add-member-icon"],["class","module-tree",4,"ngIf"],[1,"custom-node"],["nz-icon","",3,"nzType"],[1,"folder-name"],["nz-icon","","nzType","file"],[1,"file-name"],["cdkDrag","",1,"list"],[2,"float","left",3,"title"],["nz-icon","","nzType","file-text","nzTheme","outline"],[2,"margin-left","20px"],["style","float:right",4,"ngIf"],[2,"float","right"],["nz-icon","","nzType","delete","nzTheme","outline",2,"cursor","pointer",3,"click"],["class","icon-del",3,"click",4,"ngIf"],[1,"icon-del",3,"click"],[1,"list-item"],[1,"gk-text","fl"],[1,"list","fr",2,"width","calc(100% - 70px)"],[1,"fl"],[1,"icon-pre"],[1,"icon-text"],[1,"fr"],["nz-button","","nzType","primary",1,"other-button",3,"disabled","click"],["nz-button","","nzType","link",3,"click",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],["editDisable",""],["delDisable",""],["class","list fr","style","width:calc(100% - 130px);",4,"ngFor","ngForOf"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline",2,"cursor","pointer","line-height","38px"],[1,"lh34","mr20","ml10"],["nz-icon","","nzType","delete","nzTheme","outline",2,"cursor","pointer","line-height","38px",3,"click"],[1,"icon-del","lh34",3,"click"],["nz-button","","nzType","link",2,"cursor","not-allowed"],["nz-icon","","nzType","edit","nzTheme","outline",1,"icon-disable"],[1,"icon-del","lh34","text-disbale"],["nz-icon","","nzType","delete","nzTheme","outline",2,"cursor","pointer","line-height","38px","color","#bfb6b6","cursor","not-allowed"],[1,"icon-del","lh34",2,"color","#bfb6b6","cursor","not-allowed"],[1,"list","fr",2,"width","calc(100% - 130px)"],[1,"icon-pre","yellow"],["nz-icon","","nzType","edit","nzTheme","outline",1,"icon"],["nz-icon","","nzType","delete","nzTheme","outline",1,"icon",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"icon-disable"],[2,"margin-top","20px","padding-left","56px"],[3,"ngModel","nzMin","nzStep","nzMax","nzDisabled","ngModelChange"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"nzLoading","disabled","click"],[3,"nzSpinning","nzDelay"],[2,"margin","0 60px",3,"nzData","nzFrontPagination"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"click"],["nzType","vertical"]],template:function(e,t){1&e&&(O.Nc(0,Ye,3,3,"div",0),O.mc(1,"async")),2&e&&O.tc("ngIf",O.nc(1,1,t.vm$))},directives:[oe.n,se.a,re.a,le.o,le.q,G.d,oe.m,de.a,ue.a,he.a,pe.a,ae.a,G.a,be.a,ge.c,ge.j,ge.k,ge.b,ge.h,ge.e,me.a],pipes:[oe.b],styles:[".container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]{border-bottom:1px solid #f0f1f3}.container[_ngcontent-%COMP%]   .module-tree.pt20[_ngcontent-%COMP%]{padding-top:20px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{margin:20px 60px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{margin-bottom:20px;overflow:hidden}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .gk-text[_ngcontent-%COMP%]{width:70px;line-height:42px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{background:#fbfbfb;padding:10px 20px;margin-bottom:10px;overflow:hidden;border-radius:5px;box-shadow:1px 1px 8px #dfdfdf}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-pre[_ngcontent-%COMP%]{display:inline-block;width:22px;height:22px;border-radius:50%;text-align:center;color:#fff;background-color:#39b097;vertical-align:middle;margin-right:20px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-text[_ngcontent-%COMP%]{line-height:34px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-text.yellow[_ngcontent-%COMP%]{background-color:#feca59}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 6px #dfdfdf}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-del[_ngcontent-%COMP%]{float:right;margin-left:10px;cursor:pointer;color:red}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .lh34[_ngcontent-%COMP%]{line-height:34px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .mr20[_ngcontent-%COMP%]{margin-right:20px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .ml10[_ngcontent-%COMP%]{margin-left:10px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .disable[_ngcontent-%COMP%]{cursor:not-allowed}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;line-height:38px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-disable[_ngcontent-%COMP%]{line-height:38px;color:#bfb6b6;cursor:not-allowed}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .text-disbale[_ngcontent-%COMP%]{color:#bfb6b6;cursor:not-allowed}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:20px 60px}.container[_ngcontent-%COMP%]   .item.pt0[_ngcontent-%COMP%]{padding-top:0}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%]{min-width:100px;display:inline-block}.container[_ngcontent-%COMP%]   .other-button[_ngcontent-%COMP%]{border:1px solid #79bdfa;border-radius:6px;background-color:#fff;text-align:center;color:#79bdfa;margin-right:50px}.container[_ngcontent-%COMP%]   .disable-edit[_ngcontent-%COMP%]{color:#bfb6b6;cursor:not-allowed;border-color:#bfb6b6}"],changeDetection:0}),Object(i.b)([Object(a.b)({title:"\u5220\u9664",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8bfe\u6b21\u5417\uff1f",type:"error"})],e.prototype,"delTable",null),Object(i.b)([Object(a.b)({title:"\u5220\u9664\u5173\u5361",content(e){return this.status?"\u5220\u9664\u8be5\u5173\u5361\u5c06\u540c\u6b65\u5220\u9664\u6240\u6709\u5b66\u5458\u5728\u6b64\u5173\u5361\u4e0a\u7684\u6240\u6709\u95ef\u5173\u8bb0\u5f55\u3002":"\u786e\u5b9a\u5220\u9664"+e[0].name+"\u5173\u5361\u5417\uff1f"},type:"error"})],e.prototype,"deleteLevel",null),Object(i.b)([Object(a.b)({title:"\u5220\u9664\u516c\u53f8",content:e=>"\u786e\u5b9a\u5220\u9664"+e[0].name+"\u516c\u53f8\u5417\uff1f",type:"error"})],e.prototype,"deleteCompany",null),Object(i.b)([Object(a.b)({title:"\u5220\u9664\u5956\u52b1",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8d44\u6e90\u5417\uff1f",type:"error"})],e.prototype,"deleteGift",null),Object(i.b)([Object(a.b)({title:"\u5220\u9664\u5b50\u9898\u5e93",content:"\u786e\u5b9a\u5220\u9664\u8be5\u5b50\u9898\u5e93\u5417\uff1f",type:"error"})],e.prototype,"dellistSublibraryItem",null),e})()},ApCc:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("3Pt+"),c=n("3JH+"),a=n("fXoL"),o=n("uMH2"),s=n("dEAy"),r=n("ocnv"),l=n("B+r4"),d=n("PTRe"),u=n("OzZK"),h=n("RwU8"),p=n("C2AL"),b=n("ofXK");function g(e,t){1&e&&(a.Yb(0),a.Pc(1," \u8bf7\u8f93\u5165\u7ae0\u540d\u79f0 "),a.Xb())}function m(e,t){1&e&&(a.Yb(0),a.Pc(1," \u540d\u79f060\u5b57\u4ee5\u5185 "),a.Xb())}function f(e,t){1&e&&(a.Yb(0),a.Pc(1," \u91cd\u590d\u540d\u79f0 "),a.Xb())}function z(e,t){if(1&e&&(a.Nc(0,g,2,0,"ng-container",8),a.Nc(1,m,2,0,"ng-container",8),a.Nc(2,f,2,0,"ng-container",8)),2&e){const e=t.$implicit;a.tc("ngIf",e.hasError("required")),a.Eb(1),a.tc("ngIf",e.hasError("maxlength")),a.Eb(1),a.tc("ngIf",e.hasError("repeatName"))}}const v=function(){return{span:24,offset:0}},y=function(){return{span:16,offset:8}};let S=(()=>{class e{constructor(e,t,n){this.fb=e,this.courseMgService=t,this.nzModalRef=n,this.loading=!1,this.lock=!1}ngOnInit(){this.formGroup=this.fb.group({name:[this.formData?this.formData.name:"",[i.w.required,i.w.maxLength(60),Object(c.a)(this.data),Object(c.b)()]]})}save(){if(!this.lock){if(Object.keys(this.formGroup.controls).forEach(e=>{this.formGroup.controls[e].markAsDirty(),this.formGroup.controls[e].updateValueAndValidity()}),this.formGroup.invalid)return;this.lock=!0;const e={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.formData?this.formData.id:"",name:this.formGroup.value.name,seq:this.formData?this.formData.seq:this.data.length>0?this.data.length+1:1}]};this.loading=!0,this.courseMgService.save_courseChapter(e).subscribe(e=>{this.lock=!1,this.loading=!1,200===e.status&&(e.data[0].children=[],this.nzModalRef.close(e.data[0]))},()=>this.lock=!1)}}cancel(){this.nzModalRef.close(null)}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(i.d),a.Ub(o.a),a.Ub(s.d))},e.\u0275cmp=a.Ob({type:e,selectors:[["ng-component"]],inputs:{data:"data",formData:"formData",courseId:"courseId",coursePacketId:"coursePacketId"},decls:14,vars:11,consts:[["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","placeholder","\u8bf7\u8f93\u5165\u7ae0\u8282\u540d\u79f0\uff0c60\u5b57\u4ee5\u5185"],["errNameTipsTpl",""],[3,"nzXs","nzSm"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-button","","nzType","default",2,"margin-left","20px",3,"click"],[4,"ngIf"]],template:function(e,t){if(1&e&&(a.ac(0,"form",0),a.ac(1,"nz-form-item"),a.ac(2,"nz-form-label",1),a.Pc(3,"\u672c\u7ae0\u540d\u79f0"),a.Zb(),a.ac(4,"nz-form-control",2),a.Vb(5,"input",3),a.Nc(6,z,3,3,"ng-template",null,4,a.Oc),a.Zb(),a.Zb(),a.ac(8,"nz-form-item"),a.ac(9,"nz-form-control",5),a.ac(10,"button",6),a.ic("click",(function(){return t.save()})),a.Pc(11,"\u4fdd\u5b58"),a.Zb(),a.ac(12,"button",7),a.ic("click",(function(){return t.cancel()})),a.Pc(13,"\u53d6\u6d88"),a.Zb(),a.Zb(),a.Zb(),a.Zb()),2&e){const e=a.Cc(7);a.tc("formGroup",t.formGroup),a.Eb(2),a.tc("nzSm",6)("nzXs",24),a.Eb(2),a.tc("nzSm",16)("nzXs",24)("nzErrorTip",e),a.Eb(5),a.tc("nzXs",a.wc(9,v))("nzSm",a.wc(10,y)),a.Eb(1),a.tc("nzLoading",t.loading)}},directives:[i.y,i.p,r.b,i.i,l.c,r.c,l.a,r.d,r.a,d.b,i.c,i.o,i.g,u.a,h.a,p.a,b.n],styles:[""]}),e})()},BmWY:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n("3Pt+"),c=n("WTGI"),a=n("AytR"),o=n("Vhue"),s=n("+O+V"),r=n("fXoL"),l=n("PScX"),d=n("dEAy"),u=n("19W7"),h=n("uMH2"),p=n("qAZ0"),b=n("ocnv"),g=n("B+r4"),m=n("zAKX"),f=n("ofXK"),z=n("z4wI"),v=n("OzZK"),y=n("RwU8"),S=n("C2AL");function k(e,t){if(1&e&&r.Vb(0,"nz-option",15),2&e){const e=t.$implicit;r.tc("nzValue",e.id)("nzLabel",e.name)}}function P(e,t){if(1&e&&r.Vb(0,"nz-option",15),2&e){const e=t.$implicit;r.tc("nzValue",e.examId)("nzLabel",e.examName)}}function C(e,t){if(1&e){const e=r.bc();r.ac(0,"div"),r.ac(1,"button",16),r.ic("click",(function(){return r.Ec(e),r.lc().cancel()})),r.Pc(2,"\u53d6\u6d88"),r.Zb(),r.ac(3,"button",17),r.ic("click",(function(){return r.Ec(e),r.lc().save()})),r.Pc(4,"\u786e\u5b9a"),r.Zb(),r.Zb()}if(2&e){const e=r.lc();r.Eb(3),r.tc("nzLoading",e.newLevelLoading)}}let E=(()=>{class e{constructor(e,t,n,c,a,o){this.nzMesService=e,this.nzModalService=t,this.nzModalRef=n,this.fb=c,this.statisticsLogService=a,this.courseManageService=o,this.moduleArr=[],this.levelLists=[],this.levelItem={},this.newLevelLoading=!1,this.paperArr=[],this.totalTestPaperScore=0,this.paperIdToName={},this.examIdToPaperUUId={},this.newLevelForm=this.fb.group({newLevel:["",[i.w.required]],testPaperName:[null,[i.w.required]],complianceConditions:[void 0,[i.w.required]]})}ngOnInit(){var e;const{levelItem:t}=this,n=o.a.getSubmodule();this.newLevelForm.patchValue({newLevel:t.id?Number(t.quebankId):n?Number(n):null===(e=this.moduleArr[0])||void 0===e?void 0:e.id}),this.getPapers(!1).then(e=>{if(e){const e={};t.id?(e.complianceConditions=t.passScore,e.testPaperName=Number(t.examId.split("-")[1])):e.testPaperName=this.paperArr[0]?Number(this.paperArr[0].examId):null,this.newLevelForm.patchValue(e)}})}disableIf(e){return this.levelLists.map(e=>e.examId.split("-")[0]).indexOf(e.paperUuid)>-1}getPapers(e){return e&&o.a.putSubmodule(this.newLevelForm.value.newLevel),new Promise(t=>{c.a.postAjax(a.a.questionBankApi+"system/qkcPaper/examInfoByModuleId",{sublibraryModuleIdList:[this.newLevelForm.value.newLevel],pageNum:1,pageSize:1e4},{"Content-Type":"application/json"}).subscribe(n=>{try{const i=JSON.parse(n);if(200===i.code){if(this.paperArr=i.data.rows,e){const e=this.paperArr[0]&&this.paperArr[0].examId?Number(this.paperArr[0].examId):void 0;this.newLevelForm.patchValue({testPaperName:e}),Object.keys(this.newLevelForm.controls).forEach(e=>{this.newLevelForm.controls[e].markAsUntouched(),this.newLevelForm.controls[e].markAsPristine(),this.newLevelForm.controls[e].updateValueAndValidity()})}this.paperArr.forEach(e=>{this.paperIdToName[e.examId]=e.examName,this.examIdToPaperUUId[e.examId]=e.paperUuid}),t(!0)}else t(!1),this.paperArr=[],this.nzMesService.error(i.message)}catch(i){this.paperArr=[],this.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38"),t(!1)}})})}save(){var e,t;for(const c in this.newLevelForm.controls)this.newLevelForm.controls.hasOwnProperty(c)&&(this.newLevelForm.controls[c].markAsDirty(),this.newLevelForm.controls[c].updateValueAndValidity());if(this.newLevelForm.invalid)return;this.newLevelLoading=!0;const n=this.newLevelForm.value.testPaperName,i=null===(e=this.levelItem)||void 0===e?void 0:e.seq,a={id:null===(t=this.levelItem)||void 0===t?void 0:t.id,courseId:this.courseId,coursePacketId:this.coursePacketId,quebankId:this.newLevelForm.value.newLevel,name:this.paperIdToName[n],examId:this.examIdToPaperUUId[n]+"-"+this.newLevelForm.value.testPaperName,passScore:this.newLevelForm.value.complianceConditions,seq:i||c.a.getMaxSeq(this.levelLists)};this.courseManageService.addCoursePacketCard(a).subscribe(e=>{if(this.newLevelLoading=!1,201===e.status){const e=!!this.levelItem.id;this.statisticsLogService.statisticsPacketInfoLog({name:e?"\u4fee\u6539\u5173\u5361\u8bd5\u5377":"\u65b0\u589e\u5173\u5361",actionCode:s.j.packetInfo["otherSet-levelthrough-action"][e?"modify":"addCode"],content:JSON.stringify(a)}),this.nzModalRef.close(!0)}},()=>{this.newLevelLoading=!1})}cancel(){this.nzModalRef.close(!1)}testPaperNameChange(e){e?this.paperArr.every(t=>{if(t.examId!==e)return!0;this.totalTestPaperScore=t.score,this.totalTestPaperScore<this.newLevelForm.value.complianceConditions&&this.newLevelForm.patchValue({complianceConditions:this.totalTestPaperScore})}):(this.totalTestPaperScore=0,this.newLevelForm.patchValue({complianceConditions:this.totalTestPaperScore}))}}return e.\u0275fac=function(t){return new(t||e)(r.Ub(l.e),r.Ub(d.e),r.Ub(d.d),r.Ub(i.d),r.Ub(u.a),r.Ub(h.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-new-level"]],inputs:{courseId:"courseId",coursePacketId:"coursePacketId",moduleArr:"moduleArr",levelLists:"levelLists",levelItem:"levelItem"},decls:22,vars:16,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],[2,"width","50%","float","left"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","","nzErrorTip","\u6a21\u5757\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","newLevel",2,"flex","1",3,"nzShowSearch","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzHasFeedback","","nzErrorTip","\u8bd5\u5377\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","testPaperName",2,"flex","1",3,"nzShowSearch","ngModelChange"],[2,"width","50%"],["nzHasFeedback","","nzErrorTip","\u8fbe\u6807\u6761\u4ef6\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzPlaceHolder","\u8bf7\u8f93\u5165\u5206\u6570\u503c","formControlName","complianceConditions",2,"min-width","140px",3,"nzMin","nzMax","nzStep"],[2,"margin-left","20px"],[2,"color","#8fc9fe"],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(r.ac(0,"nz-spin",0),r.ac(1,"form",1),r.ac(2,"nz-form-item",2),r.ac(3,"nz-form-label",3),r.Pc(4,"\u9009\u62e9\u8bd5\u5377"),r.Zb(),r.ac(5,"nz-form-control",4),r.ac(6,"nz-select",5),r.ic("ngModelChange",(function(){return t.getPapers(!0)})),r.Nc(7,k,1,2,"nz-option",6),r.Zb(),r.Zb(),r.Zb(),r.ac(8,"nz-form-item",2),r.ac(9,"nz-form-control",7),r.ac(10,"nz-select",8),r.ic("ngModelChange",(function(e){return t.testPaperNameChange(e)})),r.Nc(11,P,1,2,"nz-option",6),r.Zb(),r.Zb(),r.Zb(),r.ac(12,"nz-form-item",9),r.ac(13,"nz-form-label",3),r.Pc(14,"\u8fbe\u6807\u6761\u4ef6"),r.Zb(),r.ac(15,"nz-form-control",10),r.Vb(16,"nz-input-number",11),r.ac(17,"span",12),r.Pc(18,"\u8bd5\u5377\u603b\u5206\uff1a"),r.ac(19,"span",13),r.Pc(20),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Zb(),r.Nc(21,C,5,1,"div",14),r.Zb()),2&e&&(r.tc("nzSpinning",t.newLevelLoading)("nzDelay",0),r.Eb(1),r.tc("formGroup",t.newLevelForm),r.Eb(2),r.tc("nzSpan",5),r.Eb(2),r.tc("nzSpan",18),r.Eb(1),r.tc("nzShowSearch",!0),r.Eb(1),r.tc("ngForOf",t.moduleArr),r.Eb(2),r.tc("nzSpan",18),r.Eb(1),r.tc("nzShowSearch",!0),r.Eb(1),r.tc("ngForOf",t.paperArr),r.Eb(2),r.tc("nzSpan",5),r.Eb(2),r.tc("nzSpan",18),r.Eb(1),r.tc("nzMin",0)("nzMax",t.totalTestPaperScore)("nzStep",1),r.Eb(4),r.Rc("",t.totalTestPaperScore,"\u5206"))},directives:[p.a,i.y,i.p,b.b,i.i,g.c,b.c,g.a,b.d,b.a,m.d,i.o,i.g,f.m,z.a,d.b,m.a,v.a,y.a,S.a],styles:[""]}),e})()},DzeW:function(e,t,n){"use strict";n.d(t,"a",(function(){return M}));var i=n("fXoL"),c=n("3Pt+"),a=n("WTGI"),o=n("mhyn"),s=n("4tR+"),r=n("tyNb"),l=n("pz6Z"),d=n("PScX"),u=n("uMH2"),h=n("dEAy"),p=n("b5Nk"),b=n("iacB"),g=n("2+G5"),m=n("jhN1"),f=n("Wc2E"),z=n("qAZ0"),v=n("ocnv"),y=n("B+r4"),S=n("D9mS"),k=n("OzZK"),P=n("RwU8"),C=n("C2AL"),E=n("FwiY");function w(e,t){if(1&e){const e=i.bc();i.ac(0,"div"),i.ac(1,"button",10),i.ic("click",(function(){return i.Ec(e),i.lc().cancel()})),i.Pc(2,"\u53d6\u6d88"),i.Zb(),i.ac(3,"button",11),i.ic("click",(function(){return i.Ec(e),i.lc().save()})),i.Pc(4,"\u786e\u5b9a"),i.Zb(),i.Zb()}if(2&e){const e=i.lc();i.Eb(3),i.tc("nzLoading",e.videoImportLoading)}}const x=function(){return{showPreviewIcon:!1,showRemoveIcon:!0,showDownloadIcon:!1}};let M=(()=>{class e{constructor(e,t,n,i,c,o,r,l,d,u,h,p,b,g,m,f){this.route=e,this.menuService=t,this.nzMesService=n,this.courseMgService=i,this.nzModalService=c,this.nzModalRef=o,this.aliOssService=r,this.fb=l,this.modalService=d,this.knowledgeManageService=u,this.renderer2=h,this.trainManageService=p,this.sanitizer=b,this.uploadOssService=g,this.locale=m,this.win=f,this.videoImportLoading=!1,this.loading=!1,this.nzFileList=[],this.removeFileSelf=()=>{this.videoImportForm.patchValue({videoUrl:""}),this.nzFileList=[]},this.beforeVideoUpload=e=>{if("excel"===a.a.getFileType(e.name))return!0;this.nzMesService.error("\u8bf7\u4e0a\u4f20excel,\u652f\u6301\u540e\u7f00xls, xlsx")},this.customVideoRequest=e=>{this.loading=!0,this.uploadOssService.uploadOss(e.file,s.a.knowledge_file).subscribe(t=>{this.loading=!1,this.videoImportForm.patchValue({videoUrl:t}),e.onSuccess(Object.assign({},e),e.file,{})},t=>{this.loading=!1,e.onError(t,e.file),this.nzMesService.error(JSON.stringify(t))})}}ngOnInit(){this.videoImportForm=this.fb.group({videoUrl:["",c.w.required]})}ngOnDestroy(){}downTemplate(){this.courseMgService.exportExcelVideo().subscribe(e=>{const t=document.createElement("a"),n=URL.createObjectURL(e.body);t.setAttribute("href",n),t.setAttribute("download","\u5bfc\u5165\u89c6\u9891\u6a21\u677f"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},e=>this.nzMesService.error(e))}save(){this.videoImportForm.value.videoUrl?(this.videoImportLoading=!0,this.courseMgService.excelImportVideo({courseId:this.courseId,coursePacketId:this.coursePacketId,fileUrl:this.videoImportForm.value.videoUrl}).subscribe(e=>{this.videoImportLoading=!1,200===e.status?(this.nzMesService.success("\u5bfc\u5165\u6210\u529f"),this.nzModalRef.close(!0)):500===e.status&&this.nzMesService.warning(e.message)},()=>{this.videoImportLoading=!1})):this.nzMesService.warning("\u8bf7\u5148\u4e0a\u4f20\u6587\u4ef6")}cancel(){this.nzModalRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.Ub(r.a),i.Ub(l.a),i.Ub(d.e),i.Ub(u.a),i.Ub(h.e),i.Ub(h.d),i.Ub(p.a),i.Ub(c.d),i.Ub(h.e),i.Ub(b.a),i.Ub(i.E),i.Ub(g.a),i.Ub(m.b),i.Ub(f.a),i.Ub(i.u),i.Ub(o.b))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-video-import"]],inputs:{courseId:"courseId",coursePacketId:"coursePacketId"},decls:17,vars:13,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],["nzRequired","",2,"max-width","100px",3,"nzSpan"],[2,"position","relative"],["nzListType","picture",1,"upload-list-inline",3,"nzShowUploadList","nzFileList","nzRemove","nzBeforeUpload","nzCustomRequest","nzFileListChange"],["nz-button","",2,"margin-bottom","20px",3,"disabled"],["nz-icon","","nzType","upload",2,"font-size","20px"],["nz-button","",2,"position","absolute","left","126px","top","0",3,"click"],["nz-icon","","nzType","snippets","nzTheme","outline",2,"font-size","20px","margin-right","20px"],[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(i.ac(0,"nz-spin",0),i.ac(1,"form",1),i.ac(2,"nz-form-item"),i.ac(3,"nz-form-label",2),i.Pc(4,"\u672c\u5730\u4e0a\u4f20"),i.Zb(),i.ac(5,"nz-form-control",3),i.ac(6,"nz-spin",0),i.ac(7,"nz-upload",4),i.ic("nzFileListChange",(function(e){return t.nzFileList=e})),i.ac(8,"button",5),i.ac(9,"span"),i.Vb(10,"i",6),i.Pc(11,"\u4e0a\u4f20\u6587\u4ef6"),i.Zb(),i.Zb(),i.Zb(),i.ac(12,"button",7),i.ic("click",(function(){return t.downTemplate()})),i.ac(13,"span"),i.Vb(14,"i",8),i.Pc(15,"\u6a21\u677f\u4e0b\u8f7d"),i.Zb(),i.Zb(),i.Zb(),i.Zb(),i.Zb(),i.Zb(),i.Nc(16,w,5,1,"div",9),i.Zb()),2&e&&(i.tc("nzSpinning",t.loading)("nzDelay",0),i.Eb(1),i.tc("formGroup",t.videoImportForm),i.Eb(2),i.tc("nzSpan",5),i.Eb(3),i.tc("nzSpinning",t.videoImportLoading)("nzDelay",0),i.Eb(1),i.tc("nzShowUploadList",i.wc(12,x))("nzFileList",t.nzFileList)("nzRemove",t.removeFileSelf)("nzBeforeUpload",t.beforeVideoUpload)("nzCustomRequest",t.customVideoRequest),i.Eb(1),i.tc("disabled",""!==t.videoImportForm.value.videoUrl))},directives:[z.a,c.y,c.p,v.b,c.i,y.c,v.c,y.a,v.d,v.a,S.a,k.a,P.a,C.a,E.a,h.b],styles:[""]}),e})()},Eb0D:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("WTGI"),c=n("fXoL"),a=n("dEAy"),o=n("uMH2"),s=n("PScX"),r=n("zAKX"),l=n("3Pt+"),d=n("f3RM"),u=n("OzZK"),h=n("RwU8"),p=n("C2AL"),b=n("FwiY");let g=(()=>{class e{constructor(e,t,n){this.nzModalRef=e,this.courseMgService=t,this.nzMsg=n,this.isLoading=!1,this.files=[],this.acceptTypeFile={acceptType:"",desc:""},this.acceptTypeFiles={deafult:{acceptType:"pdf,doc,ppt,docx,xls,xlsx,pptx,png,jpg,jpeg,mp4,rar,zip",desc:"\u652f\u6301\u6269\u5c55\u540d\uff1apdf\u3001doc\u3001docx\u3001xls\u3001xlsx\u3001ppt\u3001pptx\u3001png\u3001jpg\u3001mp4\u3001rar\u3001zip"},courseTimeDivision:{acceptType:"pdf,doc,ppt,docx,xls,xlsx,pptx,png,jpg,jpeg,mp4",desc:"\u652f\u6301\u6269\u5c55\u540d\uff1apdf\u3001doc\u3001docx\u3001xls\u3001xlsx\u3001ppt\u3001pptx\u3001png\u3001jpg\u3001mp4"}},this.limit=0,this.learningTarget="1"}ngOnInit(){this.setAcceptType()}setAcceptType(){this.acceptTypeFile="course-time-division"===this.node.type?this.acceptTypeFiles.courseTimeDivision:this.acceptTypeFiles.deafult}cancel(){this.nzModalRef.destroy()}confirm(){const e=this.formatPostData(this.node);if(!this.learningTarget)return void this.nzMsg.warning("\u8bf7\u9009\u62e9\u5b66\u4e60\u76ee\u6807");if(0===e.length)return void this.nzMsg.warning("\u8bf7\u4e0a\u4f20\u6587\u4ef6");let t=null;switch(this.node.type){case"chapter":t=this.courseMgService.batchSave_courseChapterFile(e);break;case"section":t="104"===this.type?this.courseMgService.batchSave_courseSectionTaskFile(e):this.courseMgService.batchSave_courseSectionFile(e);break;case"course-time-division":t=this.courseMgService.batchSave_courseTimeFile(e);break;default:t=null}t&&(this.isLoading=!0,t.subscribe(t=>{this.isLoading=!1,201===t.status?this.nzModalRef.destroy(e):this.nzMsg.error(t.message||"\u672a\u77e5\u9519\u8bef")},e=>{this.isLoading=!1,this.nzMsg.error(JSON.stringify(e))}))}formatPostData(e){const t=e.data;return this.files.map((n,c)=>{if("chapter"===e.type)return{courseId:t.courseId,coursePacketId:t.coursePacketId,courseChapterId:t.id,attachmentName:n.name,attachmentPath:n.path,aattachmentExt:i.a.getExt(n.name),seq:this.seq+c};if("section"===e.type){const e={courseId:t.courseId,coursePacketId:t.coursePacketId,courseChapterId:t.courseChapterId,courseSectionId:t.id,attachmentName:n.name,attachmentPath:n.path,aattachmentExt:i.a.getExt(n.name),sourceType:1,seq:this.seq+c,type:this.type,learningGoalCode:this.learningTarget};return"104"===this.type||"101"===this.type?(e.name=n.name,e.status="1",e.isNeed=0,e.downloadType="0",e.gradeType="1",e.taskType="0"):e.downloadType="2",e}return"course-time-division"===e.type?{courseId:t.courseId,coursePacketId:t.coursePacketId,courseTimeId:t.id,attachmentName:n.name,attachmentPath:n.path,aattachmentExt:i.a.getExt(n.name),seq:this.seq+c}:void 0})}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(a.d),c.Ub(o.a),c.Ub(s.e))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-upload-handout"]],inputs:{node:"node",seq:"seq",type:"type",limit:"limit",maxSize:"maxSize"},decls:24,vars:7,consts:[[2,"margin-bottom","20px"],[2,"color","red"],["nzShowSearch","","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b66\u4e60\u76ee\u6807",2,"min-width","100px",3,"ngModel","ngModelChange"],["nzLabel","\u4e86\u89e3","nzValue","1"],["nzLabel","\u7406\u89e3","nzValue","2"],["nzLabel","\u638c\u63e1","nzValue","3"],["nzLabel","\u5e94\u7528","nzValue","4"],["nzLabel","\u5206\u6790","nzValue","5"],["nzLabel","\u521b\u65b0","nzValue","6"],["multiple","true",3,"acceptType","limit","maxSize","ngModel","ngModelChange"],["nz-button",""],["nz-icon","","nzType","upload"],[2,"margin-top","8px"],[2,"text-align","center","margin-top","20px"],["nz-button","","nzType","default",2,"margin-right","20px",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(c.ac(0,"div"),c.ac(1,"div",0),c.ac(2,"span",1),c.Pc(3,"*"),c.Zb(),c.Pc(4,"\u5b66\u4e60\u76ee\u6807\uff1a "),c.ac(5,"nz-select",2),c.ic("ngModelChange",(function(e){return t.learningTarget=e})),c.Vb(6,"nz-option",3),c.Vb(7,"nz-option",4),c.Vb(8,"nz-option",5),c.Vb(9,"nz-option",6),c.Vb(10,"nz-option",7),c.Vb(11,"nz-option",8),c.Zb(),c.Zb(),c.ac(12,"qkc-upload",9),c.ic("ngModelChange",(function(e){return t.files=e})),c.ac(13,"button",10),c.Vb(14,"i",11),c.ac(15,"span"),c.Pc(16,"\u9009\u62e9\u6587\u4ef6"),c.Zb(),c.Zb(),c.ac(17,"p",12),c.Pc(18),c.Zb(),c.Zb(),c.ac(19,"div",13),c.ac(20,"button",14),c.ic("click",(function(){return t.cancel()})),c.Pc(21,"\u53d6\u6d88"),c.Zb(),c.ac(22,"button",15),c.ic("click",(function(){return t.confirm()})),c.Pc(23,"\u786e\u5b9a\u4e0a\u4f20"),c.Zb(),c.Zb(),c.Zb()),2&e&&(c.Eb(5),c.tc("ngModel",t.learningTarget),c.Eb(7),c.tc("acceptType",t.acceptTypeFiles.deafult.acceptType)("limit",t.limit)("maxSize",t.maxSize)("ngModel",t.files),c.Eb(6),c.Qc(t.acceptTypeFiles.deafult.desc),c.Eb(4),c.tc("nzLoading",t.isLoading))},directives:[r.d,l.o,l.q,r.a,d.a,u.a,h.a,p.a,b.a],styles:[""]}),e})()},WZ4L:function(e,t,n){"use strict";n.d(t,"a",(function(){return qn}));var i=n("mrSG"),c=n("Eb0D"),a=n("Vhue"),o=n("3Pt+"),s=n("WTGI"),r=n("AytR"),l=n("cp0P"),d=n("HDdC"),u=n("PqYM"),h=n("5+WD"),p=n("55n1"),b=n("fyF9"),g=n("zAKX"),m=n("3JH+"),f=n("DzeW"),z=n("+O+V"),v=n("ofXK"),y=n("fXoL"),S=n("tyNb"),k=n("pz6Z"),P=n("PScX"),C=n("dEAy"),E=n("b5Nk"),w=n("iacB"),x=n("2+G5"),M=n("uMH2"),O=n("19W7"),I=n("rb97"),Z=n("qAZ0"),T=n("IvDN"),L=n("FwiY"),N=n("VXpv"),V=n("OzZK"),F=n("RwU8"),D=n("C2AL"),j=n("rMZv"),_=n("PTRe"),q=n("ocnv"),A=n("B+r4"),U=n("z4wI"),B=n("bE2y"),R=n("nJia"),$=n("ZE2D"),Q=n("TaO5"),W=n("Nqz0"),J=n("Q8cG"),H=n("f3RM"),K=n("5vDB"),G=n("u2sS");const X=["polywaymodal"],Y=["localvideomodal"],ee=["addExam"],te=["addExamExit"],ne=["jobSettings"],ie=["jobSettingsEdit"],ce=["questionnaire"],ae=["tree"];function oe(e,t){1&e&&(y.ac(0,"span",108),y.Pc(1," \u8be5\u8bfe\u5305\u5c1a\u672a\u5efa\u7acb\u7ae0\u8282\u5185\u5bb9 "),y.Zb())}function se(e,t){if(1&e){const e=y.bc();y.ac(0,"button",109),y.ic("click",(function(){return y.Ec(e),y.lc().importVideo()})),y.Pc(1,"\u5bfc\u5165\u89c6\u9891 "),y.Zb()}}const re=function(){return{"max-width":"770px"}};function le(e,t){if(1&e){const e=y.bc();y.ac(0,"span"),y.Pc(1," \u8bb2\u4e49 "),y.ac(2,"i",112),y.ic("click",(function(t){return y.Ec(e),y.lc(2).stopPropagation(t)})),y.Zb(),y.Zb()}if(2&e){y.lc();const e=y.Cc(6);y.Eb(2),y.tc("nzTooltipTitle",e)("nzTooltipOverlayStyle",y.wc(2,re))}}function de(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bb2\u4e49\u4e3b\u8981\u63d0\u4f9b\u7ed9\u8bb2\u5e08\u7ed9\u5b66\u5458\u4e0a\u8bfe\u4f7f\u7528\uff1a"),y.Zb(),y.ac(2,"div"),y.Pc(3,"1\u3001\u5efa\u8bae\u4f18\u5148WPS\u5236\u4f5cPPT \uff1b"),y.Zb(),y.ac(4,"div"),y.Pc(5,"2\u3001\u5c3d\u91cf\u5c11\u7528\u7b2c\u4e09\u6a21\u677f\uff1b"),y.Zb(),y.ac(6,"div"),y.Pc(7,"3\u3001PPT\u7684\u6587\u4ef6\u5927\u5c0f\u5e94\u63a7\u5236\u5728100M\u4e4b\u5185\uff1b"),y.Zb())}function ue(e,t){if(1&e){const e=y.bc();y.ac(0,"select",126),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc(2).$implicit.downloadType=t}))("ngModelChange",(function(t){y.Ec(e);const n=y.lc(2).$implicit;return y.lc(3).downloadChange(t,n)})),y.ac(1,"option",127),y.Pc(2,"\u4e0d\u53ef\u4e0b\u8f7d"),y.Zb(),y.ac(3,"option",128),y.Pc(4,"\u8bb2\u5e08\u53ef\u4e0b\u8f7d"),y.Zb(),y.Zb()}if(2&e){const e=y.lc(2).$implicit;y.tc("ngModel",e.downloadType)}}function he(e,t){if(1&e){const e=y.bc();y.Yb(0),y.ac(1,"div",123),y.ac(2,"span"),y.ac(3,"label",124),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().$implicit.isMainFile=t}))("ngModelChange",(function(t){y.Ec(e);const n=y.lc().$implicit;return y.lc(3).mainFileChange(t,n)})),y.Pc(4," \u4e3b\u8bb2\u4e49 "),y.Zb(),y.Zb(),y.Zb(),y.Nc(5,ue,5,1,"select",125),y.Xb()}if(2&e){const e=y.lc().$implicit,t=y.lc(3);y.Eb(3),y.tc("nzDisabled",t.disableMainLecture(e))("ngModel",e.isMainFile),y.Eb(2),y.tc("ngIf",e.attachmentPath)}}function pe(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).downLoad(t)})),y.Vb(1,"i",129),y.Pc(2," \u4e0b\u8f7d "),y.Zb()}}function be(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc(),n=t.$implicit,i=t.index;return y.lc(3).associate(n,i)})),y.Vb(1,"i",130),y.Pc(2," \u5173\u8054 "),y.Zb()}}const ge=function(){return{color:"#f53131"}};function me(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).delHandout(t)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,ge))}const fe=function(){return{"background-color":"#ea5c6c"}};function ze(e,t){if(1&e){const e=y.bc();y.ac(0,"div",115),y.ac(1,"span",116),y.Vb(2,"nz-avatar",117),y.Pc(3),y.Zb(),y.Nc(4,he,6,3,"ng-container",17),y.ac(5,"nz-spin",118),y.ac(6,"div",119),y.ac(7,"a",120),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc(3).previewHandout(n)})),y.Vb(8,"i",105),y.Pc(9," \u9884\u89c8 "),y.Zb(),y.Nc(10,pe,3,0,"a",121),y.Nc(11,be,3,0,"a",121),y.Nc(12,me,3,3,"a",122),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=y.lc(3);y.Eb(1),y.tc("title",e.attachmentName),y.Eb(1),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.wc(12,fe))("nzText","\u8bb2"),y.Eb(1),y.Rc(" ",e.attachmentName," "),y.Eb(1),y.tc("ngIf","0"===i.preview),y.Eb(1),y.tc("nzSpinning",i.associateing[n])("nzDelay",0),y.Eb(5),y.tc("ngIf",e.attachmentPath&&e.attachmentPath.indexOf(".")>0),y.Eb(1),y.tc("ngIf",i.showassolite(e)),y.Eb(1),y.tc("ngIf","0"===i.preview)}}const ve=function(){return{"margin-right":"10px"}};function ye(e,t){if(1&e){const e=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).callSchoolEnterpriseLib("read","101")})),y.Pc(3,"\u9605\u8bfb\u5e93\u8c03\u7528 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).uploadHandout("101")})),y.Pc(5,"\u672c\u5730\u4e0a\u4f20"),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(2),y.Lc(y.wc(4,ve)),y.tc("nzSize","small"),y.Eb(2),y.tc("nzSize","small"))}function Se(e,t){if(1&e&&(y.Yb(0),y.Nc(1,ze,13,13,"div",113),y.Nc(2,ye,6,5,"div",114),y.Xb()),2&e){const e=y.lc(2);y.Eb(1),y.tc("ngForOf",e.handoutsLecture),y.Eb(1),y.tc("ngIf","0"===e.preview)}}function ke(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u8bb2\u4e49\u5185\u5bb9"),y.Zb())}const Pe=function(){return{border:"none","background-color":"#fff"}},Ce=function(){return{"margin-bottom":"24px",border:"1px solid #d9d9d9"}};function Ee(e,t){if(1&e){const e=y.bc();y.ac(0,"div",12),y.ac(1,"nz-collapse"),y.ac(2,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(t){return y.Ec(e),y.lc().active1=t})),y.Nc(3,le,3,3,"ng-template",null,110,y.Oc),y.Nc(5,de,8,0,"ng-template",null,111,y.Oc),y.ac(7,"div",16),y.ic("cdkDropListDropped",(function(t){return y.Ec(e),y.lc().sectionDrop(t,"1")})),y.Nc(8,Se,3,2,"ng-container",17),y.Nc(9,ke,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(4),t=y.lc();y.Eb(1),y.Lc(y.wc(8,Pe)),y.Eb(1),y.Lc(y.wc(9,Ce)),y.tc("nzActive",t.active1)("nzHeader",e),y.Eb(6),y.tc("ngIf","0"===t.preview||(null==t.handoutsLecture?null:t.handoutsLecture.length)),y.Eb(1),y.tc("ngIf","1"===t.preview&&!(null!=t.handoutsLecture&&t.handoutsLecture.length))}}function we(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u5f55\u64ad"),y.Zb())}function xe(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).delHandout(t)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,ge))}const Me=function(){return{"background-color":"#675dca"}};function Oe(e,t){if(1&e){const e=y.bc();y.ac(0,"div",115),y.ac(1,"div"),y.ac(2,"span",116),y.Pc(3," \xa0 "),y.Vb(4,"nz-avatar",117),y.Pc(5),y.Zb(),y.ac(6,"span",135),y.Pc(7),y.Zb(),y.Zb(),y.ac(8,"div",119),y.ac(9,"a",120),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc(3).editHandout(n)})),y.Vb(10,"i",136),y.Pc(11," \u7f16\u8f91 "),y.Zb(),y.ac(12,"a",120),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc(3).previewHandout(n)})),y.Vb(13,"i",105),y.Pc(14," \u9884\u89c8 "),y.Zb(),y.Nc(15,xe,3,3,"a",122),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc(3);y.Eb(2),y.tc("title",e.attachmentName),y.Eb(2),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.wc(8,Me))("nzText","\u89c6"),y.Eb(1),y.Rc(" ",e.attachmentName," "),y.Eb(2),y.Qc(e.authorName),y.Eb(8),y.tc("ngIf","0"===n.preview)}}function Ie(e,t){if(1&e){const e=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).videoUpload("polyway")})),y.Pc(3,"\u4fdd\u5229\u5a01\u89c6\u9891 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).videoUpload("localVideo")})),y.Pc(5,"\u4e0a\u4f20\u89c6\u9891 "),y.Zb(),y.Zb(),y.Vb(6,"div"),y.Zb()}2&e&&(y.Eb(2),y.Lc(y.wc(4,ve)),y.tc("nzSize","small"),y.Eb(2),y.tc("nzSize","small"))}function Ze(e,t){if(1&e&&(y.Yb(0),y.Nc(1,Oe,16,9,"div",113),y.Nc(2,Ie,7,5,"div",114),y.Xb()),2&e){const e=y.lc(2);y.Eb(1),y.tc("ngForOf",e.handoutsRecording),y.Eb(1),y.tc("ngIf","0"===e.preview)}}function Te(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u89c6\u9891\u5185\u5bb9"),y.Zb())}function Le(e,t){if(1&e){const e=y.bc();y.ac(0,"div",12),y.ac(1,"nz-collapse"),y.ac(2,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(t){return y.Ec(e),y.lc().active2=t})),y.Nc(3,we,2,0,"ng-template",null,134,y.Oc),y.ac(5,"div",16),y.ic("cdkDropListDropped",(function(t){return y.Ec(e),y.lc().sectionDrop(t,"2")})),y.Nc(6,Ze,3,2,"ng-container",17),y.Nc(7,Te,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(4),t=y.lc();y.Eb(1),y.Lc(y.wc(8,Pe)),y.Eb(1),y.Lc(y.wc(9,Ce)),y.tc("nzActive",t.active2)("nzHeader",e),y.Eb(4),y.tc("ngIf","0"===t.preview||(null==t.handoutsRecording?null:t.handoutsRecording.length)),y.Eb(1),y.tc("ngIf","1"===t.preview&&!(null!=t.handoutsRecording&&t.handoutsRecording.length))}}function Ne(e,t){if(1&e){const e=y.bc();y.ac(0,"span"),y.Pc(1,"\u4efb\u52a1 "),y.ac(2,"i",112),y.ic("click",(function(t){return y.Ec(e),y.lc(2).stopPropagation(t)})),y.Zb(),y.Zb()}if(2&e){y.lc();const e=y.Cc(6);y.Eb(2),y.tc("nzTooltipTitle",e)("nzTooltipOverlayStyle",y.wc(2,re))}}function Ve(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u6bcf\u4e2a\u5c0f\u8282\u4e0b\u7684\u72ec\u7acb\u4efb\u52a1\u4e0d\u80fd\u8d85\u8fc73\u4e2a"),y.Zb(),y.ac(2,"div"),y.Pc(3,"\u672a\u88ab\u4e3b\u8bb2\u4e49\u7ed1\u5b9a\u7684\u4efb\u52a1\u4e3a\u72ec\u7acb\u4efb\u52a1"),y.Zb())}function Fe(e,t){if(1&e&&(y.ac(0,"span",149),y.Pc(1),y.Zb()),2&e){const e=y.lc().$implicit,t=y.lc(3);y.Eb(1),y.Qc(t.getExamText(e))}}function De(e,t){if(1&e&&(y.ac(0,"span",149),y.Pc(1),y.Zb()),2&e){const e=y.lc().$implicit,t=y.lc(3);y.Eb(1),y.Qc(t.getTaskFormText(e.taskForm))}}function je(e,t){1&e&&(y.ac(0,"span",150),y.Pc(1,"\u3010\u5df2\u7ed1\u3011"),y.Zb())}const _e=function(){return{"other-container":!0}};function qe(e,t){if(1&e){const e=y.bc();y.ac(0,"select",151),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().$implicit.downloadType=t}))("ngModelChange",(function(t){y.Ec(e);const n=y.lc().$implicit;return y.lc(3).downloadChange(t,n,!0)})),y.ac(1,"option",127),y.Pc(2,"\u4e0d\u53ef\u4e0b\u8f7d"),y.Zb(),y.ac(3,"option",128),y.Pc(4,"\u8bb2\u5e08\u53ef\u4e0b\u8f7d"),y.Zb(),y.ac(5,"option",152),y.Pc(6,"\u8bb2\u5e08+\u5b66\u751f\u53ef\u4e0b\u8f7d"),y.Zb(),y.Zb()}if(2&e){const e=y.lc().$implicit,t=y.lc(3);y.tc("ngModel",e.downloadType)("ngClass",y.wc(3,_e))("disabled","1"===t.preview)}}function Ae(e,t){1&e&&y.Vb(0,"div",153)}function Ue(e,t){if(1&e){const e=y.bc();y.ac(0,"select",154),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().$implicit.gradeType=t}))("ngModelChange",(function(t){y.Ec(e);const n=y.lc().$implicit;return y.lc(3).gradeTypeChange(t,n)})),y.ac(1,"option",128),y.Pc(2,"\u5b66\u751f\u81ea\u8bc4"),y.Zb(),y.ac(3,"option",152),y.Pc(4,"\u8001\u5e08\u6279\u6539"),y.Zb(),y.Zb()}if(2&e){const e=y.lc().$implicit,t=y.lc(3);y.Kb("disable-select","1"===t.preview||"1"===t.exerciseType||"4"===e.taskType),y.tc("ngModel",e.gradeType)("disabled","1"===t.preview||"1"===t.exerciseType||"4"===e.taskType)}}function Be(e,t){1&e&&y.Vb(0,"div",153)}function Re(e,t){if(1&e){const e=y.bc();y.ac(0,"select",154),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().$implicit.isGrade=t}))("ngModelChange",(function(t){y.Ec(e);const n=y.lc().$implicit;return y.lc(3).isGradeChange(t,n)})),y.ac(1,"option",155),y.Pc(2,"\u8bf7\u9009\u62e9"),y.Zb(),y.ac(3,"option",127),y.Pc(4,"\u4e0d\u8bc4\u5206"),y.Zb(),y.ac(5,"option",128),y.Pc(6,"\u9700\u8bc4\u5206"),y.Zb(),y.Zb()}if(2&e){const e=y.lc().$implicit,t=y.lc(3);y.tc("ngModel",e.isGrade)("disabled","1"===t.preview)}}function $e(e,t){1&e&&y.Vb(0,"div",153)}function Qe(e,t){if(1&e){const e=y.bc();y.ac(0,"button",156),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).examSetting(t)})),y.Pc(1),y.Zb()}if(2&e){const e=y.lc().$implicit;y.Eb(1),y.Rc(" ","4"===e.taskType?"\u8003\u8bd5\u8bbe\u7f6e":"\u6743\u9650\u8bbe\u7f6e"," ")}}function We(e,t){1&e&&y.Vb(0,"div",157)}function Je(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).edit(t)})),y.ac(1,"i",158),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).edit(t)})),y.Zb(),y.Pc(2," \u7f16\u8f91 "),y.Zb()}}function He(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).downLoad(t)})),y.Vb(1,"i",129),y.Pc(2," \u4e0b\u8f7d "),y.Zb()}}function Ke(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(3).delHandout(t,!0)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,ge))}const Ge=function(e){return{"max-width":e}},Xe=function(e){return{"background-color":e}};function Ye(e,t){if(1&e){const e=y.bc();y.ac(0,"div",115),y.ac(1,"div",139),y.ac(2,"span",140),y.Vb(3,"nz-avatar",117),y.Pc(4),y.Nc(5,Fe,2,1,"span",141),y.Nc(6,De,2,1,"span",141),y.Zb(),y.Nc(7,je,2,0,"span",142),y.Zb(),y.Nc(8,qe,7,4,"select",143),y.Nc(9,Ae,1,0,"div",144),y.Nc(10,Ue,5,4,"select",145),y.Nc(11,Be,1,0,"div",144),y.Nc(12,Re,7,2,"select",146),y.Nc(13,$e,1,0,"div",144),y.Nc(14,Qe,2,1,"button",147),y.Nc(15,We,1,0,"div",148),y.ac(16,"div",119),y.ac(17,"a",120),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc(3).previewTask(n)})),y.Vb(18,"i",105),y.Pc(19," \u9884\u89c8 "),y.Zb(),y.Nc(20,Je,3,0,"a",121),y.Nc(21,He,3,0,"a",121),y.Nc(22,Ke,3,3,"a",122),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc(3);y.Eb(2),y.tc("title",e.name)("ngStyle",y.xc(21,Ge,e.linkId?"calc(100% - 56px)":"100%")),y.Eb(1),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.xc(23,Xe,n.getColor(e.taskType)))("nzText",n.getText(e.taskType)),y.Eb(1),y.Rc(" ",e.name," "),y.Eb(1),y.tc("ngIf",n.showExamType(e)),y.Eb(1),y.tc("ngIf",n.ShowJobType(e)),y.Eb(1),y.tc("ngIf",e.linkId),y.Eb(1),y.tc("ngIf",e.attachmentPath),y.Eb(1),y.tc("ngIf",!e.attachmentPath),y.Eb(1),y.tc("ngIf","2"===e.taskType||"4"===e.taskType),y.Eb(1),y.tc("ngIf",!("2"===e.taskType||"4"===e.taskType)),y.Eb(1),y.tc("ngIf","1"===e.taskType),y.Eb(1),y.tc("ngIf",!("1"===e.taskType)),y.Eb(1),y.tc("ngIf",("4"===e.taskType||"6"===e.taskType||"7"===e.taskType)&&"0"===n.preview),y.Eb(1),y.tc("ngIf",!(("4"===e.taskType||"6"===e.taskType||"7"===e.taskType)&&"0"===n.preview)),y.Eb(5),y.tc("ngIf",("4"===e.taskType||"2"===e.taskType||"6"===e.taskType||"7"===e.taskType)&&"0"===n.preview),y.Eb(1),y.tc("ngIf",e.attachmentPath&&"4"!==e.taskType&&e.attachmentPath.indexOf(".")>0),y.Eb(1),y.tc("ngIf","0"===n.preview)}}function et(e,t){if(1&e){const e=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).callSchoolEnterpriseLib("read","1")})),y.Pc(3,"\u9605\u8bfb\u5e93\u8c03\u7528 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).callSchoolEnterpriseLib("case","1")})),y.Pc(5,"\u6848\u4f8b\u5e93\u8c03\u7528 "),y.Zb(),y.ac(6,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).callSchoolEnterpriseLib("setting","1")})),y.Pc(7,"\u5b9e\u8bad\u5e93\u8c03\u7528 "),y.Zb(),y.ac(8,"button",159),y.ac(9,"a",160),y.Vb(10,"i",161),y.Pc(11," \u95ee\u5377\u8c03\u7814 "),y.Zb(),y.Zb(),y.ac(12,"nz-dropdown-menu",null,162),y.ac(14,"ul",163),y.ac(15,"li",164),y.ic("click",(function(){return y.Ec(e),y.lc(3).questionnaireCall("questionnaireType")})),y.Pc(16,"\u95ee\u5377\u8c03\u7528"),y.Zb(),y.ac(17,"li",164),y.ic("click",(function(){return y.Ec(e),y.lc(3).questionnaireCall("evaluationType")})),y.Pc(18,"\u6d4b\u8bc4\u8c03\u7528"),y.Zb(),y.Zb(),y.Zb(),y.ac(19,"button",159),y.ac(20,"a",160),y.Vb(21,"i",161),y.Pc(22," \u7ec3\u4e60\u4f5c\u4e1a "),y.Zb(),y.Zb(),y.ac(23,"nz-dropdown-menu",null,165),y.ac(25,"ul",163),y.ac(26,"li",164),y.ic("click",(function(){return y.Ec(e),y.lc(3).entryExercises()})),y.Pc(27,"\u65b0\u589e\u4f5c\u4e1a"),y.Zb(),y.ac(28,"li",164),y.ic("click",(function(){return y.Ec(e),y.lc(3).chooseExercises()})),y.Pc(29,"\u9009\u62e9\u4f5c\u4e1a"),y.Zb(),y.Zb(),y.Zb(),y.ac(30,"button",159),y.ac(31,"a",160),y.Vb(32,"i",161),y.Pc(33," \u8003\u8bd5\u4efb\u52a1 "),y.Zb(),y.Zb(),y.ac(34,"nz-dropdown-menu",null,166),y.ac(36,"ul",163),y.ac(37,"li",164),y.ic("click",(function(){return y.Ec(e),y.lc(3).addVolume()})),y.Pc(38,"\u65b0\u589e\u7ec4\u5377"),y.Zb(),y.ac(39,"li",164),y.ic("click",(function(){return y.Ec(e),y.lc(3).chooseTestPaper()})),y.Pc(40,"\u9009\u62e9\u8bd5\u5377"),y.Zb(),y.Zb(),y.Zb(),y.ac(41,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(3).uploadHandout("104")})),y.Vb(42,"i",167),y.Pc(43,"\u672c\u5730\u4e0a\u4f20 "),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(13),t=y.Cc(24),n=y.Cc(35);y.Eb(2),y.Lc(y.wc(24,ve)),y.tc("nzSize","small"),y.Eb(2),y.Lc(y.wc(25,ve)),y.tc("nzSize","small"),y.Eb(2),y.Lc(y.wc(26,ve)),y.tc("nzSize","small"),y.Eb(2),y.Lc(y.wc(27,ve)),y.tc("nzSize","small"),y.Eb(1),y.tc("nzDropdownMenu",e),y.Eb(10),y.Lc(y.wc(28,ve)),y.tc("nzSize","small"),y.Eb(1),y.tc("nzDropdownMenu",t),y.Eb(10),y.Lc(y.wc(29,ve)),y.tc("nzSize","small"),y.Eb(1),y.tc("nzDropdownMenu",n),y.Eb(10),y.Lc(y.wc(30,ve)),y.tc("nzSize","small")}}function tt(e,t){if(1&e&&(y.Yb(0),y.Nc(1,Ye,23,25,"div",113),y.Nc(2,et,44,31,"div",114),y.Xb()),2&e){const e=y.lc(2);y.Eb(1),y.tc("ngForOf",e.taskList),y.Eb(1),y.tc("ngIf","0"===e.preview&&e.taskList.length<e.limitTask)}}function nt(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u4efb\u52a1\u5185\u5bb9"),y.Zb())}function it(e,t){if(1&e){const e=y.bc();y.ac(0,"div",12),y.ac(1,"nz-collapse"),y.ac(2,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(t){return y.Ec(e),y.lc().active3=t})),y.Nc(3,Ne,3,3,"ng-template",null,137,y.Oc),y.Nc(5,Ve,4,0,"ng-template",null,138,y.Oc),y.ac(7,"div",16),y.ic("cdkDropListDropped",(function(t){return y.Ec(e),y.lc().sectionDrop(t,"3")})),y.Nc(8,tt,3,2,"ng-container",17),y.Nc(9,nt,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(4),t=y.lc();y.Eb(1),y.Lc(y.wc(8,Pe)),y.Eb(1),y.Lc(y.wc(9,Ce)),y.tc("nzActive",t.active3)("nzHeader",e),y.Eb(6),y.tc("ngIf","0"===t.preview||(null==t.taskList?null:t.taskList.length)),y.Eb(1),y.tc("ngIf","1"===t.preview&&!(null!=t.taskList&&t.taskList.length))}}function ct(e,t){if(1&e){const e=y.bc();y.ac(0,"span"),y.Pc(1,"\u8d44\u6599"),y.ac(2,"i",112),y.ic("click",(function(t){return y.Ec(e),y.lc().stopPropagation(t)})),y.Zb(),y.Zb()}if(2&e){y.lc();const e=y.Cc(22);y.Eb(2),y.tc("nzTooltipTitle",e)("nzTooltipOverlayStyle",y.wc(2,re))}}function at(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u4e3b\u52a8\u53d1\u9001\u7ed9\u5b66\u5458\u5b66\u4e60\u7684\u8d44\u6e90"),y.Zb())}function ot(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(2).downLoad(t)})),y.Vb(1,"i",129),y.Pc(2," \u4e0b\u8f7d "),y.Zb()}}function st(e,t){if(1&e){const e=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc(2).delHandout(t)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,ge))}const rt=function(){return{"background-color":"#34bbc7"}};function lt(e,t){if(1&e){const e=y.bc();y.ac(0,"div",169),y.ac(1,"div"),y.ac(2,"span",116),y.Pc(3," \xa0 "),y.Vb(4,"nz-avatar",117),y.Pc(5),y.Zb(),y.Zb(),y.ac(6,"div",119),y.ac(7,"a",120),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc(2).previewHandout(n)})),y.Vb(8,"i",105),y.Pc(9,"\u9884\u89c8 "),y.Zb(),y.Nc(10,ot,3,0,"a",121),y.Nc(11,st,3,3,"a",122),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=y.lc(2);y.tc("id","material"+n),y.Eb(2),y.tc("title",e.attachmentName),y.Eb(2),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.wc(9,rt))("nzText","\u8d44"),y.Eb(1),y.Rc(" ",e.attachmentName," "),y.Eb(5),y.tc("ngIf",e.attachmentPath&&e.attachmentPath.indexOf(".")>0),y.Eb(1),y.tc("ngIf","0"===i.preview)}}function dt(e,t){if(1&e){const e=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(2).callSchoolEnterpriseLib("read","102")})),y.Pc(3,"\u9605\u8bfb\u5e93\u8c03\u7528 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(e),y.lc(2).uploadHandout("102")})),y.Pc(5,"\u672c\u5730\u4e0a\u4f20"),y.Zb(),y.Zb(),y.Vb(6,"div"),y.Zb()}2&e&&(y.Eb(2),y.Lc(y.wc(4,ve)),y.tc("nzSize","small"),y.Eb(2),y.tc("nzSize","small"))}function ut(e,t){if(1&e&&(y.Yb(0),y.Nc(1,lt,12,10,"div",168),y.Nc(2,dt,7,5,"div",114),y.Xb()),2&e){const e=y.lc();y.Eb(1),y.tc("ngForOf",e.handoutsMaterial),y.Eb(1),y.tc("ngIf","0"===e.preview)}}function ht(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u8d44\u6599\u5185\u5bb9"),y.Zb())}function pt(e,t){if(1&e){const e=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u89c6\u9891ID"),y.Zb(),y.ac(3,"nz-form-control",181),y.ac(4,"input",182),y.ic("keyup.enter",(function(){return y.Ec(e),y.lc(2).comfirmUpload("polyway")})),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18))}function bt(e,t){if(1&e&&y.Vb(0,"nz-option",183),2&e){const e=t.$implicit;y.tc("nzLabel",e.name)("nzValue",e.id)}}function gt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),y.Zb())}function mt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"),y.Zb())}function ft(e,t){if(1&e&&(y.Nc(0,gt,2,0,"div",17),y.Nc(1,mt,2,0,"div",17)),2&e){const e=t.$implicit;y.tc("ngIf",e.hasError("required")),y.Eb(1),y.tc("ngIf",e.hasError("maxlength"))}}function zt(e,t){if(1&e){const e=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u6392\u5e8f"),y.Zb(),y.ac(3,"nz-form-control",184),y.ac(4,"nz-input-number",185),y.ic("keyup.enter",(function(){return y.Ec(e),y.lc(2).comfirmUpload("polyway")})),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzStep",1)("nzMin",1))}function vt(e,t){if(1&e){const e=y.bc();y.ac(0,"form",72),y.Nc(1,pt,5,2,"nz-form-item",17),y.ac(2,"nz-form-item"),y.ac(3,"nz-form-label",73),y.Pc(4,"\u6307\u5bfc\u8bb2\u5e08"),y.Zb(),y.ac(5,"nz-form-control",170),y.ac(6,"nz-select",171),y.Nc(7,bt,1,2,"nz-option",172),y.Zb(),y.Zb(),y.Zb(),y.ac(8,"nz-form-item"),y.ac(9,"nz-form-label",73),y.Pc(10,"\u89c6\u9891\u540d\u5b57"),y.Zb(),y.ac(11,"nz-form-control",173),y.ac(12,"input",174),y.ic("keyup.enter",(function(){return y.Ec(e),y.lc().comfirmUpload("polyway")})),y.Zb(),y.Zb(),y.ac(13,"span",175),y.Pc(14),y.Zb(),y.Nc(15,ft,2,2,"ng-template",null,176,y.Oc),y.Zb(),y.ac(17,"nz-form-item"),y.ac(18,"nz-form-label",73),y.Pc(19,"\u89c6\u9891\u6807\u7b7e"),y.Zb(),y.ac(20,"nz-form-control",177),y.ac(21,"nz-select",178),y.Vb(22,"nz-option",179),y.Vb(23,"nz-option",180),y.Zb(),y.Zb(),y.Zb(),y.Nc(24,zt,5,4,"nz-form-item",17),y.Zb()}if(2&e){const e=y.Cc(16),t=y.lc();y.tc("formGroup",t.polyway),y.Eb(1),y.tc("ngIf",t.reset),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(2),y.tc("ngForOf",t.teacherList),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",e),y.Eb(2),y.Mc("color",t.polyway.controls.attachmentName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",t.polyway.value.attachmentName.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(4),y.tc("ngIf",t.reset)}}const yt=function(){return{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1}};function St(e,t){if(1&e){const e=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u89c6\u9891"),y.Zb(),y.ac(3,"nz-form-control",187),y.ac(4,"nz-spin",8),y.ac(5,"qkc-upload",188),y.ic("optsChange",(function(){return y.Ec(e),y.lc(2).compltedUpload()})),y.Vb(6,"i",189),y.Zb(),y.ac(7,"div",190),y.Pc(8," \u652f\u6301\u683c\u5f0fflv,avi,mpg,mp4,wmv,mov,3gp,.asf\u7b49 "),y.Zb(),y.ac(9,"div",190),y.Pc(10," (\u672c\u5730\u4e0a\u4f20\u5230\u4fdd\u5229\u5a01\u7684\u89c6\u9891\u9700\u8981\u7ecf\u8fc7\u4fdd\u5229\u5a01\u5ba1\u6838\u540e\u624d\u80fd\u6b63\u5e38\u64ad\u653e) "),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.lc(2);y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",e.loading)("nzDelay",0),y.Eb(1),y.tc("showUploadList",y.wc(6,yt))("isPolyway",!0)}}function kt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),y.Zb())}function Pt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"),y.Zb())}function Ct(e,t){if(1&e&&(y.Nc(0,kt,2,0,"div",17),y.Nc(1,Pt,2,0,"div",17)),2&e){const e=t.$implicit;y.tc("ngIf",e.hasError("required")),y.Eb(1),y.tc("ngIf",e.hasError("maxlength"))}}function Et(e,t){if(1&e&&y.Vb(0,"nz-option",183),2&e){const e=t.$implicit;y.tc("nzLabel",e.name)("nzValue",e.id)}}function wt(e,t){if(1&e){const e=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u6392\u5e8f"),y.Zb(),y.ac(3,"nz-form-control",184),y.ac(4,"nz-input-number",185),y.ic("keyup.enter",(function(){return y.Ec(e),y.lc(2).comfirmUpload("localVideo")})),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzStep",1)("nzMin",1))}function xt(e,t){if(1&e){const e=y.bc();y.ac(0,"form",72),y.Nc(1,St,11,7,"nz-form-item",17),y.ac(2,"nz-form-item"),y.ac(3,"nz-form-label",73),y.Pc(4,"\u89c6\u9891\u6807\u7b7e"),y.Zb(),y.ac(5,"nz-form-control",177),y.ac(6,"nz-select",178),y.ac(7,"nz-option",179),y.Pc(8,"\u4e3b\u8981"),y.Zb(),y.ac(9,"nz-option",180),y.Pc(10,"\u51b2\u523a"),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(11,"nz-form-item"),y.ac(12,"nz-form-label",73),y.Pc(13,"\u89c6\u9891\u540d\u5b57"),y.Zb(),y.ac(14,"nz-form-control",173),y.ac(15,"input",174),y.ic("keyup.enter",(function(){return y.Ec(e),y.lc().comfirmUpload("localVideo")})),y.Zb(),y.Zb(),y.ac(16,"span",175),y.Pc(17),y.Zb(),y.Nc(18,Ct,2,2,"ng-template",null,186,y.Oc),y.Zb(),y.ac(20,"nz-form-item"),y.ac(21,"nz-form-label",73),y.Pc(22,"\u6307\u5bfc\u8bb2\u5e08"),y.Zb(),y.ac(23,"nz-form-control",170),y.ac(24,"nz-spin",8),y.ac(25,"nz-select",171),y.Nc(26,Et,1,2,"nz-option",172),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(27,wt,5,4,"nz-form-item",17),y.Zb()}if(2&e){const e=y.Cc(19),t=y.lc();y.tc("formGroup",t.localVideo),y.Eb(1),y.tc("ngIf",t.reset),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(7),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",e),y.Eb(2),y.Mc("color",t.localVideo.controls.attachmentName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",t.localVideo.value.attachmentName.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",t.instructorLoading)("nzDelay",0),y.Eb(2),y.tc("ngForOf",t.teacherList),y.Eb(1),y.tc("ngIf",t.reset)}}function Mt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function Ot(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function It(e,t){if(1&e&&(y.Nc(0,Mt,2,0,"div",17),y.Nc(1,Ot,2,1,"div",17)),2&e){const e=t.$implicit;y.tc("ngIf",e.hasError("required")),y.Eb(1),y.tc("ngIf",e.hasError("maxlength"))}}function Zt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(1),y.tc("nzType",e.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(e.title)}}function Tt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(3),y.Qc(e.title)}}function Lt(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,Zt,4,2,"span",17),y.Nc(2,Tt,4,1,"span",17),y.Zb()),2&e){const e=t.$implicit;y.Eb(1),y.tc("ngIf",!e.isLeaf),y.Eb(1),y.tc("ngIf",e.isLeaf)}}const Nt=function(){return{"max-height":"400px"}};function Vt(e,t){if(1&e){const e=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0"),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",192),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,It,2,2,"ng-template",null,194,y.Oc),y.Zb(),y.ac(10,"nz-form-item"),y.ac(11,"nz-form-label",73),y.Pc(12,"\u7ec4\u5377\u65b9\u5f0f"),y.Zb(),y.ac(13,"nz-form-control",195),y.ac(14,"nz-select",196),y.Vb(15,"nz-option",197),y.Vb(16,"nz-option",198),y.Vb(17,"nz-option",199),y.Zb(),y.Zb(),y.Zb(),y.ac(18,"nz-form-item"),y.ac(19,"nz-form-label",73),y.Pc(20,"\u5b50\u9898\u5e93"),y.Zb(),y.ac(21,"nz-form-control",200),y.ac(22,"nz-spin",8),y.ac(23,"nz-tree-select",201),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().subQuestionBankChange(t)})),y.Zb(),y.Zb(),y.Nc(24,Lt,3,2,"ng-template",null,202,y.Oc),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(9),t=y.Cc(25),n=y.lc();y.tc("formGroup",n.addExamFrom),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",e),y.Eb(2),y.Mc("color",n.addExamFrom.controls.missionName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",n.addExamFrom.value.missionName.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(2),y.tc("nzValue",1),y.Eb(1),y.tc("nzValue",2),y.Eb(1),y.tc("nzValue",3),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",n.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzNodes",n.exam)("nzDropdownStyle",y.wc(19,Nt))("nzTreeTemplate",t)}}function Ft(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function Dt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function jt(e,t){if(1&e&&(y.Nc(0,Ft,2,0,"div",17),y.Nc(1,Dt,2,1,"div",17)),2&e){const e=t.$implicit;y.tc("ngIf",e.hasError("required")),y.Eb(1),y.tc("ngIf",e.hasError("maxlength"))}}function _t(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(1),y.tc("nzType",e.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(e.title)}}function qt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(3),y.Qc(e.title)}}function At(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,_t,4,2,"span",17),y.Nc(2,qt,4,1,"span",17),y.Zb()),2&e){const e=t.$implicit;y.Eb(1),y.tc("ngIf",!e.isLeaf),y.Eb(1),y.tc("ngIf",e.isLeaf)}}function Ut(e,t){if(1&e){const e=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u5b50\u9898\u5e93"),y.Zb(),y.ac(3,"nz-form-control",200),y.ac(4,"nz-spin",8),y.ac(5,"nz-tree-select",210),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc(2).subQuestionBankChange(t)})),y.Zb(),y.Zb(),y.Nc(6,At,3,2,"ng-template",null,202,y.Oc),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(7),t=y.lc(2);y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",t.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzDisabled",!0)("nzNodes",t.exam)("nzAllowClear",!1)("nzDropdownStyle",y.wc(9,Nt))("nzTreeTemplate",e)}}function Bt(e,t){if(1&e){const e=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0"),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",192),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,jt,2,2,"ng-template",null,194,y.Oc),y.Zb(),y.Nc(10,Ut,8,10,"nz-form-item",17),y.ac(11,"div",208),y.ac(12,"button",209),y.ic("click",(function(){return y.Ec(e),y.lc().jobCancel()})),y.Pc(13,"\u53d6\u6d88"),y.Zb(),y.ac(14,"button",209),y.ic("click",(function(){return y.Ec(e),y.lc().jumpQuestionBank("curExamData")})),y.Pc(15,"\u8df3\u8f6c\u9898\u5e93 "),y.Zb(),y.ac(16,"button",209),y.ic("click",(function(){return y.Ec(e),y.lc().examDetermine()})),y.Pc(17,"\u786e\u5b9a"),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(9),t=y.lc();y.tc("formGroup",t.addExamFrom),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",e),y.Eb(2),y.Mc("color",t.addExamFrom.controls.missionName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",t.addExamFrom.value.missionName.length,"/50"),y.Eb(3),y.tc("ngIf",t.addExamFrom.value.subQuestionBank)}}function Rt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function $t(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function Qt(e,t){if(1&e&&(y.Nc(0,Rt,2,0,"div",17),y.Nc(1,$t,2,1,"div",17)),2&e){const e=t.$implicit;y.tc("ngIf",e.hasError("required")),y.Eb(1),y.tc("ngIf",e.hasError("maxlength"))}}function Wt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(1),y.tc("nzType",e.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(e.title)}}function Jt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(3),y.Qc(e.title)}}function Ht(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,Wt,4,2,"span",17),y.Nc(2,Jt,4,1,"span",17),y.Zb()),2&e){const e=t.$implicit;y.Eb(1),y.tc("ngIf",!e.isLeaf),y.Eb(1),y.tc("ngIf",e.isLeaf)}}function Kt(e,t){if(1&e){const e=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0 "),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",211),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,Qt,2,2,"ng-template",null,212,y.Oc),y.Zb(),y.ac(10,"nz-form-item"),y.ac(11,"nz-form-label",73),y.Pc(12,"\u4efb\u52a1\u7c7b\u578b "),y.Zb(),y.ac(13,"nz-form-control",213),y.ac(14,"nz-select",214),y.Vb(15,"nz-option",215),y.Vb(16,"nz-option",216),y.Vb(17,"nz-option",217),y.Zb(),y.Zb(),y.Zb(),y.ac(18,"nz-form-item"),y.ac(19,"nz-form-label",73),y.Pc(20,"\u5b50\u9898\u5e93"),y.Zb(),y.ac(21,"nz-form-control",200),y.ac(22,"nz-tree-select",201),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().execrisesSubQuestionBankChange(t)})),y.Zb(),y.Nc(23,Ht,3,2,"ng-template",null,218,y.Oc),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(9),t=y.Cc(24),n=y.lc();y.tc("formGroup",n.addJobFromSeting),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",e),y.Eb(2),y.Mc("color",n.addJobFromSeting.controls.name.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",n.addJobFromSeting.value.name.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(6),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzNodes",n.exercise)("nzDropdownStyle",y.wc(14,Nt))("nzTreeTemplate",t)}}function Gt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function Xt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function Yt(e,t){if(1&e&&(y.Nc(0,Gt,2,0,"div",17),y.Nc(1,Xt,2,1,"div",17)),2&e){const e=t.$implicit;y.tc("ngIf",e.hasError("required")),y.Eb(1),y.tc("ngIf",e.hasError("maxlength"))}}function en(e,t){if(1&e){const e=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0 "),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",211),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,Yt,2,2,"ng-template",null,212,y.Oc),y.Zb(),y.ac(10,"nz-form-item"),y.ac(11,"nz-form-label",73),y.Pc(12,"\u4efb\u52a1\u7c7b\u578b "),y.Zb(),y.ac(13,"nz-form-control",213),y.ac(14,"nz-select",214),y.Vb(15,"nz-option",215),y.Vb(16,"nz-option",216),y.Vb(17,"nz-option",217),y.Zb(),y.Zb(),y.Zb(),y.ac(18,"div",208),y.ac(19,"button",209),y.ic("click",(function(){return y.Ec(e),y.lc().jobCancel()})),y.Pc(20,"\u53d6\u6d88"),y.Zb(),y.ac(21,"button",209),y.ic("click",(function(){return y.Ec(e),y.lc().jumpQuestionBank("curJobData")})),y.Pc(22,"\u8df3\u8f6c\u9898\u5e93 "),y.Zb(),y.ac(23,"button",209),y.ic("click",(function(){return y.Ec(e),y.lc().jobDetermine()})),y.Pc(24,"\u786e\u5b9a"),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=y.Cc(9),t=y.lc();y.tc("formGroup",t.addJobFromSeting),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",e),y.Eb(2),y.Mc("color",t.addJobFromSeting.controls.name.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",t.addJobFromSeting.value.name.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)}}function tn(e,t){if(1&e){const e=y.bc();y.ac(0,"input",219),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().testPaperName=t}))("keyup.enter",(function(){return y.Ec(e),y.lc().getCallList("exam")})),y.Zb()}if(2&e){const e=y.lc();y.tc("ngModel",e.testPaperName)}}function nn(e,t){if(1&e){const e=y.bc();y.ac(0,"input",220),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().testPaperId=t}))("keyup.enter",(function(){return y.Ec(e),y.lc().getCallList("exam")})),y.Zb()}if(2&e){const e=y.lc();y.tc("ngModel",e.testPaperId)}}function cn(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(1),y.tc("nzType",e.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(e.title)}}function an(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(3),y.Qc(e.title)}}function on(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,cn,4,2,"span",17),y.Nc(2,an,4,1,"span",17),y.Zb()),2&e){const e=t.$implicit;y.Eb(1),y.tc("ngIf",!e.isLeaf),y.Eb(1),y.tc("ngIf",e.isLeaf)}}function sn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().transfer(t,!1)})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function rn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().cancelCall(t,"exam")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function ln(e,t){if(1&e){const e=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Pc(10),y.Zb(),y.ac(11,"td"),y.Pc(12),y.Zb(),y.ac(13,"td"),y.Pc(14),y.Zb(),y.ac(15,"td"),y.Nc(16,sn,2,0,"a",221),y.Nc(17,rn,2,0,"a",221),y.Vb(18,"nz-divider",222),y.ac(19,"a",223),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc().previewExaminationPaper(n)})),y.Pc(20,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc();y.Eb(2),y.Qc(e.id),y.Eb(2),y.Qc(e.name),y.Eb(2),y.Qc(e.year),y.Eb(2),y.Qc(n.getFormingMethod(e.groupWay)),y.Eb(2),y.Qc(n.getType(e.type)),y.Eb(2),y.Qc(e.number),y.Eb(2),y.Qc(e.score),y.Eb(2),y.tc("ngIf",n.showTransfer(e,!1)),y.Eb(1),y.tc("ngIf",n.showTransfer(e,!0))}}function dn(e,t){if(1&e){const e=y.bc();y.ac(0,"input",219),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().testExerciseName=t}))("keyup.enter",(function(){return y.Ec(e),y.lc().getCallList("exercise")})),y.Zb()}if(2&e){const e=y.lc();y.tc("ngModel",e.testExerciseName)}}function un(e,t){if(1&e){const e=y.bc();y.ac(0,"input",220),y.ic("ngModelChange",(function(t){return y.Ec(e),y.lc().testExerciseId=t}))("keyup.enter",(function(){return y.Ec(e),y.lc().getCallList("exercise")})),y.Zb()}if(2&e){const e=y.lc();y.tc("ngModel",e.testExerciseId)}}function hn(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(1),y.tc("nzType",e.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(e.title)}}function pn(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){const e=y.lc().$implicit;y.Eb(3),y.Qc(e.title)}}function bn(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,hn,4,2,"span",17),y.Nc(2,pn,4,1,"span",17),y.Zb()),2&e){const e=t.$implicit;y.Eb(1),y.tc("ngIf",!e.isLeaf),y.Eb(1),y.tc("ngIf",e.isLeaf)}}function gn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().transfer(t,!0)})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function mn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().cancelCall(t,"exercise")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function fn(e,t){if(1&e){const e=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Nc(10,gn,2,0,"a",221),y.Nc(11,mn,2,0,"a",221),y.Vb(12,"nz-divider",222),y.ac(13,"a",223),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc().previewExaminationPaper(n)})),y.Pc(14,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc();y.Eb(2),y.Qc(e.id),y.Eb(2),y.Qc(e.name),y.Eb(2),y.Qc(e.number),y.Eb(2),y.Qc(e.score),y.Eb(2),y.tc("ngIf",n.showTransfer(e,!1)),y.Eb(1),y.tc("ngIf",n.showTransfer(e,!0))}}function zn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().transferQuestionnaire(t,"questionnaireType")})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function vn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().cancelCall(t,"questionnaireType")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function yn(e,t){if(1&e){const e=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Pc(10),y.Zb(),y.ac(11,"td"),y.Pc(12),y.Zb(),y.ac(13,"td"),y.Nc(14,zn,2,0,"a",221),y.Nc(15,vn,2,0,"a",221),y.Vb(16,"nz-divider",222),y.ac(17,"a",223),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc().previewExaminationQuestionnaire(n)})),y.Pc(18,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc();y.Eb(2),y.Qc(e.paperId),y.Eb(2),y.Qc(e.name),y.Eb(2),y.Qc(n.getQuestionnaireType(e.evaluateId)),y.Eb(2),y.Qc(e.majorName),y.Eb(2),y.Qc(e.questionNumber),y.Eb(2),y.Qc(n.getEvaluationStatus(e.status)),y.Eb(2),y.tc("ngIf",n.showTransfer(e,!1)),y.Eb(1),y.tc("ngIf",n.showTransfer(e,!0))}}function Sn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().transferQuestionnaire(t,"evaluationType")})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function kn(e,t){if(1&e){const e=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(e);const t=y.lc().$implicit;return y.lc().cancelCall(t,"evaluationType")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function Pn(e,t){if(1&e){const e=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Pc(10),y.Zb(),y.ac(11,"td"),y.Pc(12),y.Zb(),y.ac(13,"td"),y.Nc(14,Sn,2,0,"a",221),y.Nc(15,kn,2,0,"a",221),y.Vb(16,"nz-divider",222),y.ac(17,"a",223),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc().previewExaminationQuestionnaire(n)})),y.Pc(18,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc();y.Eb(2),y.Qc(e.paperId),y.Eb(2),y.Qc(e.name),y.Eb(2),y.Qc(n.getEvaluationType(e.evaluateId)),y.Eb(2),y.Qc(e.majorName),y.Eb(2),y.Qc(e.questionNumber),y.Eb(2),y.Qc(n.getEvaluationStatus(e.status)),y.Eb(2),y.tc("ngIf",n.showTransfer(e,!1)),y.Eb(1),y.tc("ngIf",n.showTransfer(e,!0))}}function Cn(e,t){1&e&&(y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u673a\u8003\u7c7b\u578b"),y.Zb(),y.ac(3,"nz-form-control",224),y.ac(4,"nz-select",225),y.Vb(5,"nz-option",226),y.Vb(6,"nz-option",227),y.Vb(7,"nz-option",228),y.Zb(),y.Zb(),y.Zb()),2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18))}function En(e,t){1&e&&(y.ac(0,"div",229),y.Pc(1," \u8865\u8003\u6309\u7ed3\u8bfe28\u5929\u540e\u9047\u5230\u768410\u53f7\u5f00\u653e\u6743\u9650\uff0c\u76f4\u5230\u5408\u683c\u4e3a\u6b62 "),y.Zb())}function wn(e,t){if(1&e){const e=y.bc();y.ac(0,"div"),y.ac(1,"button",230),y.ic("click",(function(){return y.Ec(e),y.lc().isVisible=!1})),y.Pc(2,"\u53d6\u6d88"),y.Zb(),y.ac(3,"button",231),y.ic("click",(function(){return y.Ec(e),y.lc().saveExamination()})),y.Pc(4,"\u786e\u5b9a"),y.Zb(),y.Zb()}if(2&e){const e=y.lc();y.Eb(3),y.tc("nzLoading",e.examSettingLoading)}}function xn(e,t){if(1&e){const e=y.bc();y.ac(0,"div"),y.ac(1,"button",230),y.ic("click",(function(){return y.Ec(e),y.lc().isQuestionnaireVisible=!1})),y.Pc(2,"\u53d6\u6d88"),y.Zb(),y.ac(3,"button",63),y.ic("click",(function(){return y.Ec(e),y.lc().saveQuestionnaire()})),y.Pc(4,"\u786e\u5b9a"),y.Zb(),y.Zb()}}function Mn(e,t){if(1&e){const e=y.bc();y.ac(0,"i",237),y.ic("click",(function(){return y.Ec(e),y.lc().$implicit.expend=!1})),y.Zb()}}function On(e,t){if(1&e){const e=y.bc();y.ac(0,"i",238),y.ic("click",(function(){return y.Ec(e),y.lc().$implicit.expend=!0})),y.Zb()}}const In=function(e){return{h0:e,"association-list":!0}},Zn=function(e){return{"background-color":e,marginTop:"-5px"}};function Tn(e,t){if(1&e){const e=y.bc();y.ac(0,"div",239),y.ac(1,"div",240),y.ac(2,"span",241),y.Vb(3,"nz-avatar",117),y.Pc(4),y.Zb(),y.ac(5,"nz-input-number",242),y.ic("ngModelChange",(function(n){return y.Ec(e),t.$implicit.pageNum=n}))("ngModelChange",(function(t){return y.Ec(e),y.lc(2).modelChangeDetect(t)}))("nzFocus",(function(){return y.Ec(e),y.lc(2).current=void 0}))("nzBlur",(function(){return y.Ec(e),y.lc(2).current=void 0})),y.Zb(),y.ac(6,"span",243),y.ac(7,"label",124),y.ic("ngModelChange",(function(n){return y.Ec(e),t.$implicit.isBindAssoicate=n}))("ngModelChange",(function(n){y.Ec(e);const i=t.$implicit;return y.lc(2).isBindChange(n,i)})),y.Zb(),y.ac(8,"button",244),y.ic("click",(function(){y.Ec(e);const n=t.$implicit;return y.lc(2).getBlur(n)})),y.Pc(9),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){const e=t.$implicit,n=y.lc(),i=n.$implicit,c=n.index,a=y.lc();y.tc("ngClass",y.xc(15,In,i.expend)),y.Eb(2),y.tc("title",e.name),y.Eb(1),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.xc(17,Zn,a.getColor(e.taskType)))("nzText",a.getText(e.taskType)),y.Eb(1),y.Rc(" ",e.name," "),y.Eb(1),y.tc("ngModel",e.pageNum)("nzMin",1)("nzMax",1e6)("nzStep",1),y.Eb(2),y.tc("nzDisabled",a.currentBindLength>=a.bingLimit&&!a.assocateLists[c].pageNum||!e.pageNum)("ngModel",e.isBindAssoicate),y.Eb(1),y.tc("disabled",a.currentBindLength>=a.bingLimit&&!a.assocateLists[c].pageNum||!e.pageNum||a.assocateLists[c].pageNum===e.pageNum),y.Eb(1),y.Qc("\u7ed1\u5b9a")}}function Ln(e,t){if(1&e&&(y.ac(0,"div",232),y.ac(1,"div",233),y.Pc(2),y.Nc(3,Mn,1,0,"i",234),y.Nc(4,On,1,0,"i",235),y.Zb(),y.Nc(5,Tn,10,19,"div",236),y.Zb()),2&e){const e=t.$implicit;y.Eb(2),y.Rc(" ","\u7b2c"+e[0].sectionSeq+"\u8282 "+e[0].sectionName," "),y.Eb(1),y.tc("ngIf",e.expend),y.Eb(1),y.tc("ngIf",!e.expend),y.Eb(1),y.tc("ngForOf",e)}}function Nn(e,t){if(1&e){const e=y.bc();y.ac(0,"div"),y.ac(1,"button",63),y.ic("click",(function(){return y.Ec(e),y.lc().completebind()})),y.Pc(2,"\u5173\u95ed"),y.Zb(),y.Zb()}}function Vn(e,t){if(1&e){const e=y.bc();y.ac(0,"app-resource-preview-modal",245),y.ic("closePreview",(function(){return y.Ec(e),y.lc().closePreview()})),y.Zb()}if(2&e){const e=y.lc();y.tc("isPreviewpolyway",e.isPreviewpolyway)("previewTitle",e.previewTitle)("resourceUrl",e.resourceUrl)}}const Fn=function(){return{maxHeight:"550px"}},Dn=function(){return{y:"350px"}},jn=function(){return{standalone:!0}},_n=function(){return{maxHeight:"500px",overflowY:"auto"}};let qn=(()=>{class e{constructor(e,t,n,i,c,o,r,l,d,u,h,b){this.fb=e,this.route=t,this.menuService=n,this.nzMesService=i,this.nzModalService=c,this.aliOssService=o,this.modalService=r,this.knowledgeManageService=l,this.trainManageService=d,this.courseMgService=u,this.statisticsLogService=h,this.doc=b,this._PAGE_ID_="MaterialCallResource",this.active1=!0,this.active2=!0,this.active3=!0,this.active4=!0,this.listLoading=!1,this.hanoutLoading=!1,this.isStandard=!1,this.totalPage=0,this.handouts=[],this.taskList=[],this.handoutsMaterial=[],this.handoutsLecture=[],this.handoutsRecording=[],this.teacherList=[],this.exam=[],this.exercise=[],this.examSearch=[],this.exerciseSearch=[],this.searchLoad=!1,this.examListPreview=!1,this.exerciseListPreview=!1,this.listOfData=[],this.listOfDataExercise=[],this.listOfQuestionnaireData=[],this.listOfEvaluationData=[],this.selectedValue="",this.examSubQuestionBankExam=[],this.examSubQuestionBankExamBak=[],this.homeworkSubQuestionBank=[],this.homeworkSubQuestionBankBak=[],this.testPaperName="",this.testPaperId="",this.testExerciseName="",this.testExerciseId="",this.NumberS=Number,this.isPreviewpolyway=!1,this.orgCode=s.a.getOrgCode(),this.value=1,this.answerTimesValue=1,this.isVisible=!1,this.isQuestionnaireVisible=!1,this.visibleAssociate=!1,this.assocateList=[],this.tokenObj=p.a.getTkToken(),this.currentExam={id:""},this.currentQuestionnair={id:""},this.currentBindLength=0,this.courseId="",this.preview="0",this.exerciseType="1",this.coursePacketId="",this.professionId="",this.lessonCount=1,this.isSmart="0",this.assocateLists=[],this.assocateClassLists=[],this.defaultExpandedKeys=[],this.examType="1",this.reset=!0,this.resourceUrl="",this.questionnairePreview=!1,this.evaluationPreview=!1,this.isCallLoading=!1,this.loading=!1,this.examSettingLoading=!1,this.bindLoading=!1,this.instructorLoading=!1,this.trainLoading=!1,this.queryKeywords="1",this.queryKeywordsJob="1",this.previewTitle="",this.previewStart=!1,this.limitTask=1e6,this.bingLimit=1e6,this.associateing={},this.curJobData={},this.curExamData={};const g=a.a.getSelection();g&&(this.defaultSection=JSON.parse(g));const m=a.a.getChapter();m&&(this.defaultExpandedKeys=[m])}ngOnInit(){this.initParams(),this.initFrom()}examSetting(e){"4"===e.taskType?(this.currentExam=e,this.getExamination()):this.questionnaireSetting(e)}getExamType(e){switch(String(e)){case"1":return"\u3010\u9636\u6bb5\u8003\u8bd5\u3011";case"2":return"\u3010\u5355\u79d1\u8003\u8bd5\u3011";case"3":return"\u3010\u6a21\u62df\u8003\u8bd5\u3011";case"4":return"\u3010\u5bc6\u62bc\u8003\u8bd5\u3011";case"5":return"\u3010\u673a\u8003\u8003\u8bd5\u3011";case"6":return"\u3010\u5b9e\u64cd\u8003\u8bd5\u3011"}}questionnaireSetting(e){this.currentQuestionnair=e,this.courseMgService.getExamination(e.id).subscribe(e=>{if(200===e.status){const t=JSON.parse(JSON.stringify(e.data||{}));t.answerTimes&&0!==Number(t.answerTimes)?(this.answerTimesValue=t.answerTimes,this.questionnairSettingForm.patchValue({answerTimes:1})):(this.questionnairSettingForm.patchValue({answerTimes:0}),this.answerTimesValue=void 0);for(const e in this.questionnairSettingForm.controls)this.questionnairSettingForm.controls[e].markAsUntouched(),this.questionnairSettingForm.controls[e].markAsPristine(),this.questionnairSettingForm.controls[e].updateValueAndValidity();this.isQuestionnaireVisible=!0}})}saveQuestionnaire(){const{answerTimes:e}=this.questionnairSettingForm.value;if(1===e&&!this.answerTimesValue)return void this.nzMesService.warning("\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u7684\u7b54\u9898\u6b21\u6570");const t={answerTimes:Object.is(e,1)?String(this.answerTimesValue):"0",id:this.currentQuestionnair.id};this.courseMgService.examSetting(t).subscribe(e=>{201===e.status&&(this.statisticsLogService.statisticsPacketInfoLog({name:("6"===this.currentQuestionnair.taskType?"\u95ee\u5377":"\u6d4b\u8bc4")+"\u4efb\u52a1\u6743\u9650\u8bbe\u7f6e\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(t)}),this.isQuestionnaireVisible=!1)})}saveExamination(){if(1===this.examSettingForm.value.answerTimes&&!this.value)return void this.nzMesService.warning("\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u7684\u7b54\u9898\u6b21\u6570");if(Object.keys(this.examSettingForm.controls).forEach(e=>{this.examSettingForm.controls[e].markAsDirty(),this.examSettingForm.controls[e].updateValueAndValidity()}),this.examSettingForm.invalid)return;this.examSettingLoading=!0;const e=JSON.parse(JSON.stringify(this.examSettingForm.value));Object.is(e.answerTimes,1)&&(e.answerTimes=String(this.value)),e.id=this.currentExam.id,this.courseMgService.examSetting(e).subscribe(t=>{this.examSettingLoading=!1,201===t.status&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u8003\u8bd5\u4efb\u52a1\u8003\u8bd5\u8bbe\u7f6e\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),this.isVisible=!1,this.getTaskList())},()=>{this.examSettingLoading=!1})}conversionNode(e,t){return e.length&&e.forEach((n,i)=>{n.sublibraryModuleList&&n.sublibraryModuleList.length&&(e[i].children=n.sublibraryModuleList,e[i].children.forEach((t,n)=>{e[i].children[n].title=t.name,e[i].children[n].key=t.id,e[i].children[n].isLeaf=!0})),e[i].title=n.name,e[i].key=n.code,"exam"!==t&&"exercise"!==t||(e[i].disabled=!0,e[i].selectable=!1),n.sublibraryModuleList&&n.sublibraryModuleList.length||(e[i].isLeaf=!0)}),e}sectionDrop(e,t){const n=[],i=e=>{201===e.status||this.nzMesService.error(e.message||"\u79fb\u52a8\u5931\u8d25\uff0c\u672a\u77e5\u9519\u8bef\uff01")},c=e=>{this.nzMesService.error(JSON.stringify(e))};"3"===t?(Object(h.g)(this.taskList,e.previousIndex,e.currentIndex),this.taskList.forEach((e,t)=>{const i={};i.id=e.id,i.seq=this.taskList.length-t,this.taskList[t].seq=i.seq,n.push(i)}),this.courseMgService.saveOrUpdateTask(n).subscribe(i,c)):("1"===t?(Object(h.g)(this.handoutsLecture,e.previousIndex,e.currentIndex),this.handoutsLecture.forEach((e,t)=>{const i={};i.id=e.id,i.seq=this.handoutsLecture.length-t,this.handoutsLecture[t].seq=i.seq,n.push(i)})):"2"===t?(Object(h.g)(this.handoutsRecording,e.previousIndex,e.currentIndex),this.handoutsRecording.forEach((e,t)=>{const i={};i.id=e.id,i.seq=this.handoutsRecording.length-t,this.handoutsRecording[t].seq=i.seq,n.push(i)})):(Object(h.g)(this.handoutsMaterial,e.previousIndex,e.currentIndex),this.handoutsMaterial.forEach((e,t)=>{const i={};i.id=e.id,i.seq=this.handoutsMaterial.length-t,this.handoutsMaterial[t].seq=i.seq,n.push(i)})),this.courseMgService.saveOrUpdate(n).subscribe(i,c)),console.log(this.handoutsRecording)}getExamination(){this.courseMgService.getExamination(this.currentExam.id).subscribe(e=>{if(200===e.status){const t=JSON.parse(JSON.stringify(e.data||{}));this.examType=t.examType;const n={id:t.id,examLength:t.examLength||0,passScore:t.passScore||0,paperType:t.paperType||"1",isRedo:t.isRedo&&String(t.isRedo)||"0",computerType:t.computerType||"1",resultWay:t.resultWay||"1",configType:t.configType||"1"};this.examSettingForm.patchValue(n),Object.is(t.answerTimes,0)?(this.value=void 0,this.examSettingForm.patchValue({answerTimes:0})):(this.value=t.answerTimes,this.examSettingForm.patchValue({answerTimes:1}));for(const e in this.examSettingForm.controls)this.examSettingForm.controls[e].markAsUntouched(),this.examSettingForm.controls[e].markAsPristine(),this.examSettingForm.controls[e].updateValueAndValidity();this.isVisible=!0}})}getTeacher(){this.instructorLoading=!0,this.knowledgeManageService.getTeacher().subscribe(e=>{this.instructorLoading=!1,200===e.status&&(this.teacherList=e.data)},()=>{this.instructorLoading=!1})}initFrom(){this.examSettingForm=this.fb.group({id:[""],examLength:[0,o.w.required],passScore:[0,o.w.required],computerType:["1"],isRedo:["0"],paperType:["1"],answerTimes:[0,o.w.required],resultWay:["1",o.w.required],configType:["1",o.w.required]}),this.questionnairSettingForm=this.fb.group({answerTimes:[1,o.w.required]}),this.addJobFromSeting=this.fb.group({id:[this.courseId],taskForm:["2",o.w.required],name:["\u8bfe\u540e\u7ec3\u4e60",[o.w.required,Object(m.b)(),o.w.maxLength(50)]],subQuestionBank:["",[o.w.required]]}),this.addExamFrom=this.fb.group({missionName:["",[o.w.required,o.w.maxLength(50),Object(m.b)()]],formingMethod:[1,[o.w.required]],subQuestionBank:["",[o.w.required]]}),this.polyway=this.fb.group({videoUrl:["",[o.w.required]],authorId:["",[o.w.required]],videoType:["1",[o.w.required]],seq:[1,[o.w.required]],id:[""],attachmentName:["",[o.w.required,o.w.maxLength(50),Object(m.b)()]]}),this.localVideo=this.fb.group({videoUrl:[[],[o.w.required]],authorId:["",[o.w.required]],videoType:["1",[o.w.required]],seq:[1,[o.w.required]],id:[""],attachmentName:["",[o.w.required,o.w.maxLength(50),Object(m.b)()]]})}initParams(){const{courseId:e,id:t,professionId:n,status:i,code:c,teachType:o,name:s,auditStatus:r,lessonCount:l,isSmart:d,preview:u,isUsed:h,exerciseType:p}=a.a.getPacketInfo();this.courseId=e,this.coursePacketId=t,this.professionId=n,this.isStandard=h>0,this.code=c,this.teachType=o,this.title=s,this.status=i,this.auditStatus=r,this.lessonCount=Number(l),this.isSmart=d,this.preview=u,this.exerciseType=p}getTaskList(){this.listLoading=!0,this.knowledgeManageService.getTaskList({courseSectionId:this.curNode.data.id}).subscribe(e=>{this.isCallLoading=!1,this.listLoading=!1,200===e.status&&(e.data&&e.data.length?(this.taskList=e.data,this.taskList.forEach((e,t)=>{this.taskList[t].isDownloadType="1"===e.downloadType,this.taskList[t].isNeed="1"===e.isNeed}),this.taskList.sort((e,t)=>e.seq>t.seq?-1:e.seq<t.seq?1:e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0)):this.taskList=[])},()=>{this.listLoading=!1,this.isCallLoading=!1})}getHandoutFiles(){if(!this.curNode)return void console.error("please select node");const e=this.courseMgService.sectionFileList_courseSectionFile(this.curNode.data.id);e&&(this.hanoutLoading=!0,e.subscribe(e=>{this.hanoutLoading=!1,200===e.status?(this.handouts=e.data,this.handouts.forEach((e,t)=>{this.handouts[t].isDownloadType="1"===e.downloadType}),this.handoutsLecture=this.getTypeData("101"),this.handoutsMaterial=this.getTypeData("102"),this.handoutsRecording=this.getTypeData("103")):this.nzMesService.error(e.message)},()=>{this.hanoutLoading=!1}))}getTypeData(e){const t=this.handouts.filter(t=>t.type===e).map(e=>{const t=s.a.getFileExt(e.title);return e.aattachmentExt=Object.is(t,e.title)?"":t,e.attachmentName=e.title||e.attachmentName,e.attachmentPath=e.attachmentPath,e.isMainFile="0"!==e.isMainFile,e});return t.sort((e,t)=>e.seq>t.seq?-1:e.seq<t.seq?1:e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0),t}getssocateList(){this.courseMgService.getssocateList(this.curNode.data.courseChapterId,this.currentAssocate.id).subscribe(e=>{if(200===e.status)if(e.data&&e.data.length){let t;this.assocateList=e.data,this.assocateList.forEach((e,t)=>{this.assocateList[t].isBindAssoicate=!!e.pageNum}),this.assocateLists=JSON.parse(JSON.stringify(this.assocateList)),this.assocateClassLists=[];let n=[];this.assocateList.forEach((e,i)=>{t||(t=e.sectionSeq),t===e.sectionSeq?(n.push(e),i===this.assocateList.length-1&&this.assocateClassLists.push(n)):(this.assocateClassLists.push(n),n=[],t=e.sectionSeq,n.push(e),i===this.assocateList.length-1&&this.assocateClassLists.push(n))}),this.currentBindLength=e.data.filter(e=>e.pageNum).length}else this.assocateList=[]})}previewpolyway(e){this.previewTitle="",this.isPreviewpolyway=!0,this.resourceUrl=this.polywayId=e.attachmentPath,this.previewStart=!0}previewHandout(e){e.attachmentPath.indexOf("/")<0?this.previewpolyway(e):(this.previewTitle=e.attachmentName,this.isPreviewpolyway=!1,this.resourceUrl=e.attachmentPath,this.previewStart=!0)}uploadHandout(e){const t={node:this.curNode,type:e};let n="";n="104"===e?"learnSet-task-action":"101"===e?"learnSet-lecture-action":"102"===e?"learnSet-material-action":"learnSet-record-action","101"===e?(t.seq=s.a.getMaxSeq(this.handoutsLecture),t.maxSize=100):"102"===e?t.seq=s.a.getMaxSeq(this.handoutsMaterial):"104"===e&&(t.seq=s.a.getMaxSeq(this.taskList)),"104"===e&&(t.limit=this.limitTask-this.taskList.length),this.nzModalService.create({nzTitle:"\u672c\u5730\u4e0a\u4f20",nzContent:c.a,nzComponentParams:t,nzFooter:null,nzMaskClosable:!1}).afterClose.subscribe(e=>{e&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u672c\u5730\u4e0a\u4f20",actionCode:z.j.packetInfo[n].addCode,content:JSON.stringify(e)}),this.getHandoutFiles(),this.getTaskList())})}nodeChange(e){a.a.setChapter(e.data.courseChapterId),a.a.setSelection(e.data),this.curNode=e,this.getHandoutFiles(),this.getTaskList()}getDescType(e){return["\u9605\u8bfb\u4efb\u52a1","\u6848\u4f8b\u4efb\u52a1","\u4f5c\u4e1a\u4efb\u52a1","\u5b9e\u8bad\u4efb\u52a1","\u8003\u8bd5\u4efb\u52a1","\u5b9e\u6218\u4efb\u52a1","\u95ee\u5377","\u6d4b\u8bc4"][e]}delHandout(e,t){this.nzModalService.confirm({nzTitle:"\u8b66\u544a",nzContent:`\u786e\u5b9a\u8981\u5220\u9664\u201c${e.attachmentName?e.attachmentName:e.name}\u201d\u5417\uff1f`,nzOnOk:()=>new Promise(n=>{(t?this.courseMgService.del_courseSectionFileTask(e.id):this.courseMgService.del_courseSectionFile(e.id)).subscribe(i=>{if(204!==i.status)return this.nzMesService.error(i.message),void n(!1);if(t){this.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664"+this.getDescType(e.taskType),actionCode:z.j.packetInfo["learnSet-task-action"].delCode,content:e.id});const t=[],n=e=>{201===e.status||this.nzMesService.error(e.message)},i=e=>{this.nzMesService.error(JSON.stringify(e))};this.taskList.filter(t=>t.id!==e.id).forEach((e,n)=>{const i={};i.id=e.id,i.seq=n,t.push(i)}),t.length&&this.courseMgService.saveOrUpdateTask(t).subscribe(n,i)}else{const t=e.type;let n,i;"101"===t?(n="\u8bb2\u4e49",i="learnSet-lecture-action"):"103"===t?(n="\u5f55\u64ad\u89c6\u9891",i="learnSet-record-action"):"102"===t&&(n="\u8d44\u6599",i="learnSet-material-action"),this.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664"+n,actionCode:z.j.packetInfo[i].delCode,content:e.id})}e.isMainFile?(this.getTaskList(),this.getHandoutFiles()):t?this.getTaskList():this.getHandoutFiles(),n(!0)})})})}mainFileChange(e,t){const n=[this.courseMgService.modifySectionResource({id:t.id,isMainFile:e?"1":"0"})];e&&this.handoutsLecture.every((e,i)=>{if(!e.isMainFile||e.id===t.id)return!0;n.push(this.courseMgService.modifySectionResource({id:e.id,isMainFile:"0"})),this.handoutsLecture[i].isMainFile=!1}),Object(l.a)(n).subscribe(n=>{201===n[0].status?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u4e3b\u8bb2\u4e49\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify({id:t.id,isMainFile:e?"1":"0"})}),t.isMainFile=e,this.getTaskList()):this.nzMesService.error(n[0].message)},e=>{this.nzMesService.error(JSON.stringify(e))})}gradeTypeChange(e,t){const n={id:t.id,gradeType:e,needTeacherProc:"1"===e?0:1};this.courseMgService.modifySectionResourceTask(n).subscribe(i=>{201===i.status?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u4f5c\u4e1a\u4efb\u52a1\u81ea\u8bc4\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(n)}),t.gradeType=e):this.nzMesService.error(i.message)},e=>{this.nzMesService.error(JSON.stringify(e))})}isGradeChange(e,t){const n={id:t.id,isGrade:e};this.courseMgService.modifySectionResourceTask(n).subscribe(i=>{201===i.status?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u6848\u4f8b\u4efb\u52a1\u662f\u5426\u8bc4\u5206\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(n)}),t.isGrade=e):this.nzMesService.error(i.message)},e=>{this.nzMesService.error(JSON.stringify(e))})}downloadChange(e,t,n){const i={id:t.id,downloadType:e};let c;c=n?this.courseMgService.modifySectionResourceTask(i):this.courseMgService.modifySectionResource(i),c.subscribe(c=>{201===c.status?(this.statisticsLogService.statisticsPacketInfoLog(n?{name:"\u9605\u8bfb\u4efb\u52a1\u80fd\u5426\u4e0b\u8f7d\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(i)}:{name:"\u8bb2\u4e49\u80fd\u5426\u4e0b\u8f7d\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify(i)}),t.downloadType=e):this.nzMesService.error(c.message)},e=>{this.nzMesService.error(JSON.stringify(e))})}videoUpload(e,t=!0,n){this.reset=t,this.getTeacher();for(const i in this[e].controls)this[e].controls[i].markAsUntouched(),this[e].controls[i].markAsPristine(),this[e].controls[i].updateValueAndValidity();t&&this[e].patchValue({seq:this.handoutsRecording[0]&&this.handoutsRecording[0].seq?this.handoutsRecording[0].seq+1:1}),this.modalFormRef=this.modalService.create({nzTitle:this.getLabel(e,t),nzContent:this[e+"Modal"],nzMaskClosable:!1,nzWrapClassName:"vertical-center-modal",nzCancelText:"\u53d6\u6d88",nzOkText:"\u4fdd\u5b58",nzOnOk:t=>this.comfirmUpload(e,n),nzOnCancel:t=>{this[e].patchValue({videoUrl:"localVideo"===e?[]:"",authorId:"",videoType:"1",seq:1,attachmentName:"",id:""})}})}getLabel(e,t){return t?"polyway"===e?"\u4fdd\u5229\u5a01":"\u672c\u5730\u4e0a\u4f20":"\u7f16\u8f91\u4fe1\u606f"}comfirmUpload(e,t){return new Promise((n,i)=>{for(const t in this[e].controls)this[e].controls[t].markAsDirty(),this[e].controls[t].updateValueAndValidity();if(this[e].invalid)return this.nzMesService.warning("\u8bf7\u6309\u89c4\u5219\u586b\u5199\u6240\u6709\u5fc5\u586b\u9879"),void n(!1);const{value:c}=this[e],{videoUrl:a}=c,o=this.getParams(e,this.reset);this.reset?"polyway"===e?this.getDuration(a).subscribe(t=>{200===t.code?t.data.length?(o[0].videoLength=this.getVideoLength(t.data[0].duration),this.storingData(o,n,e,this.reset)):(this.nzMesService.warning("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u89c6\u9891ID"),n(!1)):(this.nzMesService.warning("\u4fdd\u5229\u5a01\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),n(!1))}):(o[0].videoLength=this.getVideoLength(o[0].attachmentPath[0].videoLength),o[0].attachmentPath=o[0].attachmentPath[0].path,this.storingData(o,n,e,this.reset)):("string"!=typeof o[0].attachmentPath&&(o[0].attachmentPath=o[0].attachmentPath[0].path,o[0].resourceId=t.resourceId),this.storingData(o,n,e,this.reset))})}getParams(e,t){const{courseId:n,coursePacketId:i}=this,{id:c,courseChapterId:a}=this.curNode.data,{value:o}=this[e],{authorId:r,videoType:l,seq:d,videoUrl:u,attachmentName:h,videoLength:p}=o,b={courseId:n,coursePacketId:i,courseChapterId:a,courseSectionId:c,title:h,attachmentName:h,attachmentPath:u,authorId:r,attachmentExt:"string"==typeof u?"":s.a.getFileExt(u[0].name),authorName:this.teacherList.filter(e=>Object.is(e.id,r))[0].name,type:"103",sourceType:2,seq:d,videoType:l,videoLength:p};return t||(b.id=o.id),[b]}getDuration(e){const t={ptime:(new Date).getTime(),vids:e},n=Object(b.a)(Object(s.b)(t)+r.a.secretkey).toUpperCase();return t.sign=n,this.courseMgService.getVideoLength(t,r.a.userid)}storingData(e,t,n,i){this.courseMgService.batchSave_courseSectionFile(e).subscribe(c=>{if(201===c.status){this.statisticsLogService.statisticsPacketInfoLog({name:(i?"\u65b0\u589e":"\u7f16\u8f91")+"\u5f55\u64ad\u89c6\u9891",actionCode:z.j.packetInfo["learnSet-record-action"][i?"addCode":"modify"],content:JSON.stringify(e)}),this.getHandoutFiles(),this[n].patchValue({videoUrl:"localVideo"===n?[]:"",authorId:"",videoType:"1",seq:1,attachmentName:"",id:""});for(const e in this[n].controls)this[n].controls[e].markAsUntouched(),this[n].controls[e].markAsPristine(),this[n].controls[e].updateValueAndValidity();this.modalFormRef.destroy(),t(!0)}})}callSchoolEnterpriseLib(e,t,n){let i;"1"===t?i=this.taskList:"101"===t?i=this.handoutsLecture:"102"===t?i=this.handoutsMaterial:"103"===t&&(i=this.handoutsRecording);const c=i.map(e=>({taskId:e.id,id:e.resourceId})),o={type:"scp-section-handout",professionId:this.professionId,sectionInfo:{courseId:this.courseId,coursePacketId:this.coursePacketId,courseChapterId:this.curNode.data.courseChapterId,courseSectionId:this.curNode.data.id},seq:s.a.getMaxSeq(i),nodes:c};o.isStandard=this.isStandard?"1":"","1"===t&&(o.limit=this.limitTask),a.a.putScpResourceMaterial(o),"read"===e?a.a.removeReadtree():"case"===e?a.a.removeCasetree():"setting"===e&&a.a.removeTrainTree(),this.menuService.gotoUrl({url:"/m/rm/"+e,paramUrl:"?from=scp&task="+t})}downLoad(e){let t=e.attachmentName;if(t.indexOf(".")<0){const n=e.attachmentPath.split(".");t+="."+n[n.length-1]}this.aliOssService.downloadFile(t,e.attachmentPath).subscribe(e=>e)}getCallList(e){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield s.a.getProdIdSync(),n={id:"exam"===e?String(this.testPaperId)&&"null"!==String(this.testPaperId)?this.testPaperId:"":String(this.testExerciseId)&&"null"!==String(this.testExerciseId)?this.testExerciseId:"",proId:t,groupWay:"exercise"===e?"":this.selectedValue?this.selectedValue:"",courseCode:this.code,name:"exam"===e?this.testPaperName?this.testPaperName:"":this.testExerciseName?this.testExerciseName:"",isNotTaskType:"exam"===e?"4":"2",sublibraryModuleIds:"exam"===e?this.examSubQuestionBankExamBak.join(","):this.homeworkSubQuestionBankBak.join(","),pageSize:"10000",pageNum:"1"};s.a.getAjax(r.a.questionBankApi+"system/qkcPaper/list",n).subscribe(t=>{try{const n=JSON.parse(t);200===n.code?"exam"===e?this.listOfData=n.data.rows:this.listOfDataExercise=n.data.rows:this.nzMesService.warning(t)}catch(n){this.nzMesService.warning(t||n)}})}))}getSubQuestionBank(e){return new Promise(t=>{this.searchLoad=!0,s.a.getAjax(r.a.questionBankApi+"system/qkcPaper/courseCode",{courseCode:this.code,type:"exam"===e||"examSearch"===e?"EXAM":"PRACTICE"}).subscribe(n=>{this.searchLoad=!1;try{const i=JSON.parse(n);200===i.code?(this[e]=this.conversionNode(i.data,e),t(!0)):(this.nzMesService.error(i.message),t(!1))}catch(i){t(!1),this.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38")}})})}getTaskFormText(e){switch(e){case"0":return"\u3010\u8bfe\u524d\u3011";case"1":return"\u3010\u8bfe\u4e2d\u3011";case"2":return"\u3010\u8bfe\u540e\u3011"}}entryExercises(e){return Object(i.a)(this,void 0,void 0,(function*(){this.curJobData=e||{};const t=yield s.a.getProdIdSync();this.getSubQuestionBank("exercise").then(n=>{if(n){if(e)this.addJobFromSeting.patchValue({name:e.name,taskForm:e.taskForm,subQuestionBank:Number(e.quebankId)});else{const e=p.a.getPracSubquestionbank();this.addJobFromSeting.patchValue({name:"\u8bfe\u540e\u7ec3\u4e60",taskForm:"2",subQuestionBank:e?Number(e):""})}this.modalRef=this.nzModalService.create({nzTitle:e?"\u7f16\u8f91\u4f5c\u4e1a":"\u65b0\u589e\u4f5c\u4e1a",nzContent:e?this.jobSettingsEdit:this.jobSettings,nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzFooter:e?null:void 0,nzOkText:"\u786e\u5b9a",nzOnOk:()=>new Promise(n=>{if(Object.keys(this.addJobFromSeting.controls).forEach(e=>{this.addJobFromSeting.controls[e].markAsDirty(),this.addJobFromSeting.controls[e].updateValueAndValidity()}),this.addJobFromSeting.invalid)n(!1);else if(e)this.realSave({id:e.id,name:this.addJobFromSeting.value.name,taskForm:this.addJobFromSeting.value.taskForm}).subscribe(e=>{e?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u4f5c\u4e1a",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),n(!0)):n(!1)});else{const e={name:this.addJobFromSeting.value.name,proId:t,courseCode:this.code,taskType:2,groupWay:1,sublibraryModuleId:this.addJobFromSeting.value.subQuestionBank,userPhone:p.a.getUser().userName};s.a.postAjax(r.a.questionBankApi+"system/qkcPaper/savePaper",e).subscribe(e=>{try{const c=JSON.parse(e);if(200===c.code){const e={proId:t,courseCode:this.code,mobile:p.a.getUser().userName};s.a.postAjax(r.a.questionBankApi+"system/qkcPaper/saveDefaultCourse",e).subscribe(e=>Object(i.a)(this,void 0,void 0,(function*(){try{200===JSON.parse(e).code?(yield this.postTaskList(c,!0)).subscribe(e=>{e?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u65b0\u589e\u4f5c\u4e1a",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),this.edit({id:c.data.paperId,taskType:"2"}),n(!0)):n(!1)}):(this.nzMesService.error(e),n(!1))}catch(t){this.nzMesService.error(e),n(!1)}})))}else this.nzMesService.warning(99===c.code?"\u901a\u8fc7\u5ba1\u6838\u7684\u8bfe\u7a0b\u624d\u80fd\u65b0\u589e\u4f5c\u4e1a,\u9898\u5e93\u8bfe\u7a0b\u67e5\u8be2\u7f16\u7801\u4e0d\u5b58\u5728":e),n(!1)}catch(c){this.nzMesService.warning(c),n(!1)}})}})})}})}))}addVolume(e){return Object(i.a)(this,void 0,void 0,(function*(){this.curExamData=e||{};const t=yield s.a.getProdIdSync();this.getSubQuestionBank("exam").then(n=>{if(n){if(this.addExamFrom.reset(),e)this.addExamFrom.patchValue({missionName:e.name,formingMethod:e.groupWay?Number(e.groupWay):e.examType?Number(e.examType):1,subQuestionBank:Number(e.quebankId)});else{const e=p.a.getExamSubquestionbank();this.addExamFrom.patchValue({missionName:"",formingMethod:1,subQuestionBank:e?Number(e):""})}this.modalRef=this.nzModalService.create({nzTitle:e?"\u7f16\u8f91\u7ec4\u5377":"\u65b0\u589e\u7ec4\u5377",nzContent:e?this.addExamExit:this.addExam,nzMaskClosable:!1,nzFooter:e?null:void 0,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzOnOk:()=>new Promise((n,c)=>{if(Object.keys(this.addExamFrom.controls).forEach(e=>{this.addExamFrom.controls[e].markAsDirty(),this.addExamFrom.controls[e].updateValueAndValidity()}),this.addExamFrom.invalid)n(!1);else if(e)this.realSave({id:e.id,name:this.addExamFrom.value.missionName}).subscribe(e=>{e?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u7ec4\u5377",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),n(!0)):n(!1)});else{const e={name:this.addExamFrom.value.missionName,groupWay:this.addExamFrom.value.formingMethod,proId:t,courseCode:this.code,taskType:4,sublibraryModuleId:this.addExamFrom.value.subQuestionBank,userPhone:p.a.getUser().userName};s.a.postAjax(r.a.questionBankApi+"system/qkcPaper/savePaper",e).subscribe(e=>{try{const c=JSON.parse(e);if(200===c.code){const e={proId:t,courseCode:this.code,mobile:p.a.getUser().userName};s.a.postAjax(r.a.questionBankApi+"system/qkcPaper/saveDefaultCourse",e).subscribe(e=>Object(i.a)(this,void 0,void 0,(function*(){try{200===JSON.parse(e).code?(yield this.postTaskList(c,!1)).subscribe(e=>{e?(this.statisticsLogService.statisticsPacketInfoLog({name:"\u65b0\u589e\u7ec4\u5377",actionCode:z.j.packetInfo["learnSet-task-action"].addCode,content:JSON.stringify(e)}),this.edit({id:c.data.paperId,taskType:"4"}),n(!0)):n(!1)}):(this.nzMesService.error(e),n(!1))}catch(t){this.nzMesService.error(e),n(!1)}})))}else this.nzMesService.warning(99===c.code?"\u901a\u8fc7\u5ba1\u6838\u7684\u8bfe\u7a0b\u624d\u80fd\u65b0\u589e\u7ec4\u5377,\u9898\u5e93\u8bfe\u7a0b\u67e5\u8be2\u7f16\u7801\u4e0d\u5b58\u5728":e),n(!1)}catch(c){this.nzMesService.warning(e||c)}})}})})}})}))}postTaskList(e,t,n){return Object(i.a)(this,void 0,void 0,(function*(){const i=yield s.a.getProdIdSync(),c=t||"1"===this.exerciseType?1:2,a={courseId:this.courseId,coursePacketId:this.coursePacketId,courseChapterId:this.curNode.data.courseChapterId,courseSectionId:this.curNode.data.id,status:1,seq:s.a.getMaxSeq(this.taskList),examType:1,gradeType:c,needTeacherProc:1===c?0:1,isGrade:1,attachmentPath:r.a.questionBank+"#/questionList?proId="+i+"&courseCode="+this.code};return t?(a.taskType=2,n?(a.name=n.name,a.attachmentName=n.name,a.quebankId=n.sublibraryModuleIdList&&n.sublibraryModuleIdList.length?n.sublibraryModuleIdList.map(e=>e.sublibraryModuleId).join(","):"",a.resourceId=n.paperUuid+"-"+n.id,a.taskForm="2"):(a.name=this.addJobFromSeting.value.name,a.attachmentName=this.addJobFromSeting.value.name,a.resourceId=e.data.paperUuid+"-"+e.data.paperId,a.taskForm=this.addJobFromSeting.value.taskForm,a.quebankId=this.addJobFromSeting.value.subQuestionBank)):(a.taskType=4,a.paperType="1",n?(a.quebankId=n.sublibraryModuleIdList&&n.sublibraryModuleIdList.length?n.sublibraryModuleIdList.map(e=>e.sublibraryModuleId).join(","):"",a.examType=n.groupWay,a.name=n.name,a.attachmentName=n.name,a.resourceId=n.paperUuid+"-"+n.id):(a.examType=this.addExamFrom.value.formingMethod,a.name=this.addExamFrom.value.missionName,a.attachmentName=this.addExamFrom.value.missionName,a.resourceId=e.data.paperUuid+"-"+e.data.paperId,a.quebankId=this.addExamFrom.value.subQuestionBank),"2"===this.exerciseType&&(a.answerTimes=1)),this.realSave(a)}))}realSave(e){return new d.a(t=>{this.courseMgService.newTestPaper(e).subscribe(n=>{201===n.status?(this.getTaskList(),t.next(e),t.complete(),t.unsubscribe()):(this.isCallLoading=!1,t.next(!1),t.complete(),t.unsubscribe())})})}chooseTestPaper(){this.getSubQuestionBank("examSearch"),this.getCallList("exam"),this.selectedValue="",this.testPaperName="",this.examSubQuestionBankExam=[],this.examSubQuestionBankExamBak=[],this.examListPreview=!0}chooseExercises(){this.getSubQuestionBank("exerciseSearch"),this.getCallList("exercise"),this.homeworkSubQuestionBank=[],this.homeworkSubQuestionBankBak=[],this.testExerciseName="",this.exerciseListPreview=!0}associate(e,t){this.associateing[t]=!0,this.totalPage=0,this.currentAssocate=e,this.courseMgService.getViewUrlWebPath(r.a.OSS_URL+e.attachmentPath).subscribe(e=>Object(i.a)(this,void 0,void 0,(function*(){200===e.status&&(this.wps=WebOfficeSDK.config({url:e.data.wpsUrl}),this.wps.iframe.style.display="none",yield this.wps.ready(),this.wpsApplication=this.wps.Application,this.stack=this.wpsApplication.Stack(),this.totalPage=yield this.wpsApplication.ActivePresentation.Slides.Count,this.associateing[t]=!1,this.visibleAssociate=!0)}))),this.getssocateList()}isNeedChange(e,t){this.courseMgService.modifySectionResourceTask({id:t.id,isNeed:t.isNeed?"1":"0"}).subscribe(n=>{201===n.status?t.isNeed=e:this.nzMesService.error(n.message)},e=>{this.nzMesService.error(JSON.stringify(e))})}disableMainLecture(e){return!("1"===this.preview||e.attachmentPath&&(e.attachmentPath.indexOf(".ppt")>-1||e.attachmentPath.indexOf(".pptx")>-1))}showassolite(e){return"0"===this.preview&&e.isMainFile&&e.attachmentPath&&(e.attachmentPath.indexOf(".ppt")>-1||e.attachmentPath.indexOf(".pptx")>-1)}saveAssociate(){const e=[];this.assocateList.forEach((t,n)=>{const i={};i.id=t.linkId,i.courseId=t.courseId,i.coursePacketId=t.coursePacketId,i.courseChapterId=t.courseChapterId,i.courseSectionId=t.courseSectionId,i.courseTaskId=t.id,i.resourceId=this.currentAssocate.id,i.pageNum=t.pageNum,i.seq=t.seq,e.push(i)}),this.courseMgService.saveAssocateList(e).subscribe(e=>{201===e.status&&(this.visibleAssociate=!1)})}getType(e){switch(e){case 1:return"\u771f\u9898";case 2:return"\u6a21\u62df";case 3:return"\u539f\u521b";case 4:return"\u6d4b\u8bd5\u5377"}}showTransfer(e,t){if(this.taskList.length>=this.limitTask&&!t)return!1;let n=[];if(this.taskList.length&&(n=this.taskList.map(e=>e.resourceId.split("-")[0])),t){if(n.length&&n.indexOf(e.paperUuid)>-1)return!0}else{if(!n.length)return!0;if(n.indexOf(e.paperUuid)<0)return!0}}transfer(e,t){return Object(i.a)(this,void 0,void 0,(function*(){this.isCallLoading=!0,(yield this.postTaskList(null,t,e)).subscribe(e=>{e&&this.statisticsLogService.statisticsPacketInfoLog({name:t?"\u8c03\u7528\u4f5c\u4e1a":"\u8c03\u7528\u8bd5\u5377",actionCode:z.j.packetInfo["learnSet-task-action"].addCode,content:JSON.stringify(e)})})}))}cancelCall(e,t){this.isCallLoading=!0;const n=this.taskList.map(e=>e.resourceId.split("-")[0]).findIndex(t=>t===e.paperUuid);this.courseMgService.del_courseSectionFileTask(this.taskList[n].id).subscribe(e=>{204===e.status?this.getTaskList():this.nzMesService.error(e.message)},()=>{this.isCallLoading=!1})}previewExaminationPaper(e){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield s.a.getProdIdSync();e.resourceId?open(r.a.questionBank+"#/paper/previewPaper?paperId="+e.resourceId.split("-")[1]+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+t+"&courseCode="+this.code):open(r.a.questionBank+"#/paper/previewPaper?paperId="+e.id+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+t+"&courseCode="+this.code)}))}edit(e){e.name?"2"===e.taskType?this.entryExercises(e):"4"===e.taskType?this.addVolume(e):this.otherEdit(e):this.otherEdit(e)}otherEdit(e){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield s.a.getProdIdSync(),n={proId:t,courseCode:this.code,mobile:p.a.getUser().userName};s.a.postAjax(r.a.questionBankApi+"system/qkcPaper/saveDefaultCourse",n).subscribe(n=>{try{if(200===JSON.parse(n).code){let n;const i="courseCode="+this.code+"&proId="+t+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&paperId=";n="7"===e.taskType?r.a.questionBank+"#/PaperEvaluation/List?"+i:"6"===e.taskType?r.a.questionBank+"#/PaperQuestionnaire/List?"+i:r.a.questionBank+"#/paper/createPaper?"+i,n+=e.resourceId?e.resourceId.split("-")[1]:e.id,open(n)}else this.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38\uff0c\u8bbe\u7f6e\u9ed8\u8ba4\u8bfe\u7a0b\u5931\u8d25")}catch(i){this.nzMesService.error(n)}})}))}previewTask(e){"3"===e.taskType?this.previewTraining(e):"1"===e.taskType?this.menuService.gotoUrl({url:"/m/rm/material-pre-case",paramUrl:`/${e.resourceId}/104/${e.courseChapterId}`,title:"\u9884\u89c8\u6848\u4f8b"}):"2"===e.taskType||"4"===e.taskType||"6"===e.taskType||"7"===e.taskType?this.previewExaminationPaper(e):this.previewHandout(e)}modelChangeDetect(e){"number"==typeof e&&(this.current=e)}stopPropagation(e){e.stopPropagation(),e.preventDefault()}getBlur(e){return Object(i.a)(this,void 0,void 0,(function*(){if(this.bindLoading=!0,this.totalPage){if(this.totalPage<(this.current||e.pageNum))return this.bindLoading=!1,Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!1}),void this.nzMesService.warning("\u5f53\u524d\u8bb2\u4e49\u603b\u5171 "+this.totalPage+" \u9875,\u7ed1\u5b9a\u9875\u7801\u8d85\u8fc7\u4e86\u4e3b\u8bb2\u4e49\u7684\u9875\u6570\u8303\u56f4!");e.paperId?s.a.getAjax(r.a.questionBankApi+"system/qkcPaper/decidePaper?paperId="+e.paperId).subscribe(t=>{try{const n=JSON.parse(t);200===n.code?n.data.decide?(this.nzMesService.warning("\u5305\u542b\u7efc\u5408\u9898\u7684\u4f5c\u4e1a\u4efb\u52a1\u4e0d\u80fd\u7ed1\u5b9a\u5230\u4e3b\u8bb2\u4e49\u4e2d"),this.bindLoading=!1,Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!1})):this.boundTask(e):this.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38\uff0c\u67e5\u8be2\u4efb\u52a1\u4fe1\u606f\u5931\u8d25")}catch(n){this.nzMesService.error(t)}}):this.boundTask(e)}else this.bindLoading=!1,Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!1}),this.nzMesService.error("\u8be5\u4e3b\u8bb2\u4e49\u6ca1\u6709\u9875\u9762\uff0c\u8bf7\u4fdd\u8bc1\u6709\u9875\u9762\u7684\u524d\u63d0\u4e0b\u7ed1\u5b9a\u4efb\u52a1")}))}boundTask(e){const t={courseId:e.courseId,coursePacketId:e.coursePacketId,courseChapterId:e.courseChapterId,courseSectionId:e.courseSectionId,courseTaskId:e.id,resourceId:this.currentAssocate.id,pageNum:this.current||e.pageNum,seq:e.seq,id:e.linkId};this.courseMgService.handoutPageNumberRelatedTasks(t).subscribe(n=>{if(this.bindLoading=!1,201===n.status){this.statisticsLogService.statisticsPacketInfoLog({name:"\u8bb2\u4e49\u8d44\u6599\u5173\u8054\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify(t)}),e.linkId=n.data.id,e.isBindAssoicate=!0;const i=this.assocateList.findIndex(t=>t.id===e.id);this.assocateLists[i]=JSON.parse(JSON.stringify(this.assocateList[i])),this.currentBindLength=this.assocateList.filter(e=>e.isBindAssoicate).length,console.log(this.currentBindLength)}else Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!1})},()=>{this.bindLoading=!1,Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!1})})}getApp(e){if(this.bindLoading)if(this.totalPage)e(!1);else{const t=this.doc.getElementById("iframePage").contentWindow.wps;t?e(t):Object(u.a)(100).subscribe(()=>{this.getApp(e)})}}isBindChange(e,t){e?this.getBlur(t):this.delBind(t)}delBind(e){this.knowledgeManageService.delBind(e.linkId).subscribe(t=>{if(204===t.status){this.statisticsLogService.statisticsPacketInfoLog({name:"\u8bb2\u4e49\u8d44\u6599\u5173\u8054\u66f4\u6539",actionCode:z.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify({id:e.linkId})}),delete e.pageNum,delete e.linkId,e.isBindAssoicate=!1;const t=this.assocateList.findIndex(t=>t.id===e.id);this.assocateLists[t]=JSON.parse(JSON.stringify(this.assocateList[t])),this.currentBindLength=this.assocateList.filter(e=>e.isBindAssoicate).length}else Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!0})},t=>{Object(u.a)(0).subscribe(()=>{e.isBindAssoicate=!0})})}completebind(){this.visibleAssociate=!1,this.totalPage=0,this.wps.iframe.parentNode.parentNode.removeChild(this.wps.iframe.parentNode),this.stack.End(),this.wpsApplication=null,this.wps.destroy(),this.wps=null,this.getTaskList()}getText(e){switch(String(e)){case"0":return"\u8bfb";case"1":return"\u4f8b";case"2":return"\u4f5c";case"3":return"\u8bad";case"4":return"\u8003";case"5":return"\u6218";case"6":return"\u95ee";case"7":return"\u6d4b"}}getColor(e){switch(e){case"0":return"#f0a14d";case"1":return"#35ad8e";case"2":return"#b27fd7";case"3":return"#ecc13a";case"4":return"#33ade7";case"5":return"#5f88f2";case"6":return"#40a9ff";case"7":return"#567180"}}getFormingMethod(e){switch(e){case 1:return"\u9009\u9898\u7ec4\u5377/\u5f55\u9898\u7ec4\u5377";case 2:return"\u9898\u578b\u96be\u5ea6\u968f\u673a\u7ec4\u5377";case 3:return"\u77e5\u8bc6\u70b9\u96be\u5ea6\u62bd\u9898\u7ec4\u5377"}}previewTraining(e){this.trainLoading=!0,this.trainManageService.getAccountPeriodId(e.resourceId).subscribe(t=>{if(200===t.status){const n=e=>{this.trainLoading=!1,200===e.status&&e.data&&window.open(e.data)},i=e=>{this.trainLoading=!1,this.nzMesService.create("error",JSON.stringify(e))};this.trainManageService.getPracticalDetail({id:e.resourceId,accountId:t.data.accountId}).subscribe(n,i)}else this.trainLoading=!1},e=>{this.trainLoading=!1})}clearStatus(e){const{answerTimes:t}=this[e].controls;t.markAsUntouched(),t.markAsPristine(),t.updateValueAndValidity()}editHandout(e){e.attachmentExt?(e.attachmentName=e.title,e.videoUrl=[{name:e.title,title:e.title,path:e.attachmentPath,videoLength:e.videoLength}],this.localVideo.patchValue(e),this.videoUpload("localVideo",!1,e)):(e.attachmentName=e.title,e.videoUrl=e.attachmentPath,this.polyway.patchValue(e),this.videoUpload("polyway",!1,e))}compltedUpload(){const{videoUrl:e}=this.localVideo.value;this.localVideo.patchValue({attachmentName:e[0].title.split(".")[0]})}getVideoLength(e){let t=0;const n=e.split(":"),i=Number(n[0]),c=Number(n[1]);return i>0&&(t+=60*i),c>0&&(t+=c),Number(n[2])>0&&(t+=1),t}paperTypeChange(e){this.examSettingForm.patchValue("6"!==e||"3"!==this.examType&&"2"!==this.examType?{isRedo:"0"}:{isRedo:"1"})}transferQuestionnaire(e,t){return Object(i.a)(this,void 0,void 0,(function*(){const n=yield s.a.getProdIdSync();this.isCallLoading=!0;const i={courseId:this.courseId,coursePacketId:this.coursePacketId,courseChapterId:this.curNode.data.courseChapterId,courseSectionId:this.curNode.data.id,status:1,seq:s.a.getMaxSeq(this.taskList),attachmentPath:r.a.questionBank+("evaluationType"===t?"#/PaperEvaluation/List":"#/PaperQuestionnaire/List")+"?proId="+n+"&courseCode="+this.code,name:e.name,attachmentName:e.name,resourceId:e.paperUuid+"-"+e.paperId,taskType:"evaluationType"===t?7:6,answerTimes:1};this.courseMgService.newTestPaper(i).subscribe(e=>{this.statisticsLogService.statisticsPacketInfoLog({name:"evaluationType"===t?"\u8c03\u7528\u6d4b\u8bc4":"\u8c03\u7528\u95ee\u5377",actionCode:z.j.packetInfo["learnSet-task-action"].addCode,content:JSON.stringify(i)}),201===e.status&&this.getTaskList()},()=>{this.isCallLoading=!1})}))}previewExaminationQuestionnaire(e){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield s.a.getProdIdSync();open(r.a.questionBank+"#/paper/previewPaper?paperId="+e.paperId+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+t+"&courseCode="+this.code)}))}questionnaireCall(e){return Object(i.a)(this,void 0,void 0,(function*(){const{evaluationType:t,questionnaireType:n,evaluationName:i,questionnaireName:c,code:a}=this,o=yield s.a.getProdIdSync();s.a.getAjax(r.a.questionBankApi+"system/qkcPaper/evaluateQuestionnaireList",{proId:o,typeId:"evaluationType"===e?3:4,evaluateId:"evaluationType"===e?t||void 0:n||void 0,name:"evaluationType"===e?i||void 0:c||void 0,courseCode:a,status:2,pageSize:"10000",pageNum:"1"}).subscribe(t=>{try{const n=JSON.parse(t);200===n.code?"evaluationType"===e?(this.listOfEvaluationData=n.data.rows,this.evaluationPreview=!0):(this.listOfQuestionnaireData=n.data.rows,this.questionnairePreview=!0):this.nzMesService.error(n.message)}catch(n){this.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38")}})}))}getEvaluationType(e){switch(e){case"1":return"\u62db\u751f\u6d4b\u8bc4";case"2":return"\u5165\u5b66\u6d4b\u8bc4"}}getQuestionnaireType(e){switch(e){case"1":return"\u603b\u90e8\u6d4b\u8bc4";case"2":return"\u6821\u533a\u6d4b\u8bc4"}}getEvaluationStatus(e){switch(e){case 1:return"\u672a\u53d1\u5e03";case 2:return"\u5df2\u53d1\u5e03";case 3:return"\u5df2\u8fc7\u671f";case 4:return"\u672a\u5b8c\u6210"}}newQuestionnaire(e){return Object(i.a)(this,void 0,void 0,(function*(){const t=yield s.a.getProdIdSync(),n="token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+t+"&courseCode="+this.code;"evaluationType"===e?open(r.a.questionBank+"#/PaperEvaluation/List?"+n):open(r.a.questionBank+"#/PaperQuestionnaire/List?"+n)}))}closeQuestionnaire(e){"evaluationType"===e?(this.questionnaireType="",this.questionnaireName="",this.evaluationPreview=!1):(this.questionnairePreview=!1,this.evaluationType="",this.evaluationName="")}subQuestionBankChange(e){e&&p.a.putExamSubquestionbank(e)}execrisesSubQuestionBankChange(e){e&&p.a.putPracSubquestionbank(e)}subQuestionBankChangeSearch(e,t){const n="examSearch"===t?"examSubQuestionBankExamBak":"homeworkSubQuestionBankBak";this[n]=[],e.length&&e.forEach(e=>{"NaN"===parseFloat(e).toString()?this[t].every(t=>{if(t.code!==e)return!0;t.children.forEach(e=>{this[n].push(e.key)})}):this[n].push(e)})}importVideo(){this.nzModalService.create({nzTitle:"\u5bfc\u5165\u89c6\u9891",nzContent:f.a,nzComponentParams:{courseId:this.courseId,coursePacketId:this.coursePacketId},nzMaskClosable:!1}).afterClose.subscribe(e=>{e&&this.getHandoutFiles()})}queryKeywordsChange(){1===Number(this.queryKeywords)?this.testPaperName="":this.testPaperId=""}queryKeywordsJobChange(){1===Number(this.queryKeywordsJob)?this.testExerciseName="":this.testExerciseId=""}getExamText(e){return"4"===String(e.taskType)?this.getExamType(e.paperType||"1"):""}showExamType(e){return"4"===String(e.taskType)}ShowJobType(e){return"2"===String(e.taskType)}jobCancel(){this.modalRef.destroy()}jumpQuestionBank(e){this.otherEdit(this[e])}jobDetermine(){Object.keys(this.addJobFromSeting.controls).forEach(e=>{this.addJobFromSeting.controls[e].markAsDirty(),this.addJobFromSeting.controls[e].updateValueAndValidity()}),this.addJobFromSeting.invalid||this.realSave({id:this.curJobData.id,name:this.addJobFromSeting.value.name,taskForm:this.addJobFromSeting.value.taskForm}).subscribe(e=>{e&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u4f5c\u4e1a",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),this.modalRef.destroy())})}examDetermine(){Object.keys(this.addExamFrom.controls).forEach(e=>{this.addExamFrom.controls[e].markAsDirty(),this.addExamFrom.controls[e].updateValueAndValidity()}),this.addExamFrom.invalid||this.realSave({id:this.curExamData.id,name:this.addExamFrom.value.missionName}).subscribe(e=>{e&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u7ec4\u5377",actionCode:z.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),this.modalRef.destroy())})}closePreview(){this.isPreviewpolyway=!1,this.resourceUrl="",this.previewTitle="",this.previewStart=!1}}return e.\u0275fac=function(t){return new(t||e)(y.Ub(o.d),y.Ub(S.a),y.Ub(k.a),y.Ub(P.e),y.Ub(C.e),y.Ub(E.a),y.Ub(C.e),y.Ub(w.a),y.Ub(x.a),y.Ub(M.a),y.Ub(O.a),y.Ub(v.d))},e.\u0275cmp=y.Ob({type:e,selectors:[["app-chapter-handout"]],viewQuery:function(e,t){var n;1&e&&(y.Vc(X,!0),y.Vc(Y,!0),y.Vc(ee,!0),y.Vc(te,!0),y.Vc(ne,!0),y.Vc(ie,!0),y.Vc(ce,!0),y.Vc(ae,!0),y.Vc(g.d,!0)),2&e&&(y.Bc(n=y.jc())&&(t.polywayModal=n.first),y.Bc(n=y.jc())&&(t.localVideoModal=n.first),y.Bc(n=y.jc())&&(t.addExam=n.first),y.Bc(n=y.jc())&&(t.addExamExit=n.first),y.Bc(n=y.jc())&&(t.jobSettings=n.first),y.Bc(n=y.jc())&&(t.jobSettingsEdit=n.first),y.Bc(n=y.jc())&&(t.questionnaire=n.first),y.Bc(n=y.jc())&&(t.tree=n.first),y.Bc(n=y.jc())&&(t.nzSelects=n))},decls:272,vars:149,consts:[[1,"container"],[1,"left"],[1,"row-title"],[3,"chapterSelectable","coursePacketId","defaultSection","defaultExpandedKeys","nodeChange"],["tree",""],["class","not-content",4,"ngIf"],[1,"gap"],[1,"right-content"],[3,"nzSpinning","nzDelay"],[1,"row-title",2,"padding-left","10px","margin-top","20px"],["nz-button","","nzType","primary","style","float:right;margin-right:15px;",3,"click",4,"ngIf"],["class","right",4,"ngIf"],[1,"right"],[3,"nzActive","nzHeader","nzActiveChange"],["zlTpl",""],["tipszl",""],["cdkDropList","",1,"list",3,"cdkDropListDropped"],[4,"ngIf"],["polywaymodal",""],["localvideomodal",""],["addExam",""],["addExamExit",""],["jobSettings",""],["jobSettingsEdit",""],["nzTitle","\u9009\u62e9\u8bd5\u5377","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],[1,"header"],[1,"header-container","wcl"],[1,"header-item","w31"],["nzPlaceHolder","\u8bf7\u9009\u62e9\u67e5\u8be2\u5173\u952e\u5b57",2,";width","150px",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u8bd5\u5377ID"],["nzValue","2","nzLabel","\u8bd5\u5377\u540d\u79f0"],["nz-input","","placeholder","\u540d\u79f0\u641c\u7d22",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],["nz-input","","placeholder","ID\u641c\u7d22","type","number","min","0",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],[2,"min-width","90px","line-height","32px"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u7ec4\u5377\u65b9\u5f0f",2,"margin-right","20px","width","calc(100% - 100px)","flex","1",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u9009\u9898\u7ec4\u5377/\u5f55\u9898\u7ec4\u5377"],["nzValue","2","nzLabel","\u9898\u578b\u96be\u5ea6\u968f\u673a\u7ec4\u5377"],["nzValue","3","nzLabel","\u77e5\u8bc6\u70b9\u96be\u5ea6\u62bd\u9898\u7ec4\u5377"],[1,"header-item","mr0","w31"],["nzDefaultExpandAll","","nzShowSearch","","nzMultiple","","nzCheckable","",2,"width","178px",3,"nzNodes","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nzTreeTemplateSearchExam",""],["nz-button","","nzType","primary",2,"margin-left","20px","vertical-align","top",3,"click"],[1,"evaluation-table",3,"nzData","nzScroll","nzFrontPagination"],["basicTable",""],["nzWidth","100px"],["nzWidth","150px"],["nzWidth","80px"],["nzWidth","120px"],[4,"ngFor","ngForOf"],["nzTitle","\u9009\u62e9\u4f5c\u4e1a","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],[1,"header-container"],[1,"header-item"],["nzValue","1","nzLabel","\u4f5c\u4e1aID"],["nzValue","2","nzLabel","\u4f5c\u4e1a\u540d\u79f0"],["nzDefaultExpandAll","","nzShowSearch","","nzMultiple","","nzCheckable","",2,"width","250px",3,"nzNodes","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nzTreeTemplateSearchPractice",""],["nz-button","","nzType","primary",2,"margin-left","20px",3,"click"],["basicTableExercise",""],["nzTitle","\u9009\u62e9\u95ee\u5377","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],["nz-input","","placeholder","\u652f\u6301\u540d\u79f0\u641c\u7d22",3,"ngModel","ngModelChange"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u95ee\u5377\u7c7b\u578b",3,"ngModel","ngModelChange"],["nzLabel","\u603b\u90e8\u6d4b\u8bc4","nzValue","1"],["nzLabel","\u6821\u533a\u6d4b\u8bc4","nzValue","2"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary",2,"margin-left","50px",3,"click"],["questionnaireTable",""],["nzTitle","\u9009\u62e9\u6d4b\u8bc4","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u6d4b\u8bc4\u7c7b\u578b",3,"ngModel","ngModelChange"],["nzLabel","\u62db\u751f\u6d4b\u8bc4","nzValue","1"],["nzLabel","\u5165\u5b66\u6d4b\u8bc4","nzValue","2"],["evaluationTable",""],["nzTitle","\u8003\u8bd5\u8bbe\u7f6e",3,"nzVisible","nzMaskClosable","nzVisibleChange","nzOnCancel"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","","nzErrorTip","\u8003\u8bd5\u8bbe\u7f6e\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","examLength",2,"margin-right","10px",3,"nzMin","nzStep"],["nzHasFeedback","","nzErrorTip","\u53ca\u683c\u5206\u6570\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","passScore",2,"margin-right","10px",3,"nzMin","nzStep"],["nzHasFeedback","","nzErrorTip","\u8bd5\u5377\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","paperType",3,"ngModelChange"],["nzValue","1","nzLabel","\u9636\u6bb5\u8003\u8bd5"],["nzValue","2","nzLabel","\u5355\u79d1\u8003\u8bd5"],["nzValue","3","nzLabel","\u6a21\u62df\u8003\u8bd5"],["nzValue","4","nzLabel","\u5bc6\u62bc\u8003\u8bd5"],["nzValue","6","nzLabel","\u5b9e\u64cd\u8003\u8bd5"],["nzHasFeedback","","nzErrorTip","\u662f\u5426\u91cd\u8003\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","isRedo"],["nz-radio","","nzValue","1","nzDisabled",""],["nz-radio","","nzValue","0","nzDisabled",""],["style","position:absolute;",4,"ngIf"],["nzHasFeedback","","nzErrorTip","\u7b54\u9898\u6b21\u6570\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","answerTimes",3,"ngModel","nzDisabled","ngModelChange"],["nz-radio","",3,"nzValue"],[3,"ngModel","nzMin","nzMax","nzStep","ngModelOptions","disabled","ngModelChange"],["nzHasFeedback","","nzErrorTip","\u662f\u5426\u51fa\u6210\u7ee9\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","resultWay"],["nz-radio","","nzValue","1"],[4,"nzModalFooter"],["nzTitle","\u6743\u9650\u8bbe\u7f6e",3,"nzVisible","nzMaskClosable","nzVisibleChange","nzOnCancel"],["formControlName","answerTimes",3,"ngModel","ngModelChange"],[3,"ngModel","nzMin","nzMax","nzStep","ngModelOptions","ngModelChange"],["nzTitle","\u8bb2\u4e49\u8d44\u6e90\u5173\u8054",3,"nzVisible","nzMaskClosable","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],[1,"associate"],[2,"float","left"],[2,"float","right","cursor","pointer",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"],["class","association-table",4,"ngFor","ngForOf"],[3,"isPreviewpolyway","previewTitle","resourceUrl","closePreview",4,"ngIf"],[1,"not-content"],["nz-button","","nzType","primary",2,"float","right","margin-right","15px",3,"click"],["lectureTpl",""],["tipsJy",""],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTrigger","click",1,"font-question",3,"nzTooltipTitle","nzTooltipOverlayStyle","click"],["class","list-item","cdkDrag","",4,"ngFor","ngForOf"],["class","add-section",4,"ngIf"],["cdkDrag","",1,"list-item"],[1,"title",3,"title"],[2,"vertical-align","middle",3,"nzShape","nzSize","ngStyle","nzText"],["nzTip","\u67e5\u8be2\u4e3b\u8bb2\u4e49\u4fe1\u606f\u4e2d...",3,"nzSpinning","nzDelay"],[1,"action-group"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link",3,"click",4,"ngIf"],["nz-button","","nzType","link",3,"style","click",4,"ngIf"],[1,"other-containers"],["nz-checkbox","",3,"nzDisabled","ngModel","ngModelChange"],["class","other-container",3,"ngModel","ngModelChange",4,"ngIf"],[1,"other-container",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["nz-icon","","nzType","download","nzTheme","outline"],["nz-icon","","nzType","disconnect","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"add-section"],["nz-button","","nzType","primary",3,"nzSize","click"],["recordingTpl",""],[2,"margin-left","10px","color","#1890ff","vertical-align","top"],["nz-icon","","nzType","edit","nzTheme","outline"],["panelHeaderTpl",""],["tipsPak",""],[1,"title","task"],[1,"title-name",3,"title","ngStyle"],["style","color:#33ade7",4,"ngIf"],["style","color:red;min-width:56px;vertical-align: top;",4,"ngIf"],[3,"ngModel","ngClass","disabled","ngModelChange",4,"ngIf"],["style","min-width: 100px;height: 10px;",4,"ngIf"],["class","other-container",3,"ngModel","disable-select","disabled","ngModelChange",4,"ngIf"],["class","other-container",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["class","other-button","nz-button","","nzType","primary",3,"click",4,"ngIf"],["style","width: 88px;height: 10px;",4,"ngIf"],[2,"color","#33ade7"],[2,"color","red","min-width","56px","vertical-align","top"],[3,"ngModel","ngClass","disabled","ngModelChange"],["value","2"],[2,"min-width","100px","height","10px"],[1,"other-container",3,"ngModel","disabled","ngModelChange"],["value",""],["nz-button","","nzType","primary",1,"other-button",3,"click"],[2,"width","88px","height","10px"],["nz-icon","","nzType","edit","nzTheme","outline",3,"click"],["nz-button","","nzType","primary",3,"nzSize"],["nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","plus","nzTheme","outline"],["menuwj","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],["menuExercises","nzDropdownMenu"],["menu","nzDropdownMenu"],["nz-icon","","nzType","upload","nzTheme","outline"],["class","list-item","cdkDrag","",3,"id",4,"ngFor","ngForOf"],["cdkDrag","",1,"list-item",3,"id"],["nzHasFeedback","","nzErrorTip","\u6307\u5bfc\u8bb2\u5e08\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u6307\u5bfc\u8bb2\u5e08","formControlName","authorId"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzHasFeedback","",2,"max-width","316px",3,"nzSpan","nzErrorTip"],["nz-input","","type","text","formControlName","attachmentName","placeholder","\u8bf7\u8f93\u5165\u89c6\u9891\u540d\u5b57",3,"keyup.enter"],[2,"margin","5px 0 0 10px"],["attachmentNameTpl",""],["nzHasFeedback","","nzErrorTip","\u89c6\u9891\u6807\u7b7e\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u89c6\u9891\u6807\u7b7e","formControlName","videoType"],["nzLabel","\u4e3b\u8981","nzValue","1"],["nzLabel","\u51b2\u523a","nzValue","2"],["nzHasFeedback","","nzErrorTip","\u89c6\u9891ID\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nz-input","","type","text","formControlName","videoUrl","placeholder","\u8bf7\u8f93\u5165\u89c6\u9891ID",3,"keyup.enter"],[3,"nzLabel","nzValue"],[3,"nzSpan"],["formControlName","seq",3,"nzStep","nzMin","keyup.enter"],["attachmentNameTplLocal",""],["nzErrorTip","\u8bf7\u4e0a\u4f20\u89c6\u9891",3,"nzSpan"],["limit","1","listType","picture-card","acceptType","flv,avi,mpg,mp4,wmv,mov,3gp,.asf","formControlName","videoUrl",3,"showUploadList","isPolyway","optsChange"],["nz-icon","","nzType","upload",2,"font-size","20px"],[1,"desc"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","type","text","formControlName","missionName","placeholder","\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"],[2,"margin","5px 0 0 10px","display","inline-block"],["examNameTpl",""],["nzHasFeedback","","nzErrorTip","\u7ec4\u5377\u65b9\u5f0f\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u7ec4\u5377\u65b9\u5f0f","formControlName","formingMethod"],["nzLabel","\u9009\u9898/\u5f55\u9898\u7ec4\u5377",3,"nzValue"],["nzLabel","\u9898\u578b\u96be\u5ea6\u968f\u673a\u7ec4\u5377",3,"nzValue"],["nzLabel","\u77e5\u8bc6\u70b9\u96be\u5ea6\u62bd\u9898\u7ec4\u5377",3,"nzValue"],["nzHasFeedback","","nzErrorTip","\u5b50\u9898\u5e93\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b50\u9898\u5e93","formControlName","subQuestionBank",2,"width","100%",3,"nzNodes","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nzTreeTemplate",""],[1,"custom-node"],["nz-icon","",3,"nzType"],[1,"folder-name"],["nz-icon","","nzType","file"],[1,"file-name"],[2,"text-align","right"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"click"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b50\u9898\u5e93","formControlName","subQuestionBank",2,"width","100%",3,"nzDisabled","nzNodes","nzAllowClear","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0","formControlName","name"],["jobNameTpl",""],["nzHasFeedback","","nzErrorTip","\u4efb\u52a1\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u4efb\u52a1\u7c7b\u578b","formControlName","taskForm"],["nzLabel","\u8bfe\u524d","nzValue","0"],["nzLabel","\u8bfe\u4e2d","nzValue","1"],["nzLabel","\u8bfe\u540e","nzValue","2"],["nzTreeTemplateSubQuestionBank",""],["nz-input","","placeholder","\u540d\u79f0\u641c\u7d22",3,"ngModel","ngModelChange","keyup.enter"],["nz-input","","placeholder","ID\u641c\u7d22","type","number","min","0",3,"ngModel","ngModelChange","keyup.enter"],[3,"click",4,"ngIf"],["nzType","vertical"],[3,"click"],["nzHasFeedback","","nzErrorTip","\u673a\u8003\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","computerType"],["nzValue","1","nzLabel","\u521d\u7ea7"],["nzValue","2","nzLabel","\u4e2d\u7ea7"],["nzValue","3","nzLabel","\u7a0e\u52a1\u5e08"],[2,"position","absolute"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"],[1,"association-table"],[2,"margin-bottom","10px"],["nz-icon","","nzType","caret-right","nzTheme","outline","style","cursor: pointer",3,"click",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline","style","cursor: pointer",3,"click",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],["nz-icon","","nzType","caret-right","nzTheme","outline",2,"cursor","pointer",3,"click"],["nz-icon","","nzType","caret-down","nzTheme","outline",2,"cursor","pointer",3,"click"],[3,"ngClass"],[1,"list-item"],[1,"associate-title",3,"title"],["nzPlaceHolder","\u8bf7\u8f93\u5165\u9875\u7801",2,"width","120px","float","right",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange","nzFocus","nzBlur"],[2,"min-width","70px","float","right"],["nz-button","","nzType","dashed",2,"margin","0 10px",3,"disabled","click"],[3,"isPreviewpolyway","previewTitle","resourceUrl","closePreview"]],template:function(e,t){if(1&e&&(y.ac(0,"div",0),y.ac(1,"div",1),y.ac(2,"div",2),y.Pc(3,"\u7ae0\u8282\u7ed3\u6784"),y.Zb(),y.ac(4,"app-course-structure-tree",3,4),y.ic("nodeChange",(function(e){return t.nodeChange(e)})),y.Zb(),y.Nc(6,oe,2,0,"span",5),y.Zb(),y.Vb(7,"div",6),y.ac(8,"div",7),y.ac(9,"nz-spin",8),y.ac(10,"div",9),y.Pc(11),y.Nc(12,se,2,0,"button",10),y.Zb(),y.Nc(13,Ee,10,10,"div",11),y.Nc(14,Le,8,10,"div",11),y.Nc(15,it,10,10,"div",11),y.ac(16,"div",12),y.ac(17,"nz-collapse"),y.ac(18,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(e){return t.active4=e})),y.Nc(19,ct,3,3,"ng-template",null,14,y.Oc),y.Nc(21,at,2,0,"ng-template",null,15,y.Oc),y.ac(23,"div",16),y.ic("cdkDropListDropped",(function(e){return t.sectionDrop(e,"4")})),y.Nc(24,ut,3,2,"ng-container",17),y.Nc(25,ht,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(26,vt,25,14,"ng-template",null,18,y.Oc),y.Nc(28,xt,28,16,"ng-template",null,19,y.Oc),y.Nc(30,Vt,26,20,"ng-template",null,20,y.Oc),y.Nc(32,Bt,18,8,"ng-template",null,21,y.Oc),y.Nc(34,Kt,25,15,"ng-template",null,22,y.Oc),y.Nc(36,en,25,9,"ng-template",null,23,y.Oc),y.ac(38,"nz-modal",24),y.ic("nzVisibleChange",(function(e){return t.examListPreview=e}))("nzOnCancel",(function(){return t.examListPreview=!1,t.examSubQuestionBankExam=[]})),y.ac(39,"div",25),y.ac(40,"div",26),y.ac(41,"div",27),y.ac(42,"nz-select",28),y.ic("ngModelChange",(function(e){return t.queryKeywords=e}))("ngModelChange",(function(){return t.queryKeywordsChange()})),y.Vb(43,"nz-option",29),y.Vb(44,"nz-option",30),y.Zb(),y.Nc(45,tn,1,1,"input",31),y.Nc(46,nn,1,1,"input",32),y.Zb(),y.ac(47,"div",27),y.ac(48,"label",33),y.Pc(49,"\u7ec4\u5377\u65b9\u5f0f: "),y.Zb(),y.ac(50,"nz-select",34),y.ic("ngModelChange",(function(e){return t.selectedValue=e})),y.Vb(51,"nz-option",35),y.Vb(52,"nz-option",36),y.Vb(53,"nz-option",37),y.Zb(),y.Zb(),y.ac(54,"div",38),y.ac(55,"label",33),y.Pc(56,"\u5b50\u9898\u5e93: "),y.Zb(),y.ac(57,"nz-spin",8),y.ac(58,"nz-tree-select",39),y.ic("ngModelChange",(function(e){return t.examSubQuestionBankExam=e}))("ngModelChange",(function(e){return t.subQuestionBankChangeSearch(e,"examSearch")})),y.Zb(),y.Zb(),y.Nc(59,on,3,2,"ng-template",null,40,y.Oc),y.Zb(),y.Zb(),y.ac(61,"button",41),y.ic("click",(function(){return t.getCallList("exam")})),y.Pc(62,"\u67e5\u8be2 "),y.Zb(),y.Zb(),y.ac(63,"nz-spin",8),y.ac(64,"nz-table",42,43),y.ac(66,"thead"),y.ac(67,"tr"),y.ac(68,"th",44),y.Pc(69,"\u8bd5\u5377ID"),y.Zb(),y.ac(70,"th",45),y.Pc(71,"\u8bd5\u5377\u540d\u79f0"),y.Zb(),y.ac(72,"th",44),y.Pc(73,"\u8bd5\u5377\u5e74\u4efd"),y.Zb(),y.ac(74,"th",44),y.Pc(75,"\u7ec4\u5377\u65b9\u5f0f"),y.Zb(),y.ac(76,"th",44),y.Pc(77,"\u8bd5\u5377\u5206\u7c7b"),y.Zb(),y.ac(78,"th",46),y.Pc(79,"\u9898\u91cf"),y.Zb(),y.ac(80,"th",46),y.Pc(81,"\u5206\u6570"),y.Zb(),y.ac(82,"th",47),y.Pc(83,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(84,"tbody"),y.Nc(85,ln,21,9,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(86,"nz-modal",49),y.ic("nzVisibleChange",(function(e){return t.exerciseListPreview=e}))("nzOnCancel",(function(){return t.exerciseListPreview=!1,t.homeworkSubQuestionBank=[]})),y.ac(87,"nz-spin",8),y.ac(88,"div",25),y.ac(89,"div",50),y.ac(90,"div",51),y.ac(91,"nz-select",28),y.ic("ngModelChange",(function(e){return t.queryKeywordsJob=e}))("ngModelChange",(function(){return t.queryKeywordsJobChange()})),y.Vb(92,"nz-option",52),y.Vb(93,"nz-option",53),y.Zb(),y.Nc(94,dn,1,1,"input",31),y.Nc(95,un,1,1,"input",32),y.Zb(),y.ac(96,"div",51),y.ac(97,"label",33),y.Pc(98,"\u5b50\u9898\u5e93: "),y.Zb(),y.ac(99,"nz-spin",8),y.ac(100,"nz-tree-select",54),y.ic("ngModelChange",(function(e){return t.homeworkSubQuestionBank=e}))("ngModelChange",(function(e){return t.subQuestionBankChangeSearch(e,"exerciseSearch")})),y.Zb(),y.Zb(),y.Nc(101,bn,3,2,"ng-template",null,55,y.Oc),y.Zb(),y.ac(103,"button",56),y.ic("click",(function(){return t.getCallList("exercise")})),y.Pc(104,"\u67e5\u8be2"),y.Zb(),y.Zb(),y.Zb(),y.ac(105,"nz-table",42,57),y.ac(107,"thead"),y.ac(108,"tr"),y.ac(109,"th",44),y.Pc(110,"\u4f5c\u4e1aID"),y.Zb(),y.ac(111,"th",45),y.Pc(112,"\u4f5c\u4e1a\u540d\u79f0"),y.Zb(),y.ac(113,"th",46),y.Pc(114,"\u9898\u91cf"),y.Zb(),y.ac(115,"th",46),y.Pc(116,"\u5206\u6570"),y.Zb(),y.ac(117,"th",47),y.Pc(118,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(119,"tbody"),y.Nc(120,fn,15,6,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(121,"nz-modal",58),y.ic("nzVisibleChange",(function(e){return t.questionnairePreview=e}))("nzOnCancel",(function(){return t.closeQuestionnaire("questionnaireType")})),y.ac(122,"div",25),y.ac(123,"div",50),y.ac(124,"div",51),y.ac(125,"label",33),y.Pc(126,"\u5173\u952e\u8bcd\u641c\u7d22: "),y.Zb(),y.ac(127,"input",59),y.ic("ngModelChange",(function(e){return t.questionnaireName=e})),y.Zb(),y.Zb(),y.ac(128,"div",51),y.ac(129,"label",33),y.Pc(130,"\u95ee\u5377\u7c7b\u578b: "),y.Zb(),y.ac(131,"nz-select",60),y.ic("ngModelChange",(function(e){return t.questionnaireType=e})),y.Vb(132,"nz-option",61),y.Vb(133,"nz-option",62),y.Zb(),y.Zb(),y.ac(134,"button",63),y.ic("click",(function(){return t.questionnaireCall("questionnaireType")})),y.Pc(135,"\u67e5\u8be2"),y.Zb(),y.ac(136,"button",64),y.ic("click",(function(){return t.newQuestionnaire("questionnaireType")})),y.Pc(137," \u65b0\u589e\u95ee\u5377 "),y.Zb(),y.Zb(),y.Zb(),y.ac(138,"nz-spin",8),y.ac(139,"nz-table",42,65),y.ac(141,"thead"),y.ac(142,"tr"),y.ac(143,"th",44),y.Pc(144,"\u95ee\u5377ID"),y.Zb(),y.ac(145,"th",45),y.Pc(146,"\u95ee\u5377\u540d\u79f0"),y.Zb(),y.ac(147,"th",44),y.Pc(148,"\u95ee\u5377\u7c7b\u578b"),y.Zb(),y.ac(149,"th",44),y.Pc(150,"\u95ee\u5377\u5b66\u79d1"),y.Zb(),y.ac(151,"th",44),y.Pc(152,"\u9898\u91cf"),y.Zb(),y.ac(153,"th",46),y.Pc(154,"\u95ee\u5377\u72b6\u6001"),y.Zb(),y.ac(155,"th",47),y.Pc(156,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(157,"tbody"),y.Nc(158,yn,19,8,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(159,"nz-modal",66),y.ic("nzVisibleChange",(function(e){return t.evaluationPreview=e}))("nzOnCancel",(function(){return t.closeQuestionnaire("evaluationType")})),y.ac(160,"div",25),y.ac(161,"div",50),y.ac(162,"div",51),y.ac(163,"label",33),y.Pc(164,"\u5173\u952e\u8bcd\u641c\u7d22: "),y.Zb(),y.ac(165,"input",59),y.ic("ngModelChange",(function(e){return t.evaluationName=e})),y.Zb(),y.Zb(),y.ac(166,"div",51),y.ac(167,"label",33),y.Pc(168,"\u6d4b\u8bc4\u7c7b\u578b: "),y.Zb(),y.ac(169,"nz-select",67),y.ic("ngModelChange",(function(e){return t.evaluationType=e})),y.Vb(170,"nz-option",68),y.Vb(171,"nz-option",69),y.Zb(),y.Zb(),y.ac(172,"button",63),y.ic("click",(function(){return t.questionnaireCall("evaluationType")})),y.Pc(173,"\u67e5\u8be2"),y.Zb(),y.ac(174,"button",64),y.ic("click",(function(){return t.newQuestionnaire("evaluationType")})),y.Pc(175,"\u65b0\u589e\u6d4b\u8bc4 "),y.Zb(),y.Zb(),y.Zb(),y.ac(176,"nz-spin",8),y.ac(177,"nz-table",42,70),y.ac(179,"thead"),y.ac(180,"tr"),y.ac(181,"th",44),y.Pc(182,"\u6d4b\u8bc4ID"),y.Zb(),y.ac(183,"th",45),y.Pc(184,"\u6d4b\u8bc4\u540d\u79f0"),y.Zb(),y.ac(185,"th",44),y.Pc(186,"\u6d4b\u8bc4\u7c7b\u578b"),y.Zb(),y.ac(187,"th",44),y.Pc(188,"\u6d4b\u8bc4\u5b66\u79d1"),y.Zb(),y.ac(189,"th",44),y.Pc(190,"\u9898\u91cf"),y.Zb(),y.ac(191,"th",46),y.Pc(192,"\u6d4b\u8bc4\u72b6\u6001"),y.Zb(),y.ac(193,"th",47),y.Pc(194,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(195,"tbody"),y.Nc(196,Pn,19,8,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(197,"nz-modal",71),y.ic("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.isVisible=!1})),y.ac(198,"nz-spin",8),y.ac(199,"form",72),y.ac(200,"nz-form-item"),y.ac(201,"nz-form-label",73),y.Pc(202,"\u8003\u8bd5\u65f6\u957f"),y.Zb(),y.ac(203,"nz-form-control",74),y.Vb(204,"nz-input-number",75),y.Pc(205," \u5206\u949f "),y.Zb(),y.Zb(),y.ac(206,"nz-form-item"),y.ac(207,"nz-form-label",73),y.Pc(208,"\u53ca\u683c\u5206\u6570"),y.Zb(),y.ac(209,"nz-form-control",76),y.Vb(210,"nz-input-number",77),y.Zb(),y.Zb(),y.ac(211,"nz-form-item"),y.ac(212,"nz-form-label",73),y.Pc(213,"\u8bd5\u5377\u7c7b\u578b"),y.Zb(),y.ac(214,"nz-form-control",78),y.ac(215,"nz-select",79),y.ic("ngModelChange",(function(e){return t.paperTypeChange(e)})),y.Vb(216,"nz-option",80),y.Vb(217,"nz-option",81),y.Vb(218,"nz-option",82),y.Vb(219,"nz-option",83),y.Vb(220,"nz-option",84),y.Zb(),y.Zb(),y.Zb(),y.Nc(221,Cn,8,2,"nz-form-item",17),y.ac(222,"nz-form-item"),y.ac(223,"nz-form-label",73),y.Pc(224,"\u662f\u5426\u91cd\u8003"),y.Zb(),y.ac(225,"nz-form-control",85),y.ac(226,"nz-radio-group",86),y.ac(227,"label",87),y.Pc(228,"\u662f"),y.Zb(),y.ac(229,"label",88),y.Pc(230,"\u5426"),y.Zb(),y.Zb(),y.Nc(231,En,2,0,"div",89),y.Zb(),y.Zb(),y.ac(232,"nz-form-item"),y.ac(233,"nz-form-label",73),y.Pc(234,"\u7b54\u9898\u6b21\u6570"),y.Zb(),y.ac(235,"nz-form-control",90),y.ac(236,"nz-radio-group",91),y.ic("ngModelChange",(function(e){return t.examSettingForm.value.answerTimes=e}))("ngModelChange",(function(){return t.clearStatus("examSettingForm")})),y.ac(237,"label",92),y.Pc(238,"\u65e0\u9650\u5236"),y.Zb(),y.ac(239,"label",92),y.ac(240,"nz-input-number",93),y.ic("ngModelChange",(function(e){return t.value=e})),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(241,"nz-form-item"),y.ac(242,"nz-form-label",73),y.Pc(243,"\u51fa\u6210\u7ee9"),y.Zb(),y.ac(244,"nz-form-control",94),y.ac(245,"nz-radio-group",95),y.ac(246,"label",96),y.Pc(247,"\u4ea4\u5377\u5373\u51fa"),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(248,wn,5,1,"div",97),y.Zb(),y.ac(249,"nz-modal",98),y.ic("nzVisibleChange",(function(e){return t.isQuestionnaireVisible=e}))("nzOnCancel",(function(){return t.isQuestionnaireVisible=!1})),y.ac(250,"form",72),y.ac(251,"nz-form-item"),y.ac(252,"nz-form-label",73),y.Pc(253,"\u7b54\u9898\u6b21\u6570"),y.Zb(),y.ac(254,"nz-form-control",90),y.ac(255,"nz-radio-group",99),y.ic("ngModelChange",(function(e){return t.questionnairSettingForm.value.answerTimes=e}))("ngModelChange",(function(){return t.clearStatus("questionnairSettingForm")})),y.ac(256,"label",92),y.Pc(257,"\u65e0\u9650\u5236"),y.Zb(),y.ac(258,"label",92),y.ac(259,"nz-input-number",100),y.ic("ngModelChange",(function(e){return t.answerTimesValue=e})),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(260,xn,5,0,"div",97),y.Zb(),y.ac(261,"nz-modal",101),y.ic("nzVisibleChange",(function(e){return t.visibleAssociate=e}))("nzOnCancel",(function(){return t.completebind()})),y.ac(262,"nz-spin",8),y.ac(263,"div",102),y.ac(264,"span",103),y.Pc(265),y.Zb(),y.ac(266,"span",104),y.ic("click",(function(){return t.previewHandout(t.currentAssocate)})),y.Vb(267,"i",105),y.Pc(268," \u9884\u89c8 "),y.Zb(),y.Zb(),y.Nc(269,Ln,6,4,"div",106),y.Nc(270,Nn,3,0,"div",97),y.Zb(),y.Zb(),y.Nc(271,Vn,1,3,"app-resource-preview-modal",107)),2&e){const e=y.Cc(5),n=y.Cc(20),i=y.Cc(60),c=y.Cc(65),a=y.Cc(102),o=y.Cc(106),s=y.Cc(140),r=y.Cc(178);y.Eb(4),y.tc("chapterSelectable",!1)("coursePacketId",t.coursePacketId)("defaultSection",t.defaultSection)("defaultExpandedKeys",t.defaultExpandedKeys),y.Eb(2),y.tc("ngIf","1"===t.preview&&!(null!=e&&e.nodes.length)),y.Eb(3),y.tc("nzSpinning",t.listLoading||t.hanoutLoading)("nzDelay",0),y.Eb(2),y.Rc(" ",null==t.curNode||null==t.curNode.data?null:t.curNode.data.title," "),y.Eb(1),y.tc("ngIf","22"===t.teachType),y.Eb(1),y.tc("ngIf","22"!==t.teachType),y.Eb(1),y.tc("ngIf","22"===t.teachType),y.Eb(1),y.tc("ngIf","22"!==t.teachType),y.Eb(2),y.Lc(y.wc(134,Pe)),y.Eb(1),y.Lc(y.wc(135,Ce)),y.tc("nzActive",t.active4)("nzHeader",n),y.Eb(6),y.tc("ngIf","0"===t.preview||(null==t.handoutsMaterial?null:t.handoutsMaterial.length)),y.Eb(1),y.tc("ngIf","1"===t.preview&&!(null!=t.handoutsMaterial&&t.handoutsMaterial.length)),y.Eb(13),y.tc("nzVisible",t.examListPreview)("nzFooter",null)("nzBodyStyle",y.wc(136,Fn)),y.Eb(4),y.tc("ngModel",t.queryKeywords),y.Eb(3),y.tc("ngIf",2===t.NumberS(t.queryKeywords)),y.Eb(1),y.tc("ngIf",1===t.NumberS(t.queryKeywords)),y.Eb(4),y.tc("ngModel",t.selectedValue),y.Eb(7),y.tc("nzSpinning",t.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzNodes",t.examSearch)("ngModel",t.examSubQuestionBankExam)("nzDropdownStyle",y.wc(137,Nt))("nzTreeTemplate",i),y.Eb(5),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(1),y.tc("nzData",t.listOfData)("nzScroll",y.wc(138,Dn))("nzFrontPagination",!1),y.Eb(21),y.tc("ngForOf",c.data),y.Eb(1),y.tc("nzVisible",t.exerciseListPreview)("nzFooter",null)("nzBodyStyle",y.wc(139,Fn)),y.Eb(1),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(4),y.tc("ngModel",t.queryKeywordsJob),y.Eb(3),y.tc("ngIf",2===t.NumberS(t.queryKeywordsJob)),y.Eb(1),y.tc("ngIf",1===t.NumberS(t.queryKeywordsJob)),y.Eb(4),y.tc("nzSpinning",t.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzNodes",t.exerciseSearch)("ngModel",t.homeworkSubQuestionBank)("nzDropdownStyle",y.wc(140,Nt))("nzTreeTemplate",a),y.Eb(5),y.tc("nzData",t.listOfDataExercise)("nzScroll",y.wc(141,Dn))("nzFrontPagination",!1),y.Eb(15),y.tc("ngForOf",o.data),y.Eb(1),y.tc("nzVisible",t.questionnairePreview)("nzFooter",null)("nzBodyStyle",y.wc(142,Fn)),y.Eb(6),y.tc("ngModel",t.questionnaireName),y.Eb(4),y.tc("ngModel",t.questionnaireType),y.Eb(7),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(1),y.tc("nzData",t.listOfQuestionnaireData)("nzScroll",y.wc(143,Dn))("nzFrontPagination",!1),y.Eb(19),y.tc("ngForOf",s.data),y.Eb(1),y.tc("nzVisible",t.evaluationPreview)("nzFooter",null)("nzBodyStyle",y.wc(144,Fn)),y.Eb(6),y.tc("ngModel",t.evaluationName),y.Eb(4),y.tc("ngModel",t.evaluationType),y.Eb(7),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(1),y.tc("nzData",t.listOfEvaluationData)("nzScroll",y.wc(145,Dn))("nzFrontPagination",!1),y.Eb(19),y.tc("ngForOf",r.data),y.Eb(1),y.tc("nzVisible",t.isVisible)("nzMaskClosable",!1),y.Eb(1),y.tc("nzSpinning",t.examSettingLoading)("nzDelay",0),y.Eb(1),y.tc("formGroup",t.examSettingForm),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzMin",1)("nzStep",1),y.Eb(3),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzMin",1)("nzStep",1),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(7),y.tc("ngIf","5"===t.examSettingForm.value.paperType),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(6),y.tc("ngIf","6"===t.examSettingForm.value.paperType&&("3"===t.examType||"2"===t.examType)),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("ngModel",t.examSettingForm.value.answerTimes)("nzDisabled","2"===t.exerciseType||null),y.Eb(1),y.tc("nzValue",0),y.Eb(2),y.tc("nzValue",1),y.Eb(1),y.tc("ngModel",t.value)("nzMin",1)("nzMax",100)("nzStep",1)("ngModelOptions",y.wc(146,jn))("disabled","2"===t.exerciseType||null),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(5),y.tc("nzVisible",t.isQuestionnaireVisible)("nzMaskClosable",!1),y.Eb(1),y.tc("formGroup",t.questionnairSettingForm),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("ngModel",t.questionnairSettingForm.value.answerTimes),y.Eb(1),y.tc("nzValue",0),y.Eb(2),y.tc("nzValue",1),y.Eb(1),y.tc("ngModel",t.answerTimesValue)("nzMin",1)("nzMax",100)("nzStep",1)("ngModelOptions",y.wc(147,jn)),y.Eb(2),y.tc("nzVisible",t.visibleAssociate)("nzMaskClosable",!1)("nzFooter",null)("nzBodyStyle",y.wc(148,_n)),y.Eb(1),y.tc("nzSpinning",t.bindLoading)("nzDelay",0),y.Eb(3),y.Rc(" \u4e3b\u8bb2\u4e49\uff08\u5171",t.totalPage,"\u9875\uff09 "),y.Eb(4),y.tc("ngForOf",t.assocateClassLists),y.Eb(2),y.tc("ngIf",t.previewStart)}},directives:[I.a,v.n,Z.a,T.a,T.c,h.d,C.a,g.d,o.o,o.q,g.a,N.a,V.a,F.a,D.a,j.c,j.j,j.k,j.b,j.h,j.e,v.m,_.b,o.c,o.y,o.p,q.b,o.i,A.c,q.c,A.a,q.d,q.a,U.a,o.g,B.c,B.b,C.b,L.a,R.d,h.a,$.a,v.o,Q.a,o.v,o.r,o.x,v.l,W.a,W.b,W.e,J.c,J.d,H.a,o.s,K.a,G.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}.container[_ngcontent-%COMP%]   .not-content[_ngcontent-%COMP%]{text-align:center;margin:20px 0 0 12px}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{height:100%;flex:0 0 250px;padding:15px;overflow-x:hidden;overflow-y:auto}.container[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{width:100%;height:100%;flex:0 0 20px;background-color:#f0f2f5}.container[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{padding-left:15px;width:calc(100% - 270px);height:100%;overflow:auto}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%;padding:15px 15px 0;overflow-x:hidden;overflow-y:auto}.list[_ngcontent-%COMP%]{position:relative;width:100%}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;cursor:pointer;padding:0 10px;transition:all .3s}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-block;width:300px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-break:break-all}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-button[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-containers[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-button[_ngcontent-%COMP%]{transition:none}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]{outline:none;padding-left:10px;min-width:100px;border:1px solid #40a9ff;height:30px;border-radius:3px;visibility:hidden!important;opacity:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-container.disable-select[_ngcontent-%COMP%]{color:#9e9b9b;border:1px solid #ada9a9;cursor:not-allowed}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{border:none;outline:none;padding-left:10px;font-size:14px;visibility:hidden!important;opacity:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{opacity:0;white-space:nowrap;overflow:hidden}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{padding:0 12px 0 0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#fafafa}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .action-group[_ngcontent-%COMP%]{opacity:1}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-button[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-containers[_ngcontent-%COMP%]{visibility:visible!important;opacity:1}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-button[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-containers[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{visibility:visible!important}.list[_ngcontent-%COMP%]   .add-section[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}.row-title[_ngcontent-%COMP%]{font-size:18px;line-height:22px;padding-left:10px;margin-bottom:15px}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header{background-color:#fafafa}[_nghost-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:16px 30px}.title-name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:inline-block}@media screen and (min-width:1200px) and (max-width:1400px){.list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:150px}}@media screen and (min-width:1401px) and (max-width:1600px){.list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:250px}}@media screen and (min-width:1601px) and (max-width:1800px){.list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:350px}}.header[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;overflow:hidden;display:inline-block}.header[_ngcontent-%COMP%]   .header-container.wcl[_ngcontent-%COMP%]{width:calc(100% - 85px)!important}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]{width:33.3%;float:left;display:flex;margin-right:20px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .w31[_ngcontent-%COMP%]{width:31%!important}.associate[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:10px;margin-top:-20px;border-bottom:1px solid grey}  .association-table .ant-avatar-string{position:static}.font-question[_ngcontent-%COMP%]{font-size:20px;cursor:pointer;color:#fff;background-color:#1890ff;border-radius:50%;vertical-align:bottom}.associate-title[_ngcontent-%COMP%]{display:inline-block;width:238px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:-webkit-baseline-middle}.association-table[_ngcontent-%COMP%]{padding:10px 0}.association-table[_ngcontent-%COMP%]   .association-list[_ngcontent-%COMP%]{transition:all .3s;overflow:hidden}.association-table[_ngcontent-%COMP%]   .association-list.h0[_ngcontent-%COMP%]{height:0}.association-table[_ngcontent-%COMP%]   .association-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{overflow:hidden;margin-bottom:10px}nz-tree[_ngcontent-%COMP%]{overflow:hidden;margin:0 -24px;padding:0 24px}.custom-node[_ngcontent-%COMP%]{cursor:pointer;line-height:24px;display:inline-block}.custom-node[_ngcontent-%COMP%], .file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{margin-left:4px}.file-desc[_ngcontent-%COMP%], .folder-desc[_ngcontent-%COMP%]{padding:0 8px;display:inline-block;background:#87ceff;color:#fff;position:relative;left:12px}.mr0[_ngcontent-%COMP%]{margin-right:0!important}[_nghost-%COMP%]     .ant-btn>.anticon+span{margin-left:5px}  .evaluation-table .ant-table-expanded-row-fixed{left:50%!important;transform:translateX(-50%)!important}"]}),e})()},Wc2E:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("HDdC"),c=n("WTGI"),a=n("tk/3"),o=n("AytR"),s=n("mhyn"),r=n("fXoL"),l=n("JFwS");let d=(()=>{class e{constructor(e,t){this.httpService=e,this.httpClient=t,this.uploadOss=(e,t)=>new i.a(n=>{this.httpService.post("res/oss/getPolicy",{dir:t},{}).subscribe(t=>{200===t.status?(this.uploadData=t.data,this.customReq(e).subscribe(e=>{n.next(e),n.unsubscribe()})):(n.next(!1),n.unsubscribe())},e=>{n.next(!1),n.unsubscribe()})}),this.customReq=e=>{const t=new FormData,n=this.uploadData.dir+c.a.getRandomFileName()+"."+c.a.getFileExt(e.name);t.append("OSSAccessKeyId",this.uploadData.accessKeyId),t.append("policy",this.uploadData.policy),t.append("Signature",this.uploadData.signature),t.append("key",n),t.append("success_action_status","200"),t.append("file",e);const s=new a.h("POST",o.a.OSS_URL,t,{reportProgress:!0});return new i.a(e=>{this.httpClient.request(s).subscribe(t=>{t.type===a.f.UploadProgress||t instanceof a.i&&(e.next("/"+n),e.unsubscribe())},()=>{e.next(!1),e.unsubscribe()})})}}}return e.\u0275fac=function(t){return new(t||e)(r.ec(l.a),r.ec(a.c))},e.\u0275prov=r.Qb({token:e,factory:e.\u0275fac,providedIn:s.a}),e})()},bSaw:function(e,t,n){"use strict";n.d(t,"a",(function(){return T}));var i=n("3Pt+"),c=n("WTGI"),a=n("HDdC"),o=n("4tR+"),s=n("Vhue"),r=n("+O+V"),l=n("fXoL"),d=n("PScX"),u=n("dEAy"),h=n("Wc2E"),p=n("uMH2"),b=n("19W7"),g=n("qAZ0"),m=n("ocnv"),f=n("B+r4"),z=n("PTRe"),v=n("zAKX"),y=n("D9mS"),S=n("OzZK"),k=n("RwU8"),P=n("C2AL"),C=n("FwiY"),E=n("ofXK");function w(e,t){1&e&&(l.ac(0,"div"),l.Pc(1,"\u516c\u53f8\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),l.Zb())}function x(e,t){1&e&&(l.ac(0,"div"),l.Pc(1,"\u516c\u53f8\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc740\u4e2a\u5b57\u7b26 "),l.Zb())}function M(e,t){if(1&e&&(l.Nc(0,w,2,0,"div",23),l.Nc(1,x,2,0,"div",23)),2&e){const e=t.$implicit;l.tc("ngIf",e.hasError("required")),l.Eb(1),l.tc("ngIf",e.hasError("maxlength"))}}function O(e,t){1&e&&(l.ac(0,"div"),l.Pc(1," \u652f\u6301zip\u3001rar\u683c\u5f0f "),l.Zb())}function I(e,t){if(1&e){const e=l.bc();l.ac(0,"div"),l.ac(1,"button",25),l.ic("click",(function(){return l.Ec(e),l.lc().cancel()})),l.Pc(2,"\u53d6\u6d88"),l.Zb(),l.ac(3,"button",26),l.ic("click",(function(){return l.Ec(e),l.lc().save()})),l.Pc(4,"\u786e\u5b9a"),l.Zb(),l.Zb()}if(2&e){const e=l.lc();l.Eb(3),l.tc("nzLoading",e.newCompanyLoading)}}const Z=function(){return{showPreviewIcon:!1,showRemoveIcon:!0,showDownloadIcon:!1}};let T=(()=>{class e{constructor(e,t,n,i,r,l,d){this.nzMesService=e,this.nzModalService=t,this.nzModalRef=n,this.fb=i,this.uploadOssService=r,this.courseManageService=l,this.statisticsLogService=d,this.newCompanyLoading=!1,this.nzFileList=[],this.isUsed=s.a.getPacketInfoItem("isUsed"),this.acceptType=["zip","rar"],this.beforeUpload=e=>new a.a(t=>{let n=!0;e.name.length>35&&(this.nzMesService.error("\u6587\u4ef6\u540d\u5b57\u592a\u957f\u5566\uff0c\u4fdd\u8bc1\u5305\u542b\u6269\u5c55\u540d35\u4e2a\u6587\u5b57\u4ee5\u5185"),n=!1),this.acceptType.indexOf(c.a.getExt(e.name))<0&&(this.nzMesService.error("\u8bf7\u4e0a\u4f20zip\u6216rar\u538b\u7f29\u7c7b\u578b\u7684\u6587\u4ef6"),n=!1),n?(t.next(!0),t.complete()):t.next(!1)}),this.removeFileSelf=e=>{this.nzFileList=[],this.newCompanyForm.patchValue({filePath:""}),this.newCompanyForm.controls.filePath.markAsUntouched(),this.newCompanyForm.controls.filePath.markAsPristine(),this.newCompanyForm.controls.filePath.updateValueAndValidity()},this.customRewardRequest=e=>{this.newCompanyLoading=!0,this.uploadOssService.uploadOss(e.file,o.a.company_file).subscribe(t=>{this.newCompanyLoading=!1,this.newCompanyForm.patchValue({filePath:t}),e.onSuccess(Object.assign({},e),e.file,{})},t=>{this.newCompanyLoading=!1,e.onError(t,e.file),this.nzMesService.error(JSON.stringify(t))})}}ngOnInit(){const{companyItem:e}=this;if(e.id){const{name:t,termType:n,filePath:a,fileName:o,permission:s}=e,r={name:t,termType:n,filePath:a,permission:s?s.split(","):[]};this.nzFileList=[Object.assign(Object.assign({},r),{uid:c.a.getRandomFileName(),name:o})],this.newCompanyForm=new i.h({name:new i.e({value:r.name,disabled:this.isUsed>0},[i.w.required,i.w.maxLength(40)]),termType:new i.e({value:r.termType,disabled:this.isUsed>0},i.w.required),filePath:new i.e(r.filePath,i.w.required),permission:new i.e(r.permission,i.w.required)})}else this.newCompanyForm=this.fb.group({name:["",[i.w.required,i.w.maxLength(40)]],termType:[0,[i.w.required]],filePath:["",[i.w.required]],permission:[["\u4e1a\u52a1\u4e2d\u5fc3","\u6570\u5b57\u5927\u8111"],[i.w.required]]})}save(){var e,t;for(const c in this.newCompanyForm.controls)this.newCompanyForm.controls.hasOwnProperty(c)&&(this.newCompanyForm.controls[c].markAsDirty(),this.newCompanyForm.controls[c].updateValueAndValidity());if(this.newCompanyForm.invalid)return;this.newCompanyLoading=!0;const n=null===(e=this.companyItem)||void 0===e?void 0:e.seq,i={id:null===(t=this.companyItem)||void 0===t?void 0:t.id,courseId:this.courseId,coursePacketId:this.coursePacketId,name:this.newCompanyForm.value.name,seq:n||c.a.getMaxSeq(this.companyLists),filePath:this.newCompanyForm.value.filePath,status:1,fileName:this.nzFileList[0].name,termType:this.newCompanyForm.value.termType,permission:this.newCompanyForm.value.permission.join(",")};this.courseManageService.addCoursePacketCompany(i).subscribe(e=>{this.newCompanyLoading=!1;const t=!!this.companyItem.id;this.statisticsLogService.statisticsPacketInfoLog({name:t?"\u4fee\u6539\u516c\u53f8\u4fe1\u606f":"\u65b0\u589e\u516c\u53f8",actionCode:r.j.packetInfo["otherSet-99train-action"][t?"modify":"addCode"],content:JSON.stringify(i)}),201===e.status&&this.nzModalRef.close(!0)},()=>{this.newCompanyLoading=!1})}cancel(){this.nzModalRef.close(!1)}getNameLength(){const{name:e}=this.newCompanyForm.controls;return"string"==typeof e?e.length:e.value.length}}return e.\u0275fac=function(t){return new(t||e)(l.Ub(d.e),l.Ub(u.e),l.Ub(u.d),l.Ub(i.d),l.Ub(h.a),l.Ub(p.a),l.Ub(b.a))},e.\u0275cmp=l.Ob({type:e,selectors:[["app-new-company"]],inputs:{courseId:"courseId",coursePacketId:"coursePacketId",companyLists:"companyLists",companyItem:"companyItem"},decls:39,vars:29,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0","formControlName","name"],[2,"margin-left","10px"],["nameTpl",""],["nzHasFeedback","","nzErrorTip","\u6709\u6548\u671f\u9650\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","termType",2,"flex","1",3,"nzShowSearch"],["nzLabel","\u534a\u5e74",3,"nzValue"],["nzLabel","1\u5e74",3,"nzValue"],["nzLabel","2\u5e74",3,"nzValue"],["nzLabel","3\u5e74",3,"nzValue"],["nzHasFeedback","","nzErrorTip","\u6743\u9650\u8bbe\u7f6e\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","permission","nzMode","multiple",2,"flex","1",3,"nzShowSearch"],["nzValue","\u4e1a\u52a1\u4e2d\u5fc3","nzLabel","\u4e1a\u52a1\u4e2d\u5fc3"],["nzValue","\u6570\u5b57\u5927\u8111","nzLabel","\u6570\u5b57\u5927\u8111"],["nzValue","\u8d22\u52a1\u4e2d\u5fc3","nzLabel","\u8d22\u52a1\u4e2d\u5fc3"],["nzHasFeedback","","nzErrorTip","\u6570\u636e\u5305\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["type","hidden","formControlName","filePath"],[3,"nzBeforeUpload","nzCustomRequest","nzRemove","nzFileList","nzShowUploadList","nzFileListChange"],["nz-button","",3,"disabled"],["nz-icon","","nzType","upload",2,"font-size","20px"],[4,"ngIf"],[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){if(1&e&&(l.ac(0,"nz-spin",0),l.ac(1,"form",1),l.ac(2,"nz-form-item"),l.ac(3,"nz-form-label",2),l.Pc(4,"\u516c\u53f8\u540d\u79f0"),l.Zb(),l.ac(5,"nz-form-control",3),l.Vb(6,"input",4),l.Zb(),l.ac(7,"span",5),l.Pc(8),l.Zb(),l.Nc(9,M,2,2,"ng-template",null,6,l.Oc),l.Zb(),l.ac(11,"nz-form-item"),l.ac(12,"nz-form-label",2),l.Pc(13,"\u6709\u6548\u671f\u9650"),l.Zb(),l.ac(14,"nz-form-control",7),l.ac(15,"nz-select",8),l.Vb(16,"nz-option",9),l.Vb(17,"nz-option",10),l.Vb(18,"nz-option",11),l.Vb(19,"nz-option",12),l.Zb(),l.Zb(),l.Zb(),l.ac(20,"nz-form-item"),l.ac(21,"nz-form-label",2),l.Pc(22,"\u6743\u9650\u8bbe\u7f6e"),l.Zb(),l.ac(23,"nz-form-control",13),l.ac(24,"nz-select",14),l.Vb(25,"nz-option",15),l.Vb(26,"nz-option",16),l.Vb(27,"nz-option",17),l.Zb(),l.Zb(),l.Zb(),l.ac(28,"nz-form-item"),l.ac(29,"nz-form-label",2),l.Pc(30,"\u4e0a\u4f20\u6570\u636e\u5305"),l.Zb(),l.ac(31,"nz-form-control",18),l.Vb(32,"input",19),l.ac(33,"nz-upload",20),l.ic("nzFileListChange",(function(e){return t.nzFileList=e})),l.ac(34,"button",21),l.Vb(35,"i",22),l.Pc(36,"\u672c\u5730\u4e0a\u4f20 "),l.Zb(),l.Nc(37,O,2,0,"div",23),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Nc(38,I,5,1,"div",24),l.Zb()),2&e){const e=l.Cc(10);l.tc("nzSpinning",t.newCompanyLoading)("nzDelay",0),l.Eb(1),l.tc("formGroup",t.newCompanyForm),l.Eb(2),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18)("nzErrorTip",e),l.Eb(2),l.Mc("color",t.newCompanyForm.controls.name.hasError("maxlength")?"red":"inherit"),l.Eb(1),l.Rc(" ",t.getNameLength(),"/40"),l.Eb(4),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18),l.Eb(1),l.tc("nzShowSearch",!0),l.Eb(1),l.tc("nzValue",0),l.Eb(1),l.tc("nzValue",1),l.Eb(1),l.tc("nzValue",2),l.Eb(1),l.tc("nzValue",3),l.Eb(2),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18),l.Eb(1),l.tc("nzShowSearch",!0),l.Eb(5),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18),l.Eb(2),l.tc("nzBeforeUpload",t.beforeUpload)("nzCustomRequest",t.customRewardRequest)("nzRemove",t.removeFileSelf)("nzFileList",t.nzFileList)("nzShowUploadList",l.wc(28,Z)),l.Eb(1),l.tc("disabled",!!t.newCompanyForm.value.filePath||null),l.Eb(3),l.tc("ngIf",!t.newCompanyForm.value.filePath)}},directives:[g.a,i.y,i.p,m.b,i.i,f.c,m.c,f.a,m.d,m.a,z.b,i.c,i.o,i.g,v.d,v.a,y.a,S.a,k.a,P.a,C.a,E.n,u.b],styles:[""]}),e})()},duvs:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("fXoL"),c=n("3Pt+"),a=n("uMH2"),o=n("PScX"),s=n("VXpv"),r=n("TaO5");function l(e,t){1&e&&i.Pc(0),2&e&&i.Rc(" \u8fd8\u6709 ",t.$implicit.length," \u4e2a\u6821\u533a/\u5927\u533a...")}const d=function(){return{"max-height":"400px"}};let u=(()=>{class e{constructor(e,t,n){this.cdr=e,this.courseMgService=t,this.nzMsg=n,this.opts=[],this.selectedValues=[],this.expandKeys=[],this.checkAll={flag:!1},this.schoolZone=new i.n,this.dataLength=0,this.dataPLength=0,this.onModelChange=e=>{}}ngOnInit(){this.collegeList()}writeValue(e){this.selectedValues=e,this.setExpandKeys(),this.detectChange()}registerOnChange(e){this.onModelChange=e}registerOnTouched(e){}setDisabledState(e){}collegeList(){this.courseMgService.collegeList("area").subscribe(e=>{if(200!==e.status)return void this.nzMsg.error(e.message);this.opts=this.formatOpts(e.data).filter(e=>e.children.length),this.dataLength=0,this.dataPLength=this.opts.length,this.opts.forEach(e=>{e.children&&e.children.length&&(this.dataLength+=e.children.length)});const{opts:t,dataLength:n,dataPLength:i}=this;this.schoolZone.emit({opts:t,dataLength:n,dataPLength:i}),this.setExpandKeys(),this.detectChange()},e=>{this.nzMsg.error(JSON.stringify(e))})}formatOpts(e){return e.map(e=>{return{key:"AREA_"+e.typeCode,value:e.typeCode,title:e.typeName,children:(t=e.chlidren,t&&0!==t.length?t.map(e=>({key:e.oCode,value:e.oCode,title:e.orgName,isLeaf:!0})):[])};var t})}selectedChange(e){const t=e.every((e,t)=>{if(e.indexOf("AREA_")<0)return!0});this.checkAll.flag=t?this.dataLength===e.length:this.dataPLength===e.length,this.setModalChange(e,!1)}setExpandKeys(){if(!this.selectedValues)return;if(0===this.opts.length||0===this.selectedValues.length)return;const e=[...this.selectedValues],t=[];for(const n of this.opts)if(0!==n.children.length)for(const i of n.children){if(0===e.length)return void(this.expandKeys=Array.from(new Set(t)));const c=e.findIndex(e=>e===i.key);-1!==c&&(t.push(n.key),e.splice(c,1))}}checkAllStatus(e){if(e){const e=[];this.opts.map(t=>{t.children&&t.children.length>0&&t.children.map(t=>{e.push(t.key)})}),this.selectedValues=e,this.setModalChange(e,!0)}else this.selectedValues=[],this.setModalChange([],!0)}setModalChange(e,t){if(t)this.onModelChange(e);else{const t=e.reduce((e,t)=>{if(t.startsWith("AREA_")){const n=this.opts.find(e=>e.key===t).children.map(e=>e.key);Array.prototype.push.apply(e,n)}else e.push(t);return e},[]);this.onModelChange(t)}}detectChange(){this.cdr.markForCheck()}}return e.\u0275fac=function(t){return new(t||e)(i.Ub(i.h),i.Ub(a.a),i.Ub(o.e))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-school-zone"]],inputs:{checkAll:"checkAll"},outputs:{schoolZone:"schoolZone"},features:[i.Db([{provide:c.m,useExisting:Object(i.W)(()=>e),multi:!0}])],decls:5,vars:10,consts:[["nzShowSearch","","nzCheckable","",2,"width","80%",3,"ngModel","nzNodes","nzExpandedKeys","nzMultiple","nzMaxTagCount","nzMaxTagPlaceholder","nzDropdownStyle","nzHideUnMatched","ngModelChange"],["nz-checkbox","",2,"margin-left","10px",3,"ngModel","ngModelChange"],["omittedPlaceHolder",""]],template:function(e,t){if(1&e&&(i.ac(0,"nz-tree-select",0),i.ic("ngModelChange",(function(e){return t.selectedValues=e}))("ngModelChange",(function(e){return t.selectedChange(e)})),i.Zb(),i.ac(1,"label",1),i.ic("ngModelChange",(function(e){return t.checkAll.flag=e}))("ngModelChange",(function(e){return t.checkAllStatus(e)})),i.Pc(2,"\u5168\u9009"),i.Zb(),i.Nc(3,l,1,1,"ng-template",null,2,i.Oc)),2&e){const e=i.Cc(4);i.tc("ngModel",t.selectedValues)("nzNodes",t.opts)("nzExpandedKeys",t.expandKeys)("nzMultiple",!0)("nzMaxTagCount",10)("nzMaxTagPlaceholder",e)("nzDropdownStyle",i.wc(9,d))("nzHideUnMatched",!0),i.Eb(1),i.tc("ngModel",t.checkAll.flag)}},directives:[s.a,c.o,c.q,r.a],styles:[""],changeDetection:0}),e})()},"i+L+":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n("fXoL"),c=n("Vhue"),a=n("WTGI"),o=n("mhyn"),s=n("4tR+"),r=n("HDdC"),l=n("+O+V"),d=n("tyNb"),u=n("pz6Z"),h=n("PScX"),p=n("uMH2"),b=n("dEAy"),g=n("b5Nk"),m=n("3Pt+"),f=n("iacB"),z=n("2+G5"),v=n("jhN1"),y=n("Wc2E"),S=n("19W7"),k=n("qAZ0"),P=n("D9mS"),C=n("OzZK"),E=n("RwU8"),w=n("C2AL"),x=n("FwiY");function M(e,t){if(1&e){const e=i.bc();i.ac(0,"div"),i.ac(1,"button",7),i.ic("click",(function(){return i.Ec(e),i.lc().cancel()})),i.Pc(2,"\u53d6\u6d88"),i.Zb(),i.ac(3,"button",8),i.ic("click",(function(){return i.Ec(e),i.lc().save()})),i.Pc(4,"\u786e\u5b9a"),i.Zb(),i.Zb()}if(2&e){const e=i.lc();i.Eb(3),i.tc("nzLoading",e.rewardSettingsLoading)}}const O=function(){return{showPreviewIcon:!0,showRemoveIcon:!1,showDownloadIcon:!1}};let I=(()=>{class e{constructor(e,t,n,i,c,o,l,d,u,h,p,b,g,m,f,z,v){this.route=e,this.menuService=t,this.nzMesService=n,this.courseMgService=i,this.nzModalService=c,this.nzModalRef=o,this.aliOssService=l,this.fb=d,this.modalService=u,this.knowledgeManageService=h,this.renderer2=p,this.trainManageService=b,this.sanitizer=g,this.uploadOssService=m,this.statisticsLogService=f,this.locale=z,this.win=v,this.limitTask=1e4,this.rewardSettingsLoading=!1,this.nzFileList=[],this.nzFileListBak=[],this.beforeUpload=e=>new r.a(t=>e.name.length>35?(this.nzMesService.error("\u6587\u4ef6\u540d\u5b57\u592a\u957f\u5566\uff0c\u4fdd\u8bc1\u5305\u542b\u6269\u5c55\u540d35\u4e2a\u6587\u5b57\u4ee5\u5185"),t.next(!1),void t.complete()):"jpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,pdf,mp4".indexOf(a.a.getExt(e.name))<0?(this.nzMesService.error("\u8bf7\u4e0a\u4f20\u540e\u7f00\u540d\u4e3ajpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,pdf,mp4\u7c7b\u578b\u7684\u6587\u4ef6\uff01"),t.next(!1),void t.complete()):(t.next(!0),void t.complete())),this.customRewardRequest=e=>{this.rewardSettingsLoading=!0,this.uploadOssService.uploadOss(e.file,s.a.reward_file).subscribe(t=>{this.rewardSettingsLoading=!1,e.file.url=t,e.onSuccess(Object.assign({},e),e.file,{})},t=>{this.rewardSettingsLoading=!1,e.onError(t,e.file),this.nzMesService.error(JSON.stringify(t))})}}ngOnInit(){this.nzFileList=this.currentCard.coursePacketCardRecourseList||[],this.nzFileListBak=JSON.parse(JSON.stringify(this.nzFileList))}resourceCall(){c.a.putScpResourceMaterial({type:"scp-section-handout",professionId:this.professionId,sectionInfo:{courseId:this.courseId,coursePacketId:this.coursePacketId,coursePacketCardId:this.currentCard.id},seq:a.a.getMaxSeq(this.nzFileList),nodes:this.nzFileList?this.nzFileList.map(e=>({taskId:e.id,id:e.resourceId})):[],isStandard:"",limit:this.limitTask}),c.a.removeReadtree(),this.nzModalRef.close(!0),this.menuService.gotoUrl({url:"/m/rm/read",paramUrl:"?from=scp&task=2&reward=1"})}diffFileChange(e,t){return this.nzFileList.length!==this.nzFileListBak.length||!(!this.nzFileList.length||this.nzFileList.filter(e=>e.id).length===this.nzFileList.length)||void 0}save(){if(!this.nzFileList.length)return void this.nzMesService.warning("\u8bf7\u5148\u4e0a\u4f20\u6587\u4ef6");this.rewardSettingsLoading=!0;const e=[];this.nzFileList.forEach((t,n)=>{const i={courseId:this.courseId,coursePacketId:this.coursePacketId,coursePacketCardId:this.currentCard.id,seq:n,id:t.id};t.originFileObj&&(i.attachmentPath=t.originFileObj.url),t.originFileObj&&(i.title=t.originFileObj.name),e.push(i)}),this.courseMgService.levelInformationBatchUpload(e).subscribe(t=>{this.rewardSettingsLoading=!1,201===t.status?(this.diffFileChange(this.nzFileList,this.nzFileListBak)&&this.statisticsLogService.statisticsPacketInfoLog({name:"\u5173\u5361\u5956\u52b1\u8bbe\u7f6e\u672c\u5730\u4e0a\u4f20",actionCode:l.j.packetInfo["otherSet-levelthrough-action"].modify,content:JSON.stringify(e)}),this.nzModalRef.close(!0)):500===t.status&&this.nzMesService.warning(t.message)},()=>{this.rewardSettingsLoading=!1})}cancel(){this.nzModalRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(i.Ub(d.a),i.Ub(u.a),i.Ub(h.e),i.Ub(p.a),i.Ub(b.e),i.Ub(b.d),i.Ub(g.a),i.Ub(m.d),i.Ub(b.e),i.Ub(f.a),i.Ub(i.E),i.Ub(z.a),i.Ub(v.b),i.Ub(y.a),i.Ub(S.a),i.Ub(i.u),i.Ub(o.b))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-reward-settings"]],inputs:{courseId:"courseId",professionId:"professionId",coursePacketId:"coursePacketId",currentCard:"currentCard"},decls:10,vars:7,consts:[[3,"nzSpinning","nzDelay"],[2,"max-width","100px","margin-right","16px"],["nzMultiple","",3,"nzBeforeUpload","nzShowUploadList","nzFileList","nzCustomRequest","nzFileListChange"],["nz-button","",2,"margin-bottom","20px"],["nz-icon","","nzType","upload",2,"font-size","20px"],["nz-button","",2,"position","absolute","left","220px","top","0",3,"click"],[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(i.ac(0,"nz-spin",0),i.ac(1,"span",1),i.Pc(2,"\u672c\u5730\u4e0a\u4f20\uff1a"),i.Zb(),i.ac(3,"nz-upload",2),i.ic("nzFileListChange",(function(e){return t.nzFileList=e})),i.ac(4,"button",3),i.Vb(5,"i",4),i.Pc(6,"\u4e0a\u4f20\u6587\u4ef6 "),i.Zb(),i.Zb(),i.ac(7,"button",5),i.ic("click",(function(){return t.resourceCall()})),i.Pc(8," \u8d44\u6e90\u8c03\u7528 "),i.Zb(),i.Zb(),i.Nc(9,M,5,1,"div",6)),2&e&&(i.tc("nzSpinning",t.rewardSettingsLoading)("nzDelay",0),i.Eb(3),i.tc("nzBeforeUpload",t.beforeUpload)("nzShowUploadList",i.wc(6,O))("nzFileList",t.nzFileList)("nzCustomRequest",t.customRewardRequest))},directives:[k.a,P.a,C.a,E.a,w.a,x.a,b.b],styles:[""]}),e})()},ngz8:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("3Pt+"),c=n("3JH+"),a=n("+O+V"),o=n("fXoL"),s=n("PScX"),r=n("dEAy"),l=n("uMH2"),d=n("19W7"),u=n("qAZ0"),h=n("ocnv"),p=n("B+r4"),b=n("PTRe"),g=n("ofXK"),m=n("OzZK"),f=n("RwU8"),z=n("C2AL");function v(e,t){1&e&&(o.ac(0,"div"),o.Pc(1,"\u8bfe\u6b21\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),o.Zb())}function y(e,t){1&e&&(o.ac(0,"div"),o.Pc(1,"\u8bfe\u6b21\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc725\u4e2a\u5b57\u7b26"),o.Zb())}function S(e,t){if(1&e&&(o.Nc(0,v,2,0,"div",8),o.Nc(1,y,2,0,"div",8)),2&e){const e=t.$implicit;o.tc("ngIf",e.hasError("required")),o.Eb(1),o.tc("ngIf",e.hasError("maxlength"))}}function k(e,t){if(1&e){const e=o.bc();o.ac(0,"div"),o.ac(1,"button",9),o.ic("click",(function(){return o.Ec(e),o.lc().cancel()})),o.Pc(2,"\u53d6\u6d88"),o.Zb(),o.ac(3,"button",10),o.ic("click",(function(){return o.Ec(e),o.lc().save()})),o.Pc(4,"\u786e\u5b9a"),o.Zb(),o.Zb()}if(2&e){const e=o.lc();o.Eb(3),o.tc("nzLoading",e.editLessonLoading)}}let P=(()=>{class e{constructor(e,t,n,a,o,s){this.nzMesService=e,this.nzModalService=t,this.nzModalRef=n,this.fb=a,this.courseManageService=o,this.statisticsLogService=s,this.data={},this.editLessonLoading=!1,this.courseForm=this.fb.group({name:["",[i.w.required,Object(c.b)(),i.w.maxLength(25)]]})}ngOnInit(){this.courseForm.patchValue({name:this.data.name})}save(){for(const a in this.courseForm.controls)this.courseForm.controls.hasOwnProperty(a)&&(this.courseForm.controls[a].markAsDirty(),this.courseForm.controls[a].updateValueAndValidity());if(this.courseForm.invalid)return;this.editLessonLoading=!0;const{id:e,courseId:t,coursePacketId:n,seq:i}=this.data,c={id:e,name:this.courseForm.value.name,courseId:t,coursePacketId:n,seq:i};this.courseManageService.saveTable(c).subscribe(e=>{this.editLessonLoading=!1,201===e.status&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u8bfe\u6b21",actionCode:a.j.packetInfo["otherSet-lessons-action"].modify,content:JSON.stringify(c)}),this.nzModalRef.close(!0))},()=>{this.editLessonLoading=!1})}cancel(){this.nzModalRef.close(!1)}}return e.\u0275fac=function(t){return new(t||e)(o.Ub(s.e),o.Ub(r.e),o.Ub(r.d),o.Ub(i.d),o.Ub(l.a),o.Ub(d.a))},e.\u0275cmp=o.Ob({type:e,selectors:[["app-edit-lesson"]],inputs:{data:"data"},decls:12,vars:9,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","type","text","formControlName","name","placeholder","\u8bf7\u8f93\u5165",3,"keyup.enter"],[2,"margin-left","10px","margin-top","5px","display","inline-block"],["nameTpl",""],[4,"nzModalFooter"],[4,"ngIf"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){if(1&e&&(o.ac(0,"nz-spin",0),o.ac(1,"form",1),o.ac(2,"nz-form-item"),o.ac(3,"nz-form-label",2),o.Pc(4,"\u8bfe\u6b21\u540d\u79f0"),o.Zb(),o.ac(5,"nz-form-control",3),o.ac(6,"input",4),o.ic("keyup.enter",(function(){return t.save()})),o.Zb(),o.Zb(),o.ac(7,"span",5),o.Pc(8),o.Zb(),o.Nc(9,S,2,2,"ng-template",null,6,o.Oc),o.Zb(),o.Zb(),o.Nc(11,k,5,1,"div",7),o.Zb()),2&e){const e=o.Cc(10);o.tc("nzSpinning",t.editLessonLoading)("nzDelay",0),o.Eb(1),o.tc("formGroup",t.courseForm),o.Eb(2),o.tc("nzSpan",5),o.Eb(2),o.tc("nzSpan",18)("nzErrorTip",e),o.Eb(2),o.Mc("color",t.courseForm.controls.name.hasError("maxlength")?"red":"inherit"),o.Eb(1),o.Rc(" ",t.courseForm.value.name.length,"/25")}},directives:[u.a,i.y,i.p,h.b,i.i,p.c,h.c,p.a,h.d,h.a,b.b,i.c,i.o,i.g,r.b,g.n,m.a,f.a,z.a],styles:[""]}),e})()},odmk:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n("3Pt+"),c=n("3JH+"),a=n("fXoL"),o=n("uMH2"),s=n("dEAy"),r=n("ocnv"),l=n("B+r4"),d=n("PTRe"),u=n("OzZK"),h=n("RwU8"),p=n("C2AL"),b=n("ofXK");function g(e,t){1&e&&(a.Yb(0),a.Pc(1," \u8bf7\u8f93\u5165\u8282\u540d\u79f0 "),a.Xb())}function m(e,t){1&e&&(a.Yb(0),a.Pc(1," \u540d\u79f060\u5b57\u4ee5\u5185 "),a.Xb())}function f(e,t){1&e&&(a.Yb(0),a.Pc(1," \u91cd\u590d\u540d\u79f0 "),a.Xb())}function z(e,t){if(1&e&&(a.Nc(0,g,2,0,"ng-container",8),a.Nc(1,m,2,0,"ng-container",8),a.Nc(2,f,2,0,"ng-container",8)),2&e){const e=t.$implicit;a.tc("ngIf",e.hasError("required")),a.Eb(1),a.tc("ngIf",e.hasError("maxlength")),a.Eb(1),a.tc("ngIf",e.hasError("repeatName"))}}const v=function(){return{span:24,offset:0}},y=function(){return{span:16,offset:8}};let S=(()=>{class e{constructor(e,t,n){this.fb=e,this.courseMgService=t,this.nzModalRef=n,this.loading=!1,this.lock=!1}ngOnInit(){this.formGroup=this.fb.group({name:[this.formData?this.formData.name:"",[i.w.required,i.w.maxLength(60),Object(c.a)(this.data.children),Object(c.b)()]]})}getSeq(e){let t=0;return e.forEach(e=>{e.seq>t&&(t=e.seq)}),t+=1,t}save(){if(!this.lock){if(Object.keys(this.formGroup.controls).forEach(e=>{this.formGroup.controls[e].markAsDirty(),this.formGroup.controls[e].updateValueAndValidity()}),this.formGroup.invalid)return;this.lock=!0;const e=this.formData?this.formData.id:"",t=this.formData&&this.formData.seq?this.formData.seq:this.data.children.length?this.getSeq(this.data.children):1,n={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.data.id,name:this.data.name,seq:this.data.seq,sections:[{id:e,name:this.formGroup.value.name,seq:t}]}]};this.loading=!0,this.courseMgService.save_courseChapter(n).subscribe(e=>{this.lock=!1,this.loading=!1,200===e.status&&this.nzModalRef.close(e.data)},()=>this.lock=!1)}}cancel(){this.nzModalRef.close(null)}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(i.d),a.Ub(o.a),a.Ub(s.d))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-structure-adjustment-section"]],inputs:{data:"data",formData:"formData",courseId:"courseId",coursePacketId:"coursePacketId"},decls:14,vars:11,consts:[["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","placeholder","\u8bf7\u8f93\u5165\u8282\u540d\u79f0\uff0c60\u5b57\u4ee5\u5185"],["errNameTipsTpl",""],[3,"nzXs","nzSm"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-button","","nzType","default",2,"margin-left","20px",3,"click"],[4,"ngIf"]],template:function(e,t){if(1&e&&(a.ac(0,"form",0),a.ac(1,"nz-form-item"),a.ac(2,"nz-form-label",1),a.Pc(3,"\u672c\u8282\u540d\u79f0"),a.Zb(),a.ac(4,"nz-form-control",2),a.Vb(5,"input",3),a.Nc(6,z,3,3,"ng-template",null,4,a.Oc),a.Zb(),a.Zb(),a.ac(8,"nz-form-item"),a.ac(9,"nz-form-control",5),a.ac(10,"button",6),a.ic("click",(function(){return t.save()})),a.Pc(11,"\u4fdd\u5b58"),a.Zb(),a.ac(12,"button",7),a.ic("click",(function(){return t.cancel()})),a.Pc(13,"\u53d6\u6d88"),a.Zb(),a.Zb(),a.Zb(),a.Zb()),2&e){const e=a.Cc(7);a.tc("formGroup",t.formGroup),a.Eb(2),a.tc("nzSm",6)("nzXs",24),a.Eb(2),a.tc("nzSm",16)("nzXs",24)("nzErrorTip",e),a.Eb(5),a.tc("nzXs",a.wc(9,v))("nzSm",a.wc(10,y)),a.Eb(1),a.tc("nzLoading",t.loading)}},directives:[i.y,i.p,r.b,i.i,l.c,r.c,l.a,r.d,r.a,d.b,i.c,i.o,i.g,u.a,h.a,p.a,b.n],styles:[""]}),e})()},qjn6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i.a})),n.d(t,"r",(function(){return c.a})),n.d(t,"m",(function(){return _})),n.d(t,"n",(function(){return q.a})),n.d(t,"p",(function(){return A.a})),n.d(t,"o",(function(){return U.a})),n.d(t,"c",(function(){return B.a})),n.d(t,"f",(function(){return R.a})),n.d(t,"i",(function(){return $.a})),n.d(t,"k",(function(){return Q.a})),n.d(t,"h",(function(){return W.a})),n.d(t,"g",(function(){return J.a})),n.d(t,"d",(function(){return H.a})),n.d(t,"b",(function(){return oe})),n.d(t,"e",(function(){return re})),n.d(t,"l",(function(){return pe})),n.d(t,"j",(function(){return ge})),n.d(t,"q",(function(){return me.a}));var i=n("WZ4L"),c=n("DzeW"),a=n("fXoL"),o=n("PScX"),s=n("LRne"),r=n("HDdC"),l=n("JFwS"),d=n("tyNb"),u=n("uMH2"),h=n("ofXK"),p=n("qAZ0"),b=n("nxWG"),g=n("Wfee"),m=n("aPPm"),f=n("PTRe"),z=n("3Pt+"),v=n("C2AL"),y=n("FwiY"),S=n("KupA");const k=["treeVar"];function P(e,t){if(1&e&&(a.Yb(0),a.Vb(1,"nz-alert",11),a.Xb()),2&e){const e=t.$implicit;a.Eb(1),a.uc("nzMessage",e+"\u6ca1\u6709\u8282,\u8bf7\u7acb\u5373\u6dfb\u52a0!")}}function C(e,t){if(1&e&&(a.ac(0,"div",9),a.Nc(1,P,2,1,"ng-container",10),a.Zb()),2&e){const e=a.lc();a.Eb(1),a.tc("ngForOf",e.emptyChapter)}}function E(e,t){if(1&e){const e=a.bc();a.ac(0,"qkc-profession-label-add",12),a.ic("showChange",(function(t){return a.Ec(e),a.lc().prefessionLabelShowChange(t)}))("addChange",(function(t){return a.Ec(e),a.lc().addChapter(t)})),a.Zb()}if(2&e){const e=a.lc();a.tc("notPermitedShow",e.isAddModel)("placeholder","\u8bf7\u8f93\u5165\u7ae0\u540d\u79f0")}}function w(e,t){1&e&&a.Wb(0)}function x(e,t){1&e&&a.Wb(0)}const M=function(e){return{$implicit:e}};function O(e,t){if(1&e&&(a.ac(0,"span",18),a.Nc(1,x,1,0,"ng-container",15),a.Zb()),2&e){const e=a.lc().$implicit;a.lc();const t=a.Cc(11);a.Eb(1),a.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",a.xc(2,M,e))}}function I(e,t){1&e&&a.Wb(0)}function Z(e,t){if(1&e&&(a.ac(0,"span",18),a.Nc(1,I,1,0,"ng-container",15),a.Zb()),2&e){const e=a.lc().$implicit;a.lc();const t=a.Cc(13);a.Eb(1),a.tc("ngTemplateOutlet",t)("ngTemplateOutletContext",a.xc(2,M,e))}}function T(e,t){if(1&e&&(a.ac(0,"span",13),a.ac(1,"span",14),a.Nc(2,w,1,0,"ng-container",15),a.Zb(),a.ac(3,"span",16),a.Nc(4,O,2,4,"span",17),a.Nc(5,Z,2,4,"span",17),a.Zb(),a.Zb()),2&e){const e=t.$implicit,n=a.lc(),i=a.Cc(9);a.Eb(2),a.tc("ngTemplateOutlet",i)("ngTemplateOutletContext",a.xc(4,M,e)),a.Eb(2),a.tc("ngIf",!e.origin.isEdit&&!n.isStandard),a.Eb(1),a.tc("ngIf",e.origin.isEdit)}}function L(e,t){if(1&e&&(a.ac(0,"span"),a.Pc(1),a.Zb()),2&e){const e=a.lc().$implicit;a.Eb(1),a.Qc(e.title)}}function N(e,t){if(1&e){const e=a.bc();a.ac(0,"input",21),a.ic("ngModelChange",(function(t){return a.Ec(e),a.lc().$implicit.origin.editTitle=t}))("keyup.enter",(function(){a.Ec(e);const t=a.lc().$implicit;return a.lc().confirmEdit(t)})),a.Zb()}if(2&e){const e=a.lc().$implicit;a.tc("ngModel",e.origin.editTitle)}}function V(e,t){if(1&e&&(a.Nc(0,L,2,1,"span",19),a.Nc(1,N,1,1,"input",20)),2&e){const e=t.$implicit;a.tc("ngIf",!e.origin.isEdit),a.Eb(1),a.tc("ngIf",e.origin.isEdit)}}function F(e,t){if(1&e){const e=a.bc();a.Yb(0),a.ac(1,"i",25),a.ic("click",(function(){a.Ec(e);const t=a.lc().$implicit;return a.lc().add(t)})),a.Zb(),a.Xb()}}function D(e,t){if(1&e){const e=a.bc();a.ac(0,"i",22),a.ic("click",(function(){a.Ec(e);const n=t.$implicit;return a.lc().edit(n)})),a.Zb(),a.ac(1,"i",23),a.ic("nzOnConfirm",(function(){a.Ec(e);const n=t.$implicit;return a.lc().delete(n)})),a.Zb(),a.Nc(2,F,2,0,"ng-container",19),a.Vb(3,"i",24)}if(2&e){const e=t.$implicit;a.Eb(2),a.tc("ngIf",!e.isLeaf)}}function j(e,t){if(1&e){const e=a.bc();a.ac(0,"i",26),a.ic("click",(function(){a.Ec(e);const n=t.$implicit;return a.lc().confirmEdit(n)})),a.Zb(),a.ac(1,"i",27),a.ic("click",(function(){a.Ec(e);const n=t.$implicit;return a.lc().cancelEdit(n)})),a.Zb(),a.Vb(2,"i",24)}}let _=(()=>{class e{constructor(e,t,n){this.injector=e,this.route=t,this.courseMgService=n,this.isLoading=!1,this.nodes=[],this.isDraggable=!0,this.nodeChange=new a.n,this.courseId="",this.coursePacketId="",this.isPermittedDrag=!1,this.emptyChapter=[],this.isAddModel=!1,this.expandedKeys=[],this.isStandard=!1,this.beforeDrop=e=>{let t=!1;return t=null===(e.dragNode.parentNode||e.node.parentNode)?0!==e.pos:null!==(e.dragNode.parentNode&&e.node.parentNode)&&e.dragNode.parentNode.key===e.node.parentNode.key,this.isPermittedDrag=t,Object(s.a)(t)}}ngOnInit(){this.courseId=this.route.snapshot.paramMap.get("courseId"),this.coursePacketId=this.route.snapshot.paramMap.get("id"),this.isStandard="1"===this.route.snapshot.paramMap.get("status"),this.getChapter()}get nzMesService(){return this.injector.get(o.e)}get httpService(){return this.injector.get(l.a)}nzEvent(e){if("click"===e.eventName)this.activedNode&&this.activedNode.key!==e.node.key&&!0===this.activedNode.origin.isEdit&&(this.activedNode.title=this.activedNode.origin.cacheTitle,this.activedNode.origin.isEdit=!1),this.activedNode=e.node;else if("dragend"===e.eventName){if(this.isPermittedDrag){const e=this.treeCom.getTreeNodes(),t=this.resort(e),n=this.transformPostTreeData(t);this.courseMgService.save_courseChapter(n).subscribe(e=>{this.renderTree(e)},e=>{})}}else if("expand"===e.eventName){this.expandedKeys=e.keys;const t=e.node;0===(null==t?void 0:t.getChildren().length)&&(null==t?void 0:t.isExpanded)&&this.getSection(t)}}saveNode(e){e.origin.name=e.title;const t=this.transformPostTreeData(this.nodes);this.courseMgService.save_courseChapter(t).subscribe(e=>{this.renderTree(e.data)})}confirmEdit(e){if(""===e.origin.editTitle.trim())return void this.nzMesService.error("\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a");const t=e.parentNode?e.parentNode.children:this.nodes;if(this.checkRepeatedName(e.origin.editTitle.trim(),t,[e.key]))return this.isAddModel=!1,void this.nzMesService.error("\u91cd\u590d\u540d\u79f0");this.isAddModel=!1,e.title=e.origin.editTitle.trim(),this.saveNode(e)}cancelEdit(e){this.isAddModel=!1,e.title=e.origin.cacheTitle,-1!==e.key.indexOf("qkc")&&e.remove(),e.origin.isEdit=!1}edit(e){e.origin.editTitle=e.title,e.origin.isEdit=!0}delete(e){1===e.origin._level?this.delTreeNode(e.origin.id,"chapter").subscribe(e=>{this.getCourseChapterTreeNode(this.coursePacketId)}):this.delTreeNode(e.origin.id,"section").subscribe(e=>{this.getCourseChapterTreeNode(this.coursePacketId)})}add(e){if(!this.isPermitAdd())return;this.isAddModel=!0;const t={title:"",editTitle:"",key:this.createRandomNodeKey(),isLeaf:!0,isEdit:!0,id:"",seq:e.children.length+1,name:"",_level:e.origin._level+1};this.expandedKeys.includes(e.key)||(this.expandedKeys=[...this.expandedKeys,e.key]),e.addChildren([t])}resort(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].origin);const n=e=>{for(let t=0;t<e.length;t++)e[t].seq=t+1,e[t].children&&e[t].children.length>0&&n(e[t].children)};return n(t),t}addChapter({value:e}){if(this.checkRepeatedName(e,this.nodes,[]))return this.isAddModel=!1,void this.nzMesService.error("\u91cd\u590d\u540d\u79f0");this.isAddModel=!1,this.courseMgService.save_courseChapter({courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:"",name:e,seq:this.nodes.length+1}]}).subscribe(e=>{this.getCourseChapterTreeNode(this.coursePacketId)})}createRandomNodeKey(){return"qkc"+(new Date).getTime()}delTreeNode(e,t){let n="";switch(t){case"chapter":n="pkg/courseChapter/del";break;case"section":n="pkg/courseSection/del";break;case"secRes":case"secAllRes":n="pkg/courseSectionResource/del";break;default:n=""}return new r.a(t=>{""!==n?this.httpService.post(n,{id:e},{isCommonHttpHeader:!0}).subscribe(e=>{t.next(e),t.unsubscribe()},e=>{t.error(e)}):t.error("empty url")})}getCourseChapterTreeNode(e){this.isLoading=!0,this.httpService.post("pkg/courseChapter/courseChapterTreeNode",{coursePacketId:e},{isCommonHttpHeader:!0}).subscribe(e=>{this.isLoading=!1,200===e.status?this.renderTree(e.data):this.nodes=[]})}getChapter(){this.isLoading=!0,this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe(e=>{this.isLoading=!1,200===e.status&&this.renderTree(e.data)})}getSection(e){this.courseMgService.getList_courseSection(e.key).subscribe(t=>{200===t.status?e.addChildren(this.transformSectionTreeNodes(t.data)):e.isLoading=!1})}transformSectionTreeNodes(e){return e.map(e=>Object.assign({title:e.name,cacheTitle:e.name,key:e.id,isEdit:!1,isLeaf:!0,_level:2},e))}transformTreeNodes(e){e=e.map(e=>(e._level=1,e));const t=(e,n)=>{for(let i=0;i<e.length;i++)e[i].title=e[i].name,e[i].cacheTitle=e[i].name,e[i].key=e[i].id,e[i].isEdit=!1,-1!==n&&(e[i]._level=n+1),e[i].children&&e[i].children.length>0?(e[i].isLeaf=!1,t(e[i].children,e[i]._level)):e[i].isLeaf=1!==e[i]._level};return t(e,-1),this.emptyChapter=[],e}transformPostTreeData(e){const t={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[]},n=[],i=(e,t)=>{for(let c=0;c<e.length;c++){let a={};2===e[c]._level?(a={id:e[c].id,name:e[c].name,seq:e[c].seq},t.sections.push(a)):a={id:e[c].id,name:e[c].name,seq:e[c].seq,sections:[]},e[c].children&&e[c].children.length>0?(n.push(a),i(e[c].children,a)):1===e[c]._level&&n.push(a)}};return i(e,null),t.chapters=n,t}prefessionLabelShowChange(e){this.isAddModel=e}isPermitAdd(){return!this.isAddModel||(this.nzMesService.warning("\u4f60\u5df2\u7ecf\u5728\u6dfb\u52a0\u6a21\u5f0f\u4e86\uff0c\u8bf7\u5904\u7406\u5b8c\u5728\u6dfb\u52a0\uff01"),!1)}renderTree(e){this.nodes=this.transformTreeNodes(e),this.expandedKeys=[...this.expandedKeys]}checkStructure(){if(0===this.nodes.length)return!1;for(const e of this.nodes)if(e.children&&0===e.children.length)return!1;return!0}checkRepeatedName(e,t,n){for(const i of t)if(!n.includes(i.key)&&i.title===e)return!0;return!1}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(a.r),a.Ub(d.a),a.Ub(u.a))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-structure-adjust-tree"]],viewQuery:function(e,t){var n;1&e&&a.Vc(k,!0),2&e&&a.Bc(n=a.jc())&&(t.treeCom=n.first)},inputs:{isDraggable:"isDraggable"},outputs:{nodeChange:"nodeChange"},decls:14,vars:9,consts:[["style","margin-bottom: 15px;",4,"ngIf"],[3,"nzSpinning","nzDelay"],["nzAsyncData","",1,"has-bg-tree",3,"nzData","nzExpandedKeys","nzTreeTemplate","nzDraggable","nzBeforeDrop","nzExpandChange","nzOnDragEnd","nzClick"],["treeVar",""],["title","+\u65b0\u589e",3,"notPermitedShow","placeholder","showChange","addChange",4,"ngIf"],["nzTreeTemplate",""],["inputTpl",""],["iconTpl",""],["editTpl",""],[2,"margin-bottom","15px"],[4,"ngFor","ngForOf"],["nzType","warning",3,"nzMessage"],["title","+\u65b0\u589e",3,"notPermitedShow","placeholder","showChange","addChange"],["draggable","",1,"custom-node"],[1,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"icon-container"],["class","icon-row",4,"ngIf"],[1,"icon-row"],[4,"ngIf"],["nz-input","","nzSize","small","class","input-edit","placeholder","\u8bf7\u8f93\u5165\u8282\u540d\u79f0",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],["nz-input","","nzSize","small","placeholder","\u8bf7\u8f93\u5165\u8282\u540d\u79f0",1,"input-edit",3,"ngModel","ngModelChange","keyup.enter"],["nz-icon","","nzType","edit","nzTheme","outline",3,"click"],["nz-icon","","nzType","minus-circle","nzTheme","outline","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm"],["nz-icon","","nzType","drag","nzTheme","outline","title","\u62d6\u52a8\u8c03\u6574\u7ed3\u6784"],["nz-icon","","nzType","plus-circle","nzTheme","outline",3,"click"],["nz-icon","","nzType","check","nzTheme","outline",3,"click"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"]],template:function(e,t){if(1&e&&(a.Nc(0,C,2,1,"div",0),a.ac(1,"nz-spin",1),a.ac(2,"nz-tree",2,3),a.ic("nzExpandChange",(function(e){return t.nzEvent(e)}))("nzOnDragEnd",(function(e){return t.nzEvent(e)}))("nzClick",(function(e){return t.nzEvent(e)})),a.Zb(),a.Vb(4,"br"),a.Nc(5,E,1,2,"qkc-profession-label-add",4),a.Zb(),a.Nc(6,T,6,6,"ng-template",null,5,a.Oc),a.Nc(8,V,2,2,"ng-template",null,6,a.Oc),a.Nc(10,D,4,1,"ng-template",null,7,a.Oc),a.Nc(12,j,3,0,"ng-template",null,8,a.Oc)),2&e){const e=a.Cc(7);a.tc("ngIf",0!==t.emptyChapter.length),a.Eb(1),a.tc("nzSpinning",t.isLoading)("nzDelay",0),a.Eb(1),a.tc("nzData",t.nodes)("nzExpandedKeys",t.expandedKeys)("nzTreeTemplate",e)("nzDraggable",t.isDraggable)("nzBeforeDrop",t.beforeDrop),a.Eb(3),a.tc("ngIf",!t.isStandard)}},directives:[h.n,p.a,b.a,h.m,g.a,m.a,h.s,f.b,z.c,z.o,z.q,v.a,y.a,S.a],styles:["[_nghost-%COMP%]     .ant-tree li.drag-over>span[draggable]{color:red;background-color:#8a2be2}[_nghost-%COMP%]     .ant-tree li.drag-over>span[draggable] span{background-color:#8a2be2}[_nghost-%COMP%]     .has-bg-tree .ant-tree li>span{background-color:#f0f1f3!important}[_nghost-%COMP%]     .ant-tree .ant-tree-treenode{align-items:center!important}[_nghost-%COMP%]     .ant-tree .ant-tree-node-content-wrapper{flex:1;background-color:#ddd}.custom-node[_ngcontent-%COMP%]{width:100%;height:40px;display:inline-flex;justify-content:space-between;align-items:center}.custom-node.light-span[_ngcontent-%COMP%]{color:#1890ff}.active[_ngcontent-%COMP%]{background:#1890ff;color:#fff}.title[_ngcontent-%COMP%]{margin-left:4px}.icon-container[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{display:block}.icon-container[_ngcontent-%COMP%]   .icon-row[_ngcontent-%COMP%]{display:inline-block;color:grey}.icon-container[_ngcontent-%COMP%]   .icon-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;margin-right:8px}.input-edit[_ngcontent-%COMP%]{width:300px}"]}),e})();var q=n("ApCc"),A=n("odmk"),U=n("6iFG"),B=n("rb97"),R=n("zGbI"),$=n("7lsC"),Q=n("i+L+"),W=n("BmWY"),J=n("bSaw"),H=n("ngz8"),K=n("Vhue"),G=n("rMZv"),X=n("xB20");function Y(e,t){1&e&&(a.ac(0,"th"),a.Pc(1,"\u8bb2\u4e49"),a.Zb())}function ee(e,t){1&e&&(a.ac(0,"th"),a.Pc(1,"\u5f55\u64ad"),a.Zb())}function te(e,t){1&e&&(a.ac(0,"th"),a.Pc(1,"\u4efb\u52a1"),a.Zb())}function ne(e,t){if(1&e&&(a.ac(0,"td"),a.Pc(1),a.Zb()),2&e){const e=a.lc().$implicit;a.Eb(1),a.Qc(e.lectureNum)}}function ie(e,t){if(1&e&&(a.ac(0,"td"),a.Pc(1),a.Zb()),2&e){const e=a.lc().$implicit;a.Eb(1),a.Qc(e.videoNum)}}function ce(e,t){if(1&e&&(a.ac(0,"td"),a.Pc(1),a.Zb()),2&e){const e=a.lc().$implicit;a.Eb(1),a.Qc(e.taskNum)}}function ae(e,t){if(1&e&&(a.ac(0,"tr"),a.ac(1,"td"),a.Pc(2),a.Zb(),a.ac(3,"td"),a.Pc(4),a.Zb(),a.Nc(5,ne,2,1,"td",5),a.Nc(6,ie,2,1,"td",5),a.Nc(7,ce,2,1,"td",5),a.ac(8,"td"),a.Pc(9),a.Zb(),a.Zb()),2&e){const e=t.$implicit,n=a.lc();a.Eb(2),a.Qc(e.courseChapterName),a.Eb(2),a.Qc(e.courseSectionName),a.Eb(1),a.tc("ngIf","22"!==n.teachType),a.Eb(1),a.tc("ngIf","22"===n.teachType),a.Eb(1),a.tc("ngIf","22"!==n.teachType),a.Eb(2),a.Qc(e.resourseNum)}}let oe=(()=>{class e{constructor(e){this.courseManageService=e,this.listOfData=[],this.lessonCount=0,this.quebankNum=0,this.knowledgeNum=0,this.authorNum=0,this.sectionNum=0,this.teachDemoNum=0}ngOnInit(){this.initParams(),this.getDetails()}getDetails(){this.courseManageService.getDetails(this.coursePacketId).subscribe(e=>{if(200===e.status){const{studySet:t,lessonCount:n,quebankNum:i,knowledgeNum:c,authorNum:a,sectionNum:o,teachDemoNum:s}=e.data;this.listOfData=t||[],this.lessonCount=n||0,this.quebankNum=i||0,this.knowledgeNum=c||0,this.authorNum=a||0,this.sectionNum=o||0,this.teachDemoNum=s||0}})}initParams(){const{teachType:e,preview:t,id:n}=K.a.getPacketInfo();this.teachType=e,this.preview=t,this.coursePacketId=n}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(u.a))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-complete-course"]],decls:38,vars:11,consts:[[1,"header"],[1,"content"],[1,"content-title"],[3,"nzData"],["basicTable",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["nzTitle","\u603b\u8bfe\u6b21"],["nzTitle","\u514d\u8d39\u9898\u5e93"],["nzTitle","\u6559\u5b66\u793a\u8303"],["nzTitle","\u6307\u5bfc\u8bb2\u5e08"],["nzTitle","\u7ae0\u8282\u7ed1\u5b9a"]],template:function(e,t){if(1&e&&(a.ac(0,"div",0),a.Pc(1," \u8bfe\u5305\u5185\u5bb9\u7814\u53d1\u7edf\u8ba1\u8868\n"),a.Zb(),a.ac(2,"div",1),a.ac(3,"div",2),a.Pc(4," \u5b66\u4e60\u8bbe\u5b9a "),a.Zb(),a.ac(5,"nz-table",3,4),a.ac(7,"thead"),a.ac(8,"tr"),a.ac(9,"th"),a.Pc(10,"\u7ae0\u540d\u79f0"),a.Zb(),a.ac(11,"th"),a.Pc(12,"\u8282\u540d\u79f0"),a.Zb(),a.Nc(13,Y,2,0,"th",5),a.Nc(14,ee,2,0,"th",5),a.Nc(15,te,2,0,"th",5),a.ac(16,"th"),a.Pc(17,"\u8d44\u6599"),a.Zb(),a.Zb(),a.Zb(),a.ac(18,"tbody"),a.Nc(19,ae,10,6,"tr",6),a.Zb(),a.Zb(),a.Zb(),a.ac(20,"div",1),a.ac(21,"div",2),a.Pc(22," \u5176\u4ed6\u8bbe\u7f6e "),a.Zb(),a.ac(23,"nz-descriptions"),a.ac(24,"nz-descriptions-item",7),a.Pc(25),a.Zb(),a.ac(26,"nz-descriptions-item",8),a.Pc(27),a.Zb(),a.ac(28,"nz-descriptions-item",9),a.Pc(29),a.Zb(),a.Zb(),a.Zb(),a.ac(30,"div",1),a.ac(31,"div",2),a.Pc(32," \u667a\u9002\u5e94 "),a.Zb(),a.ac(33,"nz-descriptions"),a.ac(34,"nz-descriptions-item",10),a.Pc(35),a.Zb(),a.ac(36,"nz-descriptions-item",11),a.Pc(37),a.Zb(),a.Zb(),a.Zb()),2&e){const e=a.Cc(6);a.Eb(5),a.tc("nzData",t.listOfData),a.Eb(8),a.tc("ngIf","22"!==t.teachType),a.Eb(1),a.tc("ngIf","22"===t.teachType),a.Eb(1),a.tc("ngIf","22"!==t.teachType),a.Eb(4),a.tc("ngForOf",e.data),a.Eb(6),a.Qc(t.lessonCount),a.Eb(2),a.Rc("",t.quebankNum,"\u4e2a\u9898\u5e93"),a.Eb(2),a.Rc("",t.teachDemoNum,"\u4e2a\u89c6\u9891"),a.Eb(6),a.Rc("",t.authorNum,"\u4f4d"),a.Eb(2),a.Sc("\u5171",t.sectionNum,"\u4e2a\u5c0f\u8282 \u3001",t.knowledgeNum,"\u4e2a\u77e5\u8bc6\u70b9")}},directives:[G.c,G.j,G.k,G.b,G.h,h.n,G.e,h.m,X.a,X.b],styles:[".header[_ngcontent-%COMP%]{height:50px;padding-left:20px;line-height:50px;font-size:16px;font-weight:700}.content[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.content[_ngcontent-%COMP%]{padding:0 20px 20px}.content[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{font-weight:700;font-size:15px;line-height:50px;height:50px}"]}),e})();n("duvs");var se=n("PqYM");let re=(()=>{class e{constructor(){this.lock=!1,this.limitHeight=60}ngAfterViewChecked(){if(this.dom){const e=document.getElementById("tableScroll");e&&e.clientHeight-this.limitHeight!==this.height&&(this.lock||(this.lock=!0,e?Object(se.a)(0).subscribe(()=>{this.dom=document.getElementById("tableScroll"),this.dom&&(this.height=this.dom.clientHeight-this.limitHeight),this.lock=!1}):this.lock=!1))}else this.lock||(this.lock=!0,document.getElementById("tableScroll")?Object(se.a)(0).subscribe(()=>{this.dom=document.getElementById("tableScroll"),this.dom&&(this.height=this.dom.clientHeight-this.limitHeight),this.lock=!1}):this.lock=!1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ob({type:e,selectors:[["app-flex-table"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var le=n("+O+V");let de=(()=>{class e extends re{constructor(){super(),this.pageIndex=le.h.page,this.pageSize=le.h.limit,this.searchWord="",this.selectedValue="",this.dateRange=[],this.data=[],this.total=0,this.isLoading=!1}getDataList(){this.isLoading=!0;const e=this.route.routeConfig.path,t={page:this.pageIndex,limit:this.pageSize,searchKey:this.searchWord.trim(),auditStatus:this.selectedValue||"",filterKey:"MANAGER"};"course-list"===e?(t.startTime="",t.endTime="",this.dateRange.length&&(t.startTime=Object(h.y)(this.dateRange[0],"yyyy-MM-dd",this.locale),t.endTime=Object(h.y)(this.dateRange[1],"yyyy-MM-dd",this.locale))):(t.startBillDate="",t.endBillDate="",this.dateRange.length&&(t.startBillDate=Object(h.y)(this.dateRange[0],"yyyy-MM-dd",this.locale),t.endBillDate=Object(h.y)(this.dateRange[1],"yyyy-MM-dd",this.locale)),"i-initiated"===e?t.queryFilterType="I_STARTED":"approve-all"===e&&(t.queryFilterType="ALL_APPROVED")),this.courseMgService.getCourseListNew(t).subscribe(e=>{this.isLoading=!1,200===e.status?(this.data=e.data||[],this.total=e.page?e.page.totalResult:0):this.message.error(e.message)},e=>{this.isLoading=!1,this.message.error(JSON.stringify(e))})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ob({type:e,selectors:[["app-course-data"]],features:[a.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var ue=n("XNiG"),he=n("Kj3r");let pe=(()=>{class e extends de{constructor(){super(),this.searchWordVal="",this.dateRangeVal=[],this.selectedVal="",this.subject=new ue.a}ngOnInit(){this.subscribeChange(),this.initData()}ngOnAttach(){this.collectParam(),this.sybcParam(),this.initData()}ngOnDestroy(){this.removeData(),this.subject.unsubscribe()}initData(){this.searchData()}searchData(e=!1){"button"===e?(this.pageIndex=1,this.sybcParam()):"collect"===e?(this.collectParam(),this.sybcParam()):e&&this.resetData(),this.getDataList()}getDate(e){const t=new Date,n=new Date(Object(h.y)(t,"yyyy-MM-dd 00:00:00",this.locale)).getTime(),i=new Date(Object(h.y)(t,"yyyy-MM-dd 23:59:59",this.locale)).getTime();return e?n<e&&e<i?Object(h.y)(e,"HH:mm",this.locale):Object(h.y)(e,"yyyy-MM-dd",this.locale):"--"}resetData(){this.pageIndex=1,this.resetInit(),this.removeData(),this.getDataList()}resetInit(){this.searchWord="",this.dateRange=[],this.selectedValue="",this.searchWordVal="",this.dateRangeVal=[],this.selectedVal=""}collectParam(){const{searchWordVal:e,dateRangeVal:t,selectedVal:n}=K.a.getSearch(this._PAGE_ID_);this.searchWordVal=e||"",this.dateRangeVal=t||[],this.selectedVal=n||""}sybcParam(){this.searchWord=this.searchWordVal,this.dateRange=this.dateRangeVal,this.selectedValue=this.selectedVal}storingData(){const{selectedVal:e,dateRangeVal:t,searchWordVal:n}=this;this.passData({selectedVal:e,dateRangeVal:t,searchWordVal:n})}passData(e){this.subject.next(e)}subscribeChange(){this.subject.pipe(Object(he.a)(200)).subscribe(e=>{K.a.putSearch(this._PAGE_ID_,e)})}removeData(){K.a.clearSearch(this._PAGE_ID_)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Ob({type:e,selectors:[["app-search-table"]],features:[a.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var be=n("lJxs");let ge=(()=>{class e extends pe{constructor(e){super(),this.route=e}initData(){this.data$=this.route.data.pipe(Object(be.a)(e=>e.courseListData)).subscribe(e=>{const t=e[0];this.data=t.data||[],this.total=t.page?t.page.totalResult:0})}ngOnDetach(){K.a.putPageInfo(this._PAGE_ID_,JSON.stringify({page:this.pageIndex,limit:this.pageSize})),this.data$.unsubscribe()}ngOnDestroy(){super.ngOnDestroy(),K.a.removePageInfo(this._PAGE_ID_)}}return e.\u0275fac=function(t){return new(t||e)(a.Ub(d.a))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-course-data"]],features:[a.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();var me=n("Eb0D")},rb97:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("fXoL"),c=n("uMH2"),a=n("nxWG"),o=n("ofXK"),s=n("C2AL"),r=n("FwiY");const l=["treeVar"];function d(e,t){if(1&e&&(i.ac(0,"span",6),i.Pc(1),i.Zb()),2&e){const e=i.lc().$implicit;i.Eb(1),i.Rc(" \u5171",e.origin.sectionCount||0,"\u4e2a\u5c0f\u8282 ")}}function u(e,t){if(1&e&&(i.ac(0,"div",4),i.ac(1,"span"),i.Pc(2),i.Zb(),i.Nc(3,d,2,1,"span",5),i.Zb()),2&e){const e=t.$implicit;i.Eb(2),i.Rc(" ",e.origin.title," "),i.Eb(1),i.tc("ngIf",!e.isLeaf)}}function h(e,t){if(1&e&&i.Vb(0,"i",9),2&e){const e=i.lc().$implicit;i.tc("nzType",e.isExpanded?"caret-down":"caret-right")}}function p(e,t){1&e&&i.Vb(0,"i",10)}function b(e,t){if(1&e&&(i.Nc(0,h,1,1,"i",7),i.Nc(1,p,1,0,"i",8)),2&e){const e=t.origin,n=i.lc();i.tc("ngIf",!e.isLeaf),i.Eb(1),i.tc("ngIf",e.isLeaf&&"display"==n.type)}}let g=(()=>{class e{constructor(e){this.courseMgService=e,this.nodes=[],this.expandedKeys=[],this.selectedKeys=[],this.defaultExpandedKeys=[],this.chapterSelectable=!0,this.type="operate",this.nodeChange=new i.n}ngOnInit(){this.getChapter()}nzEvent(e){if("click"===e.eventName){const t=e.node;this.sendNodeChange(0===t.level?"chapter":"section",t.origin)}else if("expand"===e.eventName){const t=e.node;0===(null==t?void 0:t.getChildren().length)&&(null==t?void 0:t.isExpanded)&&this.getSection(t)}}getChapter(){this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe(e=>{200===e.status&&(this.nodes=this.transformTreeNodes(e.data,!1,0),this.nodes.length>0&&(this.defaultExpandedKeys&&this.defaultExpandedKeys.length?setTimeout(()=>{this.expandedKeys=this.defaultExpandedKeys;const e=this.treeCom.getTreeNodeByKey(this.defaultExpandedKeys[0]);this.getSection(e)},400):(this.expandedKeys=[this.nodes[0].id],setTimeout(()=>{const e=this.treeCom.getTreeNodeByKey(this.nodes[0].id);this.getSection(e)},400))))})}getSection(e){e&&(e.isLoading=!0,this.courseMgService.getList_courseSection(e.key).subscribe(t=>{if(200===t.status){const n=this.transformTreeNodes(t.data,!0,e.origin.index);e.addChildren(n),this.defaultSection?(this.selectedKeys=[this.defaultSection.key],this.sendNodeChange("section",this.defaultSection)):n.length>0&&(this.selectedKeys=[n[0].key],this.sendNodeChange("section",n[0]))}else e.isLoading=!1}))}transformTreeNodes(e,t,n){return e.map((e,i)=>Object.assign({title:t?`${n+1}.${i+1}\u8282 ${e.name}`:`\u7b2c${i+1}\u7ae0   ${e.name}`,key:e.id,selectable:!!t||this.chapterSelectable,index:i,isLeaf:t},e))}sendNodeChange(e,t){("chapter"!==e||this.chapterSelectable)&&this.nodeChange.emit({type:e,data:t})}}return e.\u0275fac=function(t){return new(t||e)(i.Ub(c.a))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-course-structure-tree"]],viewQuery:function(e,t){var n;1&e&&i.Vc(l,!0),2&e&&i.Bc(n=i.jc())&&(t.treeCom=n.first)},inputs:{coursePacketId:"coursePacketId",defaultSection:"defaultSection",defaultExpandedKeys:"defaultExpandedKeys",chapterSelectable:"chapterSelectable",type:"type"},outputs:{nodeChange:"nodeChange"},decls:6,vars:7,consts:[["nzBlockNode","","nzAsyncData","",3,"nzData","nzExpandedKeys","nzSelectedKeys","nzTreeTemplate","nzShowIcon","nzExpandedIcon","nzShowLine","nzClick","nzExpandChange"],["treeVar",""],["nzTreeTemplate",""],["multiExpandedIconTpl",""],[1,"node-row"],["style","font-size:12px;color:#999;",4,"ngIf"],[2,"font-size","12px","color","#999"],["nz-icon","","class","ant-tree-switcher-line-icon",3,"nzType",4,"ngIf"],["class","circle",4,"ngIf"],["nz-icon","",1,"ant-tree-switcher-line-icon",3,"nzType"],[1,"circle"]],template:function(e,t){if(1&e&&(i.ac(0,"nz-tree",0,1),i.ic("nzClick",(function(e){return t.nzEvent(e)}))("nzExpandChange",(function(e){return t.nzEvent(e)})),i.Zb(),i.Nc(2,u,4,2,"ng-template",null,2,i.Oc),i.Nc(4,b,2,2,"ng-template",null,3,i.Oc)),2&e){const e=i.Cc(3),n=i.Cc(5);i.tc("nzData",t.nodes)("nzExpandedKeys",t.expandedKeys)("nzSelectedKeys",t.selectedKeys)("nzTreeTemplate","display"==t.type?e:null)("nzShowIcon","display"==t.type)("nzExpandedIcon",n)("nzShowLine","display"==t.type)}},directives:[a.a,o.n,s.a,r.a],styles:[".node-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-width:300px}.circle[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;border:1px solid #1890ff}[_nghost-%COMP%]     .ant-tree .ant-tree-node-content-wrapper{overflow:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap}"]}),e})()},wsOq:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var i=n("WTGI");function c(e){return(t,n)=>{let i=e.initValue;const c=new Array(16).fill(0).reduce(e=>e+Math.floor(16*Math.random()).toString(16));Object.defineProperty(t,n,{get(){return this[c]?e.get?e.get.call(this,i):i:e.get?e.get.call(this,e.initValue):e.initValue},set(t){var n,a;this[c]?null===(n=e.set)||void 0===n||n.call(this,t,i):(this[c]=!0,e.initSet?e.initSet.call(this,t,i):null===(a=e.set)||void 0===a||a.call(this,t,i)),i=t}})}}function a(e){return(t,n,i)=>{const c=i.value;return i.value=function(...t){const{title:n,content:i,type:a,replaceXxxField:o,conditionField:s,conditionResult:r,conditionTitleReplace:l,conditionContentReplace:d,condition:u}=e,h=void 0!==u?u():s&&r&&t[0][s]===r,p=h?d:i;this.modalService[a]({nzTitle:h&&l||n,nzContent:o?p.replace("xxx",t[0][o]):p,nzMaskClosable:!1,nzWrapClassName:"vertical-center-modal",nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzOnOk:e=>c.apply(this,t),nzOnCancel:()=>null})},i}}function o(e){return(t,n,c)=>{const{title:a,content:o,type:s,nzBodyStyle:r,nzWrapClassName:l,nzComponentParams:d,nzOkText:u,nzCancelText:h,nzOnCancel:p}=e,b=c.value;return c.value=function(...e){const t={},n=this.modalService["function"==typeof s?s.call(this,e):s||"info"]({nzTitle:"function"==typeof a?a.call(this,e):a,nzContent:"function"==typeof o?o.call(this,e):o,nzMaskClosable:!1,nzWrapClassName:l,nzComponentParams:d,nzBodyStyle:r,nzOkText:u||"\u786e\u5b9a",nzCancelText:h||"\u53d6\u6d88",nzOnCancel:()=>{if(p)return p.apply(this,Array.prototype.concat.call(e,t,n))},nzOnOk:()=>b.apply(this,Array.prototype.concat.call(e,t,n))});i.a.watchTool(t,"loading",!1,e=>{n.updateConfig({nzOkLoading:e})})},c}}},zGbI:function(e,t,n){"use strict";n.d(t,"a",(function(){return J}));var i=n("mrSG"),c=n("fXoL"),a=n("3Pt+"),o=n("Vhue"),s=n("ofXK"),r=n("PqYM"),l=n("wsOq"),d=n("+O+V"),u=n("uMH2"),h=n("dEAy"),p=n("PScX"),b=n("FwiY"),g=n("tyNb"),m=n("pz6Z"),f=n("19W7"),z=n("0lU3"),v=n("EGpF"),y=n("qAZ0"),S=n("OzZK"),k=n("RwU8"),P=n("C2AL"),C=n("rMZv"),E=n("5vDB"),w=n("nJia"),x=n("TaO5"),M=n("z4wI"),O=n("rb97"),I=n("RpzK");const Z=["nzTreeComponent"],T=["addExam"];function L(e,t){1&e&&(c.ac(0,"span",5),c.Pc(1,"*"),c.Zb())}const N=function(e){return{cursor:e}};function V(e,t){if(1&e){const e=c.bc();c.ac(0,"div",29),c.ic("click",(function(){c.Ec(e);const n=t.index,i=t.$implicit;return c.lc(4).getflag(n,i)})),c.ac(1,"div",30),c.Pc(2),c.Zb(),c.ac(3,"div",31),c.Pc(4),c.Zb(),c.ac(5,"div",32),c.Vb(6,"i",33),c.Zb(),c.Zb()}if(2&e){const e=t.$implicit,n=t.index,i=c.lc(4);c.Kb("active",i.clickFlag[n]),c.tc("ngStyle",c.xc(5,N,"0"===i.preview?"":"not-allowed")),c.Eb(2),c.Rc(" ",e.teacherName," "),c.Eb(2),c.Rc(" \u7f3a\u5c11",e.lackVideoNum,"\u4e2a\u4e3b\u89c6\u9891 ")}}function F(e,t){if(1&e&&(c.Yb(0),c.Nc(1,V,7,7,"div",28),c.Xb()),2&e){const e=c.lc(3);c.Eb(1),c.tc("ngForOf",e.teacherData)}}function D(e,t){1&e&&(c.ac(0,"span",34),c.Pc(1,"\u6682\u65e0\u6570\u636e"),c.Zb())}function j(e,t){if(1&e&&(c.ac(0,"div",1),c.ac(1,"div",2),c.ac(2,"span",5),c.Pc(3,"*"),c.Zb(),c.Pc(4,"\u6307\u5bfc\u8bb2\u5e08\uff1a "),c.Zb(),c.Nc(5,F,2,1,"ng-container",7),c.Nc(6,D,2,0,"span",27),c.Zb()),2&e){const e=c.lc(2);c.Eb(5),c.tc("ngIf",e.teacherData.length),c.Eb(1),c.tc("ngIf",!e.teacherData.length)}}function _(e,t){if(1&e){const e=c.bc();c.ac(0,"tr"),c.ac(1,"td"),c.Pc(2),c.Zb(),c.ac(3,"td",35),c.Pc(4),c.Zb(),c.ac(5,"td"),c.ac(6,"a",36),c.ic("click",(function(){c.Ec(e);const n=t.$implicit;return c.lc(2).modify(n)})),c.Pc(7,"\u4fee\u6539"),c.Zb(),c.ac(8,"a",37),c.ic("click",(function(){c.Ec(e);const n=t.$implicit;return c.lc(2).untie(n)})),c.Pc(9,"\u89e3\u7ed1"),c.Zb(),c.Zb(),c.Zb()}if(2&e){const e=t.$implicit,n=c.lc(2);c.Eb(2),c.Qc(e.sectionName),c.Eb(1),c.tc("nzTooltipTitle",e.knowledgeUnits),c.Eb(1),c.Qc(n.getBingData(e.knowledgeUnits))}}const q=function(){return{"max-width":"255px"}};function A(e,t){if(1&e){const e=c.bc();c.Yb(0),c.ac(1,"div",2),c.ac(2,"span",5),c.Pc(3,"*"),c.Zb(),c.Pc(4,"\u5b66\u4e60\u8ba1\u5212\uff1a"),c.Vb(5,"i",38),c.Zb(),c.ac(6,"nz-table",39),c.ac(7,"thead"),c.ac(8,"tr"),c.ac(9,"th"),c.Pc(10,"\u9002\u7528\u4eba\u7fa4"),c.Zb(),c.ac(11,"th"),c.Pc(12),c.Zb(),c.Zb(),c.Zb(),c.ac(13,"tbody"),c.ac(14,"tr"),c.ac(15,"td"),c.Pc(16," \u9002\u5408\u521d\u5b66 "),c.Zb(),c.ac(17,"td"),c.ac(18,"label",40),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableZeroBasis=t}))("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableChange(t,"juniorWeekNum","applicableZeroBasisWeek")})),c.Zb(),c.Pc(19,"\u8ba1\u52121 "),c.ac(20,"nz-input-number",41),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableZeroBasisWeek=t}))("nzFocus",(function(){return c.Ec(e),c.lc(2).applicableFocus("applicableZeroBasisWeek")}))("nzBlur",(function(t){return c.Ec(e),c.lc(2).applicableWeekChange(t,"juniorWeekNum","applicableZeroBasisWeek")})),c.Zb(),c.Pc(21," \u5468 "),c.Zb(),c.Zb(),c.ac(22,"tr"),c.ac(23,"td"),c.Pc(24," \u9002\u5408\u6709\u57fa\u7840 "),c.Zb(),c.ac(25,"td"),c.ac(26,"label",40),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableHasAFoundation=t}))("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableChange(t,"middleWeekNum","applicableHasAFoundationWeek")})),c.Zb(),c.Pc(27,"\u8ba1\u52122 "),c.ac(28,"nz-input-number",41),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableHasAFoundationWeek=t}))("nzFocus",(function(){return c.Ec(e),c.lc(2).applicableFocus("applicableHasAFoundationWeek")}))("nzBlur",(function(t){return c.Ec(e),c.lc(2).applicableWeekChange(t,"middleWeekNum","applicableHasAFoundationWeek")})),c.Zb(),c.Pc(29," \u5468 "),c.Zb(),c.Zb(),c.ac(30,"tr"),c.ac(31,"td"),c.Pc(32," \u9002\u5408\u901f\u6210 "),c.Zb(),c.ac(33,"td"),c.ac(34,"label",40),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableExperts=t}))("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableChange(t,"seniorWeekNum","applicableExpertsWeek")})),c.Zb(),c.Pc(35,"\u8ba1\u52123 "),c.ac(36,"nz-input-number",41),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).applicableExpertsWeek=t}))("nzFocus",(function(){return c.Ec(e),c.lc(2).applicableFocus("applicableExpertsWeek")}))("nzBlur",(function(t){return c.Ec(e),c.lc(2).applicableWeekChange(t,"seniorWeekNum","applicableExpertsWeek")})),c.Zb(),c.Pc(37," \u5468 "),c.Zb(),c.Zb(),c.Zb(),c.Zb(),c.Vb(38,"nz-divider"),c.Xb()}if(2&e){const e=c.lc(2);c.Eb(5),c.tc("nzTooltipOverlayStyle",c.wc(22,q)),c.Eb(1),c.tc("nzFrontPagination",!1)("nzData",e.dataSet),c.Eb(6),c.Rc("\u5b66\u4e60\u5468\u671f(\u5171",e.totalSectionNum,"\u8282\uff09"),c.Eb(6),c.tc("ngModel",e.applicableZeroBasis)("disabled","1"===e.preview),c.Eb(2),c.tc("disabled",!e.applicableZeroBasis||"1"===e.preview)("ngModel",e.applicableZeroBasisWeek)("nzMin",1)("nzStep",1),c.Eb(6),c.tc("ngModel",e.applicableHasAFoundation)("disabled","1"===e.preview),c.Eb(2),c.tc("disabled",!e.applicableHasAFoundation||"1"===e.preview)("ngModel",e.applicableHasAFoundationWeek)("nzMin",1)("nzStep",1),c.Eb(6),c.tc("ngModel",e.applicableExperts)("disabled","1"===e.preview),c.Eb(2),c.tc("disabled",!e.applicableExperts||"1"===e.preview)("ngModel",e.applicableExpertsWeek)("nzMin",1)("nzStep",1)}}function U(e,t){if(1&e){const e=c.bc();c.ac(0,"div",42),c.ac(1,"div",2),c.ac(2,"span",5),c.Pc(3,"*"),c.Zb(),c.Pc(4,"\u51b2\u523a\u5f00\u59cb\u65e5\u671f\uff1a "),c.Zb(),c.ac(5,"nz-date-picker",4),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).sprintTime=t}))("nzOnOpenChange",(function(t){return c.Ec(e),c.lc(2).timeOpen(t,"sprintTime")}))("ngModelChange",(function(t){return c.Ec(e),c.lc(2).timeChange(t,"sprintTime")})),c.Zb(),c.Zb()}if(2&e){const e=c.lc(2);c.Eb(5),c.tc("ngModel",e.sprintTime)("disabled","1"===e.preview)}}function B(e,t){if(1&e){const e=c.bc();c.ac(0,"div",42),c.ac(1,"div",2),c.ac(2,"span",5),c.Pc(3,"*"),c.Zb(),c.Pc(4,"\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f\uff1a "),c.Zb(),c.ac(5,"nz-date-picker",4),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc(2).finalTime=t}))("nzOnOpenChange",(function(t){return c.Ec(e),c.lc(2).timeOpen(t,"finalTime")}))("ngModelChange",(function(t){return c.Ec(e),c.lc(2).timeChange(t,"finalTime")})),c.Zb(),c.Zb()}if(2&e){const e=c.lc(2);c.Eb(5),c.tc("ngModel",e.finalTime)("disabled","1"===e.preview)}}function R(e,t){if(1&e){const e=c.bc();c.Yb(0),c.Nc(1,j,7,2,"div",20),c.ac(2,"div",1),c.ac(3,"div",2),c.ac(4,"span",5),c.Pc(5,"*"),c.Zb(),c.Pc(6,"\u7ae0\u8282\u7ed1\u5b9a\uff1a "),c.Zb(),c.ac(7,"button",21),c.ic("click",(function(){return c.Ec(e),c.lc().bind()})),c.Pc(8,"\u7ed1\u5b9a "),c.Zb(),c.ac(9,"nz-spin",9),c.ac(10,"nz-table",22,23),c.ac(12,"thead"),c.ac(13,"tr"),c.ac(14,"th"),c.Pc(15,"\u8bfe\u5305\u7ed3\u6784"),c.Zb(),c.ac(16,"th"),c.Pc(17,"\u77e5\u8bc6\u56fe\u8c31"),c.Zb(),c.ac(18,"th"),c.Pc(19,"\u64cd\u4f5c"),c.Zb(),c.Zb(),c.Zb(),c.ac(20,"tbody"),c.Nc(21,_,10,3,"tr",24),c.Zb(),c.Zb(),c.Zb(),c.Vb(22,"nz-divider"),c.Nc(23,A,39,23,"ng-container",7),c.ac(24,"div"),c.ac(25,"div",2),c.ac(26,"span",5),c.Pc(27,"*"),c.Zb(),c.Pc(28,"\u51b2\u523a\u9636\u6bb5\uff1a "),c.Zb(),c.ac(29,"nz-switch",25),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc().isSprintOn=t}))("ngModelChange",(function(){return c.Ec(e),c.lc().isSwitchOnChange("isSprintOn")})),c.Zb(),c.Zb(),c.Nc(30,U,6,2,"div",26),c.Vb(31,"nz-divider"),c.ac(32,"div"),c.ac(33,"div",2),c.ac(34,"span",5),c.Pc(35,"*"),c.Zb(),c.Pc(36,"\u5bc6\u62bc\u9636\u6bb5\uff1a "),c.Zb(),c.ac(37,"nz-switch",6),c.ic("ngModelChange",(function(t){return c.Ec(e),c.lc().isFinalOn=t}))("ngModelChange",(function(){return c.Ec(e),c.lc().isSwitchOnChange("isFinalOn")})),c.Zb(),c.Zb(),c.Nc(38,B,6,2,"div",26),c.Zb(),c.Xb()}if(2&e){const e=c.Cc(11),t=c.lc();c.Eb(1),c.tc("ngIf","22"===t.teachType),c.Eb(6),c.tc("disabled","1"===t.preview),c.Eb(2),c.tc("nzSpinning",t.untieLoading)("nzDelay",0),c.Eb(1),c.tc("nzData",t.listOfData)("nzPageSize",5),c.Eb(11),c.tc("ngForOf",e.data),c.Eb(2),c.tc("ngIf","22"===t.teachType),c.Eb(6),c.tc("nzDisabled","1"===t.preview||t.isStandard)("ngModel",t.isSprintOn),c.Eb(1),c.tc("ngIf",t.isSprintOn),c.Eb(7),c.tc("ngModel",t.isFinalOn)("nzDisabled","1"===t.preview||t.isStandard),c.Eb(1),c.tc("ngIf",t.isFinalOn)}}function $(e,t){if(1&e){const e=c.bc();c.ac(0,"app-course-structure-tree",43),c.ic("nodeChange",(function(t){return c.Ec(e),c.lc().nodeChange(t)})),c.Zb()}if(2&e){const e=c.lc();c.tc("chapterSelectable",!1)("coursePacketId",e.coursePacketId)("defaultSection",e.defaultSection)("defaultExpandedKeys",e.defaultChapter)}}function Q(e,t){if(1&e){const e=c.bc();c.ac(0,"app-simple-knowledgegraph-tree",44),c.ic("nodeChange",(function(t){return c.Ec(e),c.lc().nodeChangeKnowledge(t)})),c.Zb()}if(2&e){const e=c.lc();c.tc("isExpandAll",!1)("professionId",e.knowledgeSubjectId)("defaultCheckedKeys",e.defaultTreeKey)("all",!0)}}const W=function(){return{padding:0,overflow:"auto"}};let J=(()=>{class e{constructor(e,t,n,i,c,a,o,s){this.fb=e,this.courseMgService=t,this.modalService=n,this.nzMesService=i,this.route=c,this.menuService=a,this.statisticsLogService=o,this.locale=s,this.nodes=[],this.teacherData=[],this.listOfData=[],this.knowledgeSubjectId="",this.defaultTreeKey=[],this.knowledgePointIds=[],this.clickFlag={},this.isVisible=!1,this.value="",this.chapterBindingVisible=!1,this.now=new Date,this.isDailyOn=!1,this.isSprintOn=!1,this.isFinalOn=!1,this.defaultTeacherId=[],this.isStandard=!1,this.dataSet=[{}],this.applicableZeroBasis=!1,this.applicableExperts=!1,this.applicableHasAFoundation=!1,this.bindList=[],this.bindLoading=!1,this.knowledgeGraphLoading=!1,this.untieLoading=!1,this.totalSectionNum=0,this.knowledgeGraphStructureVisible=!1,this.lessonPackageStructureVisible=!0,this.defaultChapter=[],this.examTimeRequire=!1,this.adaptive={middleWeekNum:!1,juniorWeekNum:!1,seniorWeekNum:!1,listOfData:[],examTime:null,finalTime:null,sprintTime:null,isSprintOn:!1,isFinalOn:!1,examTimeRequire:!1}}ngOnInit(){this.getParams()}initIntellectualAdaptationData(){this.getLessonPackage(),this.getChapterBindList()}initFrom(){this.addExamFrom=this.fb.group({missionName:["",[a.w.required]],formingMethod:[1,[a.w.required]]}),this.examSettingForm=this.fb.group({id:[this.courseId],examLength:[0,a.w.required],isComputer:["1",a.w.required],computerType:["1"],answerTimes:[0,a.w.required],deadTime:[new Date,a.w.required],resultWay:["1",a.w.required]})}getLessonPackage(){this.courseMgService.getLessonPackage(this.coursePacketId,this.courseId).subscribe(e=>{if(200===e.status){const{teacherDtoList:t,knowledgeSubjectId:n,isDailyOn:i,isSprintOn:c,isFinalOn:a,defaultTeacherId:o,juniorWeekNum:s,middleWeekNum:r,seniorWeekNum:l,totalSectionNum:d}=e.data;this.teacherData=t,this.defaultTeacherId=o?o.split(","):[],this.knowledgeSubjectId=n,this.isDailyOn="1"===i,this.isSprintOn=this.adaptive.isSprintOn="1"===c,this.isFinalOn=this.adaptive.isFinalOn="1"===a,this.totalSectionNum=d||0,(this.isSprintOn||this.isFinalOn)&&this.intellectualAdaptation?(this.examTimeRequire=!0,this.adaptive.examTimeRequire=!0):(this.examTimeRequire=!1,this.adaptive.examTimeRequire=!1),["examTime","sprintTime","finalTime"].forEach(t=>{this[t]=this[t+"Pre"]=this.adaptive[t]=e.data[t]?new Date(e.data[t]):null}),t.length&&t.forEach((e,t)=>{this.clickFlag[t]=this.defaultTeacherId.indexOf(e.teacherId)>-1}),s?(this.applicableZeroBasisWeekPre=this.applicableZeroBasisWeek=s,this.applicableZeroBasis=!0,this.adaptive.juniorWeekNum=!0):this.adaptive.juniorWeekNum=!1,r?(this.applicableHasAFoundationWeekPre=this.applicableHasAFoundationWeek=r,this.applicableHasAFoundation=!0,this.adaptive.middleWeekNum=!0):this.adaptive.middleWeekNum=!1,l?(this.applicableExpertsWeekPre=this.applicableExpertsWeek=l,this.applicableExperts=!0,this.adaptive.seniorWeekNum=!0):this.adaptive.seniorWeekNum=!1}})}setLessonPackage(e){return new Promise(t=>{this.courseMgService.setLessonPackage(e).subscribe(n=>{if(201===n.status){(this.isSprintOn||this.isFinalOn)&&this.intellectualAdaptation?(this.examTimeRequire=!0,this.adaptive.examTimeRequire=!0):(this.examTimeRequire=!1,this.adaptive.examTimeRequire=!1);const n=Object.keys(e);["middleWeekNum","seniorWeekNum","juniorWeekNum","isSprintOn","isFinalOn"].filter(e=>n.indexOf(e)>-1).forEach(t=>{this.adaptive[t]=!!Number(e[t])}),t(!0)}else t(!1)},e=>{t(!1)})})}getflag(e,t){"1"!==this.preview&&(Object.keys(this.clickFlag).forEach((e,t)=>{this.clickFlag[t]=!1}),this.clickFlag[e]=!0,this.defaultTeacherId=[],this.defaultTeacherId.push(t.teacherId),this.setLessonPackage({id:this.coursePacketId,defaultTeacherId:this.defaultTeacherId.join(",")}))}getChapterBindList(){this.courseMgService.getChapterBindList({courseId:this.courseId,coursePacketId:this.coursePacketId}).subscribe(e=>{200===e.status&&(e.data.length>0?(this.listOfData=e.data.map((e,t)=>({sectionName:e.chapterSeq+"."+e.sectionSeq+" "+e.sectionName,knowledgeUnits:e.knowledgeUnits,sectionId:e.sectionId,chapterId:e.chapterId})),this.adaptive.listOfData=JSON.parse(JSON.stringify(this.listOfData))):(this.listOfData=[],this.adaptive.listOfData=[]))})}bindKnowledgePoints(){this.bindLoading=!0,this.courseMgService.bindKnowledgePointsBatch(this.bindList).subscribe(e=>{201===e.status&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7ae0\u8282\u7ed1\u5b9a"+(this.chapterBindingEdit?"\u4fee\u6539":"\u65b0\u589e"),actionCode:d.j.packetInfo["intellectual-chapterbind-action"][this.chapterBindingEdit?"modify":"addCode"],content:JSON.stringify(this.bindList)}),this.getChapterBindList()),this.bindLoading=!1},e=>{this.bindLoading=!1})}bind(){this.bindList=[],this.chapterBindingVisible=!0,this.chapterBindingEdit=!1,this.knowledgeGraphStructureVisible=!1,this.lessonPackageStructureVisible=!1,Object(r.a)(0).subscribe(()=>{this.lessonPackageStructureVisible=!0})}nodeChange(e){this.curNode=e;const{id:t,key:n}=e.data,i=t||n||"";let c;this.bindList.every((e,t)=>e.courseSectionId!==i||void(c=t))?(this.knowledgeGraphLoading=!0,this.courseMgService.getKnowledgePoints({courseSectionId:i,courseId:this.courseId,coursePacketId:this.coursePacketId}).subscribe(e=>{this.knowledgeGraphLoading=!1,200===e.status&&(this.defaultTreeKey=e.data.map(e=>e.knowledgeUnitId),this.knowledgeGraphStructureVisible=!0,this.selectId=this.defaultTreeKey,this.bindList.push({courseSectionId:i,courseId:this.courseId,coursePacketId:this.coursePacketId,knowledgeUnitIdList:this.defaultTreeKey}))},()=>{this.knowledgeGraphLoading=!1})):(this.defaultTreeKey=this.bindList.filter((e,t)=>t===c)[0].knowledgeUnitIdList,this.selectId=this.defaultTreeKey,this.knowledgeGraphStructureVisible=!0)}nodeChangeKnowledge(e){e.length?(this.selectId=[],e.forEach(e=>{"2"===e.origin.kType?e.origin.children&&e.origin.children.length&&e.origin.children.forEach(e=>{this.selectId.push(e.id)}):"3"===e.origin.kType?this.selectId.push(e.origin.id):e.origin.children&&e.origin.children.length&&e.origin.children.forEach(e=>{e.children&&e.children.length&&e.children.forEach(e=>{this.selectId.push(e.id)})})})):this.selectId=[],this.bindList.every((e,t)=>e.courseSectionId!==this.curNode.data.id&&e.courseSectionId!==this.curNode.data.key||void(this.bindList[t].knowledgeUnitIdList=this.selectId))}applicableChange(e,t,n){if(!e){const e={seniorWeekNum:"applicableExperts",middleWeekNum:"applicableHasAFoundation",juniorWeekNum:"applicableZeroBasis"},{applicableZeroBasisWeek:i,applicableExpertsWeek:c,applicableHasAFoundationWeek:a}=this;if("juniorWeekNum"===t&&!a&&!c||"middleWeekNum"===t&&!i&&!c||"seniorWeekNum"===t&&!a&&!i)return this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u4e3a\u5fc5\u586b\u9879,\u8bf7\u4fdd\u7559\u81f3\u5c11\u4e00\u4e2a\u8ba1\u5212"),void Object(r.a)(0).subscribe(()=>{this[e[t]]=!0});this[n]="",this.setLessonPackage({id:this.coursePacketId,[t]:0})}}getParams(){const{courseId:e,id:t,professionId:n,code:i,teachType:c,isSmart:a,preview:s,isUsed:r}=o.a.getPacketInfo();this.courseId=e,this.coursePacketId=t,this.professionId=n,this.isStandard=r>0,this.code=i,this.teachType=c,this.intellectualAdaptation="1"===a,this.preview=s}checkPlan(){return this.applicableZeroBasis&&!this.applicableZeroBasisWeek?(this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u52fe\u9009\u4e86\u9002\u7528\u96f6\u57fa\u7840\u5fc5\u987b\u586b\u5199\u5177\u4f53\u503c"),!0):this.applicableHasAFoundation&&!this.applicableHasAFoundationWeek?(this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u52fe\u9009\u4e86\u9002\u7528\u6709\u57fa\u7840\u5fc5\u987b\u586b\u5199\u5177\u4f53\u503c"),!0):this.applicableExperts&&!this.applicableExpertsWeek?(this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u52fe\u9009\u4e86\u4f7f\u7528\u4e13\u5bb6\u5fc5\u987b\u586b\u5199\u5177\u4f53\u503c"),!0):void 0}checkData(e){const{isSprintOn:t,isFinalOn:n,examTime:i,sprintTime:c,finalTime:a}=this;if(t){if(i&&c&&i.getTime()<=c.getTime())return this.nzMesService.warning("examTime"===e?"\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f\u5e94\u5927\u4e8e\u51b2\u523a\u5f00\u59cb\u65e5\u671f":"\u51b2\u523a\u5f00\u59cb\u65e5\u671f\u5e94\u5c0f\u4e8e\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f"),!0;if(n&&a&&c&&a.getTime()<=c.getTime())return this.nzMesService.warning("sprintTime"===e?"\u51b2\u523a\u5f00\u59cb\u65e5\u671f\u5e94\u5c0f\u4e8e\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f":"\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f\u5e94\u5927\u4e8e\u51b2\u523a\u5f00\u59cb\u65e5\u671f"),!0}if(n&&i&&a&&i.getTime()<=a.getTime())return this.nzMesService.warning("examTime"===e?"\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f\u5e94\u5927\u4e8e\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f":"\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f\u5e94\u5c0f\u4e8e\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f"),!0}timeChange(e,t){this[t+"Pre"]?e&&e.getTime()!==this[t+"Pre"].getTime()?this.checkAndSave(e,t,this[t+"Pre"]):e||(("examTime"!==t||this.examTimeRequire)&&this.intellectualAdaptation?(this.nzMesService.warning("examTime"===t?"\u5f00\u542f\u4e86\u51b2\u523a\u9636\u6bb5\u6216\u8005\u5bc6\u62bc\u9636\u6bb5\uff0c\u56fd\u5bb6\u8003\u8bd5\u65f6\u95f4\u662f\u5fc5\u586b\u9879\uff0c\u8bf7\u4e0d\u8981\u6e05\u9664\u6389\uff01":this.isStandard?"\u8bfe\u5305\u542f\u7528\u540e\u4e0d\u53ef\u6e05\u7a7a":"\u5982\u679c\u9700\u8981\u6e05\u7a7a\u65e5\u671f\u8bf7\u5173\u95ed\u8be5\u9636\u6bb5\u5373\u53ef"),Object(r.a)(0).subscribe(()=>{this[t]=this[t+"Pre"]})):this.checkAndSave(e,t,null)):e&&this.checkAndSave(e,t,null)}checkAndSave(e,t,n){this.checkData(t)||this.checkPlan()?Object(r.a)(0).subscribe(()=>{this[t]=n}):this.setLessonPackage({id:this.coursePacketId,[t]:Object(s.y)(e,"yyyy-MM-dd",this.locale)}).then(e=>{e?this[t+"Pre"]=this.adaptive[t]=this[t]:Object(r.a)(0).subscribe(()=>{this[t]=n})})}isSwitchOnChange(e){const t={id:this.coursePacketId,[e]:this[e]?"1":"0"};"isSprintOn"!==e||this[e]?"isFinalOn"!==e||this[e]||(this.finalTime=this.finalTimePre=null,t.finalTime=Object(s.y)(null,"yyyy-MM-dd",this.locale)):(this.sprintTime=this.sprintTimePre=null,t.sprintTime=Object(s.y)(null,"yyyy-MM-dd",this.locale)),this.setLessonPackage(t)}applicableWeekChange(e,t,n){this[n+"Pre"]?this[n]&&this[n]>0?this[n]!==this[n+"Pre"]&&this.setLessonPackage({id:this.coursePacketId,[t]:this[n]}):Object(r.a)(0).subscribe(()=>{this[n]=this[n+"Pre"]}):this[n]&&this[n]>0&&this.setLessonPackage({id:this.coursePacketId,[t]:this[n]})}timeOpen(e,t){e&&(this[t+"Pre"]=this[t])}applicableFocus(e){this[e+"Pre"]=this[e]}untie(e,t){this.untieLoading=t.loading=!0,this.courseMgService.unbindKnowledgePoints(e.sectionId).subscribe(n=>{this.untieLoading=t.loading=!1,200===n.status&&(this.statisticsLogService.statisticsPacketInfoLog({name:"\u7ae0\u8282\u7ed1\u5b9a\u89e3\u7ed1",actionCode:d.j.packetInfo["intellectual-chapterbind-action"].delCode,content:JSON.stringify({sectionId:e.sectionId})}),this.bindList.every((t,n)=>{if(t.id!==e.sectionId)return!0;this.bindList.splice(n,1)}),this.getChapterBindList())},()=>{this.untieLoading=t.loading=!1})}modify(e){this.chapterBindingEdit=!0,this.knowledgeGraphStructureVisible=!1,this.lessonPackageStructureVisible=!1,this.chapterBindingVisible=!0,this.bindList=[],setTimeout(()=>{this.defaultSection={key:e.sectionId},this.defaultChapter=[e.chapterId.split(",")[0]],this.lessonPackageStructureVisible=!0})}getBingData(e){const t=e.split(",");return t.length>5?(t.length=5,t.join(",")+",..."):e}export(){this.courseMgService.exportExcelKno(this.coursePacketId).subscribe(e=>{const t=document.createElement("a"),n=URL.createObjectURL(e.body);t.setAttribute("href",n),t.setAttribute("download","\u8bfe\u5305\u77e5\u8bc6\u70b9\u9898\u76ee\u96be\u5ea6\u5bfc\u51fa.xls"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)},e=>this.nzMesService.error(e))}}return e.\u0275fac=function(t){return new(t||e)(c.Ub(a.d),c.Ub(u.a),c.Ub(h.e),c.Ub(p.e),c.Ub(g.a),c.Ub(m.a),c.Ub(f.a),c.Ub(c.u))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-intellectual-adaptation"]],viewQuery:function(e,t){var n;1&e&&(c.Vc(Z,!0),c.Vc(T,!0)),2&e&&(c.Bc(n=c.jc())&&(t.nzTreeComponent=n.first),c.Bc(n=c.jc())&&(t.addExam=n.first))},inputs:{adaptive:"adaptive"},decls:29,vars:18,consts:[[1,"container"],[1,"item"],[1,"item-left"],["style","color:red;margin-right:10px;",4,"ngIf"],[2,"margin-left","20px","width","200px",3,"ngModel","disabled","ngModelChange","nzOnOpenChange"],[2,"color","red","margin-right","10px"],["nzCheckedChildren","\u5f00","nzUnCheckedChildren","\u5173",2,"margin-left","20px",3,"ngModel","nzDisabled","ngModelChange"],[4,"ngIf"],["nzTitle","\u7ae0\u8282\u7ed1\u5b9a","nzClassName","self-modal",3,"nzVisible","nzMaskClosable","nzFooter","nzBodyStyle","nzWidth","nzVisibleChange","nzOnCancel"],[3,"nzSpinning","nzDelay"],[1,"tree-container"],[1,"tree-left"],[1,"tree-title"],[1,"struct-container"],["style","padding-top: 40px;","type","operate",3,"chapterSelectable","coursePacketId","defaultSection","defaultExpandedKeys","nodeChange",4,"ngIf"],[1,"tree-right"],[2,"padding","52px 0 0 20px",3,"nzSpinning","nzDelay"],["model","check",3,"isExpandAll","professionId","defaultCheckedKeys","all","nodeChange",4,"ngIf"],[1,"bind-button"],["nz-button","","nzType","primary",3,"click"],["class","item",4,"ngIf"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"disabled","click"],[2,"margin","20px 0 0 130px",3,"nzData","nzPageSize"],["basicTable",""],[4,"ngFor","ngForOf"],["nzCheckedChildren","\u5f00","nzUnCheckedChildren","\u5173",2,"margin-left","20px",3,"nzDisabled","ngModel","ngModelChange"],["style","margin-top:20px",4,"ngIf"],["style","margin-left: 10px;",4,"ngIf"],["class","instructor-teach",3,"active","ngStyle","click",4,"ngFor","ngForOf"],[1,"instructor-teach",3,"ngStyle","click"],[1,"title"],[1,"sub-title"],[1,"icon-teacher"],["nz-icon","","nzType","check","nzTheme","outline"],[2,"margin-left","10px"],["nz-tooltip","",3,"nzTooltipTitle"],[2,"margin-right","5px",3,"click"],[2,"color","red",3,"click"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","\u5b66\u4e60\u5468\u671f\u4e0d\u80fd\u5927\u4e8e\u8bfe\u5305\u4e2d\u5c0f\u8282\u603b\u6570",1,"question-circle",3,"nzTooltipOverlayStyle"],[2,"margin","20px 0 0 130px",3,"nzFrontPagination","nzData"],["nz-checkbox","",2,"margin-right","20px",3,"ngModel","disabled","ngModelChange"],["nzPlaceHolder","\u8bf7\u8f93\u5165\u5468\u671f",2,"margin","0 10px","min-width","120px",3,"disabled","ngModel","nzMin","nzStep","ngModelChange","nzFocus","nzBlur"],[2,"margin-top","20px"],["type","operate",2,"padding-top","40px",3,"chapterSelectable","coursePacketId","defaultSection","defaultExpandedKeys","nodeChange"],["model","check",3,"isExpandAll","professionId","defaultCheckedKeys","all","nodeChange"]],template:function(e,t){1&e&&(c.ac(0,"div",0),c.ac(1,"div",1),c.ac(2,"div",2),c.Nc(3,L,2,0,"span",3),c.Pc(4,"\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f\uff1a "),c.Zb(),c.ac(5,"nz-date-picker",4),c.ic("ngModelChange",(function(e){return t.examTime=e}))("nzOnOpenChange",(function(e){return t.timeOpen(e,"examTime")}))("ngModelChange",(function(e){return t.timeChange(e,"examTime")})),c.Zb(),c.Zb(),c.ac(6,"div",1),c.ac(7,"div",2),c.ac(8,"span",5),c.Pc(9,"*"),c.Zb(),c.Pc(10,"\u667a\u9002\u5e94\uff1a "),c.Zb(),c.ac(11,"nz-switch",6),c.ic("ngModelChange",(function(e){return t.intellectualAdaptation=e})),c.Zb(),c.Zb(),c.Nc(12,R,39,14,"ng-container",7),c.Zb(),c.ac(13,"nz-modal",8),c.ic("nzVisibleChange",(function(e){return t.chapterBindingVisible=e}))("nzOnCancel",(function(){return t.chapterBindingVisible=!1})),c.ac(14,"nz-spin",9),c.ac(15,"div",10),c.ac(16,"div",11),c.ac(17,"span",12),c.Pc(18,"\u8bfe\u5305\u7ed3\u6784"),c.Zb(),c.ac(19,"div",13),c.Nc(20,$,1,4,"app-course-structure-tree",14),c.Zb(),c.Zb(),c.ac(21,"div",15),c.ac(22,"span",12),c.Pc(23,"\u77e5\u8bc6\u56fe\u8c31\u7ed3\u6784"),c.Zb(),c.ac(24,"nz-spin",16),c.Nc(25,Q,1,4,"app-simple-knowledgegraph-tree",17),c.Zb(),c.Zb(),c.Zb(),c.ac(26,"div",18),c.ac(27,"button",19),c.ic("click",(function(){return t.bindKnowledgePoints()})),c.Pc(28,"\u7ed1\u5b9a"),c.Zb(),c.Zb(),c.Zb(),c.Zb()),2&e&&(c.Eb(3),c.tc("ngIf",t.examTimeRequire&&t.intellectualAdaptation),c.Eb(2),c.tc("ngModel",t.examTime)("disabled","1"===t.preview),c.Eb(6),c.tc("ngModel",t.intellectualAdaptation)("nzDisabled","1"===t.preview||t.isStandard),c.Eb(1),c.tc("ngIf",t.intellectualAdaptation),c.Eb(1),c.tc("nzVisible",t.chapterBindingVisible)("nzMaskClosable",!1)("nzFooter",null)("nzBodyStyle",c.wc(17,W))("nzWidth",800),c.Eb(1),c.tc("nzSpinning",t.bindLoading)("nzDelay",0),c.Eb(6),c.tc("ngIf",t.lessonPackageStructureVisible),c.Eb(4),c.tc("nzSpinning",t.knowledgeGraphLoading)("nzDelay",0),c.Eb(1),c.tc("ngIf",t.knowledgeGraphStructureVisible))},directives:[s.n,z.b,a.o,a.q,v.a,h.a,y.a,S.a,k.a,P.a,C.c,C.j,C.k,C.b,C.h,C.e,s.m,E.a,s.o,b.a,w.d,x.a,M.a,O.a,I.a],styles:[".container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:20px 60px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{background-color:#f5f5f5;overflow:hidden;padding:10px 20px;margin:20px 60px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-del[_ngcontent-%COMP%]{float:right;margin-left:10px;cursor:pointer;color:red}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]{display:inline-block;width:130px;text-align:right}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]{cursor:pointer;width:200px;height:80px;border:1px solid grey;text-align:center;display:inline-block;position:relative;border-radius:2px;overflow:hidden;vertical-align:middle;margin-left:20px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach.active[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff;border:none}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach.active[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach.active[_ngcontent-%COMP%]   .icon-teacher[_ngcontent-%COMP%]{border-color:#1890ff}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px;font-size:16px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{margin-top:10px;color:grey}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .icon-teacher[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:0;height:0;border-color:transparent grey grey transparent;border-style:solid;border-width:10px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .icon-teacher[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translate(-27%,-23%);color:#fff;position:absolute;font-size:14px;font-weight:700}.list-container[_ngcontent-%COMP%]{background-color:#f5f5f5;overflow:hidden;padding:10px 20px;margin:20px 60px;cursor:pointer}.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .operat[_ngcontent-%COMP%]{float:right;margin-left:15px;visibility:hidden}.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .operat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover + span[_ngcontent-%COMP%]{visibility:visible}.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .operat[_ngcontent-%COMP%]   .icon-del[_ngcontent-%COMP%]{margin-left:5px;visibility:hidden;cursor:pointer;color:red}.list-container[_ngcontent-%COMP%]:hover   .operat[_ngcontent-%COMP%]{visibility:visible!important}.bind-button[_ngcontent-%COMP%]{text-align:right;border-top:1px solid #f0f0f0;padding:10px 20px;position:absolute;bottom:0;width:100%;background:#fff;z-index:9999}.tree-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;padding:0 0 55px}.tree-container[_ngcontent-%COMP%]   .tree-left[_ngcontent-%COMP%]{flex:1;float:left;max-height:400px;overflow:auto}.tree-container[_ngcontent-%COMP%]   .tree-right[_ngcontent-%COMP%]{flex:1;float:right;max-height:400px;overflow:auto}.tree-container[_ngcontent-%COMP%]   .tree-title[_ngcontent-%COMP%]{font-size:16px;position:absolute;height:56px;background:#fff;width:50%;z-index:99999;padding:20px 0 0 20px}.tree-container[_ngcontent-%COMP%]   .struct-container[_ngcontent-%COMP%]{padding-left:20px;padding-top:50px}.question-circle[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;cursor:pointer;color:#1890ff;border-radius:50%;font-weight:300}app-chapter-structure-tree[_ngcontent-%COMP%]     .ant-tree-title{word-break:break-all;min-width:0;max-width:200px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}  .self-modal .ant-spin-container,   .self-modal .ant-spin-nested-loading{position:static}"]}),Object(i.b)([Object(l.c)({initSet(e){this.initIntellectualAdaptationData()},set(e){const t=e?"1":"0";this.courseMgService.isSmartUpdate(this.coursePacketId,t).subscribe(n=>{201===n.status&&(e&&this.initIntellectualAdaptationData(),o.a.putPacketInfoItem("isSmart",t))})}})],e.prototype,"intellectualAdaptation",void 0),Object(i.b)([Object(l.b)({title:"\u89e3\u7ed1",content:e=>"\u786e\u5b9a\u5bf9\u201c"+e[0].sectionName+"\u5c0f\u8282\u540d\u79f0\u201d\u4e0e\u77e5\u8bc6\u56fe\u8c31\u8fdb\u884c\u89e3\u7ed1\u5417\uff1f",type:"warning"})],e.prototype,"untie",null),e})()}}]);
//# sourceMappingURL=1-es2015.eee09a56a0c9c301c5b5.js.map