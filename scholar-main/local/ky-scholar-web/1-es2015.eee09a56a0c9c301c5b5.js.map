{"version":3,"sources":["src/app/busi-services/statistics-log.service.ts","src/app/routes/course-manage/components/structure-adjustment/structure-adjustment.component.html","src/app/routes/course-manage/components/structure-adjustment/structure-adjustment.component.ts","node_modules/@ngrx/component-store/__ivy_ngcc__/fesm2015/ngrx-component-store.js","node_modules/rxjs/_esm2015/internal/util/not.js","node_modules/rxjs/_esm2015/internal/observable/partition.js","node_modules/rxjs/_esm2015/internal/operators/skipWhile.js","node_modules/rxjs/_esm2015/internal/operators/merge.js","src/app/routes/course-manage/components/other-setting/other-setting.store.service.ts","src/app/routes/course-manage/components/other-setting/other-setting.component.html","src/app/routes/course-manage/components/other-setting/other-setting.component.ts","src/app/routes/course-manage/components/structure-adjustment/structure-adjustment-chapter/structure-adjustment-chapter.component.ts","src/app/routes/course-manage/components/structure-adjustment/structure-adjustment-chapter/structure-adjustment-chapter.component.html","src/app/routes/course-manage/components/other-setting/new-level/new-level.component.ts","src/app/routes/course-manage/components/other-setting/new-level/new-level.component.html","src/app/routes/course-manage/components/chapter-handout/video-import/video-import.component.ts","src/app/routes/course-manage/components/chapter-handout/video-import/video-import.component.html","src/app/routes/course-manage/components/upload-handout/upload-handout.component.ts","src/app/routes/course-manage/components/upload-handout/upload-handout.component.html","src/app/routes/course-manage/components/chapter-handout/chapter-handout.component.html","src/app/routes/course-manage/components/chapter-handout/chapter-handout.component.ts","core/services/upload-oss.service.ts","src/app/routes/course-manage/components/other-setting/new-company/new-company.component.ts","src/app/routes/course-manage/components/other-setting/new-company/new-company.component.html","src/app/routes/course-manage/components/school-zone/school-zone.component.ts","src/app/routes/course-manage/components/school-zone/school-zone.component.html","src/app/routes/course-manage/components/other-setting/reward-settings/reward-settings.component.ts","src/app/routes/course-manage/components/other-setting/reward-settings/reward-settings.component.html","src/app/routes/course-manage/components/other-setting/edit-lesson/edit-lesson.component.ts","src/app/routes/course-manage/components/other-setting/edit-lesson/edit-lesson.component.html","src/app/routes/course-manage/components/structure-adjustment/structure-adjustment-section/structure-adjustment-section.component.ts","src/app/routes/course-manage/components/structure-adjustment/structure-adjustment-section/structure-adjustment-section.component.html","src/app/routes/course-manage/components/structure-adjustment/structure-adjust-tree/structure-adjust-tree.component.html","src/app/routes/course-manage/components/structure-adjustment/structure-adjust-tree/structure-adjust-tree.component.ts","src/app/routes/course-manage/components/complete-course/complete-course.component.html","src/app/routes/course-manage/components/complete-course/complete-course.component.ts","src/app/routes/course-manage/components/flex-table/flex-table.component.ts","src/app/routes/course-manage/components/course-data/course-data.component.ts","src/app/routes/course-manage/components/search-table/search-table.component.ts","src/app/routes/course-manage/components/resolver-data/resolver-data.component.ts","src/app/routes/course-manage/components/course-structure-tree/course-structure-tree.component.ts","src/app/routes/course-manage/components/course-structure-tree/course-structure-tree.component.html","core/decorators/index.ts","src/app/routes/course-manage/components/intellectual-adaptation/intellectual-adaptation.component.html","src/app/routes/course-manage/components/intellectual-adaptation/intellectual-adaptation.component.ts"],"names":["StatisticsLogService","http","param","packetInfo","getPacketInfo","status","options","isCommonHttpHeader","this","postBody","recordControlUrl","businessCode","businessId","orgCode","getOrgCode","source","informationId","pcode","userName","getUser","userId","getUserId","subscribe","pageListUrl","$event","stopPropagation","StructureAdjustmentComponent","route","courseMgService","nzMesService","nzModalService","uploadOssService","fb","modalService","courseId","coursePacketId","packageName","isStandard","preview","nodes","isVisible","fileList","loading","afterOpen","downTemplateLoading","knowledgeGraphLoading","chapterExportLoading","initParams","res","localUploadChapter","patchValue","chapterUrl","qkcupload","nzFileList","unsubscribe","id","isUsed","name","getChapter","group","length","chapter","children","getList_courseChapter","data","forEach","active","sectionChange","node","getList_courseSection","isLoading","setChapter","getSection","curChapter","isRename","create","nzTitle","nzContent","nzComponentParams","formData","nzMaskClosable","nzFooter","afterClose","chapterIdx","findIndex","chapterItem","splice","section","confirm","nzOnOk","Promise","resolve","reject","delTreeNode","error","message","sectionIdx","sectionItem","params","chapters","seq","sections","map","item","index","sort","save_courseChapter","JSON","stringify","event","previousIndex","currentIndex","modalFormRef","localuploadmodal","nzWrapClassName","nzCancelText","nzOkText","nzAfterOpen","e","value","warning","excelImportChapter","fileUrl","err","packetChapterExport","resp","link","document","createElement","url","URL","createObjectURL","body","setAttribute","style","visibility","appendChild","click","removeChild","loadingControl","synchronizedKnowledge","thisObj","uploadOss","file","knowledge_file","result","onSuccess","onError","getFileType","observe","next","that","exportExcel","chapterDrop","title","content","type","debounceSync","Observable","observer","actionSubscription","actionValue","rootSubscription","Subscription","add","complete","asap","schedule","undefined","initialStateToken","ComponentStore","defaultState","destroySubject$","ReplaySubject","destroy$","asObservable","stateSubject$","isInitialized","notInitializedErrorMessage","constructor","state$","select","s","initState","updaterFn","observableOrValue","initializationError","subscription","isObservable","of","pipe","concatMap","scheduled","queue","withLatestFrom","throwError","Error","takeUntil","currentState","state","stateOrUpdaterFn","updater","partialStateOrUpdaterFn","setState","patchedState","Object","assign","projector","take","args","observables","config","selectorArgs","Array","from","debounce","projectorOrConfig","pop","observable$","source$","combineLatest","projectorArgs","distinctUntilChanged","shareReplay","refCount","bufferSize","generator","origin$","Subject","ɵfac","t","ɵprov","token","factory","tapResponse","nextFn","errorFn","completeFn","tap","catchError","not","pred","thisArg","notPred","apply","arguments","partition","predicate","filter","subscribeTo","skipWhile","lift","SkipWhileOperator","subscriber","Subscriber","destination","super","skipping","tryCallPredicate","Boolean","call","merge","OtherSettingStoreService","courseManageService","statisticsLogService","searchLoad","exam","intelligent","subQuestionBankCurrent","subQuestionBankCurrentPre","subQuestionBank","subQuestionBankInt","listSublibrary","subQuestionBankIntCurrent","subQuestionBankIntCurrentPre","moduleArr","levelLists","companyLists","listOfData","idMap","breakthroughMode","practiceOn","isBet","knowledgeNum","packetInfo$","listSublibrary$","listOfData$","moduleArr$","levelLists$","companyLists$","knowledgeNum$","idMap$","subQuestionBankCurrentPre$","subQuestionBank$","subQuestionBankIntCurrentPre$","subQuestionBankInt$","vm$","setPacketInfo","setLoading","loadObj","getLevel","effect","data$","switchMap","isCard","levelList","a","b","coursePacketCardRecourseList","patchState","getCompany","is99Train","setBreakthroughMode","setPracticeOn","setIsBet","teacherType","getSubLibrary","quebankType","listSublibraryBak","Number","quebankId","busType","String","parse","getLessonCountTable","teachType","getLessonPackageTable","ii","lessonCount","getSubQuestionBank","getAjax","environment","questionBankApi","courseCode","code","resultS","resP","bak","reduce","itemX","sublibraryModuleList","itemIn","concat","itemY","itemP","conversionNode","createTime","dellistSublibraryItem","delSubLibrary","deleteGift","param$","levelDataDeletion","statisticsPacketInfoLog","actionCode","modify","levelDeletion","delCode","companyDeletion","delTable","dataInit","getKnowledgeNum","getKnos","knowledgeSubjectId","num","subQuestionBankChange","success","failed","pre","list","getTreeNodeByKey","callSubLibrary","origin","quebankName","getMaxSeq","quebankModuleType","current","every","i","indexOf","generateLessonsReal","lessonPackage","addCode","generateLessonsEffect","generateLessonsAlert","newClass","$data","max","saveTable","addLevelEffect","levelItem","nzWidth","flag","addCompanyEffect","companyItem","rewardSettings","itemx","indexx","thumbUrl","professionId","currentCard","listDrop","label","arr","push","sortSubQuestionBank","breakthroughModeChange","val","isCardUpdate","putPacketInfoItem","practiceOnChange","is99TrainUpdate","isBetChange","isBetUpdate","child","iii","key","isLeaf","disabled","selectable","otherSettingStoreService","OtherSettingComponent","ossUrl","OSS_URL","getPacketInfoItem","knoNumLimit","percent","Math","trunc","treeSelect","treeSelectInt","StructureAdjustmentChapterComponent","nzModalRef","lock","formGroup","required","maxLength","keys","controls","markAsDirty","updateValueAndValidity","invalid","postData","close","save","cancel","NewLevelComponent","newLevelLoading","paperArr","totalTestPaperScore","paperIdToName","examIdToPaperUUId","newLevelForm","newLevel","testPaperName","complianceConditions","levelId","getSubmodule","getPapers","then","obj","passScore","examId","split","paperUuid","change","putSubmodule","postAjax","sublibraryModuleIdList","pageNum","pageSize","rows","markAsUntouched","markAsPristine","itemPaper","examName","hasOwnProperty","addCoursePacketCard","edit","paper","score","testPaperNameChange","VideoImportComponent","menuService","aliOssService","knowledgeManageService","renderer2","trainManageService","sanitizer","locale","win","videoImportLoading","removeFileSelf","videoImportForm","videoUrl","beforeVideoUpload","customVideoRequest","exportExcelVideo","excelImportVideo","downTemplate","UploadHandoutComponent","nzMsg","files","acceptTypeFile","acceptType","desc","acceptTypeFiles","deafult","courseTimeDivision","limit","learningTarget","setAcceptType","destroy","formatPostData","batchSave_courseChapterFile","batchSave_courseSectionTaskFile","batchSave_courseSectionFile","batchSave_courseTimeFile","courseChapterId","attachmentName","attachmentPath","path","aattachmentExt","getExt","courseSectionId","sourceType","learningGoalCode","isNeed","downloadType","gradeType","taskType","courseTimeId","ChapterHandoutComponent","doc","_PAGE_ID_","active1","active2","active3","active4","listLoading","hanoutLoading","totalPage","handouts","taskList","handoutsMaterial","handoutsLecture","handoutsRecording","teacherList","exercise","examSearch","exerciseSearch","examListPreview","exerciseListPreview","listOfDataExercise","listOfQuestionnaireData","listOfEvaluationData","selectedValue","examSubQuestionBankExam","examSubQuestionBankExamBak","homeworkSubQuestionBank","homeworkSubQuestionBankBak","testPaperId","testExerciseName","testExerciseId","NumberS","isPreviewpolyway","answerTimesValue","isQuestionnaireVisible","visibleAssociate","assocateList","tokenObj","getTkToken","currentExam","currentQuestionnair","currentBindLength","exerciseType","isSmart","assocateLists","assocateClassLists","defaultExpandedKeys","examType","reset","resourceUrl","questionnairePreview","evaluationPreview","isCallLoading","examSettingLoading","bindLoading","instructorLoading","trainLoading","queryKeywords","queryKeywordsJob","previewTitle","previewStart","limitTask","bingLimit","associateing","curJobData","curExamData","currentSession","getSelection","defaultSection","currentChapter","initFrom","getExamination","questionnaireSetting","answerTimes","questionnairSettingForm","is","examSetting","examSettingForm","getTaskList","successFn","failFn","ee","saveOrUpdateTask","saveOrUpdate","console","log","examLength","paperType","isRedo","computerType","resultWay","configType","getTeacher","addJobFromSeting","taskForm","addExamFrom","missionName","formingMethod","polyway","authorId","videoType","localVideo","auditStatus","curNode","isDownloadType","sectionFileList_courseSectionFile","getTypeData","ext","getFileExt","isMainFile","getssocateList","currentAssocate","sectionSeq","isBindAssoicate","innerArr","handout","polywayId","previewpolyway","field","maxSize","getHandoutFiles","setSelection","task","del_courseSectionFileTask","del_courseSectionFile","getDescType","resT","w","ifMainFile","work","modifySectionResource","needTeacherProc","modifySectionResourceTask","isGrade","isTask","getLabel","comfirmUpload","nzOnCancel","getParams","getDuration","videoLength","getVideoLength","duration","storingData","resourceId","attachmentExt","authorName","eee","ptime","Date","getTime","vids","sign","secretkey","toUpperCase","userid","tasks","el","taskId","sectionInfo","putScpResourceMaterial","removeReadtree","removeCasetree","removeTrainTree","gotoUrl","paramUrl","pathArr","downloadFile","codeUid","getProdIdSync","proId","groupWay","isNotTaskType","sublibraryModuleIds","join","resS","selected","getPracSubquestionbank","modalRef","jobSettingsEdit","jobSettings","realSave","sublibraryModuleId","userPhone","syncParams","mobile","postTaskList","paperId","getExamSubquestionbank","addExamExit","addExam","job","questionBank","newTestPaper","resul","getCallList","getViewUrlWebPath","wps","WebOfficeSDK","wpsUrl","iframe","display","ready","wpsApplication","Application","stack","Stack","ActivePresentation","Slides","Count","ifNeed","linkId","courseTaskId","saveAssocateList","ifExercise","open","refreshToken","entryExercises","addVolume","otherEdit","str","previewTraining","previewExaminationPaper","previewHandout","preventDefault","decide","boundTask","handoutPageNumberRelatedTasks","fn","getElementById","getApp","getBlur","delBind","parentNode","End","getAccountPeriodId","window","getPracticalDetail","accountId","videoUpload","hour","minute","evaluationType","questionnaireType","evaluationName","questionnaireName","typeId","evaluateId","checkData","putExamSubquestionbank","putPracSubquestionbank","bakLabel","parseFloat","toString","getExamType","nodeChange","sectionDrop","queryKeywordsChange","subQuestionBankChangeSearch","queryKeywordsJobChange","closeQuestionnaire","questionnaireCall","newQuestionnaire","paperTypeChange","clearStatus","completebind","UploadOssService","httpService","httpClient","uploadDir","post","dir","uploadData","customReq","FormData","getRandomFileName","append","accessKeyId","policy","signature","req","reportProgress","request","UploadProgress","NewCompanyComponent","newCompanyLoading","beforeUpload","pass","newCompanyForm","filePath","customRewardRequest","company_file","termType","fileName","permission","uid","addCoursePacketCompany","SchoolZoneComponent","cdr","opts","selectedValues","expandKeys","checkAll","schoolZone","dataLength","dataPLength","onModelChange","_","collegeList","values","setExpandKeys","detectChange","isDisabled","formatOpts","emit","area","typeCode","typeName","chlidren","school","oCode","orgName","setModalChange","tmpSelectedValues","tmpExpandedkeys","childNode","Set","idx","it","cur","startsWith","schoolKeys","find","prototype","markForCheck","provide","useExisting","multi","selectedChange","checkAllStatus","RewardSettingsComponent","rewardSettingsLoading","nzFileListBak","reward_file","coursePacketCardId","iP","originFileObj","levelInformationBatchUpload","diffFileChange","resourceCall","EditLessonComponent","editLessonLoading","courseForm","StructureAdjustmentSectionComponent","maxSeq","sectionId","getSeq","StructureAdjustTreeComponent","injector","isDraggable","isPermittedDrag","emptyChapter","isAddModel","expandedKeys","beforeDrop","arg","isOk","dragNode","pos","snapshot","paramMap","get","evt","eventName","activedNode","isEdit","cacheTitle","treeNodes","treeCom","getTreeNodes","treeOpts","resort","transformPostTreeData","renderTree","getChildren","isExpanded","editTitle","trim","checkList","checkRepeatedName","saveNode","remove","_level","getCourseChapterTreeNode","isPermitAdd","treeOpt","createRandomNodeKey","includes","addChildren","tree","tmpOpts","recurTree","transformSectionTreeNodes","ele","level","tmp","show","transformTreeNodes","excludeIds","nzEvent","CompleteCourseComponent","quebankNum","authorNum","sectionNum","teachDemoNum","getDetails","studySet","FlexTableComponent","limitHeight","dom","clientHeight","height","timer","CourseDataComponent","pageIndex","page","searchWord","dateRange","total","routeConfig","searchKey","filterKey","startTime","endTime","startBillDate","endBillDate","queryFilterType","getCourseListNew","totalResult","SearchTableComponent","searchWordVal","dateRangeVal","selectedVal","subject","subscribeChange","initData","collectParam","sybcParam","removeData","searchData","resetData","getDataList","now","resetInit","getSearch","passData","debounceTime","putSearch","clearSearch","ResolverDataComponent","courseListData","ret","putPageInfo","ngOnDestroy","removePageInfo","CourseStructureTreeComponent","selectedKeys","chapterSelectable","sendNodeChange","setTimeout","treeNode","childrenNodes","getSetChange","getSetCall","target","propertyValue","initValue","fill","floor","random","defineProperty","newValue","set","initSet","ConfirmableDesc","descriptor","original","replaceXxxField","conditionField","conditionResult","conditionTitleReplace","conditionContentReplace","condition","resultCondition","resultContent","replace","ConfirmableFlat","nzBodyStyle","modal","watchTool","updateConfig","nzOkLoading","IntellectualAdaptationComponent","teacherData","defaultTreeKey","knowledgePointIds","clickFlag","chapterBindingVisible","isDailyOn","isSprintOn","isFinalOn","defaultTeacherId","dataSet","applicableZeroBasis","applicableExperts","applicableHasAFoundation","bindList","untieLoading","totalSectionNum","knowledgeGraphStructureVisible","lessonPackageStructureVisible","defaultChapter","examTimeRequire","adaptive","middleWeekNum","juniorWeekNum","seniorWeekNum","examTime","finalTime","sprintTime","getLessonPackage","getChapterBindList","isComputer","deadTime","teacherDtoList","intellectualAdaptation","teacherId","applicableZeroBasisWeekPre","applicableZeroBasisWeek","applicableHasAFoundationWeekPre","applicableHasAFoundationWeek","applicableExpertsWeekPre","applicableExpertsWeek","setLessonPackage","paramsKey","sectionName","chapterSeq","knowledgeUnits","chapterId","bindKnowledgePointsBatch","chapterBindingEdit","idR","getKnowledgePoints","knowledgeUnitId","selectId","knowledgeUnitIdList","nodeOpt","kType","eeee","date","checkAndSave","setValue","checkPlan","finalTimePre","sprintTimePre","unbindKnowledgePoints","itemIndex","knoArr","exportExcelKno","timeOpen","timeChange","bindKnowledgePoints","initIntellectualAdaptationData","isSmartUpdate"],"mappings":"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","sourceRoot":"webpack:///","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {HttpService} from 'core/services/http.service';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {environment} from 'src/environments/environment';\r\nimport {ServicesModule} from '@app/service/service.module';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/internal/operators';\r\nimport {\r\n  AreaZkDataType,\r\n  CommonData, CommonPagination, CommonStructure,\r\n  CourseListDataType, CourseListParams,\r\n  CourseServiceProviderType, NewMajorTypeParams\r\n} from 'core/base/common';\r\nimport {STATISTICALRULES} from '../../../core/base/static-data';\r\nimport {SessionStorageUtil} from '../../../core/utils/sessionstorage.util';\r\nimport {LocalStorageUtil} from '../../../core/utils/localstorage.util';\r\n\r\n@Injectable({\r\n  providedIn: ServicesModule\r\n})\r\nexport class StatisticsLogService {\r\n\r\n  constructor(private http: HttpService) {\r\n  }\r\n\r\n  statisticsPacketInfoLog(param) {\r\n    const packetInfo = SessionStorageUtil.getPacketInfo();\r\n    if (packetInfo.status === '1') {\r\n      const options = {isCommonHttpHeader: true};\r\n      this.http.postBody(STATISTICALRULES.recordControlUrl, {\r\n        ...param,\r\n        businessCode: STATISTICALRULES.packetInfo.businessId,\r\n        orgCode: ToolsUtil.getOrgCode(),\r\n        source: 1,\r\n        informationId: packetInfo.pcode,\r\n        userName: LocalStorageUtil.getUser().userName,\r\n        userId: LocalStorageUtil.getUserId()\r\n      }, options).subscribe(() => {\r\n      }, () => {\r\n      });\r\n    }\r\n  }\r\n\r\n  packageOperatLog(param) {\r\n    const url = STATISTICALRULES.pageListUrl;\r\n    const options = {isCommonHttpHeader: true};\r\n    return this.http.postBody(url, param, options);\r\n  }\r\n}\r\n\r\n","<div class=\"container\">\r\n  <div *ngIf='preview===\"1\"&&!nodes.length' class='not-content'>\r\n    该课包尚未建立章节内容\r\n  </div>\r\n  <div class=\"operation-button\">\r\n    <button nz-button nzType=\"primary\" style='margin-right:20px;' (click)='chapterImport()'\r\n            *ngIf='(!isStandard)&&preview===\"0\"'>excel导入章节\r\n    </button>\r\n    <button nz-button nzType=\"primary\" (click)='knowledgeGraph()' style='margin-right:20px;' [nzLoading]='knowledgeGraphLoading' *ngIf='(!isStandard)&&preview===\"0\"'>知识图谱导入章节</button>\r\n    <button nz-button nzType=\"primary\" (click)='chapterExport()' [nzLoading]='chapterExportLoading' *ngIf='preview===\"0\"'>章节导出</button>\r\n  </div>\r\n  <nz-collapse\r\n    [style]=\"{ border: 'none', 'background-color': '#fff'}\"\r\n    cdkDropList\r\n    [style.cursor]='(!isStandard)&&preview===\"0\"?\"inherit\":\"not-allowed\"'\r\n    (cdkDropListDropped)=\"chapterDrop($event)\">\r\n    <nz-collapse-panel\r\n      *ngFor=\"let node of nodes;let idx=index;\"\r\n      [style.cursor]='(!isStandard)&&preview===\"0\"?\"inherit\":\"not-allowed\"'\r\n      class=\"collapse-panel\"\r\n      [(nzActive)]=\"node.active\"\r\n      [nzHeader]=\"panelHeaderTpl\"\r\n      [nzExtra]=\"panelExtraTpl\"\r\n      (nzActiveChange)=\"sectionChange(node)\"\r\n      cdkDrag\r\n    >\r\n      <ng-template #panelHeaderTpl>\r\n        <span [style.cursor]='(!isStandard)&&preview===\"0\"?\"inherit\":\"not-allowed\"'>\r\n              <span style=\"margin-right: 20px;\">第{{ idx + 1}}章</span>\r\n              <span>{{ node.name}}</span>\r\n        </span>\r\n      </ng-template>\r\n      <ng-template #panelExtraTpl>\r\n        <a (click)=\"$event.stopPropagation();addChapter(node);\" *ngIf=\"preview==='0'\">\r\n          <i nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n          重命名\r\n        </a>\r\n        <a [style]=\"{ color: '#f53131', 'margin-left': '20px'}\" (click)=\"$event.stopPropagation();delChapter(node);\"\r\n           *ngIf=\"(!isStandard)&&preview==='0'\">\r\n          <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n          删除\r\n        </a>\r\n      </ng-template>\r\n      <div class=\"list\" cdkDropList (cdkDropListDropped)=\"sectionDrop($event)\"\r\n           [style.cursor]='(!isStandard)&&preview===\"0\"?\"inherit\":\"not-allowed\"'>\r\n        <ng-container *ngFor=\"let item of node.children;let sectionIdx=index;\">\r\n          <div class=\"list-item\" cdkDrag [style.cursor]='(!isStandard)&&preview===\"0\"?\"inherit\":\"not-allowed\"'>\r\n            <div>\r\n              <span style=\"margin-right: 20px;\">{{ idx + 1}}.{{ sectionIdx + 1 }}节</span><span>{{ item.name}}</span>\r\n            </div>\r\n            <div class=\"action-group\">\r\n              <a nz-button nzType=\"link\" (click)=\"addSection(node, item)\" *ngIf=\"preview==='0'\">\r\n                <i nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n                重命名\r\n              </a>\r\n              <a nz-button nzType=\"link\" [style]=\"{ color: '#f53131'}\" (click)=\"delSection(node, item)\"\r\n                 *ngIf=\"(!isStandard)&&preview==='0'\">\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                删除\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n        <div class=\"add-section\" *ngIf=\"(!isStandard)&&preview==='0'\">\r\n          <div>\r\n            <a nz-button nzType=\"link\" (click)=\"addSection(node, null)\">\r\n              <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n              添加小节\r\n            </a>\r\n          </div>\r\n          <div></div>\r\n        </div>\r\n      </div>\r\n    </nz-collapse-panel>\r\n  </nz-collapse>\r\n  <button *ngIf=\"(!isStandard)&&preview==='0'\" nz-button nzType=\"primary\" nzBlock [nzSize]=\"'large'\"\r\n          (click)=\"addChapter(null)\">\r\n    <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n    新增章\r\n  </button>\r\n</div>\r\n\r\n\r\n<ng-template #localuploadmodal>\r\n  <form nz-form [formGroup]=\"localUploadChapter\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired style='max-width:100px;'>章节结构</nz-form-label>\r\n      <nz-form-control style='position:relative;'>\r\n        <nz-spin [nzSpinning]=\"loading\"\r\n                 [nzDelay]=\"0\">\r\n          <nz-upload\r\n            class=\"upload-list-inline-strure\"\r\n            nzListType=\"picture\"\r\n            [nzShowUploadList]=' { showPreviewIcon: false, showRemoveIcon: true, showDownloadIcon: false }'\r\n            [nzFileList]=\"false\"\r\n            [nzRemove]='removeFileSelf()'\r\n            [nzBeforeUpload]=\"beforeChapterUpload()\"\r\n            [nzCustomRequest]=\"customChapterRequest()\"\r\n            #qkcupload\r\n          >\r\n            <button nz-button [disabled]='this.localUploadChapter.value.chapterUrl===\"\"?false:true'\r\n                    style='margin-bottom: 20px;'>\r\n                    <span><i nz-icon\r\n                             nzType=\"upload\" style='font-size:20px;'></i>上传文件</span>\r\n            </button>\r\n          </nz-upload>\r\n          <div style='position: absolute;top: 35px;'>excel导入章节同时将会清除已有的章节结构！</div>\r\n          <button nz-button style='position:absolute;left:126px;top:0;' (click)='downTemplate()' [nzLoading]='downTemplateLoading'>\r\n                    <span><i nz-icon\r\n                             nzType=\"snippets\" style='font-size:20px;margin-right:20px'\r\n                             nzTheme=\"outline\"></i>模板下载</span>\r\n          </button>\r\n        </nz-spin>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n</ng-template>\r\n\r\n\r\n\r\n\r\n\r\n","import {Component, EventEmitter, Input, OnInit, TemplateRef, ViewChild, OnDestroy} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {StructureAdjustmentSectionComponent} from './structure-adjustment-section/structure-adjustment-section.component';\r\nimport {StructureAdjustmentChapterComponent} from './structure-adjustment-chapter/structure-adjustment-chapter.component';\r\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {Observable} from 'rxjs';\r\nimport {UploadXHRArgs} from 'ng-zorro-antd';\r\nimport {UploadDir} from 'core/utils/uploadDir';\r\nimport {UploadOssService} from 'core/services/upload-oss.service';\r\nimport {environment} from '../../../../../environments/environment';\r\nimport {HttpHeaders, HttpResponse} from '@angular/common/http';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {ConfirmableFlat} from '../../../../../../core/decorators';\r\nimport {LoadingControl} from '../../../../../../core/base/common';\r\n\r\n@Component({\r\n  selector: 'app-structure-adjustment',\r\n  templateUrl: './structure-adjustment.component.html',\r\n  styleUrls: ['./structure-adjustment.component.less']\r\n})\r\nexport class StructureAdjustmentComponent implements OnInit, OnDestroy {\r\n  courseId = '';\r\n  coursePacketId = '';\r\n  packageName = '';\r\n  isStandard = false;\r\n  preview = '0';\r\n  nodes = [];\r\n  curChapter: any;\r\n  isVisible = false;\r\n  fileList = [];\r\n  localUploadChapter: FormGroup;\r\n  loading = false;\r\n  modalFormRef: NzModalRef;\r\n  afterOpen = new EventEmitter<void>();\r\n  downTemplateLoading = false;\r\n  knowledgeGraphLoading = false;\r\n  chapterExportLoading = false;\r\n  @ViewChild('localuploadmodal') localuploadmodal: TemplateRef<any>;\r\n  @ViewChild('qkcupload') qkcupload;\r\n\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private courseMgService: CourseManageService,\r\n    private nzMesService: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private uploadOssService: UploadOssService,\r\n    private fb: FormBuilder,\r\n    private modalService: NzModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initParams();\r\n    this.afterOpen.subscribe(res => {\r\n      this.localUploadChapter.patchValue({\r\n        chapterUrl: '',\r\n      });\r\n      this.qkcupload.nzFileList = [];\r\n    });\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.afterOpen.unsubscribe();\r\n  }\r\n\r\n  initParams() {\r\n    const {courseId, id, status, preview, isUsed ,name} = SessionStorageUtil.getPacketInfo();\r\n    this.courseId = courseId;\r\n    this.coursePacketId = id;\r\n    this.packageName = name;\r\n    this.isStandard = isUsed > 0;\r\n    this.preview = preview;\r\n    this.getChapter();\r\n    this.localUploadChapter = this.fb.group({\r\n      chapterUrl: [''],\r\n    });\r\n  }\r\n\r\n  checkStructure(): boolean {\r\n    if (this.nodes.length === 0) {\r\n      return false;\r\n    }\r\n    for (const chapter of this.nodes) {\r\n      if (chapter.children && chapter.children.length === 0) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  getChapter(): void {\r\n    this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe(res => {\r\n      if (res.status === 200) {\r\n        (res.data as any[]).forEach(data => {\r\n          data.active = false;\r\n        });\r\n        this.nodes = res.data;\r\n        if (this.nodes.length > 0) {\r\n          this.nodes[0].active = true;\r\n          this.sectionChange(this.nodes[0]);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getSection(node: any): void {\r\n    this.courseMgService.getList_courseSection(node.id).subscribe(res => {\r\n      if (res.status === 200) {\r\n        node.children = res.data;\r\n      } else {\r\n        node.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  sectionChange(chapter: any) {\r\n    this.setChapter(chapter);\r\n    if (!chapter.children || chapter.children.length === 0) {\r\n      this.getSection(chapter);\r\n    }\r\n  }\r\n\r\n  setChapter(chapter: any) {\r\n    this.curChapter = chapter;\r\n  }\r\n\r\n  addChapter(chapter: any) {\r\n    const isRename = chapter ? true : false;\r\n    const title = isRename ? '重命名章' : '新增章';\r\n    const param = {\r\n      nzTitle: title,\r\n      nzContent: StructureAdjustmentChapterComponent,\r\n      nzComponentParams: {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        data: this.nodes,\r\n        formData: chapter\r\n      },\r\n      nzMaskClosable: false,\r\n      nzFooter: null\r\n    };\r\n    const modalRef = this.nzModalService.create<StructureAdjustmentChapterComponent, any>(param);\r\n    modalRef.afterClose.subscribe(res => {\r\n      if (!res) {\r\n        return;\r\n      }\r\n      if (isRename) {\r\n        const {name} = res;\r\n        chapter.name = name;\r\n      } else {\r\n        if (!res.active) {\r\n          res.active = true;\r\n        }\r\n        const chapterIdx = this.nodes.findIndex(chapterItem => chapterItem.id === res.id);\r\n        const startIdx = chapterIdx === -1 ? this.nodes.length : chapterIdx;\r\n        const delCount = chapterIdx === -1 ? 0 : 1;\r\n        this.nodes.splice(startIdx, delCount, res);\r\n      }\r\n    });\r\n  }\r\n\r\n  addSection(node: any, section: any) {\r\n    this.setChapter(node);\r\n    const title = section ? '重命名节' : '新增节';\r\n    const modalRef = this.nzModalService.create<StructureAdjustmentSectionComponent, any>({\r\n      nzTitle: title,\r\n      nzContent: StructureAdjustmentSectionComponent,\r\n      nzComponentParams: {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        data: node,\r\n        formData: section\r\n      },\r\n      nzMaskClosable: false,\r\n      nzFooter: null\r\n    });\r\n    modalRef.afterClose.subscribe(res => {\r\n      if (!res) {\r\n        return;\r\n      }\r\n      this.getSection(this.curChapter);\r\n    });\r\n  }\r\n\r\n  delSection(node: any, section: any) {\r\n    this.setChapter(node);\r\n    this.nzModalService.confirm({\r\n      nzTitle: '警告',\r\n      nzContent: `确定要删除${section.name}吗`,\r\n      nzOnOk: () => {\r\n        return new Promise((resolve, reject) => {\r\n          this.courseMgService.delTreeNode(section.id, 'section').subscribe(res => {\r\n            if (res.status !== 204) {\r\n              this.nzMesService.error(res.message);\r\n              resolve(false);\r\n              return;\r\n            }\r\n            const sectionIdx = node.children.findIndex(sectionItem => sectionItem.id === section.id);\r\n            node.children.splice(sectionIdx, 1);\r\n            const params = {\r\n              courseId: this.courseId,\r\n              coursePacketId: this.coursePacketId,\r\n              chapters: [\r\n                {\r\n                  id: this.curChapter.id,\r\n                  seq: this.curChapter.seq,\r\n                  sections: node.children.map((item, index) => ({\r\n                    id: item.id,\r\n                    seq: index + 1\r\n                  }))\r\n                }\r\n              ]\r\n            };\r\n            this.sort(params);\r\n            resolve(true);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  delChapter(chapter: any) {\r\n    this.nzModalService.confirm({\r\n      nzTitle: '警告',\r\n      nzContent: `确定要删除${chapter.name}吗`,\r\n      nzOnOk: () => {\r\n        return new Promise((resolve, reject) => {\r\n          this.courseMgService.delTreeNode(chapter.id, 'chapter').subscribe(res => {\r\n            if (res.status !== 204) {\r\n              this.nzMesService.error(res.message);\r\n              resolve(false);\r\n              return;\r\n            }\r\n            const chapterIdx = this.nodes.findIndex(chapterItem => chapterItem.id === chapter.id);\r\n            this.nodes.splice(chapterIdx, 1);\r\n            const params = {\r\n              courseId: this.courseId,\r\n              coursePacketId: this.coursePacketId,\r\n              chapters: this.nodes.map((item, index) => ({\r\n                id: item.id,\r\n                seq: index + 1\r\n              }))\r\n            };\r\n            this.sort(params);\r\n            resolve(true);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  sort(params: any) {\r\n    const successFn = (res: any) => {\r\n      if (res.status !== 200) {\r\n        this.nzMesService.error(res.message || '移动失败，未知错误！');\r\n        return;\r\n      }\r\n    };\r\n    const failFn = (error: any) => {\r\n      this.nzMesService.error(JSON.stringify(error));\r\n    };\r\n    this.courseMgService.save_courseChapter(params).subscribe(successFn, failFn);\r\n  }\r\n\r\n  chapterDrop(event: CdkDragDrop<any[]>) {\r\n    if ((!this.isStandard) && this.preview === '0') {\r\n      const chapters: any[] = this.nodes || [];\r\n      moveItemInArray(chapters, event.previousIndex, event.currentIndex);\r\n      const params = {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        chapters: chapters.map((chapter, index) => ({\r\n          id: chapter.id,\r\n          seq: index + 1\r\n        }))\r\n      };\r\n      this.sort(params);\r\n    }\r\n  }\r\n\r\n  sectionDrop(event: CdkDragDrop<any[]>) {\r\n    const sections: any[] = this.curChapter.children || [];\r\n    moveItemInArray(sections, event.previousIndex, event.currentIndex);\r\n    const params = {\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      chapters: [\r\n        {\r\n          id: this.curChapter.id,\r\n          seq: this.curChapter.seq,\r\n          sections: sections.map((section, index) => ({\r\n            id: section.id,\r\n            seq: index + 1\r\n          }))\r\n        }\r\n      ]\r\n    };\r\n    this.sort(params);\r\n  }\r\n\r\n  chapterImport() {\r\n    this.modalFormRef = this.modalService.create({\r\n      nzTitle: 'excel导入章节',\r\n      nzContent: this.localuploadmodal,\r\n      nzMaskClosable: false,\r\n      nzWrapClassName: 'vertical-center-modal',\r\n      nzCancelText: '取消',\r\n      nzOkText: '确定上传',\r\n      nzAfterOpen: this.afterOpen,\r\n      nzOnOk: (e) => {\r\n        return new Promise((resolve, reject) => {\r\n          if (!this.localUploadChapter.value.chapterUrl) {\r\n            this.nzMesService.warning('请先上传文件');\r\n            resolve(false);\r\n            return;\r\n          }\r\n          const params = {\r\n            courseId: this.courseId,\r\n            coursePacketId: this.coursePacketId,\r\n            fileUrl: this.localUploadChapter.value.chapterUrl\r\n          };\r\n          this.courseMgService.excelImportChapter(params).subscribe(res => {\r\n            if (res.status === 200) {\r\n              this.getChapter();\r\n              resolve(true);\r\n            } else {\r\n              if (res.status === 500) {\r\n                this.nzMesService.warning(res.message);\r\n              }\r\n              resolve(false);\r\n            }\r\n          }, err => {\r\n            resolve(false);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  chapterExport() {\r\n      this.chapterExportLoading = true;\r\n      this.courseMgService.packetChapterExport(this.coursePacketId).subscribe(resp => {\r\n        this.chapterExportLoading =  false;\r\n        const link = document.createElement('a');\r\n        // 支持HTML5下载属性的浏览器\r\n        const url = URL.createObjectURL(resp.body);\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', this.packageName + '章节结构.xls');\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      }, () => {\r\n        this.chapterExportLoading = false;\r\n      });\r\n  }\r\n\r\n  @ConfirmableFlat({\r\n    title: '导入知识图谱',\r\n    content: '您确定将知识图谱中的章节结构一键同步到课包结构吗？将会清除已有的章节结构。',\r\n    type: 'warning'\r\n  })\r\n  knowledgeGraph(loadingControl?: LoadingControl) {\r\n    return new Promise((resolve) => {\r\n      this.knowledgeGraphLoading = loadingControl.loading = true;\r\n      this.courseMgService.synchronizedKnowledge({\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId\r\n      }).subscribe(res => {\r\n        this.knowledgeGraphLoading = loadingControl.loading = false;\r\n        if (res.status === 201) {\r\n          this.getChapter();\r\n          resolve(true);\r\n        } else {\r\n          resolve(false);\r\n        }\r\n      }, () => {\r\n        this.knowledgeGraphLoading = loadingControl.loading = false;\r\n        resolve(false);\r\n      });\r\n    });\r\n\r\n  }\r\n\r\n  customChapterRequest() {\r\n    const thisObj = this;\r\n    return (item: UploadXHRArgs) => {\r\n      this.loading = true;\r\n      const success = (result) => {\r\n        this.loading = false;\r\n        this.localUploadChapter.patchValue({\r\n          chapterUrl: result,\r\n        });\r\n        item.onSuccess({...item}, item.file, {});\r\n      };\r\n      const fail = (err) => {\r\n        this.loading = false;\r\n        item.onError(err, item.file);\r\n        thisObj.nzMesService.error(JSON.stringify(err));\r\n      };\r\n      thisObj.uploadOssService\r\n        .uploadOss(item.file, UploadDir.knowledge_file)\r\n        .subscribe(success, fail);\r\n    };\r\n  }\r\n\r\n  beforeChapterUpload() {\r\n    const thisObj = this;\r\n    return (file: any) => {\r\n      const type = ToolsUtil.getFileType(file.name);\r\n      if (type !== 'excel') {\r\n        thisObj.nzMesService.error('请上传excel,支持后缀xls, xlsx');\r\n        return false;\r\n      } else {\r\n        return new Observable<boolean>((observe) => {\r\n          observe.next(true);\r\n        });\r\n      }\r\n    };\r\n  }\r\n\r\n  removeFileSelf() {\r\n    const that = this;\r\n    const func = function() {\r\n      that.localUploadChapter.patchValue({\r\n        chapterUrl: '',\r\n      });\r\n      this.nzFileList = [];\r\n    };\r\n    return func;\r\n  }\r\n\r\n  downTemplate() {\r\n    this.downTemplateLoading = true;\r\n    this.courseMgService.exportExcel().subscribe((resp: HttpResponse<Blob>) => {\r\n        const headers: HttpHeaders = resp.headers;\r\n        // (window as any).aa=headers.get('content-disposition').split('=')[1];\r\n        // console.log(headers.get('content-disposition').split('=')[1]);\r\n        const link = document.createElement('a');\r\n        // 支持HTML5下载属性的浏览器\r\n        const url = URL.createObjectURL(resp.body);\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', '章节结构模板');\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        this.downTemplateLoading = false;\r\n      },\r\n      error => {\r\n        this.nzMesService.error(JSON.stringify(error));\r\n        this.downTemplateLoading = false;\r\n      }\r\n    );\r\n    // window.location.href = this.ossUrl + '/template/scholar/课包章节导入模板.xls';\r\n  }\r\n}\r\n","import { Observable, Subscription, asapScheduler, ReplaySubject, isObservable, of, scheduled, queueScheduler, throwError, combineLatest, Subject, EMPTY } from 'rxjs';\nimport { concatMap, withLatestFrom, takeUntil, take, map, distinctUntilChanged, shareReplay, tap, catchError } from 'rxjs/operators';\nimport { InjectionToken, Injectable, Optional, Inject } from '@angular/core';\n\n/**\n * @fileoverview added by tsickle\n * Generated from: src/debounce-sync.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @template T\n * @return {?}\n */\nimport * as ɵngcc0 from '@angular/core';\nfunction debounceSync() {\n    return (/**\n     * @param {?} source\n     * @return {?}\n     */\n    (source) => new Observable((/**\n     * @param {?} observer\n     * @return {?}\n     */\n    (observer) => {\n        /** @type {?} */\n        let actionSubscription;\n        /** @type {?} */\n        let actionValue;\n        /** @type {?} */\n        const rootSubscription = new Subscription();\n        rootSubscription.add(source.subscribe({\n            complete: (/**\n             * @return {?}\n             */\n            () => {\n                if (actionSubscription) {\n                    observer.next(actionValue);\n                }\n                observer.complete();\n            }),\n            error: (/**\n             * @param {?} error\n             * @return {?}\n             */\n            (error) => {\n                observer.error(error);\n            }),\n            next: (/**\n             * @param {?} value\n             * @return {?}\n             */\n            (value) => {\n                actionValue = value;\n                if (!actionSubscription) {\n                    actionSubscription = asapScheduler.schedule((/**\n                     * @return {?}\n                     */\n                    () => {\n                        observer.next(actionValue);\n                        actionSubscription = undefined;\n                    }));\n                    rootSubscription.add(actionSubscription);\n                }\n            }),\n        }));\n        return rootSubscription;\n    })));\n}\n\n/**\n * @fileoverview added by tsickle\n * Generated from: src/component-store.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * @record\n */\nfunction SelectConfig() { }\nif (false) {\n    /** @type {?|undefined} */\n    SelectConfig.prototype.debounce;\n}\n/** @type {?} */\nconst initialStateToken = new InjectionToken('ComponentStore InitState');\n/**\n * @template T\n */\nclass ComponentStore {\n    /**\n     * @param {?=} defaultState\n     */\n    constructor(defaultState) {\n        // Should be used only in ngOnDestroy.\n        this.destroySubject$ = new ReplaySubject(1);\n        // Exposed to any extending Store to be used for the teardown.\n        this.destroy$ = this.destroySubject$.asObservable();\n        this.stateSubject$ = new ReplaySubject(1);\n        this.isInitialized = false;\n        this.notInitializedErrorMessage = `${this.constructor.name} has not been initialized yet. ` +\n            `Please make sure it is initialized before updating/getting.`;\n        // Needs to be after destroy$ is declared because it's used in select.\n        this.state$ = this.select((/**\n         * @param {?} s\n         * @return {?}\n         */\n        (s) => s));\n        // State can be initialized either through constructor or setState.\n        if (defaultState) {\n            this.initState(defaultState);\n        }\n    }\n    /**\n     * Completes all relevant Observable streams.\n     * @return {?}\n     */\n    ngOnDestroy() {\n        this.stateSubject$.complete();\n        this.destroySubject$.next();\n    }\n    /**\n     * Creates an updater.\n     *\n     * Throws an error if updater is called with synchronous values (either\n     * imperative value or Observable that is synchronous) before ComponentStore\n     * is initialized. If called with async Observable before initialization then\n     * state will not be updated and subscription would be closed.\n     *\n     * @template ProvidedType, OriginType, ValueType, ReturnType\n     * @param {?} updaterFn A static updater function that takes 2 parameters (the\n     * current state and an argument object) and returns a new instance of the\n     * state.\n     * @return {?} A function that accepts one argument which is forwarded as the\n     *     second argument to `updaterFn`. Every time this function is called\n     *     subscribers will be notified of the state change.\n     */\n    updater(updaterFn) {\n        return (/** @type {?} */ (((/** @type {?} */ (((/**\n         * @param {?=} observableOrValue\n         * @return {?}\n         */\n        (observableOrValue) => {\n            /** @type {?} */\n            let initializationError;\n            // We can receive either the value or an observable. In case it's a\n            // simple value, we'll wrap it with `of` operator to turn it into\n            // Observable.\n            /** @type {?} */\n            const observable$ = isObservable(observableOrValue)\n                ? observableOrValue\n                : of(observableOrValue);\n            /** @type {?} */\n            const subscription = observable$\n                .pipe(concatMap((/**\n             * @param {?} value\n             * @return {?}\n             */\n            (value) => this.isInitialized\n                ? // Push the value into queueScheduler\n                    scheduled([value], queueScheduler).pipe(withLatestFrom(this.stateSubject$))\n                : // If state was not initialized, we'll throw an error.\n                    throwError(new Error(this.notInitializedErrorMessage)))), takeUntil(this.destroy$))\n                .subscribe({\n                next: (/**\n                 * @param {?} __0\n                 * @return {?}\n                 */\n                ([value, currentState]) => {\n                    this.stateSubject$.next(updaterFn(currentState, (/** @type {?} */ (value))));\n                }),\n                error: (/**\n                 * @param {?} error\n                 * @return {?}\n                 */\n                (error) => {\n                    initializationError = error;\n                    this.stateSubject$.error(error);\n                }),\n            });\n            if (initializationError) {\n                // prettier-ignore\n                throw /** @type {!Error} */ (initializationError);\n            }\n            return subscription;\n        })))))));\n    }\n    /**\n     * Initializes state. If it was already initialized then it resets the\n     * state.\n     * @private\n     * @param {?} state\n     * @return {?}\n     */\n    initState(state) {\n        scheduled([state], queueScheduler).subscribe((/**\n         * @param {?} s\n         * @return {?}\n         */\n        (s) => {\n            this.isInitialized = true;\n            this.stateSubject$.next(s);\n        }));\n    }\n    /**\n     * Sets the state specific value.\n     * @param {?} stateOrUpdaterFn object of the same type as the state or an\n     * updaterFn, returning such object.\n     * @return {?}\n     */\n    setState(stateOrUpdaterFn) {\n        if (typeof stateOrUpdaterFn !== 'function') {\n            this.initState(stateOrUpdaterFn);\n        }\n        else {\n            this.updater((/** @type {?} */ (stateOrUpdaterFn)))();\n        }\n    }\n    /**\n     * Patches the state with provided partial state.\n     *\n     * @throws Error if the state is not initialized.\n     * @param {?} partialStateOrUpdaterFn a partial state or a partial updater\n     * function that accepts the state and returns the partial state.\n     * @return {?}\n     */\n    patchState(partialStateOrUpdaterFn) {\n        this.setState((/**\n         * @param {?} state\n         * @return {?}\n         */\n        (state) => {\n            /** @type {?} */\n            const patchedState = typeof partialStateOrUpdaterFn === 'function'\n                ? partialStateOrUpdaterFn(state)\n                : partialStateOrUpdaterFn;\n            return Object.assign(Object.assign({}, state), patchedState);\n        }));\n    }\n    /**\n     * @protected\n     * @template R\n     * @param {?=} projector\n     * @return {?}\n     */\n    get(projector) {\n        if (!this.isInitialized) {\n            throw new Error(this.notInitializedErrorMessage);\n        }\n        /** @type {?} */\n        let value;\n        this.stateSubject$.pipe(take(1)).subscribe((/**\n         * @param {?} state\n         * @return {?}\n         */\n        (state) => {\n            value = projector ? projector(state) : state;\n        }));\n        return (/** @type {?} */ (value));\n    }\n    /**\n     * @template O, R, ProjectorFn\n     * @param {...?} args\n     * @return {?}\n     */\n    select(...args) {\n        const { observables, projector, config } = processSelectorArgs(args);\n        /** @type {?} */\n        let observable$;\n        // If there are no Observables to combine, then we'll just map the value.\n        if (observables.length === 0) {\n            observable$ = this.stateSubject$.pipe(config.debounce ? debounceSync() : (/**\n             * @param {?} source$\n             * @return {?}\n             */\n            (source$) => source$), map(projector));\n        }\n        else {\n            // If there are multiple arguments, then we're aggregating selectors, so we need\n            // to take the combineLatest of them before calling the map function.\n            observable$ = combineLatest(observables).pipe(config.debounce ? debounceSync() : (/**\n             * @param {?} source$\n             * @return {?}\n             */\n            (source$) => source$), map((/**\n             * @param {?} projectorArgs\n             * @return {?}\n             */\n            (projectorArgs) => projector(...projectorArgs))));\n        }\n        return ((/** @type {?} */ (observable$))).pipe(distinctUntilChanged(), shareReplay({\n            refCount: true,\n            bufferSize: 1,\n        }), takeUntil(this.destroy$));\n    }\n    /**\n     * Creates an effect.\n     *\n     * This effect is subscribed to for the life of the \\@Component.\n     * @template ProvidedType, OriginType, ObservableType, ReturnType\n     * @param {?} generator A function that takes an origin Observable input and\n     *     returns an Observable. The Observable that is returned will be\n     *     subscribed to for the life of the component.\n     * @return {?} A function that, when called, will trigger the origin Observable.\n     */\n    effect(generator) {\n        /** @type {?} */\n        const origin$ = new Subject();\n        generator((/** @type {?} */ (origin$)))\n            // tied to the lifecycle 👇 of ComponentStore\n            .pipe(takeUntil(this.destroy$))\n            .subscribe();\n        return (/** @type {?} */ (((/** @type {?} */ (((/**\n         * @param {?=} observableOrValue\n         * @return {?}\n         */\n        (observableOrValue) => {\n            /** @type {?} */\n            const observable$ = isObservable(observableOrValue)\n                ? observableOrValue\n                : of(observableOrValue);\n            return observable$.pipe(takeUntil(this.destroy$)).subscribe((/**\n             * @param {?} value\n             * @return {?}\n             */\n            (value) => {\n                // any new 👇 value is pushed into a stream\n                origin$.next(value);\n            }));\n        })))))));\n    }\n}\nComponentStore.ɵfac = function ComponentStore_Factory(t) { return new (t || ComponentStore)(ɵngcc0.ɵɵinject(initialStateToken, 8)); };\nComponentStore.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: ComponentStore, factory: ComponentStore.ɵfac });\n/** @nocollapse */\nComponentStore.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [initialStateToken,] }] }\n];\n/*@__PURE__*/ (function () { ɵngcc0.ɵsetClassMetadata(ComponentStore, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Optional\n            }, {\n                type: Inject,\n                args: [initialStateToken]\n            }] }]; }, null); })();\nif (false) {\n    /**\n     * @type {?}\n     * @private\n     */\n    ComponentStore.prototype.destroySubject$;\n    /** @type {?} */\n    ComponentStore.prototype.destroy$;\n    /**\n     * @type {?}\n     * @private\n     */\n    ComponentStore.prototype.stateSubject$;\n    /**\n     * @type {?}\n     * @private\n     */\n    ComponentStore.prototype.isInitialized;\n    /**\n     * @type {?}\n     * @private\n     */\n    ComponentStore.prototype.notInitializedErrorMessage;\n    /** @type {?} */\n    ComponentStore.prototype.state$;\n}\n/**\n * @template O, R, ProjectorFn\n * @param {?} args\n * @return {?}\n */\nfunction processSelectorArgs(args) {\n    /** @type {?} */\n    const selectorArgs = Array.from(args);\n    // Assign default values.\n    /** @type {?} */\n    let config = { debounce: false };\n    /** @type {?} */\n    let projector;\n    // Last argument is either projector or config\n    /** @type {?} */\n    const projectorOrConfig = (/** @type {?} */ (selectorArgs.pop()));\n    if (typeof projectorOrConfig !== 'function') {\n        // We got the config as the last argument, replace any default values with it.\n        config = Object.assign(Object.assign({}, config), projectorOrConfig);\n        // Pop the next args, which would be the projector fn.\n        projector = (/** @type {?} */ (selectorArgs.pop()));\n    }\n    else {\n        projector = projectorOrConfig;\n    }\n    // The Observables to combine, if there are any.\n    /** @type {?} */\n    const observables = (/** @type {?} */ (selectorArgs));\n    return {\n        observables,\n        projector,\n        config,\n    };\n}\n\n/**\n * @fileoverview added by tsickle\n * Generated from: src/tap-response.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n/**\n * Handles the response in ComponentStore effects in a safe way, without\n * additional boilerplate.\n * It enforces that the error case is handled and that the effect would still be\n * running should an error occur.\n *\n * Takes an optional third argument for a `complete` callback.\n *\n * ```typescript\n * readonly dismissedAlerts = this.effect<Alert>(alert$ => {\n *  return alert$.pipe(\n *      concatMap(\n *          (alert) => this.alertsService.dismissAlert(alert).pipe(\n *              tapResponse(\n *                 (dismissedAlert) => this.alertDismissed(dismissedAlert),\n *                 (error) => this.logError(error),\n *              ))));\n *   });\n * ```\n * @template T\n * @param {?} nextFn\n * @param {?} errorFn\n * @param {?=} completeFn\n * @return {?}\n */\nfunction tapResponse(nextFn, errorFn, completeFn) {\n    return (/**\n     * @param {?} source\n     * @return {?}\n     */\n    (source) => source.pipe(tap({\n        next: nextFn,\n        error: errorFn,\n        complete: completeFn,\n    }), catchError((/**\n     * @return {?}\n     */\n    () => EMPTY))));\n}\n\n/**\n * @fileoverview added by tsickle\n * Generated from: src/index.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * Generated from: public_api.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * Generated from: index.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * Generated from: ngrx-component-store.ts\n * @suppress {checkTypes,constantProperty,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nexport { ComponentStore, initialStateToken, tapResponse };\n\n//# sourceMappingURL=ngrx-component-store.js.map","export function not(pred, thisArg) {\n    function notPred() {\n        return !(notPred.pred.apply(notPred.thisArg, arguments));\n    }\n    notPred.pred = pred;\n    notPred.thisArg = thisArg;\n    return notPred;\n}\n//# sourceMappingURL=not.js.map","import { not } from '../util/not';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { filter } from '../operators/filter';\nimport { Observable } from '../Observable';\nexport function partition(source, predicate, thisArg) {\n    return [\n        filter(predicate, thisArg)(new Observable(subscribeTo(source))),\n        filter(not(predicate, thisArg))(new Observable(subscribeTo(source)))\n    ];\n}\n//# sourceMappingURL=partition.js.map","import { Subscriber } from '../Subscriber';\nexport function skipWhile(predicate) {\n    return (source) => source.lift(new SkipWhileOperator(predicate));\n}\nclass SkipWhileOperator {\n    constructor(predicate) {\n        this.predicate = predicate;\n    }\n    call(subscriber, source) {\n        return source.subscribe(new SkipWhileSubscriber(subscriber, this.predicate));\n    }\n}\nclass SkipWhileSubscriber extends Subscriber {\n    constructor(destination, predicate) {\n        super(destination);\n        this.predicate = predicate;\n        this.skipping = true;\n        this.index = 0;\n    }\n    _next(value) {\n        const destination = this.destination;\n        if (this.skipping) {\n            this.tryCallPredicate(value);\n        }\n        if (!this.skipping) {\n            destination.next(value);\n        }\n    }\n    tryCallPredicate(value) {\n        try {\n            const result = this.predicate(value, this.index++);\n            this.skipping = Boolean(result);\n        }\n        catch (err) {\n            this.destination.error(err);\n        }\n    }\n}\n//# sourceMappingURL=skipWhile.js.map","import { merge as mergeStatic } from '../observable/merge';\nexport function merge(...observables) {\n    return (source) => source.lift.call(mergeStatic(source, ...observables));\n}\n//# sourceMappingURL=merge.js.map","import {Injectable} from '@angular/core';\r\nimport {ComponentStore, tapResponse} from '@ngrx/component-store';\r\nimport {combineLatest, EMPTY, of, partition} from 'rxjs';\r\nimport {merge, skipWhile, switchMap, tap, withLatestFrom} from 'rxjs/operators';\r\nimport {LoadingControl, PacketInfo} from 'core/base/common';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {NzMessageService, NzModalService, NzSafeAny, NzTreeNode} from 'ng-zorro-antd';\r\nimport {\r\n  CompanyItem, LevelItem,\r\n  LoadObj,\r\n  OtherSettingState,\r\n  SubQuestionBankchangeItem\r\n} from '@app/routes/course-manage/components/other-setting/other-setting.interface';\r\nimport {CourseManageService} from '@app/busi-services';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {environment} from 'src/environments/environment';\r\nimport {ServicesModule} from '@app/service/service.module';\r\nimport {ConfirmableDesc} from 'core/decorators';\r\nimport {NewLevelComponent} from './new-level/new-level.component';\r\nimport {RewardSettingsComponent} from './reward-settings/reward-settings.component';\r\nimport {NewCompanyComponent} from './new-company/new-company.component';\r\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\nimport {LocalStorageUtil} from 'core/utils/localstorage.util';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\n\r\n\r\n@Injectable({\r\n  providedIn: ServicesModule\r\n})\r\nexport class OtherSettingStoreService extends ComponentStore<OtherSettingState> {\r\n\r\n  constructor(\r\n    private courseManageService: CourseManageService,\r\n    private message: NzMessageService,\r\n    private modalService: NzModalService,\r\n    private statisticsLogService: StatisticsLogService\r\n  ) {\r\n    super({\r\n      packetInfo: SessionStorageUtil.getPacketInfo(),\r\n      isLoading: false,\r\n      searchLoad: false,\r\n      exam: [],\r\n      intelligent: [],\r\n      subQuestionBankCurrent: [],\r\n      subQuestionBankCurrentPre: [],\r\n      subQuestionBank: [],\r\n      subQuestionBankInt: [],\r\n      listSublibrary: [],\r\n      subQuestionBankIntCurrent: [],\r\n      subQuestionBankIntCurrentPre: [],\r\n      moduleArr: [],\r\n      levelLists: [],\r\n      companyLists: [],\r\n      listOfData: [],\r\n      idMap: {},\r\n      breakthroughMode: false,\r\n      practiceOn: false,\r\n      isBet: false,\r\n      knowledgeNum: 0\r\n    });\r\n  }\r\n\r\n  //#region read\r\n  readonly packetInfo$ = this.select(({packetInfo}) => packetInfo);\r\n  readonly listSublibrary$ = this.select(({listSublibrary}) => listSublibrary);\r\n  readonly listOfData$ = this.select(({listOfData}) => listOfData);\r\n  readonly moduleArr$ = this.select(({moduleArr}) => moduleArr);\r\n  readonly levelLists$ = this.select(({levelLists}) => levelLists);\r\n  readonly companyLists$ = this.select(({companyLists}) => companyLists);\r\n  readonly knowledgeNum$ = this.select(({knowledgeNum}) => knowledgeNum);\r\n  readonly idMap$ = this.select(({idMap}) => idMap);\r\n  readonly subQuestionBankCurrentPre$ =\r\n    this.select(({subQuestionBankCurrentPre}) => subQuestionBankCurrentPre);\r\n  readonly subQuestionBank$ =\r\n    this.select(({subQuestionBank}) => subQuestionBank);\r\n  readonly subQuestionBankIntCurrentPre$ =\r\n    this.select(({subQuestionBankIntCurrentPre}) => subQuestionBankIntCurrentPre);\r\n  readonly subQuestionBankInt$ =\r\n    this.select(({subQuestionBankInt}) => subQuestionBankInt);\r\n  readonly vm$ = this.select(state => state, {debounce: true});\r\n  //#endregion\r\n\r\n  //#region update\r\n  readonly setPacketInfo = this.updater((state, packetInfo: PacketInfo) => ({...state, packetInfo}));\r\n\r\n  readonly setLoading = this.updater((state, loadObj: LoadObj) => ({\r\n    ...state,\r\n    loadObj,\r\n  }));\r\n  //#endregion\r\n\r\n\r\n  //#region  effect\r\n  /**\r\n   * 获取闯关列表\r\n   */\r\n  readonly getLevel = this.effect((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      switchMap(([, packetInfo]) => {\r\n        if (packetInfo.isCard === '1') {\r\n          return this.courseManageService.levelList(packetInfo.id).pipe(\r\n            tapResponse(res => {\r\n              if (res.status === 200) {\r\n                const levelLists = res.data.sort((a, b) => a.seq > b.seq ? 1 : a.seq < b.seq ? -1 : 0);\r\n                levelLists.forEach((item) => {\r\n                  if (item.coursePacketCardRecourseList) {\r\n                    item.coursePacketCardRecourseList =\r\n                      item.coursePacketCardRecourseList.sort((a, b) => a.seq > b.seq ? 1 : a.seq < b.seq ? -1 : 0);\r\n                  }\r\n                });\r\n                this.patchState({levelLists});\r\n              }\r\n            }, () => EMPTY));\r\n        } else {\r\n          return of([]);\r\n        }\r\n      })\r\n    );\r\n  });\r\n\r\n  /**\r\n   * 获取公司列表\r\n   */\r\n  readonly getCompany = this.effect((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      switchMap(([, packetInfo]) => {\r\n        if (packetInfo.is99Train === '1') {\r\n          return this.courseManageService.getCompany(packetInfo.id).pipe(\r\n            tapResponse(res => {\r\n              if (res.status === 200) {\r\n                this.patchState({companyLists: res.data});\r\n              }\r\n            }, () => EMPTY));\r\n        } else {\r\n          return of([]);\r\n        }\r\n      })\r\n    );\r\n  });\r\n\r\n  readonly setBreakthroughMode = this.effect((data$) => {\r\n    return data$.pipe(withLatestFrom(this.packetInfo$), tap(([, packetInfo]) => {\r\n      this.patchState({\r\n        breakthroughMode: packetInfo.isCard === '1' ? true : false\r\n      });\r\n    }));\r\n  });\r\n\r\n\r\n  readonly setPracticeOn = this.effect((data$) => {\r\n    return data$.pipe(withLatestFrom(this.packetInfo$), tap(([, packetInfo]) => {\r\n      this.patchState({\r\n        practiceOn: packetInfo.is99Train === '1' ? true : false\r\n      });\r\n    }));\r\n  });\r\n\r\n  readonly setIsBet = this.effect((data$) => {\r\n    return data$.pipe(withLatestFrom(this.packetInfo$), tap(([, packetInfo]) => {\r\n      if (packetInfo.teacherType !== '22') {\r\n        this.patchState({\r\n          isBet: packetInfo.isBet === '1' ? true : false\r\n        });\r\n      }\r\n    }));\r\n  });\r\n\r\n\r\n  /**\r\n   * 获取子题库列表\r\n   */\r\n  readonly getSubLibrary = this.effect((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(combineLatest([this.packetInfo$, this.listSublibrary$])),\r\n      switchMap(([, [packetInfo]]) => {\r\n        return this.courseManageService.getSubLibrary({\r\n          coursePacketId: packetInfo.id,\r\n          quebankType: 1\r\n        }).pipe(tapResponse(res => {\r\n          if (res.status === 200) {\r\n            const listSublibraryBak = res.data.sort\r\n            ((a, b) => Number(a.quebankId) > Number(b.quebankId) ? 1 : Number(a.quebankId) < Number(b.quebankId) ? -1 : 0);\r\n            // tslint:disable-next-line:max-line-length\r\n            const subQuestionBank = listSublibraryBak.filter(e => e.busType === '1').sort((a, b) => a.seq > b.seq ? 1 : a.seq < b.seq ? -1 : 0);\r\n            // tslint:disable-next-line:max-line-length\r\n            const subQuestionBankInt = listSublibraryBak.filter(e => e.busType === '2').sort((a, b) => a.seq > b.seq ? 1 : a.seq < b.seq ? -1 : 0);\r\n            const subQuestionBankCurrentPre = subQuestionBank.map((item) => String(item.quebankId));\r\n            const subQuestionBankCurrent = JSON.parse(JSON.stringify(subQuestionBankCurrentPre));\r\n            const subQuestionBankIntCurrentPre = subQuestionBankInt.map((item) => String(item.quebankId));\r\n            const subQuestionBankIntCurrent = JSON.parse(JSON.stringify(subQuestionBankIntCurrentPre));\r\n            this.patchState({\r\n              subQuestionBankCurrentPre,\r\n              subQuestionBankCurrent,\r\n              subQuestionBankIntCurrentPre,\r\n              subQuestionBankIntCurrent,\r\n              listSublibrary: listSublibraryBak,\r\n              subQuestionBank,\r\n              subQuestionBankInt\r\n            });\r\n          }\r\n        }, () => EMPTY));\r\n      }));\r\n  });\r\n\r\n  /**\r\n   * 获取课次列表\r\n   */\r\n  readonly getLessonCountTable = this.effect((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      skipWhile(([, packetInfo]) => {\r\n        return packetInfo.teachType === '22';\r\n      }),\r\n      switchMap(([, packetInfo]) => {\r\n\r\n          return this.courseManageService.getLessonPackageTable(packetInfo.id).pipe(\r\n            tapResponse(res => {\r\n              if (res.status === 200) {\r\n                if (res.data && res.data.length) {\r\n                  res.data.forEach((item, ii) => {\r\n                    res.data[ii].index = ii + 1;\r\n                  });\r\n                  this.patchState({\r\n                    listOfData: res.data,\r\n                    packetInfo: {...packetInfo, lessonCount: res.data.length}\r\n                  });\r\n                } else {\r\n                  this.patchState({listOfData: []});\r\n                }\r\n              }\r\n            }, () => EMPTY));\r\n        }\r\n      ));\r\n  });\r\n  /**\r\n   * 获取子题库模块树\r\n   */\r\n  readonly getSubQuestionBank = this.effect((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      tap(() => this.patchState({searchLoad: false})),\r\n      switchMap(([, packetInfo]) => {\r\n        return ToolsUtil.getAjax(environment.questionBankApi + 'system/qkcPaper/courseCode', {\r\n          courseCode: packetInfo.code,\r\n          type: ''\r\n        }).pipe(\r\n          tapResponse(\r\n            resultS => {\r\n              this.patchState({searchLoad: false});\r\n              const resP = JSON.parse(resultS);\r\n              if (resP.code === 200) {\r\n                if (resP.data && resP.data.length) {\r\n                  const bak = JSON.parse(JSON.stringify(resP.data));\r\n                  const moduleArr = JSON.parse(JSON.stringify(resP.data));\r\n                  // 获取模块列表\r\n                  let reduce = [];\r\n                  moduleArr.forEach(itemX => {\r\n                    reduce = itemX.sublibraryModuleList.filter(itemIn => itemIn.type === 'EXAM').concat(reduce);\r\n                  });\r\n                  bak.forEach(itemX => {\r\n                    itemX.sublibraryModuleList = itemX.sublibraryModuleList.filter(itemIn => itemIn.type === 'PRACTICE');\r\n                  });\r\n                  const idMap = {};\r\n                  resP.data.forEach(itemY => {\r\n                    itemY.sublibraryModuleList.forEach(itemP => {\r\n                      idMap[itemP.id] = itemP.type;\r\n                    });\r\n                  });\r\n                  // tslint:disable-next-line:max-line-length\r\n                  const intelligent = this.conversionNode(bak).sort((a, b) => a.createTime > b.createTime ? -1 : a.createTime < b.createTime ? 1 : 0);\r\n                  // tslint:disable-next-line:max-line-length\r\n                  const exam = this.conversionNode(resP.data).sort((a, b) => a.createTime > b.createTime ? -1 : a.createTime < b.createTime ? 1 : 0);\r\n                  this.patchState({exam, intelligent, moduleArr: reduce, idMap});\r\n                } else {\r\n                  this.patchState({exam: [], intelligent: [], moduleArr: []});\r\n                }\r\n              } else {\r\n                this.message.error(resP.message);\r\n              }\r\n            }, () => {\r\n              this.patchState({searchLoad: false});\r\n              this.message.error('题库服务异常');\r\n            }\r\n          )\r\n        );\r\n      }));\r\n  });\r\n\r\n  /**\r\n   * 删除子题库\r\n   */\r\n  readonly dellistSublibraryItem = this.effect<any>((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      skipWhile(([, packetInfo]) => +packetInfo.isUsed > 0),\r\n      switchMap(([data]) => {\r\n        data.loadingControl.loading = true;\r\n        return this.courseManageService.delSubLibrary({\r\n          id: data.data.id\r\n        }).pipe(tapResponse(res => {\r\n          data.loadingControl.loading = false;\r\n          if (res.status === 204) {\r\n            this.getSubLibrary();\r\n          }\r\n        }, () => data.loadingControl.loading = false));\r\n      })\r\n    );\r\n  });\r\n  /**\r\n   * 删除奖励\r\n   */\r\n  readonly deleteGift = this.effect<{ id: string, loadingControl?: LoadingControl }>((param$) => {\r\n    return param$.pipe(switchMap(param => {\r\n      param.loadingControl.loading = true;\r\n      return this.courseManageService.levelDataDeletion(param.id).pipe(\r\n        tapResponse(res => {\r\n          param.loadingControl.loading = false;\r\n          if (res.status === 204) {\r\n            this.statisticsLogService.statisticsPacketInfoLog({\r\n              name: '删除奖励',\r\n              actionCode: STATISTICALRULES.packetInfo['otherSet-levelthrough-action'].modify,\r\n              content: param.id\r\n            });\r\n            this.getLevel();\r\n          }\r\n        }, () => param.loadingControl.loading = false)\r\n      );\r\n    }));\r\n  });\r\n  /**\r\n   * 删除关卡\r\n   */\r\n  readonly levelDeletion = this.effect<{ id: string, loadingControl?: LoadingControl }>((param$) => {\r\n    return param$.pipe(switchMap(param => {\r\n      param.loadingControl.loading = true;\r\n      return this.courseManageService.levelDeletion(param.id).pipe(\r\n        tapResponse(res => {\r\n          param.loadingControl.loading = false;\r\n          if (res.status === 204) {\r\n            this.getLevel();\r\n            this.statisticsLogService.statisticsPacketInfoLog({\r\n              name: '删除关卡',\r\n              actionCode: STATISTICALRULES.packetInfo['otherSet-levelthrough-action'].delCode,\r\n              content: param.id\r\n            });\r\n          }\r\n        }, () => param.loadingControl.loading = false)\r\n      );\r\n    }));\r\n  });\r\n\r\n\r\n  /**\r\n   * 删除公司\r\n   */\r\n  readonly companyDeletion = this.effect<{ id: string, loadingControl?: LoadingControl }>((param$) => {\r\n    return param$.pipe(switchMap(param => {\r\n      param.loadingControl.loading = true;\r\n      return this.courseManageService.companyDeletion(param.id).pipe(\r\n        tapResponse(res => {\r\n          param.loadingControl.loading = false;\r\n          this.statisticsLogService.statisticsPacketInfoLog({\r\n            name: '删除公司',\r\n            actionCode: STATISTICALRULES.packetInfo['otherSet-99train-action'].delCode,\r\n            content: param.id\r\n          });\r\n          if (res.status === 204) {\r\n            this.getCompany();\r\n          }\r\n        }, () => param.loadingControl.loading = false)\r\n      );\r\n    }));\r\n  });\r\n\r\n\r\n  /**\r\n   * 删除课次\r\n   */\r\n  readonly delTable = this.effect<{ id: string, loadingControl?: LoadingControl }>((param$) => {\r\n    return param$.pipe(switchMap(param => {\r\n      param.loadingControl.loading = true;\r\n      return this.courseManageService.delTable(param.id).pipe(\r\n        tapResponse(res => {\r\n          param.loadingControl.loading = false;\r\n          this.statisticsLogService.statisticsPacketInfoLog({\r\n            name: '删除课次',\r\n            actionCode: STATISTICALRULES.packetInfo['otherSet-lessons-action'].delCode,\r\n            content: param.id\r\n          });\r\n          if (res.status === 204) {\r\n            this.getLessonCountTable();\r\n          }\r\n        }, () => param.loadingControl.loading = false)\r\n      );\r\n    }));\r\n  });\r\n\r\n  /**\r\n   * 初始化数据\r\n   */\r\n  readonly dataInit = this.effect((data$) => {\r\n    return data$.pipe(\r\n      tap({\r\n        next: (data) => {\r\n          this.setBreakthroughMode();\r\n          this.setPracticeOn();\r\n          this.setIsBet();\r\n          this.setLoading({\r\n            isLoading: true, searchLoad: true\r\n          });\r\n          this.getKnowledgeNum(); // 获取课程知识点总数\r\n          this.getLessonCountTable(); // 课次列表\r\n          this.getLevel(); // 获取闯关列表\r\n          this.getCompany(); // 获取公司列表\r\n          this.getSubLibrary(); // 子题库列表\r\n          this.getSubQuestionBank(); // 获取子题库模块树\r\n        },\r\n        error: () => {\r\n        }\r\n      })\r\n    );\r\n  });\r\n\r\n\r\n  readonly getKnowledgeNum = this.effect((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      switchMap(([, packetInfo]) => {\r\n        return this.courseManageService.getKnos({knowledgeSubjectId: packetInfo.knowledgeSubjectId}).pipe(\r\n          tapResponse(res => {\r\n            if (res.status === 200) {\r\n              this.patchState({\r\n                knowledgeNum: res.data.num || 0\r\n              });\r\n            } else {\r\n              this.patchState({knowledgeNum: 0});\r\n            }\r\n          }, () => this.patchState({knowledgeNum: 0})));\r\n      }));\r\n  });\r\n\r\n  readonly subQuestionBankChange = this.effect<SubQuestionBankchangeItem>((data$) => {\r\n    const [success, failed] = partition(data$.pipe(\r\n      withLatestFrom(\r\n        combineLatest([this.packetInfo$, this.idMap$])),\r\n      switchMap(([data, [packetInfo, idMap]]): any => {\r\n        // tslint:disable-next-line:max-line-length\r\n        return of(data).pipe(withLatestFrom(combineLatest([this[data.type + 'CurrentPre$'], this[data.type + '$'], of(packetInfo), of(idMap), this[data.type + '$']])));\r\n      })), ([data, [pre]]) => {\r\n      return pre.length < data.data.length;\r\n    });\r\n    return success.pipe(\r\n      switchMap(([data, [pre, , packetInfo, idMap, list]]) => {\r\n        const node: NzTreeNode = data['treeSelect'].getTreeNodeByKey(String(data.data[data.data.length - 1]));\r\n        return this.courseManageService.callSubLibrary({\r\n          courseId: packetInfo.courseId,\r\n          coursePacketId: packetInfo.id,\r\n          busType: data.type === 'subQuestionBank' ? '1' : '2',\r\n          quebankId: node.origin.id,\r\n          quebankName: node.origin.name,\r\n          quebankType: 1,\r\n          seq: ToolsUtil.getMaxSeq(list),\r\n          quebankModuleType: data.type === 'subQuestionBankInt' ? '1' : idMap[data.data[data.data.length - 1]] === 'EXAM' ? '2' : '1'\r\n        }).pipe(tapResponse(res => {\r\n          if (res.status === 201) {\r\n            this.getSubLibrary();\r\n          }\r\n        }, () => EMPTY));\r\n      }),\r\n      merge(failed.pipe(\r\n        tap(([data, [pre, current]]) => {\r\n          pre.every((item, i) => {\r\n            if (data.data.indexOf(item) < 0) {\r\n              this.courseManageService.delSubLibrary({id: current[i].id}).subscribe(res => {\r\n                if (res.status === 204) {\r\n                  this.getSubLibrary();\r\n                }\r\n              });\r\n            } else {\r\n              return true;\r\n            }\r\n          });\r\n        }))\r\n      ));\r\n  });\r\n\r\n  readonly generateLessonsReal = this.effect<any>((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      switchMap(([resolve, packetInfo]) => {\r\n        this.patchState({\r\n          isLoading: true\r\n        });\r\n        return this.courseManageService.lessonPackage(packetInfo.id, packetInfo.lessonCount, packetInfo.courseId).pipe(\r\n          tapResponse(res => {\r\n            this.patchState({\r\n              isLoading: false\r\n            });\r\n            this.statisticsLogService.statisticsPacketInfoLog({\r\n              name: '生成课次',\r\n              actionCode: STATISTICALRULES.packetInfo['otherSet-lessons-action'].addCode,\r\n              content: JSON.stringify({coursePacketId: packetInfo.id, lessonCount: packetInfo.lessonCount, courseId: packetInfo.courseId}),\r\n            });\r\n            if (res.status === 201) {\r\n              this.getLessonCountTable();\r\n              resolve(true);\r\n            }\r\n          }, () => {\r\n            this.patchState({\r\n              isLoading: false\r\n            });\r\n            resolve(false);\r\n          }));\r\n      }));\r\n  });\r\n  /**\r\n   * 生成课次\r\n   */\r\n  readonly generateLessonsEffect = this.effect((data$) => {\r\n    const [success, failed] = partition(data$.pipe(\r\n      withLatestFrom(combineLatest([this.listOfData$, this.packetInfo$])),\r\n      skipWhile(([, [, packetInfo]]) => {\r\n        return packetInfo.preview === '1';\r\n      }),\r\n      switchMap(([, [listOfData]]) => of(listOfData))), listOfData => !!listOfData.length);\r\n    return success.pipe(\r\n      tap(() => {\r\n        this.generateLessonsAlert();\r\n      }),\r\n      merge(failed.pipe(\r\n        tap(() => {\r\n          this.generateLessonsReal(() => {\r\n          });\r\n        })\r\n      )),\r\n    );\r\n  });\r\n\r\n  /**\r\n   * 新增课次\r\n   */\r\n  readonly newClass = this.effect(($data) => {\r\n    return $data.pipe(\r\n      withLatestFrom(combineLatest([this.listOfData$, this.packetInfo$])),\r\n      switchMap(([, [listOfData, packetInfo]]) => {\r\n        if (listOfData.length >= 200) {\r\n          this.message.warning('课次最多只能新增200个');\r\n          return of([]);\r\n        }\r\n        const max = ToolsUtil.getMaxSeq(listOfData.filter(item => item.seq));\r\n        this.patchState({isLoading: true});\r\n        const content = {\r\n          name: '第' + max + '课次',\r\n          courseId: packetInfo.courseId,\r\n          coursePacketId: packetInfo.id,\r\n          seq: max\r\n        };\r\n        return this.courseManageService.saveTable(content).pipe(tapResponse(res => {\r\n          this.patchState({isLoading: false});\r\n          this.statisticsLogService.statisticsPacketInfoLog({\r\n            name: '新增课次',\r\n            actionCode: STATISTICALRULES.packetInfo['otherSet-lessons-action'].addCode,\r\n            content: JSON.stringify(content),\r\n          });\r\n          if (res.status === 201) {\r\n            this.getLessonCountTable();\r\n          }\r\n        }, () => this.patchState({isLoading: false})));\r\n      }));\r\n  });\r\n\r\n  /**\r\n   * 新增关卡\r\n   */\r\n  readonly addLevelEffect = this.effect<Partial<LevelItem>>((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(combineLatest([this.packetInfo$, this.moduleArr$, this.levelLists$]))\r\n      , switchMap(([levelItem, [packetInfo, moduleArr, levelLists]]) => {\r\n        return ToolsUtil.getAjax(environment.questionBankApi + 'system/qkcPaper/courseCode', {\r\n          courseCode: packetInfo.code,\r\n          type: ''\r\n        }).pipe(\r\n          tapResponse(\r\n            resultS => {\r\n              try {\r\n                const resP = JSON.parse(resultS);\r\n                if (resP.code === 200) {\r\n                  if (resP.data) {\r\n                    let reduce = [];\r\n                    if (resP.data.length) {\r\n                      const moduleArrInner = JSON.parse(JSON.stringify(resP.data));\r\n                      // 获取模块列表\r\n                      moduleArrInner.forEach(itemX => {\r\n                        reduce = itemX.sublibraryModuleList.filter(itemIn => itemIn.type === 'EXAM').concat(reduce);\r\n                      });\r\n                      this.patchState({moduleArr: reduce});\r\n                    } else {\r\n                      this.patchState({exam: [], intelligent: [], moduleArr: []});\r\n                    }\r\n                    if (reduce.length) {\r\n                      this.modalService.create<NewLevelComponent, NzSafeAny>({\r\n                        nzTitle: levelItem.id ? '编辑关卡' : '新增关卡',\r\n                        nzContent: NewLevelComponent,\r\n                        nzComponentParams: {\r\n                          courseId: packetInfo.courseId,\r\n                          coursePacketId: packetInfo.id,\r\n                          moduleArr,\r\n                          levelLists,\r\n                          levelItem\r\n                        },\r\n                        nzMaskClosable: false,\r\n                        nzCancelText: '取消',\r\n                        nzOkText: '确定',\r\n                        nzWidth: 900,\r\n                      }).afterClose\r\n                        .subscribe((flag: boolean) => {\r\n                          if (flag) {\r\n                            this.getLevel();\r\n                          }\r\n                        });\r\n                    } else {\r\n                      this.message.warning('该课包的课程尚没有子模块，请到题库新加子模块再来新增关卡');\r\n                    }\r\n                  }\r\n                } else {\r\n                  this.message.error(resP.message);\r\n                }\r\n              } catch {\r\n                this.message.error('获取题库子模块列表失败，新增关卡需要子模块信息，请稍后再试新增');\r\n              }\r\n            }, () => {\r\n              this.patchState({searchLoad: false});\r\n              this.message.error('获取题库子模块列表失败，新增关卡需要子模块信息，请稍后再试新增');\r\n            }\r\n          )\r\n        );\r\n      }));\r\n  });\r\n\r\n  /**\r\n   * 新增公司\r\n   */\r\n  readonly addCompanyEffect = this.effect<Partial<CompanyItem>>((data$) => {\r\n    return data$.pipe(\r\n      withLatestFrom(combineLatest([this.packetInfo$, this.companyLists$])),\r\n      tap(([companyItem, [packetInfo, companyLists]]) => {\r\n        this.modalService.create<NewCompanyComponent, NzSafeAny>({\r\n          nzTitle: companyItem.id ? '编辑公司' : '新增公司',\r\n          nzContent: NewCompanyComponent,\r\n          nzComponentParams: {\r\n            courseId: packetInfo.courseId,\r\n            coursePacketId: packetInfo.id,\r\n            companyLists,\r\n            companyItem\r\n          },\r\n          nzMaskClosable: false,\r\n          nzCancelText: '取消',\r\n          nzOkText: '确定',\r\n          nzWidth: 600,\r\n        }).afterClose\r\n          .subscribe((flag: boolean) => {\r\n            if (flag) {\r\n              this.getCompany();\r\n            }\r\n          });\r\n      }));\r\n  });\r\n\r\n\r\n  /**\r\n   * 新增奖励\r\n   * @param data 当前关卡\r\n   */\r\n  readonly rewardSettings = this.effect<any>((data$) => {\r\n    return data$.pipe(\r\n      tap((data) => {\r\n        if (data.coursePacketCardRecourseList && data.coursePacketCardRecourseList.length) {\r\n          data.coursePacketCardRecourseList.forEach((itemx, indexx) => {\r\n            itemx.thumbUrl = null;\r\n            itemx.name = itemx.title;\r\n          });\r\n        }\r\n      }),\r\n      withLatestFrom(this.packetInfo$),\r\n      tap(([data, packetInfo]) => {\r\n        return this.modalService.create<RewardSettingsComponent, NzSafeAny>({\r\n          nzTitle: '奖励设置',\r\n          nzContent: RewardSettingsComponent,\r\n          nzComponentParams: {\r\n            courseId: packetInfo.courseId,\r\n            coursePacketId: packetInfo.id,\r\n            professionId: packetInfo.professionId,\r\n            currentCard: data,\r\n          },\r\n          nzMaskClosable: false,\r\n          nzCancelText: '取消',\r\n          nzOkText: '确定上传',\r\n        }).afterClose\r\n          .subscribe((flag: boolean) => {\r\n            if (flag) {\r\n              this.getLevel();\r\n            }\r\n          });\r\n      }));\r\n  });\r\n\r\n\r\n  readonly listDrop = this.effect<{ data: CdkDragDrop<any, any>, label: 'subQuestionBank' | 'subQuestionBankInt' }>((data$) => {\r\n    return data$.pipe(\r\n      switchMap((data) => {\r\n        return of(data).pipe(withLatestFrom(this[data.label + '$']));\r\n      }),\r\n      tap(([data, list]) => {\r\n        if (data.data.previousIndex === data.data.currentIndex) {\r\n          return;\r\n        }\r\n        moveItemInArray(list, data.data.previousIndex, data.data.currentIndex);\r\n        const arr = list.map((item) => String(item.quebankId));\r\n        this.patchState({\r\n          [data.label + 'CurrentPre']: arr,\r\n          [data.label + 'Current']: JSON.parse(JSON.stringify(arr)),\r\n          [data.label]: list\r\n        });\r\n        const params = [];\r\n        list.forEach((item, i) => {\r\n          params.push({\r\n            id: item.id,\r\n            seq: i\r\n          });\r\n        });\r\n        this.courseManageService.sortSubQuestionBank(params).subscribe((res: any) => {\r\n          if (res.status !== 201) {\r\n            this.message.error(res.message || '移动失败，未知错误！');\r\n          }\r\n        });\r\n      }));\r\n  });\r\n//#endregion\r\n\r\n\r\n//#region methods\r\n\r\n  /**\r\n   *  开启闯关\r\n   * @param val bool\r\n   */\r\n  readonly breakthroughModeChange = (val) => {\r\n    const flag = val ? '1' : '0';\r\n    const effect = of(null).pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      tap(([, packetInfo]) => {\r\n        this.setPacketInfo({...packetInfo, ...{isCard: flag}});\r\n      }),\r\n      switchMap(([, packetInfo]) => {\r\n        return this.courseManageService.isCardUpdate(packetInfo.id, flag).pipe(\r\n          tapResponse(res => {\r\n            if (res.status === 201) {\r\n              if (flag === '1') {\r\n                this.getLevel();\r\n              }\r\n              SessionStorageUtil.putPacketInfoItem('isCard', flag);\r\n            }\r\n          }, () => EMPTY)\r\n        );\r\n      })).subscribe(() => effect.unsubscribe());\r\n  };\r\n\r\n  /**\r\n   *  开启99实训\r\n   * @param val bool\r\n   */\r\n  readonly practiceOnChange = (val: boolean) => {\r\n    const flag = val ? '1' : '0';\r\n    const effect = of(null).pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      tap(([, packetInfo]) => {\r\n        this.setPacketInfo({...packetInfo, ...{is99Train: flag}});\r\n      }),\r\n      switchMap(([, packetInfo]) => {\r\n        return this.courseManageService.is99TrainUpdate(packetInfo.id, flag).pipe(\r\n          tapResponse(res => {\r\n            if (res.status === 201) {\r\n              if (flag === '1') {\r\n                this.getCompany();\r\n              }\r\n              SessionStorageUtil.putPacketInfoItem('is99Train', flag);\r\n            }\r\n          }, () => EMPTY)\r\n        );\r\n      })).subscribe(() => effect.unsubscribe());\r\n  };\r\n\r\n\r\n  /**\r\n   *  开启押题宝\r\n   * @param val bool\r\n   */\r\n  readonly isBetChange = (val: boolean) => {\r\n    const flag = val ? '1' : '0';\r\n    const effect = of(null).pipe(\r\n      withLatestFrom(this.packetInfo$),\r\n      tap(([, packetInfo]) => {\r\n        this.setPacketInfo({...packetInfo, ...{isBet: val}});\r\n      }),\r\n      switchMap(([, packetInfo]) => {\r\n        return this.courseManageService.isBetUpdate(packetInfo.id, flag).pipe(\r\n          tapResponse(res => {\r\n            if (res.status === 201) {\r\n              SessionStorageUtil.putPacketInfoItem('isBet', flag);\r\n            }\r\n          }, () => EMPTY)\r\n        );\r\n      })).subscribe(() => effect.unsubscribe());\r\n  };\r\n\r\n  @ConfirmableDesc({\r\n    title: '提示',\r\n    content: '重新生成课次会覆盖已生成的课次，确定重新生成吗？',\r\n    type: 'warning'\r\n  })\r\n  private generateLessonsAlert() {\r\n    return new Promise((resolve) => {\r\n        this.generateLessonsReal(resolve);\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * 子题库树节点数据转换\r\n   * @param data 节点\r\n   */\r\n  private readonly conversionNode = (data) => {\r\n    if (data.length) {\r\n      data.forEach((item, ii) => {\r\n        if (item.sublibraryModuleList && item.sublibraryModuleList.length) {\r\n          data[ii].children = item.sublibraryModuleList;\r\n          data[ii].children.forEach((child, iii) => {\r\n            data[ii].children[iii].title = child.name;\r\n            data[ii].children[iii].key = String(child.id);\r\n            data[ii].children[iii].isLeaf = true;\r\n          });\r\n        }\r\n        data[ii].title = item.name;\r\n        data[ii].key = item.code;\r\n        data[ii].disabled = true;\r\n        data[ii].selectable = false;\r\n        if (!item.sublibraryModuleList || !item.sublibraryModuleList.length) {\r\n          data[ii].isLeaf = true;\r\n        }\r\n      });\r\n    }\r\n    return data;\r\n  };\r\n//#endregion\r\n\r\n}\r\n","<div class=\"container\" *ngIf=\"vm$ | async as vm\">\r\n  <ng-container *ngIf=\"packetInfo$ | async as packetInfo\">\r\n    <div class='module-tree pt20'>\r\n      <div class='item'>\r\n    <span class='item-label'>\r\n          考核专用：\r\n    </span>\r\n        <span *ngIf='packetInfo.preview===\"1\"&&!vm.subQuestionBank.length'>无子题库</span>\r\n        <nz-spin [nzSpinning]=\"vm.searchLoad\" [nzDelay]=\"0\" style='width: calc(100% - 100px);display: inline-block;'>\r\n          <nz-tree-select\r\n            [disabled]='packetInfo.preview===\"1\"|| (packetInfo.isUsed>0)'\r\n            [nzMultiple]='true'\r\n            style=\"width: 100%\"\r\n            [nzNodes]=\"vm.exam\"\r\n            nzDefaultExpandAll\r\n            nzShowSearch\r\n            [nzAllowClear]='false'\r\n            nzPlaceHolder=\"绑定子题库\"\r\n            [(ngModel)]=\"vm.subQuestionBankCurrent\"\r\n            (ngModelChange)='subQuestionBankChange($event,\"subQuestionBank\")'\r\n            [nzDropdownStyle]=\"{'max-height': '200px'}\"\r\n            [nzTreeTemplate]=\"nzTreeTemplate\"\r\n            #treeSelect\r\n          >\r\n          </nz-tree-select>\r\n          <ng-template #nzTreeTemplate let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n          </ng-template>\r\n        </nz-spin>\r\n      </div>\r\n      <div class='list-container' [style.margin]='vm.subQuestionBank.length?\"20px 60px\":\"0\"'\r\n           cdkDropList\r\n           (cdkDropListDropped)=\"listDrop($event,'subQuestionBank')\">\r\n        <div class='list' *ngFor='let item of vm.subQuestionBank' cdkDrag\r\n             [style.cursor]='(packetInfo.preview===\"1\"|| packetInfo.isUsed>0)?\"not-allowed\":\"move\"'>\r\n          <div style='float:left' [title]='item.quebankName'>\r\n            <i nz-icon nzType=\"file-text\" nzTheme=\"outline\"></i>\r\n            <span style='margin-left:20px;'>{{item.quebankName}}</span>\r\n          </div>\r\n          <div style='float:right' *ngIf='!(packetInfo.preview===\"1\"||packetInfo.isUsed>0)'>\r\n            <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style='cursor:pointer;'\r\n               (click)='dellistSublibraryItem(item)'></i>\r\n            <span class='icon-del' (click)='dellistSublibraryItem(item)'\r\n                  *ngIf='!(packetInfo.preview===\"1\"||packetInfo.isUsed>0)'>删除</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class='item'>\r\n        <span class='item-label'>智适应专用：</span>\r\n        <span *ngIf='packetInfo.preview===\"1\"&&!vm.subQuestionBankInt.length'>\r\n      无子题库\r\n    </span>\r\n        <nz-spin [nzSpinning]=\"vm.searchLoad\" [nzDelay]=\"0\" style='width: calc(100% - 100px);display: inline-block;'>\r\n          <nz-tree-select\r\n            [disabled]='packetInfo.preview===\"1\"|| (packetInfo.isUsed>0)'\r\n            [nzMultiple]='true'\r\n            [nzAllowClear]='false'\r\n            style=\"width: 100%\"\r\n            [nzNodes]=\"vm.intelligent\"\r\n            nzDefaultExpandAll\r\n            nzShowSearch\r\n            nzPlaceHolder=\"绑定子题库\"\r\n            [(ngModel)]=\"vm.subQuestionBankIntCurrent\"\r\n            (ngModelChange)='subQuestionBankChange($event,\"subQuestionBankInt\")'\r\n            [nzDropdownStyle]=\"{'max-height': '200px'}\"\r\n            [nzTreeTemplate]=\"nzTreeTemplateInt\"\r\n            #treeSelectInt\r\n          >\r\n          </nz-tree-select>\r\n          <ng-template #nzTreeTemplateInt let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n          </ng-template>\r\n        </nz-spin>\r\n      </div>\r\n      <div class='list-container'\r\n           [style.margin]='vm.subQuestionBankInt.length?\"20px 60px\":\"0\"' cdkDropList\r\n           (cdkDropListDropped)=\"listDrop($event,'subQuestionBankInt')\">\r\n        <div class='list' *ngFor='let item of vm.subQuestionBankInt' cdkDrag\r\n             [style.cursor]='(packetInfo.preview===\"1\"|| packetInfo.isUsed>0)?\"not-allowed\":\"move\"'>\r\n          <div style='float:left' [title]='item.quebankName'>\r\n            <i nz-icon nzType=\"file-text\" nzTheme=\"outline\"></i>\r\n            <span style='margin-left:20px;'>{{item.quebankName}}</span>\r\n          </div>\r\n          <div style='float:right' *ngIf='!(packetInfo.preview===\"1\"||packetInfo.isUsed>0)'>\r\n            <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style='cursor:pointer;'\r\n               (click)='dellistSublibraryItem(item)'></i>\r\n            <span class='icon-del' *ngIf='!(packetInfo.preview===\"1\"||packetInfo.isUsed>0)'\r\n                  (click)='dellistSublibraryItem(item)'>删除</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class='module-tree'>\r\n      <div class='item '>\r\n     <span class='item-label'>\r\n    闯关模式：<nz-switch [(ngModel)]=\"vm.breakthroughMode\" nzCheckedChildren=\"开\" nzUnCheckedChildren=\"关\"\r\n                    (ngModelChange)='otherSettingStoreService.breakthroughModeChange($event)'\r\n                    [nzDisabled]='packetInfo.preview===\"1\"||packetInfo.isUsed>0'></nz-switch>\r\n     </span>\r\n      </div>\r\n      <div class='list-container' [hidden]='!vm.breakthroughMode'>\r\n        <div class='list-item' *ngFor='let item of vm.levelLists;let i=index;'>\r\n          <div class='gk-text fl'>\r\n            关卡{{i + 1}}：\r\n          </div>\r\n          <div class='list fr' style='width:calc(100% - 70px);'>\r\n            <div class='fl'>\r\n              <span class='icon-pre'>试</span>\r\n              <span class='icon-text'>{{item.name}}</span>\r\n            </div>\r\n            <div class='fr'>\r\n              <button\r\n                class=\"other-button\"\r\n                [class.disable-edit]='packetInfo.preview===\"1\"?true:null'\r\n                [disabled]='packetInfo.preview===\"1\"?true:null'\r\n                nz-button\r\n                nzType=\"primary\" (click)='rewardSettings(item)'>\r\n                奖励设置\r\n              </button>\r\n              <a nz-button nzType=\"link\" (click)=\"editLevel(item)\" *ngIf='packetInfo.preview!==\"1\";else editDisable'>\r\n                <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style='cursor:pointer;line-height:38px;'></i>\r\n                <span class='icon-del lh34' class='lh34 mr20 ml10'>编辑</span>\r\n              </a>\r\n              <ng-container\r\n                *ngIf='!(packetInfo.preview===\"1\"||(packetInfo.isUsed>0&&i!== vm.levelLists.length-1));else delDisable'>\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style='cursor:pointer;line-height:38px;'\r\n                   (click)='deleteLevel(item)'></i>\r\n                <span class='icon-del lh34' (click)='deleteLevel(item)'>删除</span>\r\n              </ng-container>\r\n              <ng-template #editDisable>\r\n                <a nz-button nzType=\"link\" style='cursor: not-allowed'>\r\n                  <i nz-icon nzType=\"edit\" nzTheme=\"outline\" class='icon-disable'></i>\r\n                  <span class='icon-del lh34 text-disbale'>编辑</span>\r\n                </a>\r\n              </ng-template>\r\n              <ng-template #delDisable>\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\"\r\n                   style='cursor:pointer;line-height:38px;color:#bfb6b6;cursor: not-allowed'></i>\r\n                <span class='icon-del lh34' style='color:#bfb6b6;cursor: not-allowed'>删除</span>\r\n              </ng-template>\r\n            </div>\r\n          </div>\r\n          <div class='list fr' style='width:calc(100% - 130px);'\r\n               *ngFor='let itemI of item.coursePacketCardRecourseList'>\r\n            <div class='fl'>\r\n              <span class='icon-pre yellow'>资</span>\r\n              <span class='icon-text'>{{itemI.title}}</span>\r\n            </div>\r\n            <div class='fr'>\r\n              <ng-container *ngIf='packetInfo.preview!==\"1\";else delDisable'>\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style='cursor:pointer;line-height:38px;'\r\n                   (click)='deleteGift(itemI.id)'></i>\r\n                <span class='icon-del lh34' (click)='deleteGift(itemI.id)'>删除</span>\r\n              </ng-container>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class='item pt0' [hidden]='!vm.breakthroughMode'>\r\n        <button\r\n          style='margin-left: 70px'\r\n          class=\"other-button\"\r\n          [class.disable-edit]='packetInfo.preview===\"1\"?true:null'\r\n          [disabled]='packetInfo.preview===\"1\"?true:null'\r\n          nz-button\r\n          nzType=\"primary\" (click)='addLevel()'>\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\" class='add-member-icon'></i>\r\n          新增关卡\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class='module-tree'>\r\n      <div class='item '>\r\n     <span class='item-label'>\r\n    99实训：<nz-switch [(ngModel)]=\"vm.practiceOn\" nzCheckedChildren=\"开\" nzUnCheckedChildren=\"关\"\r\n                    (ngModelChange)='otherSettingStoreService.practiceOnChange($event)'\r\n                    [nzDisabled]='packetInfo.preview===\"1\"||packetInfo.isUsed>0'></nz-switch>\r\n     </span>\r\n      </div>\r\n      <div class='list-container' [hidden]='!vm.practiceOn'>\r\n        <div class='list-item' *ngFor='let item of vm.companyLists;let i=index;'>\r\n          <div class='gk-text fl'>\r\n            公司{{i + 1}}：\r\n          </div>\r\n          <div class='list fr' style='width:calc(100% - 70px);'>\r\n            <div class='fl'>\r\n              <span class='icon-pre'>公</span>\r\n              <span class='icon-text'>{{item.name}}</span>\r\n            </div>\r\n            <div class='fr'>\r\n              <a nz-button nzType=\"link\" (click)=\"editCompany(item)\"\r\n                 *ngIf='!(packetInfo.preview===\"1\");else editDisable'>\r\n                <i nz-icon nzType=\"edit\" nzTheme=\"outline\" class='icon'></i>\r\n                <span class='lh34 mr20 ml10'>编辑</span>\r\n              </a>\r\n              <ng-template #editDisable>\r\n                <a nz-button nzType=\"link\" style='cursor: not-allowed'>\r\n                  <i nz-icon nzType=\"edit\" nzTheme=\"outline\" class='icon-disable'></i>\r\n                  <span class='icon-del lh34 text-disbale'>编辑</span>\r\n                </a>\r\n              </ng-template>\r\n              <ng-container\r\n                *ngIf='!(packetInfo.preview===\"1\"||(packetInfo.isUsed>0));else delDisable'>\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\" class='icon' (click)='deleteCompany(item)'></i>\r\n                <span class='icon-del lh34' (click)='deleteCompany(item)'>删除</span>\r\n              </ng-container>\r\n              <ng-template #delDisable>\r\n                <i nz-icon nzType=\"delete\" nzTheme=\"outline\" class='icon-disable'></i>\r\n                <span class='icon-del lh34 text-disbale'>删除</span>\r\n              </ng-template>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class='item pt0' [hidden]='!vm.practiceOn'>\r\n        <button\r\n          style='margin-left: 70px'\r\n          class=\"other-button\"\r\n          [class.disable-edit]='(packetInfo.preview===\"1\" ||packetInfo.isUsed>0) ?true:null'\r\n          [disabled]='(packetInfo.preview===\"1\" ||packetInfo.isUsed>0)?true:null'\r\n          nz-button\r\n          nzType=\"primary\" (click)='addCompany()'>\r\n          <i nz-icon nzType=\"plus\" nzTheme=\"outline\" class='add-member-icon'></i>\r\n          新增公司\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class='module-tree' *ngIf='packetInfo.teachType!==\"22\"'>\r\n      <div class='item '>\r\n          <span class='item-label'>\r\n    押题宝：<nz-switch [(ngModel)]=\"vm.isBet\" nzCheckedChildren=\"开\" nzUnCheckedChildren=\"关\"\r\n                   (ngModelChange)='otherSettingStoreService.isBetChange($event)'\r\n                               [nzDisabled]='packetInfo.preview===\"1\"||packetInfo.isUsed>0 || ((knowledgeNum$ | async) < 100 )'></nz-switch>\r\n     </span>\r\n\r\n        <div style='margin-top: 20px;padding-left:56px;'>提示：知识点数量大于等于100个才可以开启押题宝</div>\r\n      </div>\r\n    </div>\r\n\r\n    <ng-container *ngIf='packetInfo.teachType!==\"22\"'>\r\n      <div class='item'>\r\n     <span class='item-label'>\r\n    总课次：\r\n     </span>\r\n        <nz-input-number\r\n          [(ngModel)]=\"packetInfo.lessonCount\"\r\n          [nzMin]=\"1\" [nzStep]=\"1\" [nzMax]='200'\r\n          [nzDisabled]='packetInfo.preview===\"1\"\r\n                       || (packetInfo.isUsed>0 &&userId!==packetInfo.majorLeaderId)'\r\n        ></nz-input-number>\r\n        <button nz-button nzType=\"primary\" (click)=\"generateLessons()\"\r\n                [disabled]='(\r\n              (packetInfo.isUsed>0  || packetInfo.preview===\"1\")?true:null)'\r\n                style='margin-left:20px' [nzLoading]='vm.isLoading'>\r\n          生成课次\r\n        </button>\r\n        <button nz-button nzType=\"primary\" (click)=\"newClass()\"\r\n                [nzLoading]='vm.isLoading'\r\n                [disabled]='((packetInfo.isUsed>0&&userId!==packetInfo.majorLeaderId)  || packetInfo.preview===\"1\")?true:null'\r\n                style='margin-left:20px'>\r\n          新增课次\r\n        </button>\r\n      </div>\r\n      <nz-spin [nzSpinning]=\"vm.isLoading\" [nzDelay]=\"0\">\r\n        <nz-table #basicTable [nzData]=\"vm.listOfData\" style='margin:0 60px;'\r\n                  [nzFrontPagination]='true'>\r\n          <thead>\r\n          <tr>\r\n            <th>课次序号</th>\r\n            <th>名称</th>\r\n            <th *ngIf='packetInfo.preview!==\"1\"'>操作</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr *ngFor=\"let data of basicTable.data\">\r\n            <td>{{ data.index }}</td>\r\n            <td>{{ data.name }}</td>\r\n            <td *ngIf='packetInfo.preview!==\"1\"'>\r\n              <a (click)='edit(data)'>编辑</a>\r\n              <ng-container *ngIf='!(packetInfo.isUsed>0&&userId!==packetInfo.majorLeaderId)'>\r\n                <nz-divider nzType=\"vertical\"></nz-divider>\r\n                <a (click)='delTable(data.id)'>删除</a>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-spin>\r\n    </ng-container>\r\n  </ng-container>\r\n</div>\r\n\r\n\r\n\r\n\r\n","import {ChangeDetectionStrategy, Component, OnInit, ViewChild} from '@angular/core';\r\nimport {NzModalService, NzSafeAny, NzTreeSelectComponent} from 'ng-zorro-antd';\r\nimport {environment} from 'src/environments/environment';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {ConfirmableDesc, ConfirmableFlat} from 'core/decorators';\r\nimport {LocalStorageUtil} from 'core/utils/localstorage.util';\r\nimport {EditLessonComponent} from './edit-lesson/edit-lesson.component';\r\nimport {OtherSettingStoreService} from './other-setting.store.service';\r\nimport {CompanyItem, LevelItem} from '../other-setting/other-setting.interface';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {LoadingControl} from 'core/base/common';\r\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\r\n\r\n@Component({\r\n  selector: 'app-other-setting',\r\n  templateUrl: './other-setting.component.html',\r\n  styleUrls: ['./other-setting.component.less'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [OtherSettingStoreService]\r\n})\r\nexport class OtherSettingComponent implements OnInit {\r\n  readonly vm$ = this.otherSettingStoreService.vm$;\r\n  readonly knowledgeNum$ = this.otherSettingStoreService.knowledgeNum$;\r\n  readonly packetInfo$ = this.otherSettingStoreService.packetInfo$;\r\n  ossUrl = environment.OSS_URL;\r\n  userId = LocalStorageUtil.getUserId();\r\n  status = SessionStorageUtil.getPacketInfoItem('isUsed') > 0;\r\n  knoNumLimit = false;\r\n  @ViewChild('treeSelect') treeSelect: NzTreeSelectComponent;\r\n  @ViewChild('treeSelectInt') treeSelectInt: NzTreeSelectComponent;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: NzModalService,\r\n    public  otherSettingStoreService: OtherSettingStoreService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.otherSettingStoreService.dataInit();\r\n  }\r\n\r\n  @ConfirmableFlat({\r\n    title: '删除',\r\n    content: '确定删除该课次吗？',\r\n    type: 'error'\r\n  })\r\n  delTable(id: string, loadingControl?: LoadingControl) {\r\n    this.otherSettingStoreService.delTable({id, loadingControl});\r\n  }\r\n\r\n  @ConfirmableFlat({\r\n    title: '删除关卡',\r\n    content(args) {\r\n      return this.status ? '删除该关卡将同步删除所有学员在此关卡上的所有闯关记录。' : '确定删除' + args[0].name + '关卡吗？';\r\n    },\r\n    type: 'error',\r\n  })\r\n  deleteLevel(data: LevelItem, loadingControl?: LoadingControl) {\r\n    this.otherSettingStoreService.levelDeletion({id: data.id, loadingControl});\r\n  }\r\n\r\n\r\n  @ConfirmableFlat({\r\n    title: '删除公司',\r\n    content: (args) => ('确定删除' + args[0].name + '公司吗？'),\r\n    type: 'error',\r\n  })\r\n  deleteCompany(data: CompanyItem, loadingControl?: LoadingControl) {\r\n    this.otherSettingStoreService.companyDeletion({id: data.id, loadingControl});\r\n  }\r\n\r\n  editCompany(data: CompanyItem) {\r\n    this.otherSettingStoreService.addCompanyEffect(data);\r\n  }\r\n\r\n  @ConfirmableFlat({\r\n    title: '删除奖励',\r\n    content: '确定删除该资源吗？',\r\n    type: 'error'\r\n  })\r\n  deleteGift(id: string, loadingControl?: LoadingControl) {\r\n    this.otherSettingStoreService.deleteGift({id, loadingControl});\r\n  }\r\n\r\n  @ConfirmableFlat({\r\n    title: '删除子题库',\r\n    content: '确定删除该子题库吗？',\r\n    type: 'error'\r\n  })\r\n  dellistSublibraryItem(data: any, loadingControl?: LoadingControl) {\r\n    this.otherSettingStoreService.dellistSublibraryItem({data, loadingControl});\r\n  }\r\n\r\n  formatProgress(percent) {\r\n    return Math.trunc(percent) + '%';\r\n  }\r\n\r\n  /**\r\n   * 生成课次\r\n   */\r\n  generateLessons() {\r\n    this.otherSettingStoreService.generateLessonsEffect();\r\n  }\r\n\r\n  /**\r\n   * 新增课次\r\n   */\r\n  newClass() {\r\n    this.otherSettingStoreService.newClass();\r\n  }\r\n\r\n  /**\r\n   *  编辑课次\r\n   * @param data 当前课次\r\n   */\r\n  edit(data: any) {\r\n    this.modalService.create<EditLessonComponent, NzSafeAny>({\r\n      nzTitle: '编辑课次',\r\n      nzContent: EditLessonComponent,\r\n      nzComponentParams: {\r\n        data,\r\n      },\r\n      nzMaskClosable: false,\r\n      nzCancelText: '取消',\r\n      nzOkText: '确定',\r\n    }).afterClose\r\n      .subscribe((flag: boolean) => {\r\n        if (flag) {\r\n          this.otherSettingStoreService.getLessonCountTable();\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * 新增子题库\r\n   * @param data 选中节点\r\n   * @param type 考核专用/智适应专用\r\n   */\r\n  subQuestionBankChange(data: number[], type: 'subQuestionBank' | 'subQuestionBankInt') {\r\n    const {treeSelect, treeSelectInt} = this;\r\n    this.otherSettingStoreService.subQuestionBankChange({\r\n      data,\r\n      type,\r\n      treeSelect: (type === 'subQuestionBank' ? treeSelect : treeSelectInt)\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 新增奖励\r\n   * @param data 当前关卡\r\n   */\r\n  rewardSettings(data) {\r\n    this.otherSettingStoreService.rewardSettings(data);\r\n  }\r\n\r\n  /**\r\n   * 新增关卡\r\n   */\r\n  addLevel() {\r\n    this.otherSettingStoreService.addLevelEffect({});\r\n  }\r\n\r\n  editLevel(data: LevelItem) {\r\n    this.otherSettingStoreService.addLevelEffect(data);\r\n  }\r\n\r\n  /**\r\n   * 新增公司\r\n   */\r\n  addCompany() {\r\n    this.otherSettingStoreService.addCompanyEffect({});\r\n  }\r\n\r\n  listDrop(event: CdkDragDrop<any, any>, label: 'subQuestionBank' | 'subQuestionBankInt') {\r\n    this.otherSettingStoreService.listDrop({data: event, label});\r\n  }\r\n\r\n\r\n}\r\n","import {Component, OnInit, Input} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NzModalRef} from 'ng-zorro-antd/modal';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {repeatName, spaceValidator} from 'src/app/shared/validators/atr-validtors';\r\n\r\n@Component({\r\n  selector: '',\r\n  templateUrl: './structure-adjustment-chapter.component.html',\r\n  styleUrls: ['./structure-adjustment-chapter.component.less']\r\n})\r\nexport class StructureAdjustmentChapterComponent implements OnInit {\r\n  formGroup: FormGroup;\r\n  loading = false;\r\n  @Input() data: any;\r\n  @Input() formData: any;\r\n  @Input() courseId: string;\r\n  @Input() coursePacketId: string;\r\n  lock = false;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private courseMgService: CourseManageService,\r\n    private nzModalRef: NzModalRef) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.formGroup = this.fb.group({\r\n      name: [this.formData ? this.formData.name : '',\r\n        [Validators.required, Validators.maxLength(60), repeatName(this.data), spaceValidator()]]\r\n    });\r\n  }\r\n\r\n  save() {\r\n    if (!this.lock) {\r\n      Object.keys(this.formGroup.controls).forEach(key => {\r\n        this.formGroup.controls[key].markAsDirty();\r\n        this.formGroup.controls[key].updateValueAndValidity();\r\n      });\r\n      if (this.formGroup.invalid) {\r\n        return;\r\n      }\r\n      this.lock = true;\r\n      const chapterId = this.formData ? this.formData.id : '';\r\n      const chapterSeq = this.formData ? this.formData.seq : (this.data.length > 0 ? this.data.length + 1 : 1);\r\n      const postData = {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        chapters: [\r\n          {\r\n            id: chapterId,\r\n            name: this.formGroup.value.name,\r\n            seq: chapterSeq\r\n          }\r\n        ]\r\n      };\r\n      this.loading = true;\r\n      this.courseMgService.save_courseChapter(postData).subscribe(res => {\r\n        this.lock = false;\r\n        this.loading = false;\r\n        if (res.status !== 200) {\r\n          return;\r\n        }\r\n        const chapter = res.data[0];\r\n        chapter.children = [];\r\n        this.nzModalRef.close(res.data[0]);\r\n      }, () => this.lock = false);\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(null);\r\n  }\r\n\r\n}\r\n","<form nz-form [formGroup]=\"formGroup\">\r\n  <nz-form-item>\r\n    <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired>本章名称</nz-form-label>\r\n    <nz-form-control [nzSm]=\"16\" [nzXs]=\"24\" [nzErrorTip]=\"errNameTipsTpl\">\r\n      <input nz-input formControlName=\"name\" placeholder=\"请输入章节名称，60字以内\" />\r\n      <ng-template #errNameTipsTpl let-control>\r\n        <ng-container *ngIf=\"control.hasError('required')\">\r\n          请输入章名称\r\n        </ng-container>\r\n        <ng-container *ngIf=\"control.hasError('maxlength')\">\r\n          名称60字以内\r\n        </ng-container>\r\n        <ng-container *ngIf=\"control.hasError('repeatName')\">\r\n          重复名称\r\n        </ng-container>\r\n      </ng-template>\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n  <nz-form-item>\r\n    <nz-form-control [nzXs]=\"{ span: 24, offset: 0 }\" [nzSm]=\"{ span: 16, offset: 8 }\">\r\n      <button nz-button nzType=\"primary\" [nzLoading]=\"loading\" (click)=\"save()\">保存</button>\r\n      <button nz-button nzType=\"default\" style=\"margin-left: 20px;\" (click)=\"cancel()\">取消</button>\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n</form>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {Json} from 'core/base/common';\r\nimport {environment} from 'src/environments/environment';\r\nimport {LevelItem, SubModule} from '../other-setting.interface';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\nimport {LocalStorageUtil} from 'core/utils/localstorage.util';\r\n\r\n\r\n@Component({\r\n  selector: 'app-new-level',\r\n  templateUrl: './new-level.component.html',\r\n  styleUrls: ['./new-level.component.less'],\r\n})\r\nexport class NewLevelComponent implements OnInit {\r\n  @Input() courseId: string;\r\n  @Input() coursePacketId: string;\r\n  @Input() moduleArr: SubModule[] = [];\r\n  @Input() levelLists: LevelItem[] = [];\r\n  @Input() levelItem: Partial<LevelItem> = {};\r\n  newLevelForm: FormGroup;\r\n  newLevelLoading = false;\r\n  paperArr: Json[] = [];\r\n  totalTestPaperScore = 0;\r\n  private paperIdToName: Json = {};\r\n  private examIdToPaperUUId: Json = {};\r\n\r\n\r\n  constructor(\r\n    private nzMesService: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private nzModalRef: NzModalRef,\r\n    private fb: FormBuilder,\r\n    private statisticsLogService: StatisticsLogService,\r\n    private courseManageService: CourseManageService,\r\n  ) {\r\n    this.newLevelForm = this.fb.group({\r\n      newLevel: ['', [Validators.required]],\r\n      testPaperName: [null, [Validators.required]],\r\n      complianceConditions: [undefined, [Validators.required]]\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    const {levelItem} = this;\r\n    const levelId = SessionStorageUtil.getSubmodule();\r\n    this.newLevelForm.patchValue({\r\n      newLevel: levelItem.id ? Number(levelItem.quebankId) : levelId ? Number(levelId) : this.moduleArr[0]?.id\r\n    });\r\n    this.getPapers(false).then(flag => {\r\n      if (flag) {\r\n        const obj: { complianceConditions?: number, testPaperName?: number } = {};\r\n        if (levelItem.id) {\r\n          obj.complianceConditions = levelItem.passScore;\r\n          obj.testPaperName = Number(levelItem.examId.split('-')[1]);\r\n        } else {\r\n          obj.testPaperName = this.paperArr[0] ? Number(this.paperArr[0].examId) : null;\r\n        }\r\n        this.newLevelForm.patchValue(obj);\r\n      }\r\n    });\r\n  }\r\n\r\n  disableIf(item) {\r\n    return this.levelLists.map(e => e.examId.split('-')[0]).indexOf(item.paperUuid) > -1;\r\n  }\r\n\r\n  getPapers(change: boolean) {\r\n    if (change) { // 记录缓存\r\n      SessionStorageUtil.putSubmodule(this.newLevelForm.value.newLevel);\r\n    }\r\n    return new Promise((resolve => {\r\n      ToolsUtil.postAjax(environment.questionBankApi + 'system/qkcPaper/examInfoByModuleId', {\r\n        sublibraryModuleIdList: [this.newLevelForm.value.newLevel], pageNum: 1, pageSize: 10000\r\n      }, {'Content-Type': 'application/json'}).subscribe(resultS => {\r\n        try {\r\n          const resP = JSON.parse(resultS);\r\n          if (resP.code === 200) {\r\n            this.paperArr = resP.data.rows;\r\n            if (change) {\r\n              const testPaperName = (this.paperArr[0] && this.paperArr[0].examId) ? Number(this.paperArr[0].examId) : undefined;\r\n              this.newLevelForm.patchValue({\r\n                testPaperName,\r\n              });\r\n              Object.keys(this.newLevelForm.controls).forEach(key => {\r\n                this.newLevelForm.controls[key].markAsUntouched();\r\n                this.newLevelForm.controls[key].markAsPristine();\r\n                this.newLevelForm.controls[key].updateValueAndValidity();\r\n              });\r\n            }\r\n            this.paperArr.forEach(itemPaper => {\r\n              this.paperIdToName[itemPaper.examId] = itemPaper.examName;\r\n              this.examIdToPaperUUId[itemPaper.examId] = itemPaper.paperUuid;\r\n            });\r\n            resolve(true);\r\n          } else {\r\n            resolve(false);\r\n            this.paperArr = [];\r\n            this.nzMesService.error(resP.message);\r\n          }\r\n        } catch (e) {\r\n          this.paperArr = [];\r\n          this.nzMesService.error('题库服务异常');\r\n          resolve(false);\r\n        }\r\n      });\r\n    }));\r\n  }\r\n\r\n\r\n  save() {\r\n    for (const i in this.newLevelForm.controls) {\r\n      if (this.newLevelForm.controls.hasOwnProperty(i)) {\r\n        this.newLevelForm.controls[i].markAsDirty();\r\n        this.newLevelForm.controls[i].updateValueAndValidity();\r\n      }\r\n    }\r\n    if (this.newLevelForm.invalid) {\r\n      return;\r\n    }\r\n    this.newLevelLoading = true;\r\n    const examId = this.newLevelForm.value.testPaperName;\r\n    const seq = this.levelItem?.seq;\r\n    const content = {\r\n      id: this.levelItem?.id,\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      quebankId: this.newLevelForm.value.newLevel,\r\n      name: this.paperIdToName[examId],\r\n      examId: this.examIdToPaperUUId[examId] + '-' + this.newLevelForm.value.testPaperName,\r\n      passScore: this.newLevelForm.value.complianceConditions,\r\n      seq: seq ? seq : ToolsUtil.getMaxSeq(this.levelLists)\r\n    };\r\n    this.courseManageService.addCoursePacketCard(content).subscribe(res => {\r\n      this.newLevelLoading = false;\r\n      if (res.status === 201) {\r\n        const edit = !!this.levelItem.id;\r\n        const field = edit ? 'modify' : 'addCode';\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: edit ? '修改关卡试卷' : '新增关卡',\r\n          actionCode: STATISTICALRULES.packetInfo['otherSet-levelthrough-action'][field],\r\n          content: JSON.stringify(content),\r\n        });\r\n        this.nzModalRef.close(true);\r\n      }\r\n    }, () => {\r\n      this.newLevelLoading = false;\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(false);\r\n  }\r\n\r\n  testPaperNameChange(examId: string) {\r\n    if (examId) {\r\n      this.paperArr.every((paper) => {\r\n        if (paper.examId === examId) {\r\n          this.totalTestPaperScore = paper.score;\r\n          if (this.totalTestPaperScore < this.newLevelForm.value.complianceConditions) {\r\n            this.newLevelForm.patchValue({\r\n              complianceConditions: this.totalTestPaperScore\r\n            });\r\n          }\r\n        } else {\r\n          return true;\r\n        }\r\n      });\r\n    } else {\r\n      this.totalTestPaperScore = 0;\r\n      this.newLevelForm.patchValue({\r\n        complianceConditions: this.totalTestPaperScore\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\n","<nz-spin [nzSpinning]=\"newLevelLoading\"\r\n         [nzDelay]=\"0\">\r\n  <form nz-form [formGroup]=\"newLevelForm\">\r\n    <nz-form-item style='width:50%;float: left;'>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>选择试卷</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"模块名称不能为空\">\r\n        <nz-select formControlName=\"newLevel\" style='flex:1' (ngModelChange)='getPapers(true)'\r\n                   [nzShowSearch]='true'>\r\n          <nz-option [nzValue]=\"item.id\" [nzLabel]=\"item.name\" *ngFor='let item of moduleArr;'></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item style='width:50%;float: left;'>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"试卷名称不能为空\">\r\n        <nz-select formControlName=\"testPaperName\" style='flex:1' [nzShowSearch]='true'\r\n                   (ngModelChange)='testPaperNameChange($event)'>\r\n          <nz-option [nzValue]=\"item.examId\" [nzLabel]=\"item.examName\"\r\n                     *ngFor='let item of paperArr;'></nz-option>\r\n          <!--          [nzDisabled]='disableIf(item)'-->\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item style='width:50%'>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>达标条件</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"达标条件不能为空\">\r\n        <nz-input-number nzPlaceHolder=\"请输入分数值\" [nzMin]=\"0\" [nzMax]=\"totalTestPaperScore\"\r\n                         formControlName=\"complianceConditions\"\r\n                         [nzStep]=\"1\"\r\n                         style=\"min-width:140px;\"\r\n        ></nz-input-number>\r\n        <span style='margin-left:20px;'>试卷总分：<span style='color:#8fc9fe'>{{totalTestPaperScore}}分</span></span>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n  <div *nzModalFooter>\r\n    <button nz-button (click)=\"cancel()\">取消</button>\r\n    <button nz-button nzType=\"primary\" (click)=\"save()\" [nzLoading]=\"newLevelLoading\">确定</button>\r\n  </div>\r\n</nz-spin>\r\n","import {Component, Inject, Input, LOCALE_ID, OnDestroy, OnInit, Renderer2} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {MenuService} from 'core/services/menu.service';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {AliOssService} from 'core/services/ali-oss.service';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {KnowledgeManageService} from 'src/app/busi-services/knowledge-manag.service';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {NzUploadXHRArgs} from 'ng-zorro-antd';\r\nimport {TrainManageService} from '@app/busi-services/train-manage.service';\r\nimport {WINDOW} from '@app/service/service.module';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\nimport {UploadDir} from 'core/utils/uploadDir';\r\nimport {UploadOssService} from 'core/services/upload-oss.service';\r\nimport {HttpResponse} from '@angular/common/http';\r\nimport {NzUploadFile} from 'ng-zorro-antd/upload/interface';\r\n\r\n\r\n@Component({\r\n  selector: 'app-video-import',\r\n  templateUrl: './video-import.component.html',\r\n  styleUrls: ['./video-import.component.less'],\r\n})\r\nexport class VideoImportComponent implements OnInit , OnDestroy {\r\n\r\n  videoImportForm: FormGroup;\r\n  videoImportLoading = false;\r\n  loading = false;\r\n  nzFileList: NzUploadFile[] = [];\r\n  @Input() courseId: string;\r\n  // @Input() afterOpen: EventEmitter<void>;\r\n  @Input() coursePacketId: string;\r\n\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private menuService: MenuService,\r\n    private nzMesService: NzMessageService,\r\n    private courseMgService: CourseManageService,\r\n    private nzModalService: NzModalService,\r\n    private nzModalRef: NzModalRef,\r\n    private aliOssService: AliOssService,\r\n    private fb: FormBuilder,\r\n    private modalService: NzModalService,\r\n    private knowledgeManageService: KnowledgeManageService,\r\n    private renderer2: Renderer2,\r\n    private trainManageService: TrainManageService,\r\n    private sanitizer: DomSanitizer,\r\n    private uploadOssService: UploadOssService,\r\n    @Inject(LOCALE_ID) public locale: string,\r\n    @Inject(WINDOW) public win: any,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.videoImportForm = this.fb.group({\r\n      videoUrl: ['', Validators.required]\r\n    });\r\n\r\n  }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n\r\n\r\n  // 自定义删除\r\n  removeFileSelf = () => {\r\n    this.videoImportForm.patchValue({\r\n      videoUrl: '',\r\n    });\r\n    this.nzFileList = [];\r\n  }\r\n\r\n\r\n  // 上传excel校验\r\n  beforeVideoUpload = (file: any) => {\r\n    const type = ToolsUtil.getFileType(file.name);\r\n    if (type === 'excel') {\r\n      return true;\r\n    } else {\r\n      this.nzMesService.error('请上传excel,支持后缀xls, xlsx');\r\n    }\r\n  }\r\n\r\n  // 上传视频\r\n  customVideoRequest = (item: NzUploadXHRArgs) => {\r\n    this.loading = true;\r\n    this.uploadOssService\r\n      .uploadOss(item.file, UploadDir.knowledge_file)\r\n      .subscribe((result) => {\r\n        this.loading = false;\r\n        this.videoImportForm.patchValue({\r\n          videoUrl: result,\r\n        });\r\n        item.onSuccess({...item}, item.file, {});\r\n      }, (err) => {\r\n        this.loading = false;\r\n        item.onError(err, item.file);\r\n        this.nzMesService.error(JSON.stringify(err));\r\n      });\r\n  }\r\n\r\n\r\n  // 录播下载excel模板\r\n  downTemplate() {\r\n    this.courseMgService.exportExcelVideo().subscribe((resp: HttpResponse<Blob>) => {\r\n        // const headers: HttpHeaders = resp.headers;\r\n        // (window as any).aa=headers.get('content-disposition').split('=')[1];\r\n        // console.log(headers.get('content-disposition').split('=')[1]);\r\n        const link = document.createElement('a');\r\n        // 支持HTML5下载属性的浏览器\r\n        const url = URL.createObjectURL(resp.body);\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', '导入视频模板');\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      },\r\n      error => this.nzMesService.error(error));\r\n  }\r\n\r\n  save() {\r\n    if (!this.videoImportForm.value.videoUrl) {\r\n      this.nzMesService.warning('请先上传文件');\r\n      return;\r\n    }\r\n    this.videoImportLoading = true;\r\n    const params = {\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      fileUrl: this.videoImportForm.value.videoUrl\r\n    };\r\n    this.courseMgService.excelImportVideo(params).subscribe(res => {\r\n      this.videoImportLoading = false;\r\n      if (res.status === 200) {\r\n        this.nzMesService.success('导入成功');\r\n        this.nzModalRef.close(true);\r\n      } else {\r\n        if (res.status === 500) {\r\n          this.nzMesService.warning(res.message);\r\n        }\r\n      }\r\n    }, () => {\r\n      this.videoImportLoading = false;\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(false);\r\n  }\r\n}\r\n\r\n","<nz-spin [nzSpinning]=\"loading\"\r\n         [nzDelay]=\"0\">\r\n<form nz-form [formGroup]=\"videoImportForm\">\r\n  <nz-form-item>\r\n    <nz-form-label [nzSpan]=\"5\" nzRequired style='max-width:100px;'>本地上传</nz-form-label>\r\n    <nz-form-control style='position:relative;'>\r\n      <nz-spin [nzSpinning]=\"videoImportLoading\"\r\n               [nzDelay]=\"0\">\r\n        <nz-upload\r\n          class=\"upload-list-inline\"\r\n          nzListType=\"picture\"\r\n          [nzShowUploadList]=' { showPreviewIcon: false, showRemoveIcon: true, showDownloadIcon: false }'\r\n          [(nzFileList)]=\"nzFileList\"\r\n          [nzRemove]='removeFileSelf'\r\n          [nzBeforeUpload]=\"beforeVideoUpload\"\r\n          [nzCustomRequest]=\"customVideoRequest\"\r\n        >\r\n          <button nz-button [disabled]='this.videoImportForm.value.videoUrl===\"\"?false:true'\r\n                  style='margin-bottom: 20px;'>\r\n                    <span><i nz-icon\r\n                             nzType=\"upload\" style='font-size:20px;'></i>上传文件</span>\r\n          </button>\r\n        </nz-upload>\r\n        <button nz-button style='position:absolute;left:126px;top:0;' (click)='downTemplate()'>\r\n                    <span><i nz-icon\r\n                             nzType=\"snippets\" style='font-size:20px;margin-right:20px'\r\n                             nzTheme=\"outline\"></i>模板下载</span>\r\n        </button>\r\n      </nz-spin>\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n</form>\r\n<div *nzModalFooter>\r\n  <button nz-button (click)=\"cancel()\">取消</button>\r\n  <button nz-button nzType=\"primary\" (click)=\"save()\" [nzLoading]=\"videoImportLoading\" >确定</button>\r\n</div>\r\n</nz-spin>\r\n\r\n\r\n\r\n\r\n","import {Component, OnInit, Input} from '@angular/core';\r\nimport {NzModalRef} from 'ng-zorro-antd/modal';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {NodeChangeEvent} from '../course-structure-tree/course-structure-tree.component';\r\n\r\n@Component({\r\n  selector: 'app-upload-handout',\r\n  templateUrl: './upload-handout.component.html',\r\n  styleUrls: ['./upload-handout.component.less'],\r\n})\r\nexport class UploadHandoutComponent implements OnInit {\r\n  isLoading = false;\r\n  files = [];\r\n  acceptTypeFile = {\r\n    acceptType: '',\r\n    desc: '',\r\n  };\r\n  acceptTypeFiles = {\r\n    deafult: {\r\n      acceptType: 'pdf,doc,ppt,docx,xls,xlsx,pptx,png,jpg,jpeg,mp4,rar,zip',\r\n      desc:\r\n        '支持扩展名：pdf、doc、docx、xls、xlsx、ppt、pptx、png、jpg、mp4、rar、zip',\r\n    },\r\n    courseTimeDivision: {\r\n      acceptType: 'pdf,doc,ppt,docx,xls,xlsx,pptx,png,jpg,jpeg,mp4',\r\n      desc: '支持扩展名：pdf、doc、docx、xls、xlsx、ppt、pptx、png、jpg、mp4',\r\n    },\r\n  };\r\n  @Input() node: NodeChangeEvent;\r\n  @Input() seq: number;\r\n  @Input() type: string;\r\n  @Input() limit = 0;\r\n  @Input() maxSize;\r\n  learningTarget = '1';\r\n\r\n  constructor(\r\n    private nzModalRef: NzModalRef,\r\n    private courseMgService: CourseManageService,\r\n    private nzMsg: NzMessageService\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.setAcceptType();\r\n\r\n  }\r\n\r\n  setAcceptType() {\r\n    if (this.node.type === 'course-time-division') {\r\n      this.acceptTypeFile = this.acceptTypeFiles.courseTimeDivision;\r\n    } else {\r\n      this.acceptTypeFile = this.acceptTypeFiles.deafult;\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.destroy();\r\n  }\r\n\r\n  confirm() {\r\n    const params: any = this.formatPostData(this.node);\r\n    if (!this.learningTarget) {\r\n      this.nzMsg.warning('请选择学习目标');\r\n      return;\r\n    }\r\n    if (params.length === 0) {\r\n      this.nzMsg.warning('请上传文件');\r\n      return;\r\n    }\r\n    let source$ = null;\r\n    switch (this.node.type) {\r\n      case 'chapter':\r\n        source$ = this.courseMgService.batchSave_courseChapterFile(params);\r\n        break;\r\n      case 'section':\r\n        if (this.type === '104') {\r\n          source$ = this.courseMgService.batchSave_courseSectionTaskFile(params);\r\n        } else {\r\n          source$ = this.courseMgService.batchSave_courseSectionFile(params);\r\n        }\r\n        break;\r\n      case 'course-time-division':\r\n        source$ = this.courseMgService.batchSave_courseTimeFile(params);\r\n        break;\r\n      default:\r\n        source$ = null;\r\n    }\r\n    if (!source$) {\r\n      return;\r\n    }\r\n\r\n    this.isLoading = true;\r\n    source$.subscribe(\r\n      (res) => {\r\n        this.isLoading = false;\r\n        if (res.status !== 201) {\r\n          this.nzMsg.error(res.message || '未知错误');\r\n          return;\r\n        }\r\n        this.nzModalRef.destroy(params);\r\n      },\r\n      (err) => {\r\n        this.isLoading = false;\r\n        this.nzMsg.error(JSON.stringify(err));\r\n      }\r\n    );\r\n  }\r\n\r\n  formatPostData(node: NodeChangeEvent) {\r\n    const data = node.data;\r\n    return this.files.map((file, i) => {\r\n      if (node.type === 'chapter') {\r\n        return {\r\n          courseId: data.courseId,\r\n          coursePacketId: data.coursePacketId,\r\n          courseChapterId: data.id,\r\n          attachmentName: file.name,\r\n          attachmentPath: file.path,\r\n          aattachmentExt: ToolsUtil.getExt(file.name),\r\n          seq: this.seq + i,\r\n        };\r\n      } else if (node.type === 'section') {\r\n\r\n        const obj: any = {\r\n          courseId: data.courseId,\r\n          coursePacketId: data.coursePacketId,\r\n          courseChapterId: data.courseChapterId,\r\n          courseSectionId: data.id,\r\n          attachmentName: file.name,\r\n          attachmentPath: file.path,\r\n          aattachmentExt: ToolsUtil.getExt(file.name),\r\n          sourceType: 1,\r\n          seq: this.seq + i,\r\n          type: this.type,\r\n          learningGoalCode: this.learningTarget\r\n        };\r\n        if (this.type === '104' || this.type === '101') {\r\n          obj.name = file.name;\r\n          obj.status = '1';\r\n          obj.isNeed = 0;\r\n          obj.downloadType = '0';\r\n          obj.gradeType = '1';\r\n          obj.taskType = '0';\r\n        } else {\r\n          obj.downloadType = '2';\r\n        }\r\n        return obj;\r\n      } else if (node.type === 'course-time-division') {\r\n        return {\r\n          courseId: data.courseId,\r\n          coursePacketId: data.coursePacketId,\r\n          courseTimeId: data.id,\r\n          attachmentName: file.name,\r\n          attachmentPath: file.path,\r\n          aattachmentExt: ToolsUtil.getExt(file.name),\r\n          seq: this.seq + i,\r\n        };\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div>\r\n  <div style='margin-bottom: 20px;'>\r\n    <span style='color:red'>*</span>学习目标：\r\n    <nz-select nzShowSearch nzPlaceHolder=\"请选择学习目标\" [(ngModel)]=\"learningTarget\" style='min-width:100px;'>\r\n      <nz-option nzLabel=\"了解\" nzValue=\"1\"></nz-option>\r\n      <nz-option nzLabel=\"理解\" nzValue=\"2\"></nz-option>\r\n      <nz-option nzLabel=\"掌握\" nzValue=\"3\"></nz-option>\r\n      <nz-option nzLabel=\"应用\" nzValue=\"4\"></nz-option>\r\n      <nz-option nzLabel=\"分析\" nzValue=\"5\"></nz-option>\r\n      <nz-option nzLabel=\"创新\" nzValue=\"6\"></nz-option>\r\n    </nz-select>\r\n  </div>\r\n  <qkc-upload\r\n    [acceptType]=\"acceptTypeFiles.deafult.acceptType\"\r\n    [limit]=\"limit\"\r\n    [maxSize]='maxSize'\r\n    multiple='true'\r\n    [(ngModel)]=\"files\">\r\n    <button nz-button><i nz-icon nzType=\"upload\"></i><span>选择文件</span></button>\r\n    <p style=\"margin-top: 8px;\">{{ acceptTypeFiles.deafult.desc }}</p>\r\n  </qkc-upload>\r\n\r\n  <div style=\"text-align: center;margin-top: 20px;\">\r\n    <button nz-button nzType=\"default\" style=\"margin-right: 20px;\" (click)=\"cancel()\">取消</button>\r\n    <button nz-button nzType=\"primary\" [nzLoading]=\"isLoading\" (click)=\"confirm()\">确定上传</button>\r\n  </div>\r\n</div>\r\n","<div class=\"container\">\r\n  <div class=\"left\">\r\n    <div class=\"row-title\">章节结构</div>\r\n    <app-course-structure-tree\r\n      [chapterSelectable]=\"false\"\r\n      [coursePacketId]=\"coursePacketId\"\r\n      (nodeChange)=\"nodeChange($event)\"\r\n      [defaultSection]='defaultSection'\r\n      [defaultExpandedKeys]='defaultExpandedKeys'\r\n      #tree>\r\n    </app-course-structure-tree>\r\n    <span class='not-content' *ngIf='preview===\"1\"&&!tree?.nodes.length'>\r\n      该课包尚未建立章节内容\r\n    </span>\r\n  </div>\r\n\r\n  <div class=\"gap\"></div>\r\n\r\n  <div class='right-content'>\r\n    <nz-spin [nzSpinning]=\"listLoading || hanoutLoading\" [nzDelay]=\"0\">\r\n      <div class=\"row-title\" style='padding-left: 10px;margin-top: 20px;'>\r\n        {{curNode?.data?.title}}\r\n        <button nz-button nzType=\"primary\" (click)='importVideo()' *ngIf='teachType===\"22\"'\r\n                style='float:right;margin-right:15px;'>导入视频\r\n        </button>\r\n      </div>\r\n      <div class=\"right\" *ngIf='teachType!==\"22\"'>\r\n        <nz-collapse [style]=\"{ border: 'none', 'background-color': '#fff'}\">\r\n          <nz-collapse-panel\r\n            [style]=\"{'margin-bottom': '24px', border: '1px solid #d9d9d9'}\"\r\n            [(nzActive)]=\"active1\"\r\n            [nzHeader]=\"lectureTpl\">\r\n            <ng-template #lectureTpl>\r\n            <span>\r\n              讲义\r\n              <i nz-icon\r\n                 nzType=\"question-circle\"\r\n                 nzTheme=\"outline\"\r\n                 nz-tooltip\r\n                 [nzTooltipTitle]=\"tipsJy\"\r\n                 [nzTooltipOverlayStyle]='{\"max-width\": \"770px\"}'\r\n                 class='font-question'\r\n                 nzTooltipTrigger='click'\r\n                 (click)='stopPropagation($event)'\r\n              ></i>\r\n            </span>\r\n            </ng-template>\r\n            <ng-template #tipsJy>\r\n              <div>讲义主要提供给讲师给学员上课使用：</div>\r\n              <div>1、建议优先WPS制作PPT ；</div>\r\n              <div>2、尽量少用第三模板；</div>\r\n              <div>3、PPT的文件大小应控制在100M之内；</div>\r\n            </ng-template>\r\n            <div class=\"list\" cdkDropList (cdkDropListDropped)=\"sectionDrop($event,'1')\">\r\n              <ng-container *ngIf=\"preview==='0'||handoutsLecture?.length\">\r\n                <div class=\"list-item\" *ngFor=\"let item of handoutsLecture;let sectionIdx=index;\" cdkDrag>\r\n              <span class=\"title\" [title]=\"item.attachmentName\">\r\n                <nz-avatar style=\"vertical-align: middle;\" [nzShape]=\"'circle'\" [nzSize]=\"20\"\r\n                           [ngStyle]=\"{ 'background-color': '#ea5c6c' }\"\r\n                           [nzText]=\"'讲'\"></nz-avatar>\r\n                {{ item.attachmentName }}\r\n              </span>\r\n                  <ng-container *ngIf='preview===\"0\"'>\r\n                    <div class='other-containers'>\r\n                    <span>\r\n                      <label\r\n                        nz-checkbox\r\n                        [nzDisabled]='disableMainLecture(item)'\r\n                        [(ngModel)]=\"item.isMainFile\"\r\n                        (ngModelChange)=\"mainFileChange($event, item)\">\r\n                        主讲义\r\n                      </label>\r\n                    </span>\r\n                    </div>\r\n                    <select class='other-container' [(ngModel)]=\"item.downloadType\"\r\n                            *ngIf='item.attachmentPath'\r\n                            (ngModelChange)=\"downloadChange($event, item)\">\r\n                      <option value=\"0\">不可下载</option>\r\n                      <option value=\"1\">讲师可下载</option>\r\n                    </select>\r\n                  </ng-container>\r\n                  <nz-spin [nzSpinning]=\"associateing[sectionIdx]\" [nzDelay]=\"0\" nzTip='查询主讲义信息中...'>\r\n                    <div class=\"action-group\">\r\n                      <a nz-button nzType=\"link\" (click)=\"previewHandout(item)\">\r\n                        <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                        预览\r\n                      </a>\r\n                      <a nz-button nzType=\"link\" (click)=\"downLoad(item)\"\r\n                         *ngIf='item.attachmentPath&&item.attachmentPath.indexOf(\".\")>0'>\r\n                        <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                        下载\r\n                      </a>\r\n                      <a nz-button nzType=\"link\" (click)=\"associate(item,sectionIdx)\"\r\n                         *ngIf='showassolite(item)'>\r\n                        <i nz-icon nzType=\"disconnect\" nzTheme=\"outline\"></i>\r\n                        关联\r\n                      </a>\r\n                      <a nz-button nzType=\"link\" [style]=\"{ color: '#f53131'}\" (click)=\"delHandout(item)\"\r\n                         *ngIf='preview===\"0\"'>\r\n                        <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                        删除\r\n                      </a>\r\n                    </div>\r\n                  </nz-spin>\r\n                </div>\r\n                <div class=\"add-section\" *ngIf='preview===\"0\"'>\r\n                  <div>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\"\r\n                            (click)=\"callSchoolEnterpriseLib('read','101')\">阅读库调用\r\n                    </button>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" (click)=\"uploadHandout('101')\">本地上传</button>\r\n                  </div>\r\n                </div>\r\n              </ng-container>\r\n              <span *ngIf=\"preview==='1'&&!handoutsLecture?.length\">没有讲义内容</span>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </div>\r\n      <div class=\"right\" *ngIf=\"teachType==='22'\">\r\n        <nz-collapse [style]=\"{ border: 'none', 'background-color': '#fff'}\">\r\n          <nz-collapse-panel\r\n            [style]=\"{'margin-bottom': '24px', border: '1px solid #d9d9d9'}\"\r\n            [(nzActive)]=\"active2\"\r\n            [nzHeader]=\"recordingTpl\">\r\n            <ng-template #recordingTpl>\r\n              <span>录播</span>\r\n            </ng-template>\r\n            <div class=\"list\" cdkDropList (cdkDropListDropped)=\"sectionDrop($event,'2')\">\r\n              <ng-container *ngIf=\"preview==='0'||handoutsRecording?.length\">\r\n                <div class=\"list-item\" *ngFor=\"let item of handoutsRecording;let sectionIdx=index;\" cdkDrag>\r\n                  <div>\r\n                  <span class=\"title\" [title]=\"item.attachmentName\">\r\n<!--                    <nz-avatar [nzShape]=\"'square'\" [nzSize]=\"14\" [nzSrc]=\"getIcon(item.aattachmentExt)\"></nz-avatar>-->\r\n                &nbsp;     <nz-avatar style=\"vertical-align: middle;\" [nzShape]=\"'circle'\" [nzSize]=\"20\"\r\n                                      [ngStyle]=\"{ 'background-color': '#675dca' }\"\r\n                                      [nzText]=\"'视'\"></nz-avatar>\r\n                    {{ item.attachmentName }}\r\n                  </span>\r\n                    <span style='margin-left: 10px;color:#1890ff;vertical-align: top;'>{{item.authorName}}</span>\r\n                  </div>\r\n                  <div class=\"action-group\">\r\n                    <a nz-button nzType=\"link\" (click)=\"editHandout(item)\">\r\n                      <i nz-icon nzType=\"edit\" nzTheme=\"outline\"></i>\r\n                      编辑\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" (click)=\"previewHandout(item)\">\r\n                      <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                      预览\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" [style]=\"{ color: '#f53131'}\" (click)=\"delHandout(item)\"\r\n                       *ngIf='preview===\"0\"'>\r\n                      <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                      删除\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div class=\"add-section\" *ngIf='preview===\"0\"'>\r\n                  <div>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\"\r\n                            (click)=\"videoUpload('polyway')\">保利威视频\r\n                    </button>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" (click)=\"videoUpload('localVideo')\">上传视频\r\n                    </button>\r\n                  </div>\r\n                  <div></div>\r\n                </div>\r\n              </ng-container>\r\n              <span *ngIf=\"preview==='1'&&!handoutsRecording?.length\">没有视频内容</span>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </div>\r\n      <div class=\"right\" *ngIf='teachType!==\"22\"'>\r\n        <nz-collapse [style]=\"{ border: 'none', 'background-color': '#fff'}\">\r\n          <nz-collapse-panel\r\n            [style]=\"{'margin-bottom': '24px', border: '1px solid #d9d9d9'}\"\r\n            [(nzActive)]=\"active3\"\r\n            [nzHeader]=\"panelHeaderTpl\">\r\n            <ng-template #panelHeaderTpl>\r\n            <span>任务\r\n              <i nz-icon nzType=\"question-circle\" nzTheme=\"outline\"\r\n                 nz-tooltip [nzTooltipTitle]=\"tipsPak\" [nzTooltipOverlayStyle]='{\"max-width\": \"770px\"}'\r\n                 class='font-question' nzTooltipTrigger='click' (click)='stopPropagation($event)'></i></span>\r\n            </ng-template>\r\n            <ng-template #tipsPak>\r\n              <div>每个小节下的独立任务不能超过3个</div>\r\n              <div>未被主讲义绑定的任务为独立任务</div>\r\n            </ng-template>\r\n            <div class=\"list\" cdkDropList (cdkDropListDropped)=\"sectionDrop($event,'3')\">\r\n              <ng-container *ngIf=\"preview==='0'||taskList?.length\">\r\n                <div class=\"list-item\" *ngFor=\"let item of taskList;let sectionIdx=index;\" cdkDrag>\r\n                  <div class=\"title task\">\r\n                  <span [title]=\"item.name\"\r\n                        class='title-name'\r\n                        [ngStyle]='{\"max-width\":item.linkId?\"calc(100% - 56px)\":\"100%\"}'>\r\n                    <nz-avatar style=\"vertical-align: middle;\" [nzShape]=\"'circle'\" [nzSize]=\"20\"\r\n                               [ngStyle]=\"{ 'background-color': getColor(item.taskType) }\"\r\n                               [nzText]=\"getText(item.taskType)\"></nz-avatar>\r\n                    {{ item.name }}\r\n                    <span style='color:#33ade7' *ngIf='showExamType(item)'>{{getExamText(item)}}</span>\r\n                    <span style='color:#33ade7' *ngIf='ShowJobType(item)'>{{getTaskFormText(item.taskForm)}}</span>\r\n                  </span>\r\n                    <span style=\"color:red;min-width:56px;vertical-align: top;\" *ngIf='item.linkId'>【已绑】</span>\r\n                  </div>\r\n                  <!-- <span style='min-width: 70px;'>-->\r\n                  <!--      <label-->\r\n                  <!--        nz-checkbox-->\r\n                  <!--        [(ngModel)]=\"item.isNeed\"-->\r\n                  <!--        [disabled]='preview===\"1\"'-->\r\n                  <!--        (ngModelChange)=\"isNeedChange($event, item)\">-->\r\n                  <!--     必选-->\r\n                  <!--   </label>-->\r\n                  <!--   </span>-->\r\n                  <select [(ngModel)]=\"item.downloadType\"\r\n                          [ngClass]='{\"other-container\":true}'\r\n                          [disabled]='preview===\"1\"'\r\n                          *ngIf='item.attachmentPath'\r\n                          (ngModelChange)=\"downloadChange($event, item,true)\">\r\n                    <option value=\"0\">不可下载</option>\r\n                    <option value=\"1\">讲师可下载</option>\r\n                    <option value=\"2\">讲师+学生可下载</option>\r\n                  </select>\r\n                  <div style='min-width: 100px;height: 10px;' *ngIf=\"!item.attachmentPath\">\r\n                  </div>\r\n                  <select [(ngModel)]=\"item.gradeType\"\r\n                          class='other-container'\r\n                          [class.disable-select]='preview===\"1\" || exerciseType ===\"1\" || item.taskType===\"4\"'\r\n                          [disabled]='preview===\"1\" || exerciseType ===\"1\" || item.taskType===\"4\"'\r\n                          *ngIf='item.taskType===\"2\" || item.taskType===\"4\"'\r\n                          (ngModelChange)=\"gradeTypeChange($event, item)\">\r\n                    <option value=\"1\">学生自评</option>\r\n                    <option value=\"2\">老师批改</option>\r\n                  </select>\r\n                  <div style='min-width: 100px;height: 10px;'\r\n                       *ngIf='!(item.taskType===\"2\" || item.taskType===\"4\")'>\r\n                  </div>\r\n                  <select [(ngModel)]=\"item.isGrade\"\r\n                          class='other-container'\r\n                          [disabled]='preview===\"1\"'\r\n                          *ngIf='item.taskType===\"1\"'\r\n                          (ngModelChange)=\"isGradeChange($event, item)\">\r\n                    <option value=\"\">请选择</option>\r\n                    <option value=\"0\">不评分</option>\r\n                    <option value=\"1\">需评分</option>\r\n                  </select>\r\n                  <div style='min-width: 100px;height: 10px;'\r\n                       *ngIf='!(item.taskType===\"1\")'>\r\n                  </div>\r\n                  <button\r\n                    class=\"other-button\"\r\n                    *ngIf='(item.taskType===\"4\" || item.taskType===\"6\" || item.taskType===\"7\")&&preview===\"0\"'\r\n                    nz-button\r\n                    nzType=\"primary\" (click)='examSetting(item)'>\r\n                    {{(item.taskType === \"4\") ? '考试设置' : '权限设置'}}\r\n                  </button>\r\n                  <div style='width: 88px;height: 10px;'\r\n                       *ngIf='!((item.taskType===\"4\" || item.taskType===\"6\" || item.taskType===\"7\")&&preview===\"0\")'>\r\n                  </div>\r\n                  <div class=\"action-group\">\r\n                    <a nz-button nzType=\"link\" (click)=\"previewTask(item)\">\r\n                      <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n                      预览\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" (click)=\"edit(item)\"\r\n                       *ngIf='(item.taskType===\"4\"||item.taskType===\"2\"||item.taskType===\"6\"||item.taskType===\"7\")&&preview===\"0\"'>\r\n                      <i nz-icon nzType=\"edit\" nzTheme=\"outline\" (click)=\"edit(item)\"></i>\r\n                      编辑\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" (click)=\"downLoad(item)\"\r\n                       *ngIf='item.attachmentPath&&item.taskType!==\"4\"&&item.attachmentPath.indexOf(\".\")>0'>\r\n                      <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                      下载\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" [style]=\"{ color: '#f53131'}\" (click)=\"delHandout(item,true)\"\r\n                       *ngIf='preview===\"0\"'>\r\n                      <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                      删除\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div class=\"add-section\" *ngIf='preview===\"0\"&&taskList.length<limitTask'>\r\n                  <div>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\"\r\n                            (click)=\"callSchoolEnterpriseLib('read','1')\">阅读库调用\r\n                    </button>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\"\r\n                            (click)=\"callSchoolEnterpriseLib( 'case','1')\">案例库调用\r\n                    </button>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\"\r\n                            (click)=\"callSchoolEnterpriseLib( 'setting','1')\">实训库调用\r\n                    </button>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\">\r\n                      <a nz-dropdown [nzDropdownMenu]=\"menuwj\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        问卷调研\r\n                      </a>\r\n                    </button>\r\n                    <nz-dropdown-menu #menuwj=\"nzDropdownMenu\">\r\n                      <ul nz-menu nzSelectable>\r\n                        <li nz-menu-item (click)=\"questionnaireCall('questionnaireType')\">问卷调用</li>\r\n                        <li nz-menu-item (click)=\"questionnaireCall('evaluationType')\">测评调用</li>\r\n                      </ul>\r\n                    </nz-dropdown-menu>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\">\r\n                      <a nz-dropdown [nzDropdownMenu]=\"menuExercises\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        练习作业\r\n                      </a>\r\n                    </button>\r\n                    <nz-dropdown-menu #menuExercises=\"nzDropdownMenu\">\r\n                      <ul nz-menu nzSelectable>\r\n                        <li nz-menu-item (click)=\"entryExercises()\">新增作业</li>\r\n                        <li nz-menu-item (click)=\"chooseExercises()\">选择作业</li>\r\n                      </ul>\r\n                    </nz-dropdown-menu>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\">\r\n                      <a nz-dropdown [nzDropdownMenu]=\"menu\">\r\n                        <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\r\n                        考试任务\r\n                      </a>\r\n                    </button>\r\n                    <nz-dropdown-menu #menu=\"nzDropdownMenu\">\r\n                      <ul nz-menu nzSelectable>\r\n                        <li nz-menu-item (click)=\"addVolume()\">新增组卷</li>\r\n                        <li nz-menu-item (click)=\"chooseTestPaper()\">选择试卷</li>\r\n                      </ul>\r\n                    </nz-dropdown-menu>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" (click)=\"uploadHandout('104')\"\r\n                            [style]=\"{'margin-right': '10px'}\"><i nz-icon nzType=\"upload\" nzTheme=\"outline\"></i>本地上传\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </ng-container>\r\n              <span *ngIf=\"preview==='1'&&!taskList?.length\">没有任务内容</span>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </div>\r\n      <div class=\"right\">\r\n        <nz-collapse [style]=\"{ border: 'none', 'background-color': '#fff'}\">\r\n          <nz-collapse-panel\r\n            [style]=\"{'margin-bottom': '24px', border: '1px solid #d9d9d9'}\"\r\n            [(nzActive)]=\"active4\"\r\n            [nzHeader]=\"zlTpl\">\r\n            <ng-template #zlTpl>\r\n            <span>资料<i nz-icon nzType=\"question-circle\" nzTheme=\"outline\"\r\n                       nz-tooltip [nzTooltipTitle]=\"tipszl\" [nzTooltipOverlayStyle]='{\"max-width\": \"770px\"}'\r\n                       class='font-question' nzTooltipTrigger='click' (click)='stopPropagation($event)'></i></span>\r\n            </ng-template>\r\n            <ng-template #tipszl>\r\n              <div>主动发送给学员学习的资源</div>\r\n            </ng-template>\r\n            <div class=\"list\" cdkDropList (cdkDropListDropped)=\"sectionDrop($event,'4')\">\r\n              <ng-container *ngIf=\"preview==='0'||handoutsMaterial?.length\">\r\n                <div class=\"list-item\" [id]='\"material\"+sectionIdx'\r\n                     *ngFor=\"let item of handoutsMaterial;let sectionIdx=index;\" cdkDrag>\r\n                  <div>\r\n              <span class=\"title\" [title]=\"item.attachmentName\">\r\n<!--                <nz-avatar [nzShape]=\"'square'\" [nzSize]=\"14\" [nzSrc]=\"getIcon(item.aattachmentExt)\"></nz-avatar>-->\r\n                &nbsp; <nz-avatar style=\"vertical-align: middle;\" [nzShape]=\"'circle'\" [nzSize]=\"20\"\r\n                                  [ngStyle]=\"{ 'background-color': '#34bbc7' }\"\r\n                                  [nzText]=\"'资'\"></nz-avatar>\r\n                {{ item.attachmentName }}\r\n              </span>\r\n                  </div>\r\n                  <div class=\"action-group\">\r\n                    <a nz-button nzType=\"link\" (click)=\"previewHandout(item)\">\r\n                      <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>预览\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" (click)=\"downLoad(item)\"\r\n                       *ngIf='item.attachmentPath&&item.attachmentPath.indexOf(\".\")>0'>\r\n                      <i nz-icon nzType=\"download\" nzTheme=\"outline\"></i>\r\n                      下载\r\n                    </a>\r\n                    <a nz-button nzType=\"link\" [style]=\"{ color: '#f53131'}\" (click)=\"delHandout(item)\"\r\n                       *ngIf='preview===\"0\"'>\r\n                      <i nz-icon nzType=\"delete\" nzTheme=\"outline\"></i>\r\n                      删除\r\n                    </a>\r\n                  </div>\r\n                </div>\r\n                <div class=\"add-section\" *ngIf='preview===\"0\"'>\r\n                  <div>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" [style]=\"{'margin-right': '10px'}\"\r\n                            (click)=\"callSchoolEnterpriseLib('read','102')\">阅读库调用\r\n                    </button>\r\n                    <button nz-button nzType=\"primary\" [nzSize]=\"'small'\" (click)=\"uploadHandout('102')\">本地上传</button>\r\n                  </div>\r\n                  <div></div>\r\n                </div>\r\n              </ng-container>\r\n              <span *ngIf=\"preview==='1'&&!handoutsMaterial?.length\">没有资料内容</span>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </div>\r\n    </nz-spin>\r\n  </div>\r\n</div>\r\n<!--保利威上传-->\r\n<ng-template #polywaymodal>\r\n  <form nz-form [formGroup]=\"polyway\">\r\n    <nz-form-item *ngIf=\"reset\">\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>视频ID</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"视频ID不能为空\">\r\n        <input nz-input type=\"text\" formControlName=\"videoUrl\" placeholder=\"请输入视频ID\"\r\n               (keyup.enter)=\"comfirmUpload('polyway')\"/>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>指导讲师</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"指导讲师不能为空\">\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择指导讲师\" formControlName=\"authorId\">\r\n          <nz-option [nzLabel]=\"item.name\" [nzValue]=\"item.id\" *ngFor='let item of teacherList;'></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>视频名字</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"attachmentNameTpl\" style='max-width: 316px;'>\r\n        <input nz-input type=\"text\" formControlName=\"attachmentName\" placeholder=\"请输入视频名字\"\r\n               (keyup.enter)=\"comfirmUpload('polyway')\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin:5px 0 0 10px;\"\r\n            [style.color]='polyway.controls.attachmentName.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{polyway.value.attachmentName.length}}/50</span>\r\n      <ng-template #attachmentNameTpl let-control>\r\n        <div *ngIf=\"control.hasError('required')\">课程名称不能为空</div>\r\n        <div *ngIf=\"control.hasError('maxlength')\">课程名称不能超过50个字符</div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>视频标签</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"视频标签不能为空\">\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择视频标签\" formControlName=\"videoType\">\r\n          <nz-option nzLabel=\"主要\" nzValue=\"1\"></nz-option>\r\n          <nz-option nzLabel=\"冲刺\" nzValue=\"2\"></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item *ngIf=\"reset\">\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>排序</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <nz-input-number [nzStep]=\"1\" formControlName=\"seq\" [nzMin]='1' (keyup.enter)=\"comfirmUpload('polyway')\"\r\n        ></nz-input-number>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n</ng-template>\r\n<!--本地上传-->\r\n<ng-template #localvideomodal>\r\n  <form nz-form [formGroup]=\"localVideo\">\r\n    <nz-form-item *ngIf=\"reset\">\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>视频</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzErrorTip=\"请上传视频\">\r\n        <nz-spin [nzSpinning]=\"loading\"\r\n                 [nzDelay]=\"0\">\r\n          <qkc-upload\r\n            [showUploadList]='{showPreviewIcon: true,showRemoveIcon: true,showDownloadIcon: false}'\r\n            [isPolyway]='true'\r\n            (optsChange)='compltedUpload()'\r\n            limit=\"1\"\r\n            listType=\"picture-card\"\r\n            acceptType=\"flv,avi,mpg,mp4,wmv,mov,3gp,.asf\"\r\n            formControlName=\"videoUrl\">\r\n            <i nz-icon nzType=\"upload\" style='font-size:20px;'></i>\r\n          </qkc-upload>\r\n          <div class='desc'>\r\n            支持格式flv,avi,mpg,mp4,wmv,mov,3gp,.asf等\r\n          </div>\r\n          <div class='desc'>\r\n            (本地上传到保利威的视频需要经过保利威审核后才能正常播放)\r\n          </div>\r\n        </nz-spin>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>视频标签</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"视频标签不能为空\">\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择视频标签\" formControlName=\"videoType\">\r\n          <nz-option nzLabel=\"主要\" nzValue=\"1\">主要</nz-option>\r\n          <nz-option nzLabel=\"冲刺\" nzValue=\"2\">冲刺</nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>视频名字</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"attachmentNameTplLocal\" style='max-width: 316px;'>\r\n        <input nz-input type=\"text\" formControlName=\"attachmentName\" placeholder=\"请输入视频名字\"\r\n               (keyup.enter)=\"comfirmUpload('localVideo')\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin:5px 0 0 10px;\"\r\n            [style.color]='localVideo.controls.attachmentName.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{localVideo.value.attachmentName.length}}/50</span>\r\n      <ng-template #attachmentNameTplLocal let-control>\r\n        <div *ngIf=\"control.hasError('required')\">课程名称不能为空</div>\r\n        <div *ngIf=\"control.hasError('maxlength')\">课程名称不能超过50个字符</div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>指导讲师</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"指导讲师不能为空\">\r\n        <nz-spin [nzSpinning]=\"instructorLoading\" [nzDelay]=\"0\">\r\n          <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择指导讲师\" formControlName=\"authorId\">\r\n            <nz-option [nzLabel]=\"item.name\" [nzValue]=\"item.id\" *ngFor='let item of teacherList;'></nz-option>\r\n          </nz-select>\r\n        </nz-spin>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item *ngIf=\"reset\">\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>排序</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <nz-input-number [nzStep]=\"1\" formControlName=\"seq\" [nzMin]='1' (keyup.enter)=\"comfirmUpload('localVideo')\"\r\n        ></nz-input-number>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n</ng-template>\r\n<!--新增考试-->\r\n<ng-template #addExam>\r\n  <form nz-form [formGroup]=\"addExamFrom\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>任务名称</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"examNameTpl\">\r\n        <input nz-input type=\"text\" formControlName=\"missionName\" placeholder=\"请输入任务名称\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin:5px 0 0 10px;display: inline-block;\"\r\n            [style.color]='addExamFrom.controls.missionName.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{addExamFrom.value.missionName.length}}/50</span>\r\n      <ng-template #examNameTpl let-control>\r\n        <div *ngIf=\"control.hasError('required')\">\r\n          任务名称不能为空\r\n        </div>\r\n        <div *ngIf=\"control.hasError('maxlength')\">{{'任务名称不能超过50个字符'}}</div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>组卷方式</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"组卷方式不能为空\">\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择组卷方式\" formControlName=\"formingMethod\">\r\n          <nz-option nzLabel=\"选题/录题组卷\" [nzValue]=\"1\"></nz-option>\r\n          <nz-option nzLabel=\"题型难度随机组卷\" [nzValue]=\"2\"></nz-option>\r\n          <nz-option nzLabel=\"知识点难度抽题组卷\" [nzValue]=\"3\"></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>子题库</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"子题库不能为空\">\r\n        <nz-spin [nzSpinning]=\"searchLoad\" [nzDelay]=\"0\">\r\n          <nz-tree-select\r\n            style=\"width: 100%\"\r\n            [nzNodes]=\"exam\"\r\n            nzDefaultExpandAll\r\n            nzShowSearch\r\n            nzPlaceHolder=\"请选择子题库\"\r\n            formControlName=\"subQuestionBank\"\r\n            (ngModelChange)='subQuestionBankChange($event)'\r\n            [nzDropdownStyle]=\"{'max-height': '400px'}\"\r\n            [nzTreeTemplate]=\"nzTreeTemplate\"\r\n          >\r\n          </nz-tree-select>\r\n        </nz-spin>\r\n        <ng-template #nzTreeTemplate let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n        </ng-template>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n</ng-template>\r\n<!--编辑考试-->\r\n<ng-template #addExamExit>\r\n  <form nz-form [formGroup]=\"addExamFrom\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>任务名称</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"examNameTpl\">\r\n        <input nz-input type=\"text\" formControlName=\"missionName\" placeholder=\"请输入任务名称\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin:5px 0 0 10px;display: inline-block;\"\r\n            [style.color]='addExamFrom.controls.missionName.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{addExamFrom.value.missionName.length}}/50</span>\r\n      <ng-template #examNameTpl let-control>\r\n        <div *ngIf=\"control.hasError('required')\">\r\n          任务名称不能为空\r\n        </div>\r\n        <div *ngIf=\"control.hasError('maxlength')\">{{'任务名称不能超过50个字符'}}</div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n    <!--    <nz-form-item >-->\r\n    <!--      <nz-form-label [nzSpan]=\"5\" nzRequired>组卷方式</nz-form-label>-->\r\n    <!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"组卷方式不能为空\">-->\r\n    <!--        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择组卷方式\" formControlName=\"formingMethod\"-->\r\n    <!--                   [nzDisabled]='true'>-->\r\n    <!--          <nz-option nzLabel=\"选题/录题组卷\" [nzValue]=\"1\"></nz-option>-->\r\n    <!--          <nz-option nzLabel=\"题型难度随机组卷\" [nzValue]=\"2\"></nz-option>-->\r\n    <!--          <nz-option nzLabel=\"知识点难度抽题组卷\" [nzValue]=\"3\"></nz-option>-->\r\n    <!--        </nz-select>-->\r\n    <!--      </nz-form-control>-->\r\n    <!--    </nz-form-item>-->\r\n    <nz-form-item *ngIf='addExamFrom.value.subQuestionBank'>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>子题库</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"子题库不能为空\">\r\n        <nz-spin [nzSpinning]=\"searchLoad\" [nzDelay]=\"0\">\r\n          <nz-tree-select\r\n            [nzDisabled]='true'\r\n            style=\"width: 100%\"\r\n            [nzNodes]=\"exam\"\r\n            nzDefaultExpandAll\r\n            nzShowSearch\r\n            [nzAllowClear]='false'\r\n            nzPlaceHolder=\"请选择子题库\"\r\n            formControlName=\"subQuestionBank\"\r\n            (ngModelChange)='subQuestionBankChange($event)'\r\n            [nzDropdownStyle]=\"{'max-height': '400px'}\"\r\n            [nzTreeTemplate]=\"nzTreeTemplate\"\r\n          >\r\n          </nz-tree-select>\r\n        </nz-spin>\r\n        <ng-template #nzTreeTemplate let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n        </ng-template>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <div style='text-align:right;'>\r\n      <button nz-button nzType=\"primary\" (click)=\"jobCancel()\" style='margin-right:20px;'>取消</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"jumpQuestionBank('curExamData')\" style='margin-right:20px;'>跳转题库\r\n      </button>\r\n      <button nz-button nzType=\"primary\" (click)=\"examDetermine()\" style='margin-right:20px;'>确定</button>\r\n    </div>\r\n  </form>\r\n</ng-template>\r\n<!--新增作业-->\r\n<ng-template #jobSettings>\r\n  <form nz-form [formGroup]=\"addJobFromSeting\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>任务名称\r\n      </nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"jobNameTpl\">\r\n        <input nz-input placeholder=\"请输入任务名称\" formControlName=\"name\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin:5px 0 0 10px;display: inline-block;\"\r\n            [style.color]='addJobFromSeting.controls.name.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{addJobFromSeting.value.name.length}}/50</span>\r\n      <ng-template #jobNameTpl let-control>\r\n        <div *ngIf=\"control.hasError('required')\">\r\n          任务名称不能为空\r\n        </div>\r\n        <div *ngIf=\"control.hasError('maxlength')\">{{'任务名称不能超过50个字符'}}</div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>任务类型\r\n      </nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"任务类型不能为空\">\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择任务类型\" formControlName=\"taskForm\">\r\n          <nz-option nzLabel=\"课前\" nzValue=\"0\"></nz-option>\r\n          <nz-option nzLabel=\"课中\" nzValue=\"1\"></nz-option>\r\n          <nz-option nzLabel=\"课后\" nzValue=\"2\"></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>子题库</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"子题库不能为空\">\r\n        <nz-tree-select\r\n          style=\"width: 100%\"\r\n          [nzNodes]=\"exercise\"\r\n          nzDefaultExpandAll\r\n          nzShowSearch\r\n          nzPlaceHolder=\"请选择子题库\"\r\n          formControlName=\"subQuestionBank\"\r\n          (ngModelChange)='execrisesSubQuestionBankChange($event)'\r\n          [nzDropdownStyle]=\"{'max-height': '400px'}\"\r\n          [nzTreeTemplate]=\"nzTreeTemplateSubQuestionBank\"\r\n        >\r\n        </nz-tree-select>\r\n        <ng-template #nzTreeTemplateSubQuestionBank let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n        </ng-template>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n</ng-template>\r\n<!--编辑作业-->\r\n<ng-template #jobSettingsEdit>\r\n  <form nz-form [formGroup]=\"addJobFromSeting\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>任务名称\r\n      </nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"jobNameTpl\">\r\n        <input nz-input placeholder=\"请输入任务名称\" formControlName=\"name\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin:5px 0 0 10px;display: inline-block;\"\r\n            [style.color]='addJobFromSeting.controls.name.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{addJobFromSeting.value.name.length}}/50</span>\r\n      <ng-template #jobNameTpl let-control>\r\n        <div *ngIf=\"control.hasError('required')\">\r\n          任务名称不能为空\r\n        </div>\r\n        <div *ngIf=\"control.hasError('maxlength')\">{{'任务名称不能超过50个字符'}}</div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>任务类型\r\n      </nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"任务类型不能为空\">\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择任务类型\" formControlName=\"taskForm\">\r\n          <nz-option nzLabel=\"课前\" nzValue=\"0\"></nz-option>\r\n          <nz-option nzLabel=\"课中\" nzValue=\"1\"></nz-option>\r\n          <nz-option nzLabel=\"课后\" nzValue=\"2\"></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <!--    <nz-form-item>-->\r\n    <!--      <nz-form-label [nzSpan]=\"5\" nzRequired>子题库</nz-form-label>-->\r\n    <!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"子题库不能为空\">-->\r\n    <!--        <nz-tree-select-->\r\n    <!--          [nzDisabled]='true'-->\r\n    <!--          [nzAllowClear]='false'-->\r\n    <!--          style=\"width: 100%\"-->\r\n    <!--          [nzNodes]=\"exercise\"-->\r\n    <!--          nzPlaceHolder=\"请选择子题库\"-->\r\n    <!--          formControlName=\"subQuestionBank\"-->\r\n    <!--          (ngModelChange)='execrisesSubQuestionBankChange($event)'-->\r\n    <!--          [nzDropdownStyle]=\"{'max-height': '400px'}\"-->\r\n    <!--          [nzTreeTemplate]=\"nzTreeTemplateSubQuestionBank\"-->\r\n    <!--        >-->\r\n    <!--        </nz-tree-select>-->\r\n    <!--        <ng-template #nzTreeTemplateSubQuestionBank let-node let-origin=\"origin\">-->\r\n    <!--            <span class=\"custom-node\">-->\r\n    <!--              <span *ngIf=\"!node.isLeaf\">-->\r\n    <!--                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>-->\r\n    <!--                <span class=\"folder-name\">{{ node.title }}</span>-->\r\n    <!--              </span>-->\r\n    <!--              <span *ngIf=\"node.isLeaf\">-->\r\n    <!--                <i nz-icon nzType=\"file\"></i>-->\r\n    <!--                <span class=\"file-name\">{{ node.title }}</span>-->\r\n    <!--              </span>-->\r\n    <!--            </span>-->\r\n    <!--        </ng-template>-->\r\n    <!--      </nz-form-control>-->\r\n    <!--    </nz-form-item>-->\r\n    <div style='text-align:right;'>\r\n      <button nz-button nzType=\"primary\" (click)=\"jobCancel()\" style='margin-right:20px;'>取消</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"jumpQuestionBank('curJobData')\" style='margin-right:20px;'>跳转题库\r\n      </button>\r\n      <button nz-button nzType=\"primary\" (click)=\"jobDetermine()\" style='margin-right:20px;'>确定</button>\r\n    </div>\r\n  </form>\r\n</ng-template>\r\n<!--试卷调用-->\r\n<nz-modal [(nzVisible)]=\"examListPreview\" (nzOnCancel)=\"examListPreview=false;examSubQuestionBankExam=[]\" nzTitle='选择试卷'\r\n          nzWidth='1000' [nzFooter]='null' [nzBodyStyle]='{maxHeight:\"550px\"}'>\r\n  <div class='header'>\r\n    <div class='header-container wcl'>\r\n      <div class='header-item w31'>\r\n        <nz-select nzPlaceHolder=\"请选择查询关键字\" [(ngModel)]=\"queryKeywords\" (ngModelChange)=\"queryKeywordsChange()\"\r\n                   style=';width:150px;'>\r\n          <nz-option nzValue=\"1\" nzLabel=\"试卷ID\"></nz-option>\r\n          <nz-option nzValue=\"2\" nzLabel=\"试卷名称\"></nz-option>\r\n        </nz-select>\r\n        <input nz-input placeholder=\"名称搜索\" [(ngModel)]=\"testPaperName\" (keyup.enter)='getCallList(\"exam\")'\r\n               *ngIf=\"NumberS(queryKeywords)===2\"/>\r\n        <input nz-input placeholder=\"ID搜索\" [(ngModel)]=\"testPaperId\" (keyup.enter)='getCallList(\"exam\")'\r\n               *ngIf=\"NumberS(queryKeywords)===1\" type=\"number\" min=\"0\"/>\r\n      </div>\r\n      <div class='header-item w31'>\r\n        <label style='min-width:90px;line-height:32px'>组卷方式: </label>\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择组卷方式\" [(ngModel)]=\"selectedValue\"\r\n                   style='margin-right: 20px;width:calc(100% - 100px);flex:1'>\r\n          <nz-option nzValue=\"1\" nzLabel=\"选题组卷/录题组卷\"></nz-option>\r\n          <nz-option nzValue=\"2\" nzLabel=\"题型难度随机组卷\"></nz-option>\r\n          <nz-option nzValue=\"3\" nzLabel=\"知识点难度抽题组卷\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n      <div class='header-item mr0 w31'>\r\n        <label style='min-width:90px;line-height:32px'>子题库: </label>\r\n        <nz-spin [nzSpinning]=\"searchLoad\" [nzDelay]=\"0\">\r\n          <nz-tree-select\r\n            style=\"width: 178px\"\r\n            [nzNodes]=\"examSearch\"\r\n            nzDefaultExpandAll\r\n            nzShowSearch\r\n            nzMultiple\r\n            nzCheckable\r\n            [(ngModel)]=\"examSubQuestionBankExam\"\r\n            (ngModelChange)='subQuestionBankChangeSearch($event,\"examSearch\")'\r\n            [nzDropdownStyle]=\"{'max-height': '400px'}\"\r\n            [nzTreeTemplate]=\"nzTreeTemplateSearchExam\"\r\n          >\r\n          </nz-tree-select>\r\n        </nz-spin>\r\n        <ng-template #nzTreeTemplateSearchExam let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n        </ng-template>\r\n      </div>\r\n    </div>\r\n    <button nz-button nzType=\"primary\" style='margin-left:20px;vertical-align: top;' (click)=\"getCallList('exam')\">查询\r\n    </button>\r\n  </div>\r\n  <nz-spin [nzSpinning]=\"isCallLoading\" [nzDelay]=\"0\">\r\n    <nz-table #basicTable [nzData]=\"listOfData\" [nzScroll]='{ y: \"350px\" }' [nzFrontPagination]='false'\r\n              class='evaluation-table'>\r\n      <thead>\r\n      <tr>\r\n        <th nzWidth='100px'>试卷ID</th>\r\n        <th nzWidth='150px'>试卷名称</th>\r\n        <th nzWidth='100px'>试卷年份</th>\r\n        <th nzWidth='100px'>组卷方式</th>\r\n        <th nzWidth='100px'>试卷分类</th>\r\n        <th nzWidth='80px'>题量</th>\r\n        <th nzWidth='80px'>分数</th>\r\n        <th nzWidth='120px'>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr *ngFor=\"let data of basicTable.data\">\r\n        <td>{{ data.id }}</td>\r\n        <td>{{ data.name }}</td>\r\n        <td>{{ data.year }}</td>\r\n        <td>{{ getFormingMethod(data.groupWay) }}</td>\r\n        <td>{{ getType(data.type) }}</td>\r\n        <td>{{ data.number }}</td>\r\n        <td>{{ data.score }}</td>\r\n        <td>\r\n          <a (click)='transfer(data,false)' *ngIf='showTransfer(data,false)'>调用</a>\r\n          <a (click)='cancelCall(data,\"exam\")' *ngIf='showTransfer(data,true)'>取消调用</a>\r\n          <nz-divider nzType=\"vertical\"></nz-divider>\r\n          <a (click)='previewExaminationPaper(data)'>预览</a>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </nz-spin>\r\n</nz-modal>\r\n<!--作业调用-->\r\n<nz-modal [(nzVisible)]=\"exerciseListPreview\" (nzOnCancel)=\"exerciseListPreview=false;homeworkSubQuestionBank=[]\"\r\n          nzTitle='选择作业'\r\n          nzWidth='1000' [nzFooter]='null' [nzBodyStyle]='{maxHeight:\"550px\"}'>\r\n  <nz-spin [nzSpinning]=\"isCallLoading\" [nzDelay]=\"0\">\r\n    <div class='header'>\r\n      <div class='header-container'>\r\n        <div class='header-item'>\r\n          <nz-select nzPlaceHolder=\"请选择查询关键字\" [(ngModel)]=\"queryKeywordsJob\" (ngModelChange)=\"queryKeywordsJobChange()\"\r\n                     style=';width:150px;'>\r\n            <nz-option nzValue=\"1\" nzLabel=\"作业ID\"></nz-option>\r\n            <nz-option nzValue=\"2\" nzLabel=\"作业名称\"></nz-option>\r\n          </nz-select>\r\n          <input nz-input placeholder=\"名称搜索\" [(ngModel)]=\"testExerciseName\" (keyup.enter)='getCallList(\"exercise\")'\r\n                 *ngIf=\"NumberS(queryKeywordsJob)===2\"/>\r\n          <input nz-input placeholder=\"ID搜索\" [(ngModel)]=\"testExerciseId\" (keyup.enter)='getCallList(\"exercise\")'\r\n                 type=\"number\" min=\"0\"\r\n                 *ngIf=\"NumberS(queryKeywordsJob)===1\"/>\r\n        </div>\r\n        <div class='header-item'>\r\n          <label style='min-width:90px;line-height:32px'>子题库: </label>\r\n          <nz-spin [nzSpinning]=\"searchLoad\" [nzDelay]=\"0\">\r\n            <nz-tree-select\r\n              style=\"width: 250px\"\r\n              [nzNodes]=\"exerciseSearch\"\r\n              nzDefaultExpandAll\r\n              nzShowSearch\r\n              nzMultiple\r\n              nzCheckable\r\n              [(ngModel)]=\"homeworkSubQuestionBank\"\r\n              (ngModelChange)='subQuestionBankChangeSearch($event,\"exerciseSearch\")'\r\n              [nzDropdownStyle]=\"{'max-height': '400px'}\"\r\n              [nzTreeTemplate]=\"nzTreeTemplateSearchPractice\"\r\n            >\r\n            </nz-tree-select>\r\n          </nz-spin>\r\n          <ng-template #nzTreeTemplateSearchPractice let-node let-origin=\"origin\">\r\n            <span class=\"custom-node\">\r\n              <span *ngIf=\"!node.isLeaf\">\r\n                <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\"></i>\r\n                <span class=\"folder-name\">{{ node.title }}</span>\r\n              </span>\r\n              <span *ngIf=\"node.isLeaf\">\r\n                <i nz-icon nzType=\"file\"></i>\r\n                <span class=\"file-name\">{{ node.title }}</span>\r\n              </span>\r\n            </span>\r\n          </ng-template>\r\n        </div>\r\n        <button nz-button nzType=\"primary\" style=\"margin-left:20px;\" (click)=\"getCallList('exercise')\">查询</button>\r\n      </div>\r\n    </div>\r\n    <nz-table #basicTableExercise [nzData]=\"listOfDataExercise\" [nzScroll]='{ y: \"350px\" }' class='evaluation-table'\r\n              [nzFrontPagination]='false'>\r\n      <thead>\r\n      <tr>\r\n        <th nzWidth='100px'>作业ID</th>\r\n        <th nzWidth='150px'>作业名称</th>\r\n        <th nzWidth='80px'>题量</th>\r\n        <th nzWidth='80px'>分数</th>\r\n        <th nzWidth='120px'>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr *ngFor=\"let data of basicTableExercise.data\">\r\n        <td>{{ data.id }}</td>\r\n        <td>{{ data.name }}</td>\r\n        <td>{{ data.number }}</td>\r\n        <td>{{ data.score }}</td>\r\n        <td>\r\n          <a (click)='transfer(data,true)' *ngIf='showTransfer(data,false)'>调用</a>\r\n          <a (click)='cancelCall(data,\"exercise\")' *ngIf='showTransfer(data,true)'>取消调用</a>\r\n          <nz-divider nzType=\"vertical\"></nz-divider>\r\n          <a (click)='previewExaminationPaper(data)'>预览</a>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </nz-spin>\r\n</nz-modal>\r\n<!--问卷调用-->\r\n<nz-modal [(nzVisible)]=\"questionnairePreview\" (nzOnCancel)=\"closeQuestionnaire('questionnaireType')\" nzTitle='选择问卷'\r\n          nzWidth='1000' [nzFooter]='null' [nzBodyStyle]='{maxHeight:\"550px\"}'>\r\n  <div class='header'>\r\n    <div class='header-container'>\r\n      <div class='header-item'>\r\n        <label style='min-width:90px;line-height:32px'>关键词搜索: </label>\r\n        <input nz-input placeholder=\"支持名称搜索\" [(ngModel)]=\"questionnaireName\"/>\r\n      </div>\r\n      <div class='header-item'>\r\n        <label style='min-width:90px;line-height:32px'>问卷类型: </label>\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择问卷类型\" [(ngModel)]=\"questionnaireType\">\r\n          <nz-option nzLabel=\"总部测评\" nzValue=\"1\"></nz-option>\r\n          <nz-option nzLabel=\"校区测评\" nzValue=\"2\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n\r\n      <button nz-button nzType=\"primary\" (click)=\"questionnaireCall('questionnaireType')\">查询</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"newQuestionnaire('questionnaireType')\" style='margin-left: 50px'>\r\n        新增问卷\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <nz-spin [nzSpinning]=\"isCallLoading\" [nzDelay]=\"0\">\r\n    <nz-table #questionnaireTable [nzData]=\"listOfQuestionnaireData\" class='evaluation-table'\r\n              [nzScroll]='{ y: \"350px\" }'\r\n              [nzFrontPagination]='false'>\r\n      <thead>\r\n      <tr>\r\n        <th nzWidth='100px'>问卷ID</th>\r\n        <th nzWidth='150px'>问卷名称</th>\r\n        <th nzWidth='100px'>问卷类型</th>\r\n        <th nzWidth='100px'>问卷学科</th>\r\n        <th nzWidth='100px'>题量</th>\r\n        <th nzWidth='80px'>问卷状态</th>\r\n        <th nzWidth='120px'>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr *ngFor=\"let data of questionnaireTable.data\">\r\n        <td>{{ data.paperId }}</td>\r\n        <td>{{ data.name }}</td>\r\n        <td>{{ getQuestionnaireType(data.evaluateId) }}</td>\r\n        <td>{{ data.majorName }}</td>\r\n        <td>{{ data.questionNumber }}</td>\r\n        <td>{{ getEvaluationStatus(data.status) }}</td>\r\n        <td>\r\n          <a (click)='transferQuestionnaire(data,\"questionnaireType\")' *ngIf='showTransfer(data,false)'>调用</a>\r\n          <a (click)='cancelCall(data,\"questionnaireType\")' *ngIf='showTransfer(data,true)'>取消调用</a>\r\n          <nz-divider nzType=\"vertical\"></nz-divider>\r\n          <a (click)='previewExaminationQuestionnaire(data)'>预览</a>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </nz-spin>\r\n</nz-modal>\r\n<!--测评调用-->\r\n<nz-modal [(nzVisible)]=\"evaluationPreview\" nzTitle='选择测评'\r\n          nzWidth='1000' [nzFooter]='null' (nzOnCancel)=\"closeQuestionnaire('evaluationType')\"\r\n          [nzBodyStyle]='{maxHeight:\"550px\"}'>\r\n  <div class='header'>\r\n    <div class='header-container'>\r\n      <div class='header-item'>\r\n        <label style='min-width:90px;line-height:32px'>关键词搜索: </label>\r\n        <input nz-input placeholder=\"支持名称搜索\" [(ngModel)]=\"evaluationName\"/>\r\n      </div>\r\n      <div class='header-item'>\r\n        <label style='min-width:90px;line-height:32px'>测评类型: </label>\r\n        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择测评类型\" [(ngModel)]=\"evaluationType\">\r\n          <nz-option nzLabel=\"招生测评\" nzValue=\"1\"></nz-option>\r\n          <nz-option nzLabel=\"入学测评\" nzValue=\"2\"></nz-option>\r\n        </nz-select>\r\n      </div>\r\n      <button nz-button nzType=\"primary\" (click)=\"questionnaireCall('evaluationType')\">查询</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"newQuestionnaire('evaluationType')\" style='margin-left: 50px'>新增测评\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <nz-spin [nzSpinning]=\"isCallLoading\" [nzDelay]=\"0\">\r\n    <nz-table #evaluationTable [nzData]=\"listOfEvaluationData\" [nzScroll]='{ y: \"350px\" }' class='evaluation-table'\r\n              [nzFrontPagination]='false'>\r\n      <thead>\r\n      <tr>\r\n        <th nzWidth='100px'>测评ID</th>\r\n        <th nzWidth='150px'>测评名称</th>\r\n        <th nzWidth='100px'>测评类型</th>\r\n        <th nzWidth='100px'>测评学科</th>\r\n        <th nzWidth='100px'>题量</th>\r\n        <th nzWidth='80px'>测评状态</th>\r\n        <th nzWidth='120px'>操作</th>\r\n      </tr>\r\n      </thead>\r\n      <tbody>\r\n      <tr *ngFor=\"let data of evaluationTable.data\">\r\n        <td>{{ data.paperId }}</td>\r\n        <td>{{ data.name }}</td>\r\n        <td>{{ getEvaluationType(data.evaluateId) }}</td>\r\n        <td>{{ data.majorName }}</td>\r\n        <td>{{ data.questionNumber }}</td>\r\n        <td>{{ getEvaluationStatus(data.status) }}</td>\r\n        <td>\r\n          <a (click)='transferQuestionnaire(data,\"evaluationType\")' *ngIf='showTransfer(data,false)'>调用</a>\r\n          <a (click)='cancelCall(data,\"evaluationType\")' *ngIf='showTransfer(data,true)'>取消调用</a>\r\n          <nz-divider nzType=\"vertical\"></nz-divider>\r\n          <a (click)='previewExaminationQuestionnaire(data)'>预览</a>\r\n        </td>\r\n      </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </nz-spin>\r\n</nz-modal>\r\n<!--考试设置-->\r\n<nz-modal [(nzVisible)]=\"isVisible\" [nzMaskClosable]=\"false\" nzTitle=\"考试设置\" (nzOnCancel)=\"isVisible=false\">\r\n  <nz-spin [nzSpinning]=\"examSettingLoading\" [nzDelay]=\"0\">\r\n    <form nz-form [formGroup]=\"examSettingForm\">\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>考试时长</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"考试设置不能为空\">\r\n          <nz-input-number [nzMin]=\"1\" [nzStep]=\"1\"\r\n                           formControlName=\"examLength\" style='margin-right:10px'></nz-input-number>\r\n          分钟\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>及格分数</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"及格分数不能为空\">\r\n          <nz-input-number [nzMin]=\"1\" [nzStep]=\"1\"\r\n                           formControlName=\"passScore\" style='margin-right:10px'></nz-input-number>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>试卷类型</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"试卷类型不能为空\">\r\n          <nz-select formControlName=\"paperType\" (ngModelChange)=\"paperTypeChange($event)\">\r\n            <nz-option nzValue=\"1\" nzLabel=\"阶段考试\"></nz-option>\r\n            <nz-option nzValue=\"2\" nzLabel=\"单科考试\"></nz-option>\r\n            <nz-option nzValue=\"3\" nzLabel=\"模拟考试\"></nz-option>\r\n            <nz-option nzValue=\"4\" nzLabel=\"密押考试\"></nz-option>\r\n            <!--          <nz-option nzValue=\"5\" nzLabel=\"机考考试\"></nz-option>-->\r\n            <nz-option nzValue=\"6\" nzLabel=\"实操考试\"></nz-option>\r\n          </nz-select>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item *ngIf='examSettingForm.value.paperType===\"5\"'>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>机考类型</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"机考类型不能为空\">\r\n          <nz-select formControlName=\"computerType\">\r\n            <nz-option nzValue=\"1\" nzLabel=\"初级\"></nz-option>\r\n            <nz-option nzValue=\"2\" nzLabel=\"中级\"></nz-option>\r\n            <nz-option nzValue=\"3\" nzLabel=\"税务师\"></nz-option>\r\n          </nz-select>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>是否重考</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"是否重考不能为空\">\r\n          <nz-radio-group formControlName='isRedo'>\r\n            <label nz-radio nzValue=\"1\" nzDisabled>是</label>\r\n            <label nz-radio nzValue=\"0\" nzDisabled>否</label>\r\n          </nz-radio-group>\r\n          <div *ngIf='examSettingForm.value.paperType===\"6\"&&(examType===\"3\"||examType===\"2\")'\r\n               style='position:absolute;'>\r\n            补考按结课28天后遇到的10号开放权限，直到合格为止\r\n          </div>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <!--    <nz-form-item>-->\r\n      <!--      <nz-form-label [nzSpan]=\"5\" nzRequired>是否机考</nz-form-label>-->\r\n      <!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"是否机考不能为空\">-->\r\n      <!--        <nz-radio-group formControlName='isComputer'>-->\r\n      <!--          <label nz-radio nzValue=\"1\">是</label>-->\r\n      <!--          <label nz-radio nzValue=\"0\">否</label>-->\r\n      <!--        </nz-radio-group>-->\r\n      <!--      </nz-form-control>-->\r\n      <!--    </nz-form-item>-->\r\n\r\n      <!--    <nz-form-item>-->\r\n      <!--      <nz-form-label [nzSpan]=\"5\" nzRequired>有效时间</nz-form-label>-->\r\n      <!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"有效时间不能为空\">-->\r\n      <!--        <nz-date-picker formControlName=\"deadTime\"></nz-date-picker>-->\r\n      <!--      </nz-form-control>-->\r\n      <!--    </nz-form-item>-->\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>答题次数</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"答题次数不能为空\">\r\n          <nz-radio-group formControlName='answerTimes' [(ngModel)]='examSettingForm.value.answerTimes'\r\n                          (ngModelChange)='clearStatus(\"examSettingForm\")' [nzDisabled]='exerciseType ===\"2\" ?true:null'>\r\n            <label nz-radio [nzValue]=\"0\" >无限制</label>\r\n            <label nz-radio [nzValue]=\"1\" >\r\n              <nz-input-number [(ngModel)]=\"value\" [nzMin]=\"1\" [nzMax]=\"100\" [nzStep]=\"1\"\r\n                               [ngModelOptions]=\"{standalone: true}\" [disabled]='exerciseType ===\"2\" ?true:null'></nz-input-number>\r\n            </label>\r\n          </nz-radio-group>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>出成绩</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"是否出成绩不能为空\">\r\n          <nz-radio-group formControlName='resultWay'>\r\n            <label nz-radio nzValue=\"1\">交卷即出</label>\r\n          </nz-radio-group>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </form>\r\n  </nz-spin>\r\n  <div *nzModalFooter>\r\n    <button nz-button (click)=\"isVisible = false\">取消</button>\r\n    <button nz-button nzType=\"primary\" (click)=\"saveExamination()\" [nzLoading]='examSettingLoading'>确定</button>\r\n  </div>\r\n</nz-modal>\r\n<!--问卷设置-->\r\n<nz-modal [(nzVisible)]=\"isQuestionnaireVisible\" [nzMaskClosable]=\"false\" nzTitle=\"权限设置\"\r\n          (nzOnCancel)=\"isQuestionnaireVisible=false\">\r\n  <form nz-form [formGroup]=\"questionnairSettingForm\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>答题次数</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"答题次数不能为空\">\r\n        <nz-radio-group formControlName='answerTimes' [(ngModel)]='questionnairSettingForm.value.answerTimes'\r\n                        (ngModelChange)='clearStatus(\"questionnairSettingForm\")'>\r\n          <label nz-radio [nzValue]=\"0\">无限制</label>\r\n          <label nz-radio [nzValue]=\"1\">\r\n            <nz-input-number [(ngModel)]=\"answerTimesValue\" [nzMin]=\"1\" [nzMax]=\"100\" [nzStep]=\"1\"\r\n                             [ngModelOptions]=\"{standalone: true}\"></nz-input-number>\r\n          </label>\r\n        </nz-radio-group>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n  <div *nzModalFooter>\r\n    <button nz-button (click)=\"isQuestionnaireVisible = false\">取消</button>\r\n    <button nz-button nzType=\"primary\" (click)=\"saveQuestionnaire()\">确定</button>\r\n  </div>\r\n</nz-modal>\r\n<!--讲义关联-->\r\n<nz-modal [(nzVisible)]=\"visibleAssociate\" [nzMaskClosable]=\"false\" nzTitle=\"讲义资源关联\"\r\n          (nzOnCancel)=\"completebind()\" [nzFooter]='null' [nzBodyStyle]='{maxHeight:\"500px\",overflowY:\"auto\"}'>\r\n  <nz-spin [nzSpinning]=\"bindLoading\"\r\n           [nzDelay]=\"0\">\r\n    <div class='associate'>\r\n    <span style='float: left'>\r\n      主讲义（共{{this.totalPage}}页）\r\n    </span>\r\n      <span style='float: right;cursor: pointer' (click)='previewHandout(currentAssocate)'>\r\n      <i nz-icon nzType=\"eye\" nzTheme=\"outline\"></i>\r\n      预览\r\n    </span>\r\n    </div>\r\n    <div class='association-table' *ngFor='let itemArr of assocateClassLists;let i=index'>\r\n      <div style='margin-bottom: 10px;'>\r\n        {{'第' + itemArr[0].sectionSeq + '节  ' + itemArr[0].sectionName}}\r\n        <i nz-icon nzType=\"caret-right\" nzTheme=\"outline\" (click)='itemArr.expend=false' *ngIf='itemArr.expend'\r\n           style='cursor: pointer'></i>\r\n        <i nz-icon nzType=\"caret-down\" nzTheme=\"outline\" (click)='itemArr.expend=true' *ngIf='!itemArr.expend'\r\n           style='cursor: pointer'></i>\r\n      </div>\r\n      <div *ngFor='let item of itemArr;let j=index' [ngClass]='{\"h0\":itemArr.expend,\"association-list\":true}'>\r\n        <div class='list-item'>\r\n         <span class=\"associate-title\" [title]=\"item.name\">\r\n                     <nz-avatar style=\"vertical-align: middle;\" [nzShape]=\"'circle'\" [nzSize]=\"20\"\r\n                                [ngStyle]=\"{ 'background-color': getColor(item.taskType),marginTop:'-5px' }\"\r\n                                [nzText]=\"getText(item.taskType)\"></nz-avatar>\r\n           {{item.name}}\r\n         </span>\r\n          <nz-input-number [(ngModel)]=\"item.pageNum\" [nzMin]=\"1\" [nzMax]=\"1000000\" [nzStep]=\"1\" nzPlaceHolder='请输入页码'\r\n                           style='width:120px;float:right' (ngModelChange)='modelChangeDetect($event)'\r\n                           (nzFocus)='current = undefined' (nzBlur)='current = undefined'></nz-input-number>\r\n          <span style='min-width: 70px;float:right'>\r\n            <label\r\n              nz-checkbox\r\n              [nzDisabled]='(currentBindLength>=bingLimit&&(!assocateLists[i].pageNum))||(!item.pageNum)'\r\n              [(ngModel)]=\"item.isBindAssoicate\"\r\n              (ngModelChange)=\"isBindChange($event, item)\">\r\n             </label>\r\n             <button nz-button nzType=\"dashed\"\r\n                     (click)=\"getBlur(item)\"\r\n                     style='margin:0 10px'\r\n                     [disabled]='(currentBindLength>=bingLimit&&(!assocateLists[i].pageNum))||(!item.pageNum)||(assocateLists[i].pageNum===item.pageNum)'>{{'绑定'}}</button>\r\n         </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div *nzModalFooter>\r\n      <!--    <button nz-button (click)=\"visibleAssociate = false\">取消</button>-->\r\n      <button nz-button nzType=\"primary\" (click)=\"completebind()\">关闭</button>\r\n    </div>\r\n  </nz-spin>\r\n</nz-modal>\r\n<!--资源预览-->\r\n<app-resource-preview-modal [isPreviewpolyway]='isPreviewpolyway' [previewTitle]='previewTitle'\r\n                            [resourceUrl]='resourceUrl' *ngIf='previewStart'\r\n                            (closePreview)='closePreview()'></app-resource-preview-modal>\r\n","import {Component, Inject, OnInit, TemplateRef, ViewChild, ViewChildren} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {MenuService} from 'core/services/menu.service';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {UploadHandoutComponent} from '../upload-handout/upload-handout.component';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {CourseStructureTreeComponent, NodeChangeEvent} from '../course-structure-tree/course-structure-tree.component';\r\nimport {AliOssService} from 'core/services/ali-oss.service';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {KnowledgeManageService} from 'src/app/busi-services/knowledge-manag.service';\r\nimport {queryParam, ToolsUtil} from 'core/utils/tools.util';\r\nimport {environment} from 'src/environments/environment';\r\nimport {forkJoin, Observable, Subscriber, Subscription, timer} from 'rxjs';\r\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {LocalStorageUtil} from 'core/utils/localstorage.util';\r\nimport {hex_sha1} from 'core/utils/sha1';\r\nimport {NzSafeAny, NzSelectComponent, NzTreeNode} from 'ng-zorro-antd';\r\nimport {TrainManageService} from '@app/busi-services/train-manage.service';\r\nimport {SafeResourceUrl} from '@angular/platform-browser';\r\nimport {spaceValidator} from '@app/shared/validators/atr-validtors';\r\nimport {VideoImportComponent} from './video-import/video-import.component';\r\nimport {CallItem, HandoutItem, HttpResponseDataStandard, Json, Teacher, WjCallItem} from 'core/base/common';\r\nimport {NzTreeNodeOptions} from 'ng-zorro-antd/core/tree';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\nimport {DOCUMENT} from '@angular/common';\r\n\r\ndeclare const WebOfficeSDK;\r\n\r\n@Component({\r\n  selector: 'app-chapter-handout',\r\n  templateUrl: './chapter-handout.component.html',\r\n  styleUrls: ['./chapter-handout.component.less'],\r\n})\r\nexport class ChapterHandoutComponent implements OnInit {\r\n  //#region state\r\n  _PAGE_ID_ = 'MaterialCallResource';\r\n  active1 = true; // 默认全部展开即可\r\n  active2 = true;\r\n  active3 = true;\r\n  active4 = true;\r\n  listLoading = false;\r\n  hanoutLoading = false;\r\n  isStandard = false;\r\n  totalPage = 0;\r\n  handouts: HandoutItem[] = [];\r\n  taskList: Json[] = [];\r\n  curNode: NodeChangeEvent;\r\n  handoutsMaterial: HandoutItem[] = []; // 资料\r\n  handoutsLecture: HandoutItem[] = []; // 讲义\r\n  handoutsRecording: HandoutItem[] = []; // 录播\r\n  teacherList: Teacher[] = [];\r\n  modalFormRef: NzModalRef;\r\n  exam: Array<NzTreeNode | NzTreeNodeOptions> = []; // 试卷子题库数据\r\n  exercise: Array<NzTreeNode | NzTreeNodeOptions> = []; // 作业子题库数据\r\n  examSearch: Array<NzTreeNode | NzTreeNodeOptions> = []; // 试卷子题库数据搜索\r\n  exerciseSearch: Array<NzTreeNode | NzTreeNodeOptions> = []; // 作业子题库数据搜索\r\n  searchLoad = false;\r\n  examListPreview = false; // 试卷调用\r\n  exerciseListPreview = false; // 作业调用\r\n  listOfData: CallItem[] = [];  // 试卷调用列表\r\n  listOfDataExercise: CallItem[] = [];  // 作业调用列表\r\n  listOfQuestionnaireData: WjCallItem[] = [];\r\n  listOfEvaluationData: WjCallItem[] = [];\r\n  selectedValue = ''; //  试卷调用组卷方式\r\n  examSubQuestionBankExam = []; //  试卷调用子题库\r\n  examSubQuestionBankExamBak = []; //  试卷调用子题库\r\n  homeworkSubQuestionBank = []; //  作业调用子题库\r\n  homeworkSubQuestionBankBak = []; //  作业调用子题库\r\n  testPaperName = ''; // 试卷调用作业名\r\n  testPaperId = ''; // 试卷调用作业ID\r\n  testExerciseName = ''; // 作业调用试卷名\r\n  testExerciseId = ''; // 作业调用试卷ID\r\n  polywayId: string;\r\n  NumberS = Number;\r\n  isPreviewpolyway = false;\r\n  orgCode = ToolsUtil.getOrgCode();\r\n  value = 1; // 考试设置答题次数\r\n  answerTimesValue = 1; // 问卷设置答题次数\r\n  isVisible = false; // 考试设置\r\n  isQuestionnaireVisible = false; // 问卷设置\r\n  examSettingForm: FormGroup; // 考试设置\r\n  questionnairSettingForm: FormGroup; // 问卷设置\r\n  addJobFromSeting: FormGroup; // 新增作业\r\n  addExamFrom: FormGroup; // 新增考试\r\n  polyway: FormGroup; //  保利威id上传\r\n  localVideo: FormGroup; // 保利威本地上传\r\n  visibleAssociate = false;\r\n  currentAssocate: HandoutItem;\r\n  assocateList = [];\r\n  current: number; // 实时记录页码\r\n  tokenObj = LocalStorageUtil.getTkToken();\r\n  currentExam: Json = {\r\n    id: ''\r\n  }; // 考试设置当前任务数据\r\n  currentQuestionnair: any = {\r\n    id: ''\r\n  }; // 问卷设置当前任务数据\r\n  currentBindLength = 0;\r\n  courseId = '';\r\n  preview = '0';\r\n  exerciseType = '1';\r\n  coursePacketId = '';\r\n  professionId = '';\r\n  title: string;\r\n  status: '0' | '1';\r\n  auditStatus: '0' | '1' | '2' | '3' | '99';\r\n  lessonCount = 1;\r\n  isSmart: '0' | '1' = '0';\r\n  code: string;\r\n  teachType: '11' | '12' | '21' | '22';\r\n  assocateLists = [];\r\n  assocateClassLists = [];\r\n  defaultSection: Json;\r\n  defaultExpandedKeys = [];\r\n  examType = '1';\r\n  reset = true;\r\n  resourceUrl: SafeResourceUrl = '';\r\n  questionnairePreview = false;\r\n  evaluationPreview = false;\r\n  questionnaireType: string;  // 问卷\r\n  questionnaireName: string;\r\n  evaluationType: string;  // 测评\r\n  evaluationName: string;\r\n  isCallLoading = false; // 作业/考试调用中\r\n  loading = false; // 本地上传\r\n  examSettingLoading = false; // 考试设置\r\n  bindLoading = false; // 绑定任务\r\n  instructorLoading = false; // 指导讲师\r\n  trainLoading = false; // 实训预览\r\n  queryKeywords = '1';\r\n  queryKeywordsJob = '1';\r\n  previewTitle = '';\r\n  previewStart = false;\r\n  limitTask = 1000000;\r\n  bingLimit = 1000000;\r\n  wps;\r\n  wpsApplication;\r\n  stack;\r\n  associateing = {};\r\n  private modalRef: NzModalRef<null>; // 作业修改弹框\r\n  private curJobData: HandoutItem = {}; // 当前作业数据\r\n  private curExamData: HandoutItem = {}; // 当前考试数据\r\n  @ViewChild('polywaymodal') polywayModal: TemplateRef<null>;\r\n  @ViewChild('localvideomodal') localVideoModal: TemplateRef<null>;\r\n  @ViewChild('addExam') addExam: TemplateRef<null>;\r\n  @ViewChild('addExamExit') addExamExit: TemplateRef<null>;\r\n  @ViewChild('jobSettings') jobSettings: TemplateRef<null>;\r\n  @ViewChild('jobSettingsEdit') jobSettingsEdit: TemplateRef<null>;\r\n  @ViewChild('questionnaire') questionnaire: TemplateRef<null>;\r\n  @ViewChildren(NzSelectComponent) nzSelects: NzSelectComponent;\r\n  @ViewChild('tree') tree: CourseStructureTreeComponent;\r\n\r\n  //#endregion\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private route: ActivatedRoute,\r\n    private menuService: MenuService,\r\n    private nzMesService: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private aliOssService: AliOssService,\r\n    private modalService: NzModalService,\r\n    private knowledgeManageService: KnowledgeManageService,\r\n    private trainManageService: TrainManageService,\r\n    private courseMgService: CourseManageService,\r\n    private statisticsLogService: StatisticsLogService,\r\n    @Inject(DOCUMENT) private doc: Document\r\n  ) {\r\n    // 处理章节点击回显\r\n    const currentSession = SessionStorageUtil.getSelection();\r\n    if (currentSession) {\r\n      this.defaultSection = JSON.parse(currentSession);\r\n    }\r\n    const currentChapter = SessionStorageUtil.getChapter();\r\n    if (currentChapter) {\r\n      this.defaultExpandedKeys = [currentChapter];\r\n    }\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initParams();\r\n    this.initFrom();\r\n  }\r\n\r\n  /**\r\n   * 考试设置回显\r\n   * @param item HandoutItem\r\n   */\r\n  examSetting(item: HandoutItem) {\r\n    if (item.taskType === '4') {\r\n      this.currentExam = item;\r\n      this.getExamination();\r\n    } else {\r\n      this.questionnaireSetting(item);\r\n    }\r\n  }\r\n\r\n  getExamType(type) {\r\n    switch (String(type)) {\r\n      case '1' :\r\n        return '【阶段考试】';\r\n      case '2' :\r\n        return '【单科考试】';\r\n      case '3' :\r\n        return '【模拟考试】';\r\n      case '4' :\r\n        return '【密押考试】';\r\n      case '5' :\r\n        return '【机考考试】';\r\n      case '6' :\r\n        return '【实操考试】';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 问卷设置回显\r\n   * @param item 问卷Item\r\n   */\r\n  questionnaireSetting(item: HandoutItem) {\r\n    this.currentQuestionnair = item;\r\n    this.courseMgService.getExamination(item.id).subscribe(res => {\r\n      if (res.status === 200) {\r\n        const data = JSON.parse(JSON.stringify(res.data || {}));\r\n        if (data.answerTimes && Number(data.answerTimes) !== 0) {\r\n          this.answerTimesValue = data.answerTimes;\r\n          this.questionnairSettingForm.patchValue({\r\n            answerTimes: 1\r\n          });\r\n        } else {\r\n          this.questionnairSettingForm.patchValue({\r\n            answerTimes: 0\r\n          });\r\n          this.answerTimesValue = undefined;\r\n        }\r\n        // tslint:disable-next-line:forin\r\n        for (const i in this.questionnairSettingForm.controls) {\r\n          this.questionnairSettingForm.controls[i].markAsUntouched();\r\n          this.questionnairSettingForm.controls[i].markAsPristine();\r\n          this.questionnairSettingForm.controls[i].updateValueAndValidity();\r\n        }\r\n        this.isQuestionnaireVisible = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 考试设置保存\r\n   */\r\n  saveQuestionnaire() {\r\n    const {answerTimes} = this.questionnairSettingForm.value;\r\n    if (answerTimes === 1 && !(this.answerTimesValue)) {\r\n      this.nzMesService.warning('请输入你想要的答题次数');\r\n      return;\r\n    }\r\n    const params = {\r\n      answerTimes: Object.is(answerTimes, 1) ? String(this.answerTimesValue) : '0',\r\n      id: this.currentQuestionnair.id\r\n    };\r\n    this.courseMgService.examSetting(params).subscribe(res => {\r\n      if (res.status === 201) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: (this.currentQuestionnair.taskType === '6' ? '问卷' : '测评') + '任务权限设置更改',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n          content: JSON.stringify(params),\r\n        });\r\n        this.isQuestionnaireVisible = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 考试设置保存\r\n   */\r\n  saveExamination() {\r\n    if (this.examSettingForm.value.answerTimes === 1 && !(this.value)) {\r\n      this.nzMesService.warning('请输入你想要的答题次数');\r\n      return;\r\n    }\r\n    Object.keys(this.examSettingForm.controls).forEach(key => {\r\n      this.examSettingForm.controls[key].markAsDirty();\r\n      this.examSettingForm.controls[key].updateValueAndValidity();\r\n    });\r\n    if (this.examSettingForm.invalid) {\r\n      return;\r\n    }\r\n    this.examSettingLoading = true;\r\n    const params = JSON.parse(JSON.stringify(this.examSettingForm.value));\r\n    if (Object.is(params.answerTimes, 1)) {\r\n      params.answerTimes = String(this.value);\r\n    }\r\n    params.id = this.currentExam.id;\r\n    this.courseMgService.examSetting(params).subscribe(res => {\r\n      this.examSettingLoading = false;\r\n      if (res.status === 201) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '考试任务考试设置更改',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n          content: JSON.stringify(params),\r\n        });\r\n        this.isVisible = false;\r\n        this.getTaskList();\r\n      }\r\n    }, () => {\r\n      this.examSettingLoading = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 子题库树节点数据转换\r\n   * @param data 一个节点\r\n   * @param label 类型\r\n   */\r\n  conversionNode(data, label: 'exam' | 'exercise' | 'examSearch' | 'exerciseSearch') {\r\n    if (data.length) {\r\n      data.forEach((item, ii) => {\r\n        if (item.sublibraryModuleList && item.sublibraryModuleList.length) {\r\n          data[ii].children = item.sublibraryModuleList;\r\n          data[ii].children.forEach((child, iii) => {\r\n            data[ii].children[iii].title = child.name;\r\n            data[ii].children[iii].key = child.id;\r\n            data[ii].children[iii].isLeaf = true;\r\n          });\r\n        }\r\n        data[ii].title = item.name;\r\n        data[ii].key = item.code;\r\n        if (label === 'exam' || label === 'exercise') {\r\n          data[ii].disabled = true;\r\n          data[ii].selectable = false;\r\n        }\r\n        if (!item.sublibraryModuleList || !item.sublibraryModuleList.length) {\r\n          data[ii].isLeaf = true;\r\n        }\r\n      });\r\n    }\r\n    return data;\r\n  }\r\n\r\n  /**\r\n   * 章节拖动\r\n   * @param event CdkDragDrop\r\n   * @param type 数据类型\r\n   */\r\n  sectionDrop(event: CdkDragDrop<any[]>, type: '1' | '2' | '3' | '4') {\r\n    const params: any = [];\r\n    const successFn = (res: any) => {\r\n      if (res.status !== 201) {\r\n        this.nzMesService.error(res.message || '移动失败，未知错误！');\r\n        return;\r\n      }\r\n    };\r\n    const failFn = (error: any) => {\r\n      this.nzMesService.error(JSON.stringify(error));\r\n    };\r\n    if (type === '3') { // 任务\r\n      moveItemInArray(this.taskList, event.previousIndex, event.currentIndex);\r\n      this.taskList.forEach((ee, ii) => {\r\n        const obj: any = {};\r\n        obj.id = ee.id;\r\n        obj.seq = this.taskList.length - ii;\r\n        this.taskList[ii].seq = obj.seq;\r\n        params.push(obj);\r\n      });\r\n      this.courseMgService.saveOrUpdateTask(params).subscribe(successFn, failFn);\r\n    } else {\r\n      if (type === '1') { // 讲义\r\n        moveItemInArray(this.handoutsLecture, event.previousIndex, event.currentIndex);\r\n        this.handoutsLecture.forEach((ee, ii) => {\r\n          const obj: any = {};\r\n          obj.id = ee.id;\r\n          obj.seq = this.handoutsLecture.length - ii;\r\n          this.handoutsLecture[ii].seq = obj.seq;\r\n          params.push(obj);\r\n        });\r\n      } else if (type === '2') { // 录播\r\n        moveItemInArray(this.handoutsRecording, event.previousIndex, event.currentIndex);\r\n        this.handoutsRecording.forEach((ee, ii) => {\r\n          const obj: any = {};\r\n          obj.id = ee.id;\r\n          obj.seq = this.handoutsRecording.length - ii;\r\n          this.handoutsRecording[ii].seq = obj.seq;\r\n          params.push(obj);\r\n        });\r\n      } else {  // 资料\r\n        moveItemInArray(this.handoutsMaterial, event.previousIndex, event.currentIndex);\r\n        this.handoutsMaterial.forEach((ee, ii) => {\r\n          const obj: any = {};\r\n          obj.id = ee.id;\r\n          obj.seq = this.handoutsMaterial.length - ii;\r\n          this.handoutsMaterial[ii].seq = obj.seq;\r\n          params.push(obj);\r\n        });\r\n      }\r\n      this.courseMgService.saveOrUpdate(params).subscribe(successFn, failFn);\r\n    }\r\n    console.log(this.handoutsRecording);\r\n  }\r\n\r\n  /**\r\n   * 回显考试设置\r\n   */\r\n  getExamination() {\r\n    this.courseMgService.getExamination(this.currentExam.id).subscribe(res => {\r\n      if (res.status === 200) {\r\n        const data = JSON.parse(JSON.stringify(res.data || {}));\r\n        // if (res.data.deadTime) {\r\n        //   data.deadTime = new Date(res.data.deadTime);\r\n        // }\r\n        this.examType = data.examType;\r\n        const obj = {\r\n          id: data.id,\r\n          examLength: data.examLength || 0,\r\n          passScore: data.passScore || 0,\r\n          paperType: data.paperType || '1',\r\n          isRedo: (data.isRedo && String(data.isRedo)) || '0',\r\n          // isComputer: data.isComputer || '1',\r\n          computerType: data.computerType || '1',\r\n          // deadTime: data.deadTime || new Date(),\r\n          resultWay: data.resultWay || '1',\r\n          configType: data.configType || '1'\r\n        };\r\n        this.examSettingForm.patchValue(obj);\r\n        if (!Object.is(data.answerTimes, 0)) {\r\n          this.value = data.answerTimes;\r\n          this.examSettingForm.patchValue({\r\n            answerTimes: 1\r\n          });\r\n        } else {\r\n          this.value = undefined;\r\n          this.examSettingForm.patchValue({\r\n            answerTimes: 0\r\n          });\r\n        }\r\n        // tslint:disable-next-line:forin\r\n        for (const i in this.examSettingForm.controls) {\r\n          this.examSettingForm.controls[i].markAsUntouched();\r\n          this.examSettingForm.controls[i].markAsPristine();\r\n          this.examSettingForm.controls[i].updateValueAndValidity();\r\n        }\r\n        this.isVisible = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 指导讲师\r\n   */\r\n  private getTeacher(): void {\r\n    this.instructorLoading = true;\r\n    this.knowledgeManageService.getTeacher().subscribe(res => {\r\n      this.instructorLoading = false;\r\n      if (res.status === 200) {\r\n        this.teacherList = res.data;\r\n      }\r\n    }, () => {\r\n      this.instructorLoading = false;\r\n    });\r\n  }\r\n\r\n  private initFrom(): void {\r\n    // 考试设置\r\n    this.examSettingForm = this.fb.group({\r\n      id: [''],\r\n      examLength: [0, Validators.required],\r\n      passScore: [0, Validators.required],\r\n      // isComputer: ['1', Validators.required],\r\n      computerType: ['1'],\r\n      isRedo: ['0'],\r\n      paperType: ['1'],\r\n      answerTimes: [0, Validators.required],\r\n      // deadTime: [new Date(), Validators.required],\r\n      resultWay: ['1', Validators.required],\r\n      configType: ['1', Validators.required]\r\n    });\r\n    this.questionnairSettingForm = this.fb.group({\r\n      answerTimes: [1, Validators.required],\r\n    });\r\n    // 作业任务\r\n    this.addJobFromSeting = this.fb.group({\r\n      id: [this.courseId],\r\n      taskForm: ['2', Validators.required],\r\n      name: ['课后练习', [Validators.required, spaceValidator(), Validators.maxLength(50)]],\r\n      subQuestionBank: ['', [Validators.required]]\r\n    });\r\n    // 考试任务\r\n    this.addExamFrom = this.fb.group({\r\n      missionName: ['', [Validators.required, Validators.maxLength(50), spaceValidator()]],\r\n      formingMethod: [1, [Validators.required]],\r\n      subQuestionBank: ['', [Validators.required]]\r\n    });\r\n    this.polyway = this.fb.group({\r\n      videoUrl: ['', [Validators.required]],\r\n      authorId: ['', [Validators.required]],\r\n      videoType: ['1', [Validators.required]],\r\n      seq: [1, [Validators.required]],\r\n      id: [''],\r\n      attachmentName: ['', [Validators.required, Validators.maxLength(50), spaceValidator()]]\r\n    });\r\n    this.localVideo = this.fb.group({\r\n      videoUrl: [[], [Validators.required]],\r\n      authorId: ['', [Validators.required]],\r\n      videoType: ['1', [Validators.required]],\r\n      seq: [1, [Validators.required]],\r\n      id: [''],\r\n      attachmentName: ['', [Validators.required, Validators.maxLength(50), spaceValidator()]]\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 课包信息\r\n   */\r\n  private initParams(): void {\r\n    const {courseId, id, professionId, status, code, teachType, name, auditStatus, lessonCount, isSmart, preview, isUsed, exerciseType}\r\n      = SessionStorageUtil.getPacketInfo();\r\n    this.courseId = courseId;\r\n    this.coursePacketId = id;\r\n    this.professionId = professionId;\r\n    this.isStandard = isUsed > 0;\r\n    this.code = code;\r\n    this.teachType = teachType;\r\n    this.title = name;\r\n    this.status = status;\r\n    this.auditStatus = auditStatus;\r\n    this.lessonCount = Number(lessonCount);\r\n    this.isSmart = isSmart;\r\n    this.preview = preview;\r\n    this.exerciseType = exerciseType;\r\n  }\r\n\r\n  /**\r\n   * 任务列表\r\n   */\r\n  private getTaskList(): void {\r\n    this.listLoading = true;\r\n    const params = {\r\n      courseSectionId: this.curNode.data.id,\r\n    };\r\n    this.knowledgeManageService.getTaskList(params).subscribe(res => {\r\n      this.isCallLoading = false;\r\n      this.listLoading = false;\r\n      if (res.status === 200) {\r\n        if (res.data && res.data.length) {\r\n          this.taskList = res.data;\r\n          this.taskList.forEach((data, i) => {\r\n            this.taskList[i].isDownloadType = data.downloadType === '1' ? true : false;\r\n            this.taskList[i].isNeed = data.isNeed === '1' ? true : false;\r\n          });\r\n          this.taskList.sort((a, b) => a.seq > b.seq ? -1 : a.seq < b.seq ? 1 :\r\n            a.createTime > b.createTime ? -1 : a.createTime < b.createTime ? 1 : 0);\r\n        } else {\r\n          this.taskList = [];\r\n        }\r\n      }\r\n    }, () => {\r\n      this.listLoading = false;\r\n      this.isCallLoading = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 资料列表\r\n   */\r\n  private getHandoutFiles(): void {\r\n    if (!this.curNode) {\r\n      console.error('please select node');\r\n      return;\r\n    }\r\n    const id = this.curNode.data.id;\r\n    const source$ = this.courseMgService.sectionFileList_courseSectionFile(id);\r\n    if (source$) {\r\n      this.hanoutLoading = true;\r\n      source$.subscribe(res => {\r\n        this.hanoutLoading = false;\r\n        if (res.status !== 200) {\r\n          this.nzMesService.error(res.message);\r\n          return;\r\n        }\r\n        this.handouts = res.data;\r\n        this.handouts.forEach((data, i) => {\r\n          this.handouts[i].isDownloadType = data.downloadType === '1' ? true : false;\r\n        });\r\n        this.handoutsLecture = this.getTypeData('101');\r\n        this.handoutsMaterial = this.getTypeData('102');\r\n        this.handoutsRecording = this.getTypeData('103');\r\n      }, () => {\r\n        this.hanoutLoading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   *  过滤某一类型列表，比如讲义列表\r\n   * @param type 类型\r\n   */\r\n  private getTypeData(type: '101' | '102' | '103') {\r\n    const arr = this.handouts.filter(e => {\r\n      return e.type === type;\r\n    }).map(ee => {\r\n      const ext = ToolsUtil.getFileExt(ee.title);\r\n      ee.aattachmentExt = Object.is(ext, ee.title) ? '' : ext;\r\n      ee.attachmentName = ee.title || ee.attachmentName;\r\n      ee.attachmentPath = ee.attachmentPath;\r\n      ee.isMainFile = ee.isMainFile === '0' ? false : true;\r\n      return ee;\r\n    });\r\n    arr.sort((a, b) => a.seq > b.seq ? -1 : a.seq < b.seq ? 1 :\r\n      a.createTime > b.createTime ? -1 : a.createTime < b.createTime ? 1 : 0);\r\n    return arr;\r\n  }\r\n\r\n  /**\r\n   * 获取关联列表\r\n   */\r\n  private getssocateList() {\r\n    this.courseMgService.getssocateList(this.curNode.data.courseChapterId, this.currentAssocate.id).subscribe(res => {\r\n      if (res.status === 200) {\r\n        if (res.data && res.data.length) {\r\n          this.assocateList = res.data;\r\n          this.assocateList.forEach((e, i) => {\r\n            this.assocateList[i].isBindAssoicate = e.pageNum ? true : false;\r\n          });\r\n          this.assocateLists = JSON.parse(JSON.stringify(this.assocateList));\r\n          this.assocateClassLists = [];\r\n          let sectionSeq;\r\n          let innerArr = [];\r\n\r\n          this.assocateList.forEach((ee, ii) => {\r\n            if (!sectionSeq) {\r\n              sectionSeq = ee.sectionSeq;\r\n            }\r\n            if (sectionSeq === ee.sectionSeq) {\r\n              innerArr.push(ee);\r\n              if (ii === this.assocateList.length - 1) {\r\n                this.assocateClassLists.push(innerArr);\r\n              }\r\n            } else {\r\n              this.assocateClassLists.push(innerArr);\r\n              innerArr = [];\r\n              sectionSeq = ee.sectionSeq;\r\n              innerArr.push(ee);\r\n              if (ii === this.assocateList.length - 1) {\r\n                this.assocateClassLists.push(innerArr);\r\n              }\r\n            }\r\n          });\r\n\r\n          this.currentBindLength = res.data.filter(resP => {\r\n            return resP.pageNum;\r\n          }).length;\r\n        } else {\r\n          this.assocateList = [];\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 预览保利威\r\n   * @param handout HandoutItem\r\n   */\r\n  previewpolyway(handout: HandoutItem) {\r\n    this.previewTitle = '';\r\n    this.isPreviewpolyway = true;\r\n    this.resourceUrl = this.polywayId = handout.attachmentPath;\r\n    this.previewStart = true;\r\n  }\r\n\r\n  /**\r\n   * 预览讲义\r\n   * @param handout HandoutItem\r\n   */\r\n  previewHandout(handout: HandoutItem) {\r\n    if (handout.attachmentPath.indexOf('/') < 0) {\r\n      this.previewpolyway(handout);\r\n    } else {\r\n      this.previewTitle = handout.attachmentName;\r\n      this.isPreviewpolyway = false;\r\n      this.resourceUrl = handout.attachmentPath;\r\n      this.previewStart = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 本地上传\r\n   * @param type '101' | '102' | '104'\r\n   */\r\n  uploadHandout(type: '101' | '102' | '104') {\r\n    const obj: Partial<UploadHandoutComponent> = {\r\n      node: this.curNode,\r\n      type,\r\n    };\r\n    let field = '';\r\n    if (type === '104') {\r\n      field = 'learnSet-task-action';\r\n    } else if (type === '101') {\r\n      field = 'learnSet-lecture-action';\r\n    } else if (type === '102') {\r\n      field = 'learnSet-material-action';\r\n    } else {\r\n      field = 'learnSet-record-action';\r\n    }\r\n    if (type === '101') {\r\n      obj.seq = ToolsUtil.getMaxSeq(this.handoutsLecture);\r\n      obj.maxSize = 100;\r\n    } else if (type === '102') {\r\n      obj.seq = ToolsUtil.getMaxSeq(this.handoutsMaterial);\r\n    } else if (type === '104') {\r\n      obj.seq = ToolsUtil.getMaxSeq(this.taskList);\r\n    }\r\n    if (type === '104') {\r\n      obj.limit = this.limitTask - this.taskList.length;\r\n    }\r\n    const modalRef = this.nzModalService.create<UploadHandoutComponent>({\r\n      nzTitle: '本地上传',\r\n      nzContent: UploadHandoutComponent,\r\n      nzComponentParams: obj,\r\n      nzFooter: null,\r\n      nzMaskClosable: false\r\n    });\r\n\r\n    modalRef.afterClose.subscribe(params => {\r\n      if (params) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '本地上传',\r\n          actionCode: STATISTICALRULES.packetInfo[field].addCode,\r\n          content: JSON.stringify(params),\r\n        });\r\n        this.getHandoutFiles();\r\n        this.getTaskList();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 点击章节\r\n   * @param node 树节点\r\n   */\r\n  nodeChange(node: NodeChangeEvent) {\r\n    SessionStorageUtil.setChapter(node.data.courseChapterId);\r\n    SessionStorageUtil.setSelection(node.data);\r\n    this.curNode = node;\r\n    this.getHandoutFiles();\r\n    this.getTaskList();\r\n  }\r\n\r\n  // param.taskType = 2; // 任务类型：阅读任务(0)、案例任务(1)、作业任务(2)、实训任务(3)、考试任务(4)、实战任务(5)、问卷(6)、测评(7)\r\n  getDescType(param) {\r\n    return [\r\n      '阅读任务',\r\n      '案例任务',\r\n      '作业任务',\r\n      '实训任务',\r\n      '考试任务',\r\n      '实战任务',\r\n      '问卷',\r\n      '测评',\r\n    ][param];\r\n  }\r\n\r\n  /**\r\n   * 删除讲义\r\n   * @param handout  HandoutItem\r\n   * @param task  是否任务\r\n   */\r\n  delHandout(handout: HandoutItem, task?: boolean) {\r\n    this.nzModalService.confirm({\r\n      nzTitle: '警告',\r\n      nzContent: `确定要删除“${handout.attachmentName ? handout.attachmentName : handout.name}”吗？`,\r\n      nzOnOk: () => {\r\n        return new Promise((resolve) => {\r\n          const source$ = task ?\r\n            this.courseMgService.del_courseSectionFileTask(handout.id) : this.courseMgService.del_courseSectionFile(handout.id);\r\n          source$.subscribe(res => {\r\n            if (res.status !== 204) {\r\n              this.nzMesService.error(res.message);\r\n              resolve(false);\r\n              return;\r\n            }\r\n            if (task) { // 更新seq\r\n              this.statisticsLogService.statisticsPacketInfoLog({\r\n                name: '删除' + this.getDescType(handout.taskType),\r\n                actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].delCode,\r\n                content: handout.id,\r\n              });\r\n              const params = [];\r\n              const successFn = (resT: any) => {\r\n                if (resT.status !== 201) {\r\n                  this.nzMesService.error(resT.message);\r\n                  return;\r\n                }\r\n              };\r\n              const failFn = (error: any) => {\r\n                this.nzMesService.error(JSON.stringify(error));\r\n              };\r\n              this.taskList.filter(w => w.id !== handout.id).forEach((ee, ii) => {\r\n                const obj: any = {};\r\n                obj.id = ee.id;\r\n                obj.seq = ii;\r\n                params.push(obj);\r\n              });\r\n              if (params.length) {\r\n                this.courseMgService.saveOrUpdateTask(params).subscribe(successFn, failFn);\r\n              }\r\n            } else {\r\n              const type = handout.type;\r\n              let desc;\r\n              let field;\r\n              if (type === '101') {\r\n                desc = '讲义';\r\n                field = 'learnSet-lecture-action';\r\n              } else if (type === '103') {\r\n                desc = '录播视频';\r\n                field = 'learnSet-record-action';\r\n              } else if (type === '102') {\r\n                desc = '资料';\r\n                field = 'learnSet-material-action';\r\n              }\r\n              this.statisticsLogService.statisticsPacketInfoLog({\r\n                name: '删除' + desc,\r\n                actionCode: STATISTICALRULES.packetInfo[field].delCode,\r\n                content: handout.id,\r\n              });\r\n\r\n            }\r\n            if (handout.isMainFile) {\r\n              this.getTaskList();\r\n              this.getHandoutFiles();\r\n            } else {\r\n              task ? this.getTaskList() : this.getHandoutFiles();\r\n            }\r\n            resolve(true);\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 设置主讲义\r\n   * @param ifMainFile boolean\r\n   * @param item HandoutItem\r\n   */\r\n  mainFileChange(ifMainFile: boolean, item: HandoutItem) {\r\n    const work = [this.courseMgService.modifySectionResource({id: item.id, isMainFile: ifMainFile ? '1' : '0'})];\r\n    if (ifMainFile) { // 设置主讲义去除其他主讲义\r\n      this.handoutsLecture.every((ee, ii) => {\r\n        if (ee.isMainFile && ee.id !== item.id) {\r\n          const param = {id: ee.id, isMainFile: '0'};\r\n          work.push(this.courseMgService.modifySectionResource(param));\r\n          this.handoutsLecture[ii].isMainFile = false;\r\n        } else {\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n    forkJoin(work).subscribe(res => {\r\n      if (res[0].status !== 201) {\r\n        this.nzMesService.error(res[0].message);\r\n        return;\r\n      }\r\n      this.statisticsLogService.statisticsPacketInfoLog({\r\n        name: '主讲义更改',\r\n        actionCode: STATISTICALRULES.packetInfo['learnSet-lecture-action'].modify,\r\n        content: JSON.stringify({id: item.id, isMainFile: ifMainFile ? '1' : '0'}),\r\n      });\r\n      item.isMainFile = ifMainFile;\r\n      this.getTaskList();\r\n    }, err => {\r\n      this.nzMesService.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n\r\n  /**\r\n   * 是否自评修改\r\n   * @param gradeType 1:学生自评 ; 2:老师批改\r\n   * @param handout  HandoutItem\r\n   */\r\n  gradeTypeChange(gradeType: '1' | '2', handout: HandoutItem) {\r\n    const params = {id: handout.id, gradeType, needTeacherProc: gradeType === '1' ? 0 : 1};\r\n    this.courseMgService.modifySectionResourceTask(params).subscribe(res => {\r\n      if (res.status !== 201) {\r\n        this.nzMesService.error(res.message);\r\n        return;\r\n      }\r\n      this.statisticsLogService.statisticsPacketInfoLog({\r\n        name: '作业任务自评更改',\r\n        actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n        content: JSON.stringify(params),\r\n      });\r\n      handout.gradeType = gradeType;\r\n    }, err => {\r\n      this.nzMesService.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 是否需评分\r\n   * @param isGrade 0 :不评分| 1 需评分\r\n   * @param handout HandoutItem\r\n   */\r\n  isGradeChange(isGrade: '' | '0' | '1', handout: HandoutItem) {\r\n    const params = {id: handout.id, isGrade};\r\n    this.courseMgService.modifySectionResourceTask(params).subscribe(res => {\r\n      if (res.status !== 201) {\r\n        this.nzMesService.error(res.message);\r\n        return;\r\n      }\r\n      this.statisticsLogService.statisticsPacketInfoLog({\r\n        name: '案例任务是否评分更改',\r\n        actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n        content: JSON.stringify(params),\r\n      });\r\n      handout.isGrade = isGrade;\r\n    }, err => {\r\n      this.nzMesService.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 能否下载\r\n   * @param downloadType  0 :不可以 1 可以\r\n   * @param handout HandoutItem\r\n   * @param isTask boolean\r\n   */\r\n  downloadChange(downloadType: '0' | '1', handout: HandoutItem, isTask?: boolean) {\r\n    const params = {id: handout.id, downloadType};\r\n    let source$;\r\n    if (isTask) {\r\n      source$ = this.courseMgService.modifySectionResourceTask(params);\r\n    } else {\r\n      source$ = this.courseMgService.modifySectionResource(params);\r\n    }\r\n    source$.subscribe(res => {\r\n      if (res.status !== 201) {\r\n        this.nzMesService.error(res.message);\r\n        return;\r\n      }\r\n      if (isTask) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '阅读任务能否下载更改',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n          content: JSON.stringify(params),\r\n        });\r\n      } else {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '讲义能否下载更改',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-lecture-action'].modify,\r\n          content: JSON.stringify(params),\r\n        });\r\n      }\r\n      handout.downloadType = downloadType;\r\n    }, err => {\r\n      this.nzMesService.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 视频上传\r\n   * @param label 本地/保利威\r\n   * @param reset 新增/修改\r\n   * @param data  HandoutItem\r\n   */\r\n  videoUpload(label: 'localVideo' | 'polyway', reset = true, data?: HandoutItem) {\r\n    this.reset = reset;\r\n    this.getTeacher();\r\n    // tslint:disable-next-line:forin\r\n    for (const i in this[label].controls) {\r\n      this[label].controls[i].markAsUntouched();\r\n      this[label].controls[i].markAsPristine();\r\n      this[label].controls[i].updateValueAndValidity();\r\n    }\r\n    if (reset) {\r\n      this[label].patchValue({\r\n        seq: (this.handoutsRecording[0] && this.handoutsRecording[0].seq) ? (this.handoutsRecording[0].seq + 1) : 1\r\n      });\r\n    }\r\n    this.modalFormRef = this.modalService.create({\r\n      nzTitle: this.getLabel(label, reset),\r\n      nzContent: this[label + 'Modal'],\r\n      nzMaskClosable: false,\r\n      nzWrapClassName: 'vertical-center-modal',\r\n      nzCancelText: '取消',\r\n      nzOkText: '保存',\r\n      nzOnOk: (e) => {\r\n        return this.comfirmUpload(label, data);\r\n      },\r\n      nzOnCancel: (ee) => {\r\n        this[label].patchValue({\r\n          videoUrl: label === 'localVideo' ? [] : '',\r\n          authorId: '',\r\n          videoType: '1',\r\n          seq: 1,\r\n          attachmentName: '',\r\n          id: '',\r\n        });\r\n      },\r\n    });\r\n  }\r\n\r\n  private getLabel(label: 'polyway' | 'localVideo', reset: boolean): '保利威' | '本地上传' | '编辑信息' {\r\n    if (reset) {\r\n      return label === 'polyway' ? '保利威' : '本地上传';\r\n    } else {\r\n      return '编辑信息';\r\n    }\r\n  }\r\n\r\n  comfirmUpload(label: 'polyway' | 'localVideo', data?: HandoutItem): Promise<boolean> {\r\n    return new Promise((resolve, reject) => {\r\n      // tslint:disable-next-line:forin\r\n      for (const i in this[label].controls) {\r\n        this[label].controls[i].markAsDirty();\r\n        this[label].controls[i].updateValueAndValidity();\r\n      }\r\n      if (this[label].invalid) {\r\n        this.nzMesService.warning('请按规则填写所有必填项');\r\n        resolve(false);\r\n        return;\r\n      }\r\n      const {value} = this[label];\r\n      const {videoUrl} = value;\r\n      const param: any = this.getParams(label, this.reset);\r\n      if (this.reset) { // 新增\r\n        if (label === 'polyway') {\r\n          this.getDuration(videoUrl).subscribe((res) => {\r\n            if (res.code === 200) {\r\n              if (res.data.length) {\r\n                param[0].videoLength = this.getVideoLength(res.data[0].duration);\r\n                this.storingData(param, resolve, label, this.reset);\r\n              } else {\r\n                this.nzMesService.warning('请填写正确的视频ID');\r\n                resolve(false);\r\n              }\r\n            } else {\r\n              this.nzMesService.warning('保利威服务异常，请稍后再试');\r\n              resolve(false);\r\n            }\r\n          });\r\n        } else {\r\n          param[0].videoLength = this.getVideoLength(param[0].attachmentPath[0].videoLength);\r\n          param[0].attachmentPath = param[0].attachmentPath[0].path;\r\n          this.storingData(param, resolve, label, this.reset);\r\n        }\r\n      } else {\r\n        if (typeof param[0].attachmentPath !== 'string') {\r\n          param[0].attachmentPath = param[0].attachmentPath[0].path;\r\n          param[0].resourceId = data.resourceId;\r\n        }\r\n        this.storingData(param, resolve, label, this.reset);\r\n      }\r\n    });\r\n  }\r\n\r\n  getParams(label: 'polyway' | 'localVideo', reset: boolean) {\r\n    const {courseId, coursePacketId} = this;\r\n    const {id, courseChapterId} = this.curNode.data;\r\n    const {value} = this[label];\r\n    const {authorId, videoType, seq, videoUrl, attachmentName, videoLength} = value;\r\n    const obj: any = {\r\n      courseId,\r\n      coursePacketId,\r\n      courseChapterId,\r\n      courseSectionId: id,\r\n      title: attachmentName,\r\n      attachmentName,\r\n      attachmentPath: videoUrl,\r\n      authorId,\r\n      attachmentExt: typeof videoUrl === 'string' ? '' : ToolsUtil.getFileExt(videoUrl[0].name),\r\n      authorName: this.teacherList.filter(eee => Object.is(eee.id, authorId))[0].name,\r\n      type: '103',\r\n      // sourceType: label === 'polyway' ? 2 : 1,\r\n      sourceType: 2,\r\n      seq,\r\n      videoType,\r\n      videoLength,\r\n    };\r\n    if (!reset) {\r\n      obj.id = value.id;\r\n    }\r\n    return [\r\n      obj\r\n    ];\r\n  }\r\n\r\n  /**\r\n   * 获取上传时长\r\n   * @param videoUrl vid\r\n   */\r\n  getDuration(videoUrl: string) {\r\n    const params: any = {\r\n      ptime: (new Date()).getTime(),\r\n      vids: videoUrl,\r\n    };\r\n    const sign = hex_sha1(queryParam(params) + environment.secretkey).toUpperCase();\r\n    params.sign = sign;\r\n    return this.courseMgService.getVideoLength(params, environment.userid);\r\n  }\r\n\r\n  storingData(param, resolve, label, reset) {\r\n    // let interfaceUrl;\r\n    // if (reset) {\r\n    // interfaceUrl = 'batchSave_courseSectionFile';\r\n    // } else {\r\n    // interfaceUrl = 'saveOrUpdate';\r\n    // }\r\n    this.courseMgService.batchSave_courseSectionFile(param).subscribe(resP => {\r\n      if (resP.status === 201) {\r\n        const field = reset ? 'addCode' : 'modify';\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: (reset ? '新增' : '编辑') + '录播视频',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-record-action'][field],\r\n          content: JSON.stringify(param),\r\n        });\r\n        this.getHandoutFiles();\r\n        this[label].patchValue({\r\n          videoUrl: label === 'localVideo' ? [] : '',\r\n          authorId: '',\r\n          videoType: '1',\r\n          seq: 1,\r\n          attachmentName: '',\r\n          id: '',\r\n        });\r\n        // tslint:disable-next-line:forin\r\n        for (const i in this[label].controls) {\r\n          this[label].controls[i].markAsUntouched();\r\n          this[label].controls[i].markAsPristine();\r\n          this[label].controls[i].updateValueAndValidity();\r\n        }\r\n        this.modalFormRef.destroy();\r\n        resolve(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 各种调用\r\n   * @param type 阅读库/案例库/实训库\r\n   * @param task  类型\r\n   * @param data  HandoutItem\r\n   */\r\n  callSchoolEnterpriseLib(type: 'read' | 'case' | 'setting', task: '1' | '101' | '102' | '103', data?: HandoutItem) {\r\n    let tasks;\r\n    if (task === '1') {\r\n      tasks = this.taskList;\r\n    } else if (task === '101') {\r\n      tasks = this.handoutsLecture;\r\n    } else if (task === '102') {\r\n      tasks = this.handoutsMaterial;\r\n    } else if (task === '103') {\r\n      tasks = this.handoutsRecording;\r\n    }\r\n    const nodes = tasks.map(el => {\r\n      return {\r\n        taskId: el.id,\r\n        id: el.resourceId\r\n      };\r\n    });\r\n    const item: any = {\r\n      type: 'scp-section-handout',\r\n      professionId: this.professionId,\r\n      sectionInfo: {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        courseChapterId: this.curNode.data.courseChapterId,\r\n        courseSectionId: this.curNode.data.id,\r\n      },\r\n      seq: ToolsUtil.getMaxSeq(tasks),\r\n      nodes,\r\n    };\r\n    if (this.isStandard) {\r\n      item.isStandard = '1';\r\n    } else {\r\n      item.isStandard = '';\r\n    }\r\n    if (task === '1') {\r\n      item.limit = this.limitTask;\r\n    }\r\n    SessionStorageUtil.putScpResourceMaterial(item);\r\n    if (type === 'read') {\r\n      SessionStorageUtil.removeReadtree();\r\n    } else if (type === 'case') {\r\n      SessionStorageUtil.removeCasetree();\r\n    } else if (type === 'setting') {\r\n      SessionStorageUtil.removeTrainTree();\r\n    }\r\n    this.menuService.gotoUrl({\r\n      url: '/m/rm/' + type,\r\n      paramUrl: `?from=scp&task=${task}`\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 下载文件\r\n   * @param name 文件名\r\n   * @param attachmentPath 文件路径\r\n   */\r\n  downLoad(item: HandoutItem) {\r\n    let name = item.attachmentName;\r\n    if (name.indexOf('.') < 0) {\r\n      const pathArr = item.attachmentPath.split('.');\r\n      name += ('.' + pathArr[pathArr.length - 1]);\r\n    }\r\n    this.aliOssService.downloadFile(name, item.attachmentPath).subscribe(res => res);\r\n  }\r\n\r\n  /**\r\n   * 获取作业/考试调用列表\r\n   * @param label 考试/作业\r\n   */\r\n  async getCallList(label: 'exam' | 'exercise') {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    const params = {\r\n      id: label === 'exam' ? ((String(this.testPaperId) && String(this.testPaperId) !== 'null') ? this.testPaperId : '')\r\n        : ((String(this.testExerciseId) && String(this.testExerciseId) !== 'null') ? this.testExerciseId : ''),\r\n      proId: codeUid,\r\n      groupWay: label === 'exercise' ? '' : this.selectedValue ? this.selectedValue : '',\r\n      courseCode: this.code,\r\n      name: label === 'exam' ? (this.testPaperName ? this.testPaperName : '') : (this.testExerciseName ? this.testExerciseName : ''),\r\n      isNotTaskType: label === 'exam' ? '4' : '2', // 过滤掉作业类型\r\n      sublibraryModuleIds: label === 'exam' ? this.examSubQuestionBankExamBak.join(',') : this.homeworkSubQuestionBankBak.join(','),\r\n      pageSize: '10000',\r\n      pageNum: '1'\r\n    };\r\n    ToolsUtil.getAjax(environment.questionBankApi + 'system/qkcPaper/list', params).subscribe(res => {\r\n      try {\r\n        const result = JSON.parse(res);\r\n        if (result.code === 200) {\r\n          if (label === 'exam') {\r\n            this.listOfData = result.data.rows;\r\n          } else {\r\n            this.listOfDataExercise = result.data.rows;\r\n          }\r\n        } else {\r\n          this.nzMesService.warning(res);\r\n        }\r\n      } catch (e) {\r\n        this.nzMesService.warning(res || e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 获取子题库模块树\r\n   * @param label 类型\r\n   */\r\n  getSubQuestionBank(label: 'exam' | 'exercise' | 'examSearch' | 'exerciseSearch') {\r\n    return new Promise((resolve) => {\r\n      this.searchLoad = true;\r\n      ToolsUtil.getAjax(environment.questionBankApi + 'system/qkcPaper/courseCode', {\r\n        courseCode: this.code,\r\n        type: (label === 'exam' || label === 'examSearch') ? 'EXAM' : 'PRACTICE'\r\n      }).subscribe(resultS => {\r\n        this.searchLoad = false;\r\n        try {\r\n          const resP = JSON.parse(resultS);\r\n          if (resP.code === 200) {\r\n            this[label] = this.conversionNode(resP.data, label);\r\n            resolve(true);\r\n          } else {\r\n            this.nzMesService.error(resP.message);\r\n            resolve(false);\r\n          }\r\n        } catch (e) {\r\n          resolve(false);\r\n          this.nzMesService.error('题库服务异常');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getTaskFormText(taskForm) {\r\n    switch (taskForm) {\r\n      case '0':\r\n        return '【课前】';\r\n      case '1':\r\n        return '【课中】';\r\n      case '2':\r\n        return '【课后】';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 新增/编辑作业\r\n   * @param data HandoutItem\r\n   */\r\n  async entryExercises(data?: HandoutItem) {\r\n    this.curJobData = data ? data : {};\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    this.getSubQuestionBank('exercise').then(resS => {\r\n      if (resS) {\r\n        if (data) {\r\n          this.addJobFromSeting.patchValue({\r\n            name: data.name,\r\n            taskForm: data.taskForm,\r\n            subQuestionBank: Number(data.quebankId)\r\n          });\r\n        } else {\r\n          const selected = LocalStorageUtil.getPracSubquestionbank();\r\n          this.addJobFromSeting.patchValue({\r\n            name: '课后练习',\r\n            taskForm: '2',\r\n            subQuestionBank: selected ? Number(selected) : ''\r\n          });\r\n        }\r\n        this.modalRef = this.nzModalService.create({\r\n          nzTitle: data ? '编辑作业' : '新增作业',\r\n          nzContent: data ? this.jobSettingsEdit : this.jobSettings,\r\n          nzMaskClosable: false,\r\n          nzCancelText: '取消',\r\n          nzFooter: data ? null : undefined,\r\n          nzOkText: '确定',\r\n          nzOnOk: () => {\r\n            return new Promise((resolve) => {\r\n              Object.keys(this.addJobFromSeting.controls).forEach(key => {\r\n                this.addJobFromSeting.controls[key].markAsDirty();\r\n                this.addJobFromSeting.controls[key].updateValueAndValidity();\r\n              });\r\n              if (this.addJobFromSeting.invalid) {\r\n                resolve(false);\r\n                return;\r\n              }\r\n              if (data) { // 编辑\r\n                this.realSave({\r\n                  id: data.id,\r\n                  name: this.addJobFromSeting.value.name,\r\n                  taskForm: this.addJobFromSeting.value.taskForm\r\n                }).subscribe(param => {\r\n                  if (param) {\r\n                    this.statisticsLogService.statisticsPacketInfoLog({\r\n                      name: '编辑作业',\r\n                      actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n                      content: JSON.stringify(param),\r\n                    });\r\n                    resolve(true);\r\n                  } else {\r\n                    resolve(false);\r\n                  }\r\n                });\r\n              } else { // 新增\r\n                const params = {\r\n                  name: this.addJobFromSeting.value.name,\r\n                  proId: codeUid,\r\n                  courseCode: this.code,\r\n                  taskType: 2,\r\n                  groupWay: 1,\r\n                  sublibraryModuleId: this.addJobFromSeting.value.subQuestionBank,\r\n                  userPhone: LocalStorageUtil.getUser().userName\r\n                };\r\n                ToolsUtil.postAjax(environment.questionBankApi + 'system/qkcPaper/savePaper', params).subscribe(res => {\r\n                  try {\r\n                    const result = JSON.parse(res);\r\n                    if (result.code === 200) {\r\n                      const syncParams = {\r\n                        proId: codeUid,\r\n                        courseCode: this.code,\r\n                        mobile: LocalStorageUtil.getUser().userName,\r\n                      };\r\n                      ToolsUtil.postAjax(environment.questionBankApi + 'system/qkcPaper/saveDefaultCourse', syncParams)\r\n                        .subscribe(async resT => {\r\n                          try {\r\n                            const resultT = JSON.parse(resT);\r\n                            if (resultT.code === 200) {\r\n                              const result$ = await this.postTaskList(result, true);\r\n                              result$.subscribe(param => {\r\n                                if (param) {\r\n                                  this.statisticsLogService.statisticsPacketInfoLog({\r\n                                    name: '新增作业',\r\n                                    actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n                                    content: JSON.stringify(param),\r\n                                  });\r\n                                  this.edit({id: result.data.paperId, taskType: '2'});\r\n                                  resolve(true);\r\n                                } else {\r\n                                  resolve(false);\r\n                                }\r\n                              });\r\n                            } else {\r\n                              this.nzMesService.error(resT);\r\n                              resolve(false);\r\n                            }\r\n                          } catch (e) {\r\n                            this.nzMesService.error(resT);\r\n                            resolve(false);\r\n                          }\r\n                        });\r\n                    } else {\r\n                      if (result.code === 99) {\r\n                        this.nzMesService.warning('通过审核的课程才能新增作业,题库课程查询编码不存在');\r\n                      } else {\r\n                        this.nzMesService.warning(res);\r\n                      }\r\n                      resolve(false);\r\n                    }\r\n                  } catch (e) {\r\n                    this.nzMesService.warning(e);\r\n                    resolve(false);\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 新增/编辑组卷\r\n   * @param data HandoutItem\r\n   */\r\n  async addVolume(data?) {\r\n    this.curExamData = data ? data : {};\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    this.getSubQuestionBank('exam').then(resS => {\r\n      if (resS) {\r\n        this.addExamFrom.reset();\r\n        if (data) {\r\n          this.addExamFrom.patchValue({\r\n            missionName: data.name,\r\n            formingMethod: data.groupWay ? Number(data.groupWay) : (data.examType ? Number(data.examType) : 1),\r\n            subQuestionBank: Number(data.quebankId)\r\n          });\r\n        } else {\r\n          const selected = LocalStorageUtil.getExamSubquestionbank();\r\n          this.addExamFrom.patchValue({\r\n            missionName: '',\r\n            formingMethod: 1,\r\n            subQuestionBank: selected ? Number(selected) : ''\r\n          });\r\n        }\r\n        this.modalRef = this.nzModalService.create({\r\n          nzTitle: data ? '编辑组卷' : '新增组卷',\r\n          nzContent: data ? this.addExamExit : this.addExam,\r\n          nzMaskClosable: false,\r\n          nzFooter: data ? null : undefined,\r\n          nzCancelText: '取消',\r\n          nzOkText: '确定',\r\n          nzOnOk: () => {\r\n            return new Promise((resolve, reject) => {\r\n              Object.keys(this.addExamFrom.controls).forEach(key => {\r\n                this.addExamFrom.controls[key].markAsDirty();\r\n                this.addExamFrom.controls[key].updateValueAndValidity();\r\n              });\r\n              if (this.addExamFrom.invalid) {\r\n                resolve(false);\r\n                return;\r\n              }\r\n              if (data) {// 编辑组卷\r\n                this.realSave({\r\n                  id: data.id,\r\n                  name: this.addExamFrom.value.missionName,\r\n                }).subscribe(param => {\r\n                  if (param) {\r\n                    this.statisticsLogService.statisticsPacketInfoLog({\r\n                      name: '编辑组卷',\r\n                      actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n                      content: JSON.stringify(param),\r\n                    });\r\n                    resolve(true);\r\n                  } else {\r\n                    resolve(false);\r\n                  }\r\n                });\r\n              } else {\r\n                const params = {\r\n                  name: this.addExamFrom.value.missionName,\r\n                  groupWay: this.addExamFrom.value.formingMethod,\r\n                  proId: codeUid,\r\n                  courseCode: this.code,\r\n                  taskType: 4,\r\n                  sublibraryModuleId: this.addExamFrom.value.subQuestionBank,\r\n                  userPhone: LocalStorageUtil.getUser().userName\r\n                };\r\n                ToolsUtil.postAjax(environment.questionBankApi + 'system/qkcPaper/savePaper', params).subscribe(res => {\r\n                  try {\r\n                    const result = JSON.parse(res);\r\n                    if (result.code === 200) {\r\n                      const syncParams = {\r\n                        proId: codeUid,\r\n                        courseCode: this.code,\r\n                        mobile: LocalStorageUtil.getUser().userName\r\n                      };\r\n                      ToolsUtil.postAjax(environment.questionBankApi + 'system/qkcPaper/saveDefaultCourse', syncParams)\r\n                        .subscribe(async resT => {\r\n                          try {\r\n                            const resultT = JSON.parse(resT);\r\n                            if (resultT.code === 200) {\r\n                              // 新增\r\n                              const result$ = await this.postTaskList(result, false);\r\n                              result$.subscribe(param => {\r\n                                if (param) {\r\n                                  this.statisticsLogService.statisticsPacketInfoLog({\r\n                                    name: '新增组卷',\r\n                                    actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].addCode,\r\n                                    content: JSON.stringify(param),\r\n                                  });\r\n                                  this.edit({id: result.data.paperId, taskType: '4'});\r\n                                  resolve(true);\r\n                                } else {\r\n                                  resolve(false);\r\n                                }\r\n                              });\r\n                            } else {\r\n                              this.nzMesService.error(resT);\r\n                              resolve(false);\r\n                            }\r\n                          } catch (e) {\r\n                            this.nzMesService.error(resT);\r\n                            resolve(false);\r\n                          }\r\n                        });\r\n                    } else {\r\n                      if (result.code === 99) {\r\n                        this.nzMesService.warning('通过审核的课程才能新增组卷,题库课程查询编码不存在');\r\n                      } else {\r\n                        this.nzMesService.warning(res);\r\n                      }\r\n                      resolve(false);\r\n                    }\r\n                  } catch (e) {\r\n                    this.nzMesService.warning(res || e);\r\n                  }\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /*\r\n  * 新增/调用作业或试卷\r\n  * result：新增返回数据\r\n  * job：作业/试卷\r\n  * data: 调用列表数据\r\n  * 考试任务:\r\n  *  不可重做模式（高校模式）   默认讲师批改，不可修改\r\n  *  可重做模式               默认学员自评，不可修改\r\n  * 作业任务:\r\n  *  不可重做模式（高校模式）   默认学员自评，可以修改\r\n  *  可重做模式               默认学员自评，不可修改\r\n  * */\r\n  async postTaskList(result: HttpResponseDataStandard, job?: boolean, data?: CallItem) {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    // 线下面授(11)、线下双师(12)、线上直播(21)、线上录播(22)',\r\n    const gradeType = job ? 1 : this.exerciseType === '1' ? 1 : 2;\r\n    const param: any = {\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      courseChapterId: this.curNode.data.courseChapterId,\r\n      courseSectionId: this.curNode.data.id,\r\n      status: 1, // 状态：有效(1)、失效(0)\r\n      seq: ToolsUtil.getMaxSeq(this.taskList),\r\n      examType: 1, // 组卷方式：选题/录题组卷(1)、题型难度随机组卷(2)、知识点难度抽题组卷(3)\r\n      // gradeType: (this.teachType === '21' || this.teachType === '22') ? 1 : 2,\r\n      gradeType, // 评分类型：学生自评(1)、老师评分(2)\r\n      needTeacherProc: gradeType === 1 ? 0 : 1,\r\n      isGrade: 1, // 是否需要评分：否(0)、是(1)\r\n      attachmentPath: environment.questionBank + '#/questionList?proId=' + codeUid + '&courseCode=' + this.code // 附件路径\r\n    };\r\n    // 新增作业\r\n    if (job) {\r\n      param.taskType = 2; // 任务类型：阅读任务(0)、案例任务(1)、作业任务(2)、实训任务(3)、考试任务(4)、实战任务(5)、问卷(6)、测评(7)\r\n      if (data) { // 调用\r\n        param.name = data.name;\r\n        param.attachmentName = data.name;\r\n        param.quebankId = (data.sublibraryModuleIdList && data.sublibraryModuleIdList.length)\r\n          ? data.sublibraryModuleIdList.map(e => e.sublibraryModuleId).join(',') : '';\r\n        param.resourceId = data.paperUuid + '-' + data.id;\r\n        param.taskForm = '2';\r\n      } else {  // 新增\r\n        param.name = this.addJobFromSeting.value.name; // 任务名称(默认等于附件名)\r\n        param.attachmentName = this.addJobFromSeting.value.name; // 附件名\r\n        param.resourceId = result.data.paperUuid + '-' + result.data.paperId; // 资源id，题库返回的作业考试id\r\n        param.taskForm = this.addJobFromSeting.value.taskForm; // 任务形式：课前(0)、课中(1)、课后(2)\r\n        param.quebankId = this.addJobFromSeting.value.subQuestionBank; // 任务形式：课前(0)、课中(1)、课后(2)\r\n      }\r\n    } else {\r\n      // 新增试卷\r\n      param.taskType = 4;\r\n      param.paperType = '1';\r\n      if (data) { // 调用\r\n        param.quebankId = (data.sublibraryModuleIdList && data.sublibraryModuleIdList.length)\r\n          ? data.sublibraryModuleIdList.map(e => e.sublibraryModuleId).join(',') : '';\r\n        param.examType = data.groupWay;\r\n        param.name = data.name;\r\n        param.attachmentName = data.name;\r\n        param.resourceId = data.paperUuid + '-' + data.id;\r\n      } else {   // 新增\r\n        param.examType = this.addExamFrom.value.formingMethod;\r\n        param.name = this.addExamFrom.value.missionName;\r\n        param.attachmentName = this.addExamFrom.value.missionName;\r\n        param.resourceId = result.data.paperUuid + '-' + result.data.paperId;\r\n        param.quebankId = this.addExamFrom.value.subQuestionBank; // 任务形式：课前(0)、课中(1)、课后(2)\r\n      }\r\n      if (this.exerciseType === '2') {\r\n        param.answerTimes = 1;\r\n      }\r\n    }\r\n    return this.realSave(param);\r\n  }\r\n\r\n  realSave(param) {\r\n    return new Observable<any>((observer: Subscriber<any>) => {\r\n      this.courseMgService.newTestPaper(param).subscribe(resul => {\r\n        if (resul.status === 201) {\r\n          this.getTaskList();\r\n          observer.next(param);\r\n          observer.complete();\r\n          observer.unsubscribe();\r\n        } else {\r\n          this.isCallLoading = false;\r\n          observer.next(false);\r\n          observer.complete();\r\n          observer.unsubscribe();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  // 选择试卷\r\n  chooseTestPaper() {\r\n    this.getSubQuestionBank('examSearch');\r\n    this.getCallList('exam');\r\n    this.selectedValue = '';  // 组卷类型\r\n    this.testPaperName = '';  // 试卷名\r\n    this.examSubQuestionBankExam = []; //  试卷调用子题库\r\n    this.examSubQuestionBankExamBak = []; //  试卷调用子题库\r\n    this.examListPreview = true;\r\n  }\r\n\r\n// 选择作业\r\n  chooseExercises() {\r\n    this.getSubQuestionBank('exerciseSearch');\r\n    this.getCallList('exercise');\r\n    this.homeworkSubQuestionBank = []; //  作业调用子题库\r\n    this.homeworkSubQuestionBankBak = []; //  作业调用子题库\r\n    this.testExerciseName = ''; // 作业名\r\n    this.exerciseListPreview = true;\r\n  }\r\n\r\n// 关联主讲义\r\n  associate(item: HandoutItem, sectionIdx: number) {\r\n    this.associateing[sectionIdx] = true;\r\n    this.totalPage = 0;\r\n    this.currentAssocate = item;\r\n    this.courseMgService.getViewUrlWebPath(environment.OSS_URL + item.attachmentPath).subscribe(async (res) => {\r\n      if (res.status === 200) {\r\n        this.wps = WebOfficeSDK.config({\r\n          url: res.data.wpsUrl,\r\n        });\r\n        this.wps.iframe.style.display = 'none';\r\n        await this.wps.ready();\r\n        this.wpsApplication = this.wps.Application;\r\n        this.stack = this.wpsApplication.Stack();\r\n        this.totalPage = await this.wpsApplication.ActivePresentation.Slides.Count;\r\n        this.associateing[sectionIdx] = false;\r\n        this.visibleAssociate = true;\r\n      }\r\n    });\r\n    this.getssocateList();\r\n  }\r\n\r\n\r\n  // 是否必须更改\r\n  isNeedChange(ifNeed: any, item: any) {\r\n    const isNeed = item.isNeed ? '1' : '0';\r\n    const params = {id: item.id, isNeed};\r\n    const source$ = this.courseMgService.modifySectionResourceTask(params);\r\n    source$.subscribe(res => {\r\n      if (res.status !== 201) {\r\n        this.nzMesService.error(res.message);\r\n        return;\r\n      }\r\n      item.isNeed = ifNeed;\r\n    }, err => {\r\n      this.nzMesService.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n// 是否可以设置主讲义\r\n  disableMainLecture(item) {\r\n    return !(this.preview === '1'\r\n      || (item.attachmentPath\r\n        && (item.attachmentPath.indexOf('.ppt') > -1\r\n          || item.attachmentPath.indexOf('.pptx') > -1)));\r\n  }\r\n\r\n  /**\r\n   * 能否关联\r\n   * @param item HandoutItem\r\n   */\r\n  showassolite(item: HandoutItem) {\r\n    return this.preview === '0' && item.isMainFile && item.attachmentPath &&\r\n      (item.attachmentPath.indexOf('.ppt') > -1 || item.attachmentPath.indexOf('.pptx') > -1);\r\n  }\r\n\r\n  saveAssociate() {\r\n    const params = [];\r\n    this.assocateList.forEach((ee, ii) => {\r\n      const obj: any = {};\r\n      obj.id = ee.linkId;\r\n      obj.courseId = ee.courseId;\r\n      obj.coursePacketId = ee.coursePacketId;\r\n      obj.courseChapterId = ee.courseChapterId;\r\n      obj.courseSectionId = ee.courseSectionId;\r\n      obj.courseTaskId = ee.id;\r\n      obj.resourceId = this.currentAssocate.id;\r\n      obj.pageNum = ee.pageNum;\r\n      obj.seq = ee.seq;\r\n      params.push(obj);\r\n    });\r\n    this.courseMgService.saveAssocateList(params).subscribe(res => {\r\n      if (res.status === 201) {\r\n        this.visibleAssociate = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  getType(type: any) {\r\n    switch (type) {\r\n      case 1:\r\n        return '真题';\r\n      case 2:\r\n        return '模拟';\r\n      case 3:\r\n        return '原创';\r\n      case 4:\r\n        return '测试卷';\r\n    }\r\n  }\r\n\r\n// 调用/取消调用逻辑\r\n  showTransfer(data: WjCallItem, flag: boolean) {\r\n    // 任务最多7个\r\n    if (this.taskList.length >= this.limitTask) {\r\n      if (!flag) {\r\n        return false;\r\n      }\r\n    }\r\n    let list = [];\r\n    if (this.taskList.length) {\r\n      list = this.taskList.map(e => {\r\n        return e.resourceId.split('-')[0];\r\n      });\r\n    }\r\n    // 取消调用显示逻辑\r\n    if (flag) {\r\n      if (list.length) {\r\n        if (list.indexOf(data.paperUuid) > -1) {\r\n          return true;\r\n        }\r\n      }\r\n    } else {\r\n      // 调用显示逻辑\r\n      if (!list.length) {\r\n        return true;\r\n      }\r\n      if (list.indexOf(data.paperUuid) < 0) {\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 调用\r\n   * @param data 列表项目\r\n   * @param ifExercise 是否作业/考试\r\n   */\r\n  async transfer(data: CallItem, ifExercise: boolean) {\r\n    this.isCallLoading = true;\r\n    // 调用新增\r\n    const result$ = await this.postTaskList(null, ifExercise, data);\r\n    result$.subscribe(param => {\r\n      if (param) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: ifExercise ? '调用作业' : '调用试卷',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].addCode,\r\n          content: JSON.stringify(param),\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 取消调用\r\n   * @param data 列表项\r\n   * @param type 类型\r\n   */\r\n  cancelCall(data: CallItem, type?: 'exam' | 'exercise' | 'questionnaireType' | 'evaluationType') {\r\n    this.isCallLoading = true;\r\n    const list = this.taskList.map(e => {\r\n      return e.resourceId.split('-')[0];\r\n    });\r\n    const index = list.findIndex((ee) => {\r\n      return ee === data.paperUuid;\r\n    });\r\n    this.courseMgService.del_courseSectionFileTask(this.taskList[index].id).subscribe(res => {\r\n      if (res.status !== 204) {\r\n        this.nzMesService.error(res.message);\r\n        return;\r\n      }\r\n      this.getTaskList();\r\n    }, () => {\r\n      this.isCallLoading = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 预览试卷\r\n   * @param data HandoutItem\r\n   */\r\n  async previewExaminationPaper(data: HandoutItem) {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    if (data.resourceId) {\r\n      open(environment.questionBank + '#/paper/previewPaper?paperId=' + data.resourceId.split('-')[1] +\r\n        '&token=' + this.tokenObj.token + '&refreshToken=' + this.tokenObj.refreshToken + '&proId=' + codeUid + '&courseCode=' + this.code);\r\n    } else {\r\n      open(environment.questionBank + '#/paper/previewPaper?paperId=' + data.id +\r\n        '&token=' + this.tokenObj.token + '&refreshToken=' + this.tokenObj.refreshToken + '&proId=' + codeUid + '&courseCode=' + this.code);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 编辑题库相关\r\n   * @param data HandoutItem\r\n   */\r\n  edit(data: HandoutItem) {\r\n    if (data.name) {\r\n      if (data.taskType === '2') {\r\n        this.entryExercises(data);\r\n      } else if (data.taskType === '4') {\r\n        this.addVolume(data); // 新增/编辑组卷\r\n      } else {\r\n        this.otherEdit(data);\r\n      }\r\n    } else {\r\n      this.otherEdit(data);\r\n    }\r\n  }\r\n\r\n  async otherEdit(data: HandoutItem) {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    const syncParams = {\r\n      proId: codeUid,\r\n      courseCode: this.code,\r\n      mobile: LocalStorageUtil.getUser().userName\r\n    };\r\n    ToolsUtil.postAjax(environment.questionBankApi + 'system/qkcPaper/saveDefaultCourse', syncParams).subscribe(resT => {\r\n      try {\r\n        const resultT = JSON.parse(resT);\r\n        if (resultT.code === 200) {\r\n          let url: string;\r\n          const str = 'courseCode=' + this.code\r\n            + '&proId=' + codeUid + '&token=' + this.tokenObj.token + '&refreshToken=' + this.tokenObj.refreshToken + '&paperId=';\r\n          if (data.taskType === '7') {\r\n            url = environment.questionBank\r\n              + '#/PaperEvaluation/List?'\r\n              + str;\r\n          } else if (data.taskType === '6') {\r\n            url = environment.questionBank\r\n              + '#/PaperQuestionnaire/List?'\r\n              + str;\r\n          } else {\r\n            url = environment.questionBank\r\n              + '#/paper/createPaper?'\r\n              + str;\r\n          }\r\n          if (data.resourceId) {\r\n            url += data.resourceId.split('-')[1];\r\n          } else {\r\n            url += data.id;\r\n          }\r\n          open(url);\r\n        } else {\r\n          this.nzMesService.error('题库服务异常，设置默认课程失败');\r\n        }\r\n      } catch (e) {\r\n        this.nzMesService.error(resT);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 预览任务\r\n   * @param item HandoutItem\r\n   */\r\n  previewTask(item: HandoutItem) {\r\n    if (item.taskType === '3') {\r\n      this.previewTraining(item);\r\n    } else if (item.taskType === '1') {\r\n      const url = '/m/rm/material-pre-case';\r\n      const tabTitle = `预览案例`;\r\n      this.menuService.gotoUrl({\r\n        url,\r\n        paramUrl: `/${item.resourceId}/104/${item.courseChapterId}`,\r\n        title: tabTitle,\r\n      });\r\n    } else if (item.taskType === '2' || item.taskType === '4' || item.taskType === '6' || item.taskType === '7') {\r\n      this.previewExaminationPaper(item);\r\n    } else {\r\n      this.previewHandout(item);\r\n    }\r\n  }\r\n\r\n\r\n  // 实时记录绑定页码\r\n  modelChangeDetect(current: number) {\r\n    if (typeof current === 'number') {\r\n      this.current = current;\r\n    }\r\n  }\r\n\r\n  stopPropagation(event: MouseEvent) {\r\n    event.stopPropagation();\r\n    event.preventDefault();\r\n  }\r\n\r\n  /**\r\n   * 设置主讲义关联页码\r\n   * @param item 列表项\r\n   */\r\n  async getBlur(item) {\r\n    this.bindLoading = true;\r\n    if (this.totalPage) {\r\n      const pageNum = this.current || item.pageNum;\r\n      if (this.totalPage < pageNum) {\r\n        this.bindLoading = false;\r\n        timer(0).subscribe(() => {\r\n          item.isBindAssoicate = false;\r\n        });\r\n        this.nzMesService.warning('当前讲义总共 ' + this.totalPage + ' 页,绑定页码超过了主讲义的页数范围!');\r\n        return;\r\n      }\r\n      if (item.paperId) {\r\n        ToolsUtil.getAjax(environment.questionBankApi + 'system/qkcPaper/decidePaper?paperId=' + item.paperId)\r\n          .subscribe(result => {\r\n            try {\r\n              const res = JSON.parse(result);\r\n              if (res.code === 200) {\r\n                if (res.data.decide) {\r\n                  this.nzMesService.warning('包含综合题的作业任务不能绑定到主讲义中');\r\n                  this.bindLoading = false;\r\n                  timer(0).subscribe(() => {\r\n                    item.isBindAssoicate = false;\r\n                  });\r\n                } else {\r\n                  this.boundTask(item);\r\n                }\r\n              } else {\r\n                this.nzMesService.error('题库服务异常，查询任务信息失败');\r\n              }\r\n            } catch (e) {\r\n              this.nzMesService.error(result);\r\n            }\r\n          });\r\n      } else {\r\n        this.boundTask(item);\r\n      }\r\n    } else {\r\n      this.bindLoading = false;\r\n      timer(0).subscribe(() => {\r\n        item.isBindAssoicate = false;\r\n      });\r\n      this.nzMesService.error('该主讲义没有页面，请保证有页面的前提下绑定任务');\r\n    }\r\n  }\r\n\r\n  boundTask(item) {\r\n    const pageNum = this.current || item.pageNum;\r\n    const params: any = {\r\n      courseId: item.courseId,\r\n      coursePacketId: item.coursePacketId,\r\n      courseChapterId: item.courseChapterId,\r\n      courseSectionId: item.courseSectionId,\r\n      courseTaskId: item.id,\r\n      resourceId: this.currentAssocate.id,\r\n      pageNum,\r\n      seq: item.seq,\r\n      id: item.linkId\r\n    };\r\n    this.courseMgService.handoutPageNumberRelatedTasks(params).subscribe(res => {\r\n      this.bindLoading = false;\r\n      if (res.status === 201) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '讲义资料关联更改',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-lecture-action'].modify,\r\n          content: JSON.stringify(params),\r\n        });\r\n        item.linkId = res.data.id;\r\n        item.isBindAssoicate = true;\r\n        const index = this.assocateList.findIndex((e) => {\r\n          return e.id === item.id;\r\n        });\r\n        this.assocateLists[index] = JSON.parse(JSON.stringify(this.assocateList[index]));\r\n        this.currentBindLength = this.assocateList.filter(resP => {\r\n          return resP.isBindAssoicate;\r\n        }).length;\r\n        console.log(this.currentBindLength);\r\n        // this.getssocateList();\r\n      } else {\r\n        timer(0).subscribe(() => {\r\n          item.isBindAssoicate = false;\r\n        });\r\n      }\r\n    }, () => {\r\n      this.bindLoading = false;\r\n      timer(0).subscribe(() => {\r\n        item.isBindAssoicate = false;\r\n      });\r\n    });\r\n  }\r\n\r\n  getApp(fn) {\r\n    if (this.bindLoading) {\r\n      if (!this.totalPage) {\r\n        const wps = this.doc.getElementById('iframePage')['contentWindow'].wps;\r\n        if (wps) {\r\n          fn(wps);\r\n        } else {\r\n          timer(100).subscribe(() => {\r\n            this.getApp(fn);\r\n          });\r\n        }\r\n      } else {\r\n        fn(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 是否绑定主讲义\r\n   * @param flag boolean\r\n   * @param item 列表项\r\n   */\r\n  isBindChange(flag: boolean, item) {\r\n    if (flag) {\r\n      this.getBlur(item);\r\n    } else {\r\n      this.delBind(item);\r\n    }\r\n  }\r\n\r\n  delBind(item) {\r\n    this.knowledgeManageService.delBind(item.linkId).subscribe(res => {\r\n      if (res.status === 204) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '讲义资料关联更改',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-lecture-action'].modify,\r\n          content: JSON.stringify({id: item.linkId}),\r\n        });\r\n        delete item.pageNum;\r\n        delete item.linkId;\r\n        item.isBindAssoicate = false;\r\n        const index = this.assocateList.findIndex((e) => {\r\n          return e.id === item.id;\r\n        });\r\n        this.assocateLists[index] = JSON.parse(JSON.stringify(this.assocateList[index]));\r\n        this.currentBindLength = this.assocateList.filter(resP => {\r\n          return resP.isBindAssoicate;\r\n        }).length;\r\n      } else {\r\n        timer(0).subscribe(() => {\r\n          item.isBindAssoicate = true;\r\n        });\r\n      }\r\n    }, err => {\r\n      timer(0).subscribe(() => {\r\n        item.isBindAssoicate = true;\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  completebind() {\r\n    this.visibleAssociate = false;\r\n    this.totalPage = 0;\r\n    this.wps.iframe.parentNode.parentNode.removeChild(this.wps.iframe.parentNode);\r\n    this.stack.End();\r\n    this.wpsApplication = null;\r\n    this.wps.destroy();\r\n    this.wps = null;\r\n    this.getTaskList();\r\n  }\r\n\r\n  getText(type) {\r\n    switch (String(type)) {\r\n      case '0':\r\n        return '读';\r\n      case '1':\r\n        return '例';\r\n      case '2':\r\n        return '作';\r\n      case '3':\r\n        return '训';\r\n      case '4':\r\n        return '考';\r\n      case '5':\r\n        return '战';\r\n      case '6':\r\n        return '问';\r\n      case '7':\r\n        return '测';\r\n    }\r\n  }\r\n\r\n  getColor(taskType: any) {\r\n    switch (taskType) {\r\n      case '0':\r\n        return '#f0a14d';\r\n      case '1':\r\n        return '#35ad8e';\r\n      case '2':\r\n        return '#b27fd7';\r\n      case '3':\r\n        return '#ecc13a';\r\n      case '4':\r\n        return '#33ade7';\r\n      case '5':\r\n        return '#5f88f2';\r\n      case '6':\r\n        return '#40a9ff';\r\n      case '7':\r\n        return '#567180';\r\n    }\r\n  }\r\n\r\n  getFormingMethod(type) {\r\n    switch (type) {\r\n      case 1:\r\n        return '选题组卷/录题组卷';\r\n      case 2:\r\n        return '题型难度随机组卷';\r\n      case 3:\r\n        return '知识点难度抽题组卷';\r\n    }\r\n  }\r\n\r\n// 实训预览\r\n  private previewTraining(item: any) {\r\n    this.trainLoading = true;\r\n    this.trainManageService.getAccountPeriodId(item.resourceId).subscribe(res => {\r\n      if (res.status === 200) {\r\n        const params = {\r\n          id: item.resourceId,\r\n          accountId: res.data.accountId,\r\n        };\r\n        const success = (resP: any) => {\r\n          this.trainLoading = false;\r\n          if (resP.status === 200) {\r\n            if (resP.data) {\r\n              window.open(resP.data);\r\n            }\r\n          }\r\n        };\r\n        const error = (err: any) => {\r\n          this.trainLoading = false;\r\n          this.nzMesService.create('error', JSON.stringify(err));\r\n        };\r\n        this.trainManageService.getPracticalDetail(params).subscribe(success, error);\r\n      } else {\r\n        this.trainLoading = false;\r\n      }\r\n    }, err => {\r\n      this.trainLoading = false;\r\n    });\r\n  }\r\n\r\n// 答题次数状态重置\r\n  clearStatus(label: 'examSettingForm' | 'questionnairSettingForm') {\r\n    const {answerTimes} = this[label].controls;\r\n    answerTimes.markAsUntouched();\r\n    answerTimes.markAsPristine();\r\n    answerTimes.updateValueAndValidity();\r\n  }\r\n\r\n// 编辑录播视频信息\r\n  editHandout(item: any) {\r\n    if (item.attachmentExt) {\r\n      item.attachmentName = item.title;\r\n      item.videoUrl = [\r\n        {\r\n          name: item.title,\r\n          title: item.title,\r\n          path: item.attachmentPath,\r\n          videoLength: item.videoLength\r\n        }\r\n      ];\r\n      this.localVideo.patchValue(item);\r\n      this.videoUpload('localVideo', false, item);\r\n    } else {\r\n      item.attachmentName = item.title;\r\n      item.videoUrl = item.attachmentPath;\r\n      this.polyway.patchValue(item);\r\n      this.videoUpload('polyway', false, item);\r\n    }\r\n  }\r\n\r\n  compltedUpload() {\r\n    const {videoUrl} = this.localVideo.value;\r\n    this.localVideo.patchValue({\r\n      attachmentName: videoUrl[0].title.split('.')[0]\r\n    });\r\n  }\r\n\r\n// 本地视频获取视频时长\r\n  private getVideoLength(duration) {\r\n    let videoLength = 0;\r\n    const arr = duration.split(':');\r\n    const hour = Number(arr[0]);\r\n    const minute = Number(arr[1]);\r\n    const second = Number(arr[2]);\r\n    if (hour > 0) {\r\n      videoLength += hour * 60;\r\n    }\r\n    if (minute > 0) {\r\n      videoLength += minute;\r\n    }\r\n    if (second > 0) {\r\n      videoLength += 1;\r\n    }\r\n    return videoLength;\r\n  }\r\n\r\n  paperTypeChange(type: any) {\r\n    if (type === '6' && (this.examType === '3' || this.examType === '2')) {\r\n      this.examSettingForm.patchValue({\r\n        isRedo: '1'\r\n      });\r\n    } else {\r\n      this.examSettingForm.patchValue({\r\n        isRedo: '0'\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 调用问卷\r\n   * @param data 列表item\r\n   * @param label 类型\r\n   */\r\n  async transferQuestionnaire(data: WjCallItem, label: 'evaluationType' | 'questionnaireType') {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    this.isCallLoading = true;\r\n    const param: any = {\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      courseChapterId: this.curNode.data.courseChapterId,\r\n      courseSectionId: this.curNode.data.id,\r\n      status: 1, // 状态：有效(1)、失效(0)\r\n      seq: ToolsUtil.getMaxSeq(this.taskList),\r\n      attachmentPath: environment.questionBank +\r\n        (label === 'evaluationType' ? '#/PaperEvaluation/List' : '#/PaperQuestionnaire/List')\r\n        + '?proId=' + codeUid + '&courseCode=' + this.code, // 附件路径\r\n      name: data.name,\r\n      attachmentName: data.name,\r\n      resourceId: data.paperUuid + '-' + data.paperId,\r\n      taskType: label === 'evaluationType' ? 7 : 6,\r\n      answerTimes: 1\r\n    };\r\n\r\n\r\n    this.courseMgService.newTestPaper(param).subscribe(resul => {\r\n      this.statisticsLogService.statisticsPacketInfoLog({\r\n        name: label === 'evaluationType' ? '调用测评' : '调用问卷',\r\n        actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].addCode,\r\n        content: JSON.stringify(param),\r\n      });\r\n      if (resul.status === 201) {\r\n        this.getTaskList();\r\n      }\r\n    }, () => {\r\n      this.isCallLoading = false;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 预览问卷\r\n   * @param data HandoutItem\r\n   */\r\n  async previewExaminationQuestionnaire(data: WjCallItem) {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    const str = '&token=' + this.tokenObj.token + '&refreshToken=' + this.tokenObj.refreshToken\r\n      + '&proId=' + codeUid + '&courseCode=' + this.code;\r\n    open(environment.questionBank + '#/paper/previewPaper?paperId=' + data.paperId + str);\r\n  }\r\n\r\n  /**\r\n   * 问卷测评查询\r\n   * @param label 问卷/测评\r\n   */\r\n  async questionnaireCall(label: 'evaluationType' | 'questionnaireType') {\r\n    const {evaluationType, questionnaireType, evaluationName, questionnaireName, orgCode, code} = this;\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    ToolsUtil.getAjax(environment.questionBankApi + 'system/qkcPaper/evaluateQuestionnaireList', {\r\n      proId: codeUid,\r\n      typeId: label === 'evaluationType' ? 3 : 4,\r\n      evaluateId: label === 'evaluationType' ?\r\n        evaluationType ? evaluationType : undefined : questionnaireType ? questionnaireType : undefined,\r\n      name: label === 'evaluationType' ? evaluationName ? evaluationName : undefined : questionnaireName ? questionnaireName : undefined,\r\n      courseCode: code,\r\n      status: 2,\r\n      pageSize: '10000',\r\n      pageNum: '1',\r\n    }).subscribe(res => {\r\n      try {\r\n        const result = JSON.parse(res);\r\n        if (result.code === 200) {\r\n          if (label === 'evaluationType') {\r\n            this.listOfEvaluationData = result.data.rows;\r\n            this.evaluationPreview = true;\r\n          } else {\r\n            this.listOfQuestionnaireData = result.data.rows;\r\n            this.questionnairePreview = true;\r\n          }\r\n        } else {\r\n          this.nzMesService.error(result.message);\r\n        }\r\n      } catch (e) {\r\n        this.nzMesService.error('题库服务异常');\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  getEvaluationType(evaluateId: '1' | '2') {\r\n    switch (evaluateId) {\r\n      case '1':\r\n        return '招生测评';\r\n      case '2':\r\n        return '入学测评';\r\n    }\r\n  }\r\n\r\n\r\n  getQuestionnaireType(evaluateId: '1' | '2') {\r\n    switch (evaluateId) {\r\n      case '1':\r\n        return '总部测评';\r\n      case '2':\r\n        return '校区测评';\r\n    }\r\n  }\r\n\r\n  getEvaluationStatus(status: 1 | 2 | 3 | 4) {\r\n    switch (status) {\r\n      case 1:\r\n        return '未发布';\r\n      case 2:\r\n        return '已发布';\r\n      case 3:\r\n        return '已过期';\r\n      case 4:\r\n        return '未完成';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 新增问卷测评\r\n   * @param label 类型\r\n   */\r\n  async newQuestionnaire(label: 'evaluationType' | 'questionnaireType') {\r\n    const codeUid = await ToolsUtil.getProdIdSync();\r\n    const str = 'token=' + this.tokenObj.token + '&refreshToken=' + this.tokenObj.refreshToken\r\n      + '&proId=' + codeUid + '&courseCode=' + this.code;\r\n    if (label === 'evaluationType') {\r\n      open(environment.questionBank + '#/PaperEvaluation/List?' + str);\r\n    } else {\r\n      open(environment.questionBank + '#/PaperQuestionnaire/List?' + str);\r\n    }\r\n  }\r\n\r\n  closeQuestionnaire(label: 'evaluationType' | 'questionnaireType') {\r\n    if (label === 'evaluationType') {\r\n      this.questionnaireType = '';\r\n      this.questionnaireName = '';\r\n      this.evaluationPreview = false;\r\n    } else {\r\n      this.questionnairePreview = false;\r\n      this.evaluationType = '';\r\n      this.evaluationName = '';\r\n    }\r\n  }\r\n\r\n// 试卷新增缓存子题库模块id\r\n  subQuestionBankChange(checkData: any) {\r\n    if (checkData) {\r\n      LocalStorageUtil.putExamSubquestionbank(checkData);\r\n    }\r\n  }\r\n\r\n// 作业新增缓存子题库模块id\r\n  execrisesSubQuestionBankChange(checkData: any) {\r\n    if (checkData) {\r\n      LocalStorageUtil.putPracSubquestionbank(checkData);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 作业/试卷调用获取子题库模块id\r\n   * @param data 子题库选中节点\r\n   * @param label 类型\r\n   */\r\n  subQuestionBankChangeSearch(data, label: 'examSearch' | 'exerciseSearch') {\r\n    const bakLabel = label === 'examSearch' ? 'examSubQuestionBankExamBak' : 'homeworkSubQuestionBankBak';\r\n    this[bakLabel] = [];\r\n    if (data.length) {\r\n      data.forEach(e => {\r\n        if (parseFloat(e).toString() === 'NaN') {\r\n          this[label].every((item) => {\r\n            if (item['code'] === e) {\r\n              // @ts-ignore\r\n              item.children.forEach(child => {\r\n                this[bakLabel].push(child.key);\r\n              });\r\n            } else {\r\n              return true;\r\n            }\r\n          });\r\n        } else {\r\n          this[bakLabel].push(e);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 批量excel导入视频\r\n   */\r\n  importVideo() {\r\n    this.nzModalService.create<VideoImportComponent, NzSafeAny>({\r\n      nzTitle: '导入视频',\r\n      nzContent: VideoImportComponent,\r\n      nzComponentParams: {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n      },\r\n      nzMaskClosable: false,\r\n    }).afterClose\r\n      .subscribe((flag: boolean) => {\r\n        if (flag) {\r\n          this.getHandoutFiles();\r\n        }\r\n      });\r\n  }\r\n\r\n\r\n  queryKeywordsChange() {\r\n    Number(this.queryKeywords) === 1 ? this.testPaperName = '' : this.testPaperId = '';\r\n  }\r\n\r\n  queryKeywordsJobChange() {\r\n    Number(this.queryKeywordsJob) === 1 ? this.testExerciseName = '' : this.testExerciseId = '';\r\n  }\r\n\r\n  getExamText(data) {\r\n    if (String(data.taskType) === '4') {\r\n      return this.getExamType(data.paperType || '1');\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  showExamType(item: any) {\r\n    return String(item.taskType) === '4';\r\n  }\r\n\r\n  ShowJobType(item: any) {\r\n    return String(item.taskType) === '2';\r\n  }\r\n\r\n  jobCancel() {\r\n    this.modalRef.destroy();\r\n  }\r\n\r\n  /**\r\n   * 作业考试编辑跳转题库\r\n   * @param label 作业/考试\r\n   */\r\n  jumpQuestionBank(label: 'curJobData' | 'curExamData') {\r\n    this.otherEdit(this[label] as HandoutItem);\r\n  }\r\n\r\n  /**\r\n   * 编辑作业确定\r\n   */\r\n  jobDetermine() {\r\n    Object.keys(this.addJobFromSeting.controls).forEach(key => {\r\n      this.addJobFromSeting.controls[key].markAsDirty();\r\n      this.addJobFromSeting.controls[key].updateValueAndValidity();\r\n    });\r\n    if (this.addJobFromSeting.invalid) {\r\n      return;\r\n    }\r\n    this.realSave({\r\n      id: this.curJobData.id,\r\n      name: this.addJobFromSeting.value.name,\r\n      taskForm: this.addJobFromSeting.value.taskForm\r\n    }).subscribe(param => {\r\n      if (param) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '编辑作业',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n          content: JSON.stringify(param),\r\n        });\r\n        this.modalRef.destroy();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 编辑考试确定\r\n   */\r\n  examDetermine() {\r\n    Object.keys(this.addExamFrom.controls).forEach(key => {\r\n      this.addExamFrom.controls[key].markAsDirty();\r\n      this.addExamFrom.controls[key].updateValueAndValidity();\r\n    });\r\n    if (this.addExamFrom.invalid) {\r\n      return;\r\n    }\r\n    this.realSave({\r\n      id: this.curExamData.id,\r\n      name: this.addExamFrom.value.missionName,\r\n    }).subscribe(param => {\r\n      if (param) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '编辑组卷',\r\n          actionCode: STATISTICALRULES.packetInfo['learnSet-task-action'].modify,\r\n          content: JSON.stringify(param),\r\n        });\r\n        this.modalRef.destroy();\r\n      }\r\n    });\r\n  }\r\n\r\n  closePreview() {\r\n    this.isPreviewpolyway = false;\r\n    this.resourceUrl = '';\r\n    this.previewTitle = '';\r\n    this.previewStart = false;\r\n  }\r\n}\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpService } from './http.service';\r\n// import { UploadFile, UploadXHRArgs } from 'ng-zorro-antd';\r\nimport { Observable } from 'rxjs';\r\nimport { ToolsUtil } from '../utils/tools.util';\r\nimport { HttpRequest, HttpClient, HttpEvent, HttpResponse, HttpEventType } from '@angular/common/http';\r\nimport { environment } from 'src/environments/environment';\r\nimport {ServicesModule} from '@app/service/service.module';\r\n\r\n@Injectable({\r\n  providedIn: ServicesModule\r\n})\r\nexport class UploadOssService {\r\n  uploadData: any;\r\n  constructor(private httpService: HttpService, private httpClient: HttpClient) { }\r\n\r\n  uploadOss = (file, uploadDir) => {\r\n    return new Observable<any>(observe => {\r\n      const success = result => {\r\n        if (result.status === 200) {\r\n          this.uploadData = result.data;\r\n          this.customReq(file).subscribe((url) => {\r\n            observe.next(url);\r\n            observe.unsubscribe();\r\n          });\r\n\r\n        } else {\r\n          observe.next(false);\r\n          observe.unsubscribe();\r\n        }\r\n      };\r\n\r\n      const error = err => {\r\n        observe.next(false);\r\n        observe.unsubscribe();\r\n      };\r\n\r\n      this.httpService.post('res/oss/getPolicy', { dir: uploadDir }, {}).subscribe(success, error);\r\n    });\r\n\r\n  }\r\n\r\n  customReq = (file) => {\r\n    const formData = new FormData();\r\n    const key = this.uploadData.dir + ToolsUtil.getRandomFileName() + '.' + ToolsUtil.getFileExt(file.name);\r\n    formData.append('OSSAccessKeyId', this.uploadData.accessKeyId);\r\n    formData.append('policy', this.uploadData.policy);\r\n    formData.append('Signature', this.uploadData.signature);\r\n    formData.append('key', key);\r\n    formData.append('success_action_status', '200');\r\n    formData.append('file', file as any);\r\n    // this.uploadData.host!\r\n    const req = new HttpRequest('POST', environment.OSS_URL, formData, {\r\n      reportProgress: true\r\n    });\r\n\r\n    return new Observable<any>(observe => {\r\n      const success = (event: HttpEvent<any>) => {\r\n        if (event.type === HttpEventType.UploadProgress) {\r\n\r\n        } else if (event instanceof HttpResponse) {\r\n          // const url = event.url + key;\r\n          observe.next(`/${key}`);\r\n          observe.unsubscribe();\r\n        }\r\n      };\r\n\r\n      const error = () => {\r\n        observe.next(false);\r\n        observe.unsubscribe();\r\n      };\r\n\r\n      this.httpClient.request(req).subscribe(success, error);\r\n    });\r\n  }\r\n}\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {NzUploadXHRArgs} from 'ng-zorro-antd';\r\nimport {Observable, Observer} from 'rxjs';\r\nimport {UploadDir} from 'core/utils/uploadDir';\r\nimport {UploadOssService} from 'core/services/upload-oss.service';\r\nimport {NzUploadFile} from 'ng-zorro-antd/upload/interface';\r\nimport {CompanyItem} from '../other-setting.interface';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\n\r\n@Component({\r\n  selector: 'app-new-company',\r\n  templateUrl: './new-company.component.html',\r\n  styleUrls: ['./new-company.component.less'],\r\n})\r\nexport class NewCompanyComponent implements OnInit {\r\n  @Input() courseId: string;\r\n  @Input() coursePacketId: string;\r\n  @Input() companyLists: any[];\r\n  @Input() companyItem: CompanyItem;\r\n  newCompanyForm: FormGroup;\r\n  newCompanyLoading = false;\r\n  nzFileList: NzUploadFile[] = [];\r\n  isUsed = SessionStorageUtil.getPacketInfoItem('isUsed');\r\n  private acceptType = ['zip', 'rar'];\r\n\r\n  constructor(\r\n    private nzMesService: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private nzModalRef: NzModalRef,\r\n    private fb: FormBuilder,\r\n    private uploadOssService: UploadOssService,\r\n    private courseManageService: CourseManageService,\r\n    private statisticsLogService: StatisticsLogService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    const {companyItem} = this;\r\n    if (companyItem.id) {\r\n      const {name, termType, filePath, fileName, permission} = companyItem;\r\n      const item = {\r\n        name,\r\n        termType,\r\n        filePath,\r\n        permission: permission ? permission.split(',') : []\r\n      };\r\n      this.nzFileList = [{\r\n        ...item, ...{\r\n          uid: ToolsUtil.getRandomFileName(),\r\n          name: fileName\r\n        }\r\n      }];\r\n      this.newCompanyForm = new FormGroup({\r\n        name: new FormControl(\r\n          {\r\n            value: item.name,\r\n            disabled: this.isUsed > 0\r\n          }, [Validators.required, Validators.maxLength(40)]),\r\n        termType: new FormControl(\r\n          {\r\n            value: item.termType,\r\n            disabled: this.isUsed > 0\r\n          }, Validators.required),\r\n        filePath: new FormControl(\r\n          item.filePath, Validators.required),\r\n        permission: new FormControl(\r\n          item.permission, Validators.required),\r\n      });\r\n    } else {\r\n      this.newCompanyForm = this.fb.group({\r\n        name: ['', [Validators.required, Validators.maxLength(40)]],\r\n        termType: [0, [Validators.required]],\r\n        filePath: ['', [Validators.required]],\r\n        permission: [['业务中心', '数字大脑'], [Validators.required]]\r\n      });\r\n    }\r\n  }\r\n\r\n  beforeUpload = (item: NzUploadXHRArgs) => {\r\n    return new Observable((observer: Observer<boolean>) => {\r\n      let pass = true;\r\n      if (item.name.length > 35) {\r\n        this.nzMesService.error('文件名字太长啦，保证包含扩展名35个文字以内');\r\n        pass = false;\r\n      }\r\n      if (this.acceptType.indexOf(ToolsUtil.getExt(item.name)) < 0) {\r\n        this.nzMesService.error('请上传zip或rar压缩类型的文件');\r\n        pass = false;\r\n      }\r\n      if (pass) {\r\n        observer.next(true);\r\n        observer.complete();\r\n      } else {\r\n        observer.next(false);\r\n      }\r\n    });\r\n  };\r\n\r\n  removeFileSelf = (item: NzUploadXHRArgs) => {\r\n    this.nzFileList = [];\r\n    this.newCompanyForm.patchValue({\r\n      filePath: ''\r\n    });\r\n    this.newCompanyForm.controls.filePath.markAsUntouched();\r\n    this.newCompanyForm.controls.filePath.markAsPristine();\r\n    this.newCompanyForm.controls.filePath.updateValueAndValidity();\r\n  };\r\n\r\n  customRewardRequest = (item: NzUploadXHRArgs) => {\r\n    this.newCompanyLoading = true;\r\n    this.uploadOssService\r\n      .uploadOss(item.file, UploadDir.company_file)\r\n      .subscribe((result) => {\r\n        this.newCompanyLoading = false;\r\n        this.newCompanyForm.patchValue({\r\n          filePath: result\r\n        });\r\n        item.onSuccess({...item}, item.file, {});\r\n      }, (err) => {\r\n        this.newCompanyLoading = false;\r\n        item.onError(err, item.file);\r\n        this.nzMesService.error(JSON.stringify(err));\r\n      });\r\n  };\r\n\r\n\r\n  save() {\r\n    for (const i in this.newCompanyForm.controls) {\r\n      if (this.newCompanyForm.controls.hasOwnProperty(i)) {\r\n        this.newCompanyForm.controls[i].markAsDirty();\r\n        this.newCompanyForm.controls[i].updateValueAndValidity();\r\n      }\r\n    }\r\n    if (this.newCompanyForm.invalid) {\r\n      return;\r\n    }\r\n    this.newCompanyLoading = true;\r\n    const seq = this.companyItem?.seq;\r\n    const content = {\r\n      id: this.companyItem?.id,\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      name: this.newCompanyForm.value.name,\r\n      seq: seq ? seq : ToolsUtil.getMaxSeq(this.companyLists),\r\n      filePath: this.newCompanyForm.value.filePath,\r\n      status: 1,\r\n      fileName: this.nzFileList[0].name,\r\n      termType: this.newCompanyForm.value.termType,\r\n      permission: this.newCompanyForm.value.permission.join(','),\r\n    }\r\n    this.courseManageService.addCoursePacketCompany(content).subscribe(res => {\r\n      this.newCompanyLoading = false;\r\n      const edit = !!this.companyItem.id;\r\n      const field = edit ? 'modify' : 'addCode';\r\n      this.statisticsLogService.statisticsPacketInfoLog({\r\n        name: edit ? '修改公司信息' : '新增公司',\r\n        actionCode: STATISTICALRULES.packetInfo['otherSet-99train-action'][field],\r\n        content: JSON.stringify(content),\r\n      });\r\n      if (res.status === 201) {\r\n        this.nzModalRef.close(true);\r\n      }\r\n    }, () => {\r\n      this.newCompanyLoading = false;\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(false);\r\n  }\r\n\r\n  getNameLength() {\r\n    const {name} = this.newCompanyForm.controls;\r\n    return typeof name === 'string' ? (name as string).length : name.value.length;\r\n  }\r\n}\r\n\r\n","<nz-spin [nzSpinning]=\"newCompanyLoading\"\r\n         [nzDelay]=\"0\">\r\n  <form nz-form [formGroup]=\"newCompanyForm\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>公司名称</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"nameTpl\">\r\n        <input nz-input placeholder=\"请输入公司名称\" formControlName=\"name\"/>\r\n      </nz-form-control>\r\n      <span style=\"margin-left: 10px;\"\r\n            [style.color]='newCompanyForm.controls.name.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{getNameLength() }}/40</span>\r\n      <ng-template #nameTpl let-control>\r\n        <div\r\n          *ngIf=\"control.hasError('required')\">公司名称不能为空\r\n        </div>\r\n        <div\r\n          *ngIf=\"control.hasError('maxlength')\">公司名称不能超过40个字符\r\n        </div>\r\n      </ng-template>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>有效期限</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"有效期限不能为空\">\r\n        <nz-select formControlName=\"termType\" style='flex:1' [nzShowSearch]='true'>\r\n          <nz-option [nzValue]=\"0\" nzLabel=\"半年\"></nz-option>\r\n          <nz-option [nzValue]=\"1\" nzLabel=\"1年\"></nz-option>\r\n          <nz-option [nzValue]=\"2\" nzLabel=\"2年\"></nz-option>\r\n          <nz-option [nzValue]=\"3\" nzLabel=\"3年\"></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>权限设置</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"权限设置不能为空\">\r\n        <nz-select formControlName=\"permission\" style='flex:1' [nzShowSearch]='true' nzMode=\"multiple\">\r\n          <nz-option nzValue=\"业务中心\" nzLabel=\"业务中心\"></nz-option>\r\n          <nz-option nzValue=\"数字大脑\" nzLabel=\"数字大脑\"></nz-option>\r\n          <nz-option nzValue=\"财务中心\" nzLabel=\"财务中心\"></nz-option>\r\n        </nz-select>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"5\" nzRequired>上传数据包</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"数据包不能为空\">\r\n        <input type='hidden' formControlName=\"filePath\"/>\r\n        <nz-upload\r\n          [nzBeforeUpload]='beforeUpload'\r\n          [nzCustomRequest]=\"customRewardRequest\"\r\n          [nzRemove]='removeFileSelf'\r\n          [(nzFileList)]='nzFileList'\r\n          [nzShowUploadList]=' { showPreviewIcon: false, showRemoveIcon: true, showDownloadIcon: false }'\r\n        >\r\n          <button nz-button [disabled]='newCompanyForm.value.filePath?true:null'>\r\n            <i nz-icon nzType=\"upload\" style='font-size:20px;'></i>本地上传\r\n          </button>\r\n          <div *ngIf='!newCompanyForm.value.filePath'>\r\n            支持zip、rar格式\r\n          </div>\r\n        </nz-upload>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n  </form>\r\n  <div *nzModalFooter>\r\n    <button nz-button (click)=\"cancel()\">取消</button>\r\n    <button nz-button nzType=\"primary\" (click)=\"save()\" [nzLoading]=\"newCompanyLoading\">确定</button>\r\n  </div>\r\n</nz-spin>\r\n","import {\r\n  Component,\r\n  OnInit,\r\n  forwardRef,\r\n  ChangeDetectionStrategy,\r\n  ChangeDetectorRef,\r\n  Output,\r\n  Input,\r\n  EventEmitter\r\n} from '@angular/core';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NG_VALUE_ACCESSOR, ControlValueAccessor} from '@angular/forms';\r\nimport {NzTreeNodeOptions} from 'ng-zorro-antd/tree';\r\n\r\n@Component({\r\n  selector: 'app-school-zone',\r\n  templateUrl: './school-zone.component.html',\r\n  styleUrls: ['./school-zone.component.less'],\r\n  providers: [\r\n    {\r\n      provide: NG_VALUE_ACCESSOR,\r\n      useExisting: forwardRef(() => SchoolZoneComponent),\r\n      multi: true\r\n    }\r\n  ],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SchoolZoneComponent implements OnInit, ControlValueAccessor {\r\n  opts: NzTreeNodeOptions[] = [];\r\n  selectedValues: string[] = [];\r\n  expandKeys: string [] = [];\r\n  @Input() checkAll = {\r\n    flag: false\r\n  };\r\n  @Output() schoolZone = new EventEmitter<any>();\r\n  private dataLength = 0;\r\n  private dataPLength = 0;\r\n\r\n\r\n  constructor(\r\n    private cdr: ChangeDetectorRef,\r\n    private courseMgService: CourseManageService,\r\n    private nzMsg: NzMessageService) {\r\n  }\r\n\r\n  private onModelChange = (_: any) => {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.collegeList();\r\n  }\r\n\r\n  writeValue(values: string[]): void {\r\n    this.selectedValues = values;\r\n    this.setExpandKeys();\r\n    this.detectChange();\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.onModelChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n  }\r\n\r\n  setDisabledState?(isDisabled: boolean): void {\r\n\r\n  }\r\n\r\n  collegeList() {\r\n    this.courseMgService.collegeList('area').subscribe(res => {\r\n      if (res.status !== 200) {\r\n        this.nzMsg.error(res.message);\r\n        return;\r\n      }\r\n      this.opts = this.formatOpts(res.data).filter(e => e.children.length);\r\n      this.dataLength = 0;\r\n      this.dataPLength = this.opts.length;\r\n      this.opts.forEach(item => {\r\n        if (item.children && item.children.length) {\r\n          this.dataLength += item.children.length;\r\n        }\r\n      });\r\n      const {opts, dataLength, dataPLength} = this;\r\n      this.schoolZone.emit({opts, dataLength, dataPLength});\r\n      this.setExpandKeys();\r\n      this.detectChange();\r\n    }, err => {\r\n      this.nzMsg.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n  formatOpts(data: any[]) {\r\n    const formatChildren = (children: any[]) => {\r\n      if (!children || children.length === 0) {\r\n        return [];\r\n      } else {\r\n        return children.map(school => {\r\n          return {\r\n            key: school.oCode,\r\n            value: school.oCode,\r\n            title: school.orgName,\r\n            isLeaf: true\r\n          };\r\n        });\r\n      }\r\n    };\r\n    return data.map(area => {\r\n      return {\r\n        key: 'AREA_' + area.typeCode,\r\n        value: area.typeCode,\r\n        title: area.typeName,\r\n        children: formatChildren(area.chlidren)\r\n      };\r\n    });\r\n  }\r\n\r\n  selectedChange(values: any[]) {\r\n    const flag = values.every((value, i) => {\r\n      if (value.indexOf('AREA_') < 0) {\r\n        return true;\r\n      }\r\n    });\r\n    if (flag) {\r\n      if (this.dataLength === values.length) {\r\n        this.checkAll.flag = true;\r\n      } else {\r\n        this.checkAll.flag = false;\r\n      }\r\n    } else {\r\n      if (this.dataPLength === values.length) {\r\n        this.checkAll.flag = true;\r\n      } else {\r\n        this.checkAll.flag = false;\r\n      }\r\n    }\r\n    this.setModalChange(values, false);\r\n  }\r\n\r\n  setExpandKeys() {\r\n    if (!this.selectedValues) {\r\n      return;\r\n    }\r\n    if (this.opts.length === 0 || this.selectedValues.length === 0) {\r\n      return;\r\n    }\r\n    const tmpSelectedValues = [...this.selectedValues];\r\n    const tmpExpandedkeys = [];\r\n    for (const node of this.opts) {\r\n      if (node.children.length === 0) {\r\n        continue;\r\n      }\r\n      for (const childNode of node.children) {\r\n        if (tmpSelectedValues.length === 0) {\r\n          this.expandKeys = Array.from(new Set(tmpExpandedkeys));\r\n          return;\r\n        }\r\n        const idx = tmpSelectedValues.findIndex(key => key === childNode.key);\r\n        if (idx !== -1) {\r\n          tmpExpandedkeys.push(node.key);\r\n          tmpSelectedValues.splice(idx, 1);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  checkAllStatus(checkAll: boolean) {\r\n    if (checkAll) {\r\n      const list = [];\r\n      this.opts.map(item => {\r\n        if (item.children && item.children.length > 0) {\r\n          item.children.map(it => {\r\n            list.push(it.key);\r\n          });\r\n        }\r\n      });\r\n      this.selectedValues = list;\r\n\r\n      this.setModalChange(list, true);\r\n    } else {\r\n      this.selectedValues = [];\r\n      this.setModalChange([], true);\r\n    }\r\n  }\r\n\r\n  setModalChange(values: string[], checkAll: boolean) {\r\n    if (checkAll) {\r\n      this.onModelChange(values);\r\n    } else {\r\n      const selectedValues = values.reduce((pre, cur) => {\r\n        if (cur.startsWith('AREA_')) {\r\n          const schools = this.opts.find(item => item.key === cur).children;\r\n          const schoolKeys = schools.map(school => school.key);\r\n          Array.prototype.push.apply(pre, schoolKeys);\r\n        } else {\r\n          pre.push(cur);\r\n        }\r\n        return pre;\r\n      }, []);\r\n      this.onModelChange(selectedValues);\r\n    }\r\n  }\r\n\r\n  detectChange() {\r\n    this.cdr.markForCheck();\r\n  }\r\n\r\n}\r\n","<nz-tree-select\r\n  style=\"width: 80%\"\r\n  [(ngModel)]=\"selectedValues\"\r\n  [nzNodes]=\"opts\"\r\n  [nzExpandedKeys]=\"expandKeys\"\r\n  nzShowSearch\r\n  nzCheckable\r\n  [nzMultiple]=\"true\"\r\n  [nzMaxTagCount]=\"10\"\r\n  [nzMaxTagPlaceholder]=\"omittedPlaceHolder\"\r\n  [nzDropdownStyle]=\"{'max-height': '400px'}\"\r\n  (ngModelChange)=\"selectedChange($event)\"\r\n  [nzHideUnMatched]='true'\r\n>\r\n</nz-tree-select>\r\n<label nz-checkbox [(ngModel)]=\"checkAll.flag\" (ngModelChange)=\"checkAllStatus($event)\"\r\n       style=\"margin-left: 10px;\">全选</label>\r\n<ng-template #omittedPlaceHolder let-omittedValues> 还有 {{ omittedValues.length }} 个校区/大区...</ng-template>\r\n","import {Component, Inject, Input, LOCALE_ID, OnInit, Renderer2,} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {MenuService} from 'core/services/menu.service';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {AliOssService} from 'core/services/ali-oss.service';\r\nimport {FormBuilder} from '@angular/forms';\r\nimport {KnowledgeManageService} from 'src/app/busi-services/knowledge-manag.service';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {NzUploadXHRArgs} from 'ng-zorro-antd';\r\nimport {TrainManageService} from '@app/busi-services/train-manage.service';\r\nimport {WINDOW} from '@app/service/service.module';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\nimport {UploadDir} from 'core/utils/uploadDir';\r\nimport {UploadOssService} from 'core/services/upload-oss.service';\r\nimport {NzUploadFile} from 'ng-zorro-antd/upload/interface';\r\nimport {Json} from 'core/base/common';\r\nimport {Observable, Observer} from 'rxjs';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\n\r\n@Component({\r\n  selector: 'app-reward-settings',\r\n  templateUrl: './reward-settings.component.html',\r\n  styleUrls: ['./reward-settings.component.less'],\r\n})\r\nexport class RewardSettingsComponent implements OnInit {\r\n  private limitTask = 10000;\r\n  @Input() courseId: string;\r\n  @Input() professionId: string;\r\n  @Input() coursePacketId: string;\r\n  @Input() currentCard: Json;\r\n  rewardSettingsLoading = false;\r\n  nzFileList: NzUploadFile[] = [];\r\n  nzFileListBak: NzUploadFile[] = [];\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private menuService: MenuService,\r\n    private nzMesService: NzMessageService,\r\n    private courseMgService: CourseManageService,\r\n    private nzModalService: NzModalService,\r\n    private nzModalRef: NzModalRef,\r\n    private aliOssService: AliOssService,\r\n    private fb: FormBuilder,\r\n    private modalService: NzModalService,\r\n    private knowledgeManageService: KnowledgeManageService,\r\n    private renderer2: Renderer2,\r\n    private trainManageService: TrainManageService,\r\n    private sanitizer: DomSanitizer,\r\n    private uploadOssService: UploadOssService,\r\n    private statisticsLogService: StatisticsLogService,\r\n    @Inject(LOCALE_ID) public locale: string,\r\n    @Inject(WINDOW) public win: any,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.nzFileList = this.currentCard.coursePacketCardRecourseList || [];\r\n    this.nzFileListBak = JSON.parse(JSON.stringify(this.nzFileList));\r\n  }\r\n\r\n  beforeUpload = (item: NzUploadXHRArgs) => {\r\n    return new Observable((observer: Observer<boolean>) => {\r\n      if (item.name.length > 35) {\r\n        this.nzMesService.error('文件名字太长啦，保证包含扩展名35个文字以内');\r\n        observer.next(false);\r\n        observer.complete();\r\n        return;\r\n      }\r\n      if ('jpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,pdf,mp4'.indexOf(ToolsUtil.getExt(item.name)) < 0) {\r\n        this.nzMesService.error('请上传后缀名为jpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,pdf,mp4类型的文件！');\r\n        observer.next(false);\r\n        observer.complete();\r\n        return;\r\n      }\r\n      observer.next(true);\r\n      observer.complete();\r\n    });\r\n  };\r\n\r\n  customRewardRequest = (item: NzUploadXHRArgs) => {\r\n    this.rewardSettingsLoading = true;\r\n    this.uploadOssService\r\n      .uploadOss(item.file, UploadDir.reward_file)\r\n      .subscribe((result) => {\r\n        this.rewardSettingsLoading = false;\r\n        item.file.url = result;\r\n        item.onSuccess({...item}, item.file, {});\r\n      }, (err) => {\r\n        this.rewardSettingsLoading = false;\r\n        item.onError(err, item.file);\r\n        this.nzMesService.error(JSON.stringify(err));\r\n      });\r\n  };\r\n\r\n  resourceCall() {\r\n    SessionStorageUtil.putScpResourceMaterial({\r\n      type: 'scp-section-handout',\r\n      professionId: this.professionId,\r\n      sectionInfo: {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        coursePacketCardId: this.currentCard.id\r\n      },\r\n      seq: ToolsUtil.getMaxSeq(this.nzFileList),\r\n      nodes: this.nzFileList ? this.nzFileList.map(el => {\r\n        return {\r\n          taskId: el.id,\r\n          id: el.resourceId,\r\n        };\r\n      }) : [],\r\n      isStandard: '',\r\n      limit: this.limitTask\r\n    });\r\n    SessionStorageUtil.removeReadtree();\r\n    this.nzModalRef.close(true);\r\n    this.menuService.gotoUrl({\r\n      url: '/m/rm/read',\r\n      paramUrl: `?from=scp&task=2&reward=1`\r\n    });\r\n  }\r\n\r\n  diffFileChange(nzFileList, nzFileListBak) {\r\n    if (this.nzFileList.length !== this.nzFileListBak.length) {\r\n      return true;\r\n    } else {\r\n      if (this.nzFileList.length) {\r\n        if (this.nzFileList.filter(e => e.id).length !== this.nzFileList.length) {\r\n          return true;\r\n        }\r\n        // const ids = this.nzFileListBak.map(i => i.id);\r\n        // return !(this.nzFileList.every(item => {\r\n        //   if (ids.indexOf(item.id) > -1) {\r\n        //     return true;\r\n        //   }\r\n        // }));\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  save() {\r\n    if (!this.nzFileList.length) {\r\n      this.nzMesService.warning('请先上传文件');\r\n      return;\r\n    }\r\n    this.rewardSettingsLoading = true;\r\n    const params = [];\r\n    this.nzFileList.forEach((itemP, iP) => {\r\n      const param: any = {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        coursePacketCardId: this.currentCard.id,\r\n        seq: iP,\r\n        id: itemP.id\r\n      };\r\n      if (itemP.originFileObj) {\r\n        param.attachmentPath = itemP.originFileObj['url'];\r\n      }\r\n      if (itemP.originFileObj) {\r\n        param.title = itemP.originFileObj.name;\r\n      }\r\n      params.push(param);\r\n    });\r\n    this.courseMgService.levelInformationBatchUpload(params).subscribe(res => {\r\n      this.rewardSettingsLoading = false;\r\n      if (res.status === 201) {\r\n        if (this.diffFileChange(this.nzFileList, this.nzFileListBak)) {\r\n          this.statisticsLogService.statisticsPacketInfoLog({\r\n            name: '关卡奖励设置本地上传',\r\n            actionCode: STATISTICALRULES.packetInfo['otherSet-levelthrough-action'].modify,\r\n            content: JSON.stringify(params),\r\n          });\r\n        }\r\n        this.nzModalRef.close(true);\r\n      } else {\r\n        if (res.status === 500) {\r\n          this.nzMesService.warning(res.message);\r\n        }\r\n      }\r\n    }, () => {\r\n      this.rewardSettingsLoading = false;\r\n    });\r\n  }\r\n\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(false);\r\n  }\r\n\r\n}\r\n\r\n","<nz-spin [nzSpinning]=\"rewardSettingsLoading\"\r\n         [nzDelay]=\"0\">\r\n  <span style='max-width:100px;margin-right:16px;'>本地上传：</span>\r\n  <nz-upload\r\n    nzMultiple\r\n    [nzBeforeUpload]='beforeUpload'\r\n    [nzShowUploadList]=' { showPreviewIcon: true, showRemoveIcon: false, showDownloadIcon: false }'\r\n    [(nzFileList)]=\"nzFileList\"\r\n    [nzCustomRequest]=\"customRewardRequest\"\r\n  >\r\n    <button nz-button style='margin-bottom: 20px;'>\r\n      <i nz-icon nzType=\"upload\" style='font-size:20px;'></i>上传文件\r\n    </button>\r\n  </nz-upload>\r\n  <button nz-button style='position:absolute;left:220px;top:0;'  (click)='resourceCall()'>\r\n    资源调用\r\n  </button>\r\n</nz-spin>\r\n<div *nzModalFooter>\r\n  <button nz-button (click)=\"cancel()\">取消</button>\r\n  <button nz-button nzType=\"primary\" (click)=\"save()\" [nzLoading]=\"rewardSettingsLoading\" >确定</button>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit} from '@angular/core';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {spaceValidator} from '@app/shared/validators/atr-validtors';\r\nimport {LessonsItemOption} from '../other-setting.interface';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\n\r\n\r\n@Component({\r\n  selector: 'app-edit-lesson',\r\n  templateUrl: './edit-lesson.component.html',\r\n  styleUrls: ['./edit-lesson.component.less'],\r\n})\r\nexport class EditLessonComponent implements OnInit {\r\n  @Input() data: LessonsItemOption = {};\r\n  courseForm: FormGroup;\r\n  editLessonLoading = false;\r\n\r\n\r\n  constructor(\r\n    private nzMesService: NzMessageService,\r\n    private nzModalService: NzModalService,\r\n    private nzModalRef: NzModalRef,\r\n    private fb: FormBuilder,\r\n    private courseManageService: CourseManageService,\r\n    private statisticsLogService: StatisticsLogService,\r\n  ) {\r\n    this.courseForm = this.fb.group({\r\n      name: ['', [Validators.required, spaceValidator(), Validators.maxLength(25)]]\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.courseForm.patchValue({\r\n      name: this.data.name\r\n    });\r\n\r\n  }\r\n\r\n\r\n  save() {\r\n    for (const i in this.courseForm.controls) {\r\n      if (this.courseForm.controls.hasOwnProperty(i)) {\r\n        this.courseForm.controls[i].markAsDirty();\r\n        this.courseForm.controls[i].updateValueAndValidity();\r\n      }\r\n    }\r\n    if (this.courseForm.invalid) {\r\n      return;\r\n    }\r\n    this.editLessonLoading = true;\r\n    const {\r\n      id, courseId, coursePacketId, seq\r\n    }\r\n      = this.data;\r\n    const params = {\r\n      id,\r\n      name: this.courseForm.value.name,\r\n      courseId,\r\n      coursePacketId,\r\n      seq\r\n    };\r\n    this.courseManageService.saveTable(params).subscribe(data => {\r\n      this.editLessonLoading = false;\r\n      if (data.status === 201) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '编辑课次',\r\n          actionCode: STATISTICALRULES.packetInfo['otherSet-lessons-action'].modify,\r\n          content: JSON.stringify(params),\r\n        });\r\n        this.nzModalRef.close(true);\r\n      }\r\n    }, () => {\r\n      this.editLessonLoading = false;\r\n    });\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(false);\r\n  }\r\n\r\n}\r\n\r\n","<nz-spin [nzSpinning]=\"editLessonLoading\"\r\n         [nzDelay]=\"0\">\r\n<form nz-form [formGroup]=\"courseForm\">\r\n  <nz-form-item>\r\n    <nz-form-label [nzSpan]=\"5\" nzRequired>课次名称</nz-form-label>\r\n    <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"nameTpl\">\r\n      <input nz-input type=\"text\" formControlName=\"name\" placeholder=\"请输入\" (keyup.enter)=\"save()\"/>\r\n    </nz-form-control>\r\n    <span style=\"margin-left: 10px;margin-top: 5px;display: inline-block;\"\r\n          [style.color]='courseForm.controls.name.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{courseForm.value.name.length}}/25</span>\r\n    <ng-template #nameTpl let-control>\r\n      <div *ngIf=\"control.hasError('required')\">课次名称不能为空\r\n      </div>\r\n      <div *ngIf=\"control.hasError('maxlength')\">课次名称不能超过25个字符</div>\r\n    </ng-template>\r\n  </nz-form-item>\r\n</form>\r\n<div *nzModalFooter>\r\n  <button nz-button (click)=\"cancel()\">取消</button>\r\n  <button nz-button nzType=\"primary\" [nzLoading]=\"editLessonLoading\" (click)=\"save()\">确定</button>\r\n</div>\r\n</nz-spin>\r\n","import {Component, OnInit, Input} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NzModalRef} from 'ng-zorro-antd/modal';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {repeatName, spaceValidator} from 'src/app/shared/validators/atr-validtors';\r\n\r\n@Component({\r\n  selector: 'app-structure-adjustment-section',\r\n  templateUrl: './structure-adjustment-section.component.html',\r\n  styleUrls: ['./structure-adjustment-section.component.less']\r\n})\r\nexport class StructureAdjustmentSectionComponent implements OnInit {\r\n  formGroup: FormGroup;\r\n  loading = false;\r\n  @Input() data: any;\r\n  @Input() formData: any;\r\n  @Input() courseId: string;\r\n  @Input() coursePacketId: string;\r\n  private lock = false;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private courseMgService: CourseManageService,\r\n    private nzModalRef: NzModalRef) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.formGroup = this.fb.group({\r\n      name: [this.formData ? this.formData.name : '',\r\n        [Validators.required, Validators.maxLength(60), repeatName(this.data.children), spaceValidator()]]\r\n    });\r\n  }\r\n\r\n  getSeq(arr) {\r\n    let maxSeq = 0;\r\n    arr.forEach((item) => {\r\n      if (item.seq > maxSeq) {\r\n        maxSeq = item.seq;\r\n      }\r\n    });\r\n    maxSeq += 1;\r\n    return maxSeq;\r\n  }\r\n\r\n  save() {\r\n    if (!this.lock) {\r\n      Object.keys(this.formGroup.controls).forEach(key => {\r\n        this.formGroup.controls[key].markAsDirty();\r\n        this.formGroup.controls[key].updateValueAndValidity();\r\n      });\r\n      if (this.formGroup.invalid) {\r\n        return;\r\n      }\r\n      this.lock = true;\r\n      const sectionId = this.formData ? this.formData.id : '';\r\n      const sectionSeq = (this.formData && this.formData.seq) ?\r\n        this.formData.seq : (this.data.children.length ? this.getSeq(this.data.children) : 1);\r\n      const postData = {\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId,\r\n        chapters: [\r\n          {\r\n            id: this.data.id,\r\n            name: this.data.name,\r\n            seq: this.data.seq,\r\n            sections: [\r\n              {\r\n                id: sectionId,\r\n                name: this.formGroup.value.name,\r\n                seq: sectionSeq,\r\n              }\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n      this.loading = true;\r\n      this.courseMgService.save_courseChapter(postData).subscribe(res => {\r\n        this.lock = false;\r\n        this.loading = false;\r\n        if (res.status !== 200) {\r\n          return;\r\n        }\r\n        this.nzModalRef.close(res.data);\r\n      }, () => this.lock = false);\r\n    }\r\n  }\r\n\r\n  cancel() {\r\n    this.nzModalRef.close(null);\r\n  }\r\n\r\n}\r\n","<form nz-form [formGroup]=\"formGroup\">\r\n  <nz-form-item>\r\n    <nz-form-label [nzSm]=\"6\" [nzXs]=\"24\" nzRequired>本节名称</nz-form-label>\r\n    <nz-form-control [nzSm]=\"16\" [nzXs]=\"24\" [nzErrorTip]=\"errNameTipsTpl\">\r\n      <input nz-input formControlName=\"name\" placeholder=\"请输入节名称，60字以内\" />\r\n      <ng-template #errNameTipsTpl let-control>\r\n        <ng-container *ngIf=\"control.hasError('required')\">\r\n          请输入节名称\r\n        </ng-container>\r\n        <ng-container *ngIf=\"control.hasError('maxlength')\">\r\n          名称60字以内\r\n        </ng-container>\r\n        <ng-container *ngIf=\"control.hasError('repeatName')\">\r\n          重复名称\r\n        </ng-container>\r\n      </ng-template>\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n  <nz-form-item>\r\n    <nz-form-control [nzXs]=\"{ span: 24, offset: 0 }\" [nzSm]=\"{ span: 16, offset: 8 }\">\r\n      <button nz-button nzType=\"primary\" [nzLoading]=\"loading\" (click)=\"save()\">保存</button>\r\n      <button nz-button nzType=\"default\" style=\"margin-left: 20px;\" (click)=\"cancel()\">取消</button>\r\n    </nz-form-control>\r\n  </nz-form-item>\r\n</form>\r\n","<div style=\"margin-bottom: 15px;\" *ngIf=\"emptyChapter.length!==0\">\r\n  <ng-container *ngFor=\"let item of emptyChapter;let i=index;\">\r\n    <nz-alert\r\n      nzType=\"warning\"\r\n      nzMessage=\"{{ item + '没有节,请立即添加!' }}\">\r\n    </nz-alert>\r\n  </ng-container>\r\n</div>\r\n\r\n<nz-spin [nzSpinning]=\"isLoading\" [nzDelay]=\"0\">\r\n  <nz-tree\r\n    #treeVar\r\n    class=\"has-bg-tree\"\r\n    [nzData]=\"nodes\"\r\n    nzAsyncData\r\n    [nzExpandedKeys]=\"expandedKeys\"\r\n    [nzTreeTemplate]=\"nzTreeTemplate\"\r\n    [nzDraggable]=\"isDraggable\"\r\n    [nzBeforeDrop]=\"beforeDrop\"\r\n    (nzExpandChange)=\"nzEvent($event)\"\r\n    (nzOnDragEnd)=\"nzEvent($event)\"\r\n    (nzClick)=\"nzEvent($event)\">\r\n  </nz-tree>\r\n  <br />\r\n  <qkc-profession-label-add\r\n    *ngIf=\"!isStandard\"\r\n    title=\"+新增\"\r\n    [notPermitedShow]=\"isAddModel\"\r\n    [placeholder]=\"'请输入章名称'\"\r\n    (showChange)=\"prefessionLabelShowChange($event)\"\r\n    (addChange)=\"addChapter($event)\">\r\n  </qkc-profession-label-add>\r\n\r\n</nz-spin>\r\n\r\n<ng-template #nzTreeTemplate let-node>\r\n  <span class=\"custom-node\" draggable>\r\n    <span class=\"title\">\r\n      <ng-container\r\n        *ngTemplateOutlet=\"inputTpl; context: { $implicit:node }\">\r\n      </ng-container>\r\n    </span>\r\n\r\n    <span class=\"icon-container\">\r\n      <span class=\"icon-row\"\r\n        *ngIf=\"!node.origin.isEdit && !isStandard\">\r\n        <ng-container\r\n          *ngTemplateOutlet=\"iconTpl; context: { $implicit: node }\">\r\n        </ng-container>\r\n      </span>\r\n\r\n      <span class=\"icon-row\"\r\n        *ngIf=\"node.origin.isEdit\">\r\n        <ng-container\r\n          *ngTemplateOutlet=\"editTpl; context: { $implicit:node }\">\r\n        </ng-container>\r\n      </span>\r\n    </span>\r\n  </span>\r\n</ng-template>\r\n\r\n<ng-template #inputTpl let-node>\r\n  <span *ngIf=\"!node.origin.isEdit\">{{ node.title }}</span>\r\n  <input\r\n    *ngIf=\"node.origin.isEdit\"\r\n    nz-input\r\n    nzSize=\"small\"\r\n    class=\"input-edit\"\r\n    placeholder=\"请输入节名称\"\r\n    [(ngModel)]=\"node.origin.editTitle\"\r\n    (keyup.enter)=\"confirmEdit(node)\" />\r\n</ng-template>\r\n\r\n<ng-template #iconTpl let-node>\r\n  <i nz-icon nzType=\"edit\" nzTheme=\"outline\" (click)=\"edit(node)\"></i>\r\n  <i nz-icon nzType=\"minus-circle\" nzTheme=\"outline\" nz-popconfirm\r\n    nzPopconfirmTitle=\"确定删除?\"\r\n    (nzOnConfirm)=\"delete(node)\"\r\n    nzPopconfirmPlacement=\"topLeft\"></i>\r\n  <ng-container *ngIf=\"!node.isLeaf\">\r\n    <i nz-icon nzType=\"plus-circle\" nzTheme=\"outline\" (click)=\"add(node)\"></i>\r\n  </ng-container>\r\n  <i nz-icon nzType=\"drag\" nzTheme=\"outline\"  title=\"拖动调整结构\"></i>\r\n</ng-template>\r\n\r\n<ng-template #editTpl let-node>\r\n  <i nz-icon nzType=\"check\" nzTheme=\"outline\" (click)=\"confirmEdit(node)\"></i>\r\n  <i nz-icon nzType=\"close\" nzTheme=\"outline\" (click)=\"cancelEdit(node)\"></i>\r\n  <i nz-icon nzType=\"drag\" nzTheme=\"outline\" title=\"拖动调整结构\"></i>\r\n</ng-template>\r\n","import { Component, OnInit, Injector, Input, Output, EventEmitter, ViewChild } from '@angular/core';\r\nimport { NzFormatEmitEvent, NzTreeNode, NzTreeNodeOptions, NzFormatBeforeDropEvent } from 'ng-zorro-antd';\r\nimport { NzMessageService } from 'ng-zorro-antd';\r\nimport { of, Observable } from 'rxjs';\r\nimport { NzTreeComponent } from 'ng-zorro-antd';\r\nimport { HttpService } from 'core/services/http.service';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { CourseManageService } from 'src/app/busi-services/course-manage.service';\r\n\r\n@Component({\r\n  selector: 'app-structure-adjust-tree',\r\n  templateUrl: './structure-adjust-tree.component.html',\r\n  styleUrls: ['./structure-adjust-tree.component.less']\r\n})\r\nexport class StructureAdjustTreeComponent implements OnInit {\r\n\r\n  // actived node\r\n  activedNode: NzTreeNode;\r\n\r\n  isLoading = false;\r\n\r\n  nodes = [];\r\n\r\n  @Input() isDraggable = true;\r\n\r\n  // @Output() nodeChange = new EventEmitter<NzTreeNodeOptions>();\r\n  @Output() nodeChange = new EventEmitter<any>();\r\n\r\n  courseId = '';\r\n  coursePacketId = '';\r\n\r\n  isPermittedDrag = false;\r\n\r\n  emptyChapter = [];\r\n\r\n  /**\r\n   * 是在添加，章添加跟节添加，不能同时添加\r\n   */\r\n  isAddModel = false;\r\n\r\n  expandedKeys: string[] = [];\r\n\r\n  isStandard = false;\r\n\r\n  @ViewChild('treeVar') treeCom: NzTreeComponent;\r\n\r\n  constructor(\r\n    private injector: Injector,\r\n    private route: ActivatedRoute,\r\n    private courseMgService: CourseManageService\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.courseId = this.route.snapshot.paramMap.get('courseId');\r\n    this.coursePacketId = this.route.snapshot.paramMap.get('id');\r\n    this.isStandard = this.route.snapshot.paramMap.get('status') === '1';\r\n    // this.getCourseChapterTreeNode(this.coursePacketId);\r\n    this.getChapter();\r\n  }\r\n\r\n  get nzMesService() {\r\n    return this.injector.get(NzMessageService);\r\n  }\r\n\r\n  get httpService() {\r\n    return this.injector.get(HttpService);\r\n  }\r\n\r\n\r\n  nzEvent(evt: NzFormatEmitEvent): void {\r\n    if (evt.eventName === 'click') {\r\n      if (this.activedNode && this.activedNode.key !== evt.node.key && this.activedNode.origin.isEdit === true) {\r\n        this.activedNode.title = this.activedNode.origin.cacheTitle;\r\n        this.activedNode.origin.isEdit = false;\r\n      }\r\n      this.activedNode = evt.node;\r\n      // if (this.model === 'click' || this.model === 'custom') {\r\n      //   this.nodeChange.emit(evt.node.origin);\r\n      // }\r\n    } else if (evt.eventName === 'dragend') {\r\n\r\n      if (this.isPermittedDrag) {\r\n        const treeNodes: NzTreeNode[] = this.treeCom.getTreeNodes();\r\n        const treeOpts = this.resort(treeNodes);\r\n        const postData = this.transformPostTreeData(treeOpts);\r\n\r\n        this.courseMgService.save_courseChapter(postData).subscribe(res => {\r\n          // this.nodes = this.transformTreeNodes(res);\r\n          this.renderTree(res);\r\n        },\r\n          error => {\r\n\r\n          });\r\n      }\r\n    } else if (evt.eventName === 'expand') {\r\n      this.expandedKeys = evt.keys;\r\n      const node = evt.node;\r\n      if (node?.getChildren().length === 0 && node?.isExpanded) {\r\n        this.getSection(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  saveNode(node: NzTreeNode) {\r\n    node.origin.name = node.title;\r\n    const postData = this.transformPostTreeData(this.nodes);\r\n    this.courseMgService.save_courseChapter(postData).subscribe(res => {\r\n      this.renderTree(res.data);\r\n    });\r\n  }\r\n\r\n\r\n  confirmEdit(node: NzTreeNode) {\r\n    if (node.origin.editTitle.trim() === '') {\r\n      this.nzMesService.error('数据不能为空');\r\n      return;\r\n    }\r\n    const checkList = node.parentNode ? node.parentNode.children : this.nodes;\r\n    if (this.checkRepeatedName(node.origin.editTitle.trim(), checkList, [node.key])) {\r\n      this.isAddModel = false;\r\n      this.nzMesService.error('重复名称');\r\n      return;\r\n    }\r\n    this.isAddModel = false;\r\n    node.title = node.origin.editTitle.trim();\r\n    this.saveNode(node);\r\n  }\r\n\r\n  cancelEdit(node: NzTreeNode) {\r\n    this.isAddModel = false;\r\n    node.title = node.origin.cacheTitle;\r\n    if (node.key.indexOf('qkc') !== -1) {\r\n      node.remove();\r\n    }\r\n    node.origin.isEdit = false;\r\n  }\r\n\r\n  edit(node: NzTreeNode) {\r\n    node.origin.editTitle = node.title;\r\n    node.origin.isEdit = true;\r\n  }\r\n\r\n  delete(node: NzTreeNode) {\r\n    // if (node.level === 0) {\r\n    //   this.nodes = this.nodes.filter(ele => ele.key !== node.key)\r\n    // } else {\r\n    //   node.remove();\r\n    // }\r\n\r\n    if (node.origin._level === 1) {\r\n      this.delTreeNode(node.origin.id, 'chapter').subscribe(res => {\r\n        this.getCourseChapterTreeNode(this.coursePacketId);\r\n      });\r\n    } else {\r\n      this.delTreeNode(node.origin.id, 'section').subscribe(res => {\r\n        this.getCourseChapterTreeNode(this.coursePacketId);\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  add(node: NzTreeNode) {\r\n    if (!this.isPermitAdd()) {\r\n      return;\r\n    }\r\n    this.isAddModel = true;\r\n\r\n    const randomKey = this.createRandomNodeKey();\r\n    const treeOpt: NzTreeNodeOptions = {\r\n      title: '',\r\n      editTitle: '', // 使用这个，因为title是空的话，antd tree默认给一个 --- 值，所以不能用title双向绑定\r\n      key: randomKey,\r\n      isLeaf: true,\r\n      isEdit: true,\r\n      id: '',\r\n      seq: node.children.length + 1,\r\n      name: '',\r\n      _level: node.origin._level + 1\r\n    };\r\n    if (!this.expandedKeys.includes(node.key)) {\r\n      this.expandedKeys = [...this.expandedKeys, node.key];\r\n    }\r\n    node.addChildren([treeOpt]);\r\n  }\r\n\r\n  resort(tree: NzTreeNode[]) {\r\n    const tmpOpts: NzTreeNodeOptions[] = [];\r\n\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let i = 0; i < tree.length; i++) {\r\n      tmpOpts.push(tree[i].origin);\r\n    }\r\n    const recurTree = (nodes: NzTreeNodeOptions[]) => {\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        nodes[i].seq = i + 1;\r\n        if (nodes[i].children && nodes[i].children.length > 0) {\r\n          recurTree(nodes[i].children);\r\n        }\r\n      }\r\n    };\r\n\r\n    recurTree(tmpOpts);\r\n\r\n    return tmpOpts;\r\n  }\r\n\r\n  addChapter({ value }: { value: string, level: string }) {\r\n    if (this.checkRepeatedName(value, this.nodes, [])) {\r\n      this.isAddModel = false;\r\n      this.nzMesService.error('重复名称');\r\n      return;\r\n    }\r\n    this.isAddModel = false;\r\n    const len = this.nodes.length;\r\n    this.courseMgService.save_courseChapter({\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      chapters: [\r\n        {\r\n          id: '',\r\n          name: value,\r\n          seq: len + 1\r\n        }\r\n      ]\r\n    }).subscribe(res => {\r\n      // res = res[0];\r\n      // const node: NzTreeNodeOptions = {\r\n      //   title: value,\r\n      //   key: res.id,\r\n      //   isEdit: false,\r\n      //   isLeaf: false,\r\n      //   id: res.id,\r\n      //   ...res\r\n      // };\r\n      // console.log(node);\r\n      // this.nodes = [...this.nodes, node];\r\n\r\n      this.getCourseChapterTreeNode(this.coursePacketId);\r\n    });\r\n  }\r\n\r\n  createRandomNodeKey(): string {\r\n    return `qkc${new Date().getTime()}`;\r\n  }\r\n\r\n  beforeDrop = (arg: NzFormatBeforeDropEvent): Observable<boolean> => {\r\n\r\n    const orNode = arg.dragNode.parentNode || arg.node.parentNode;\r\n\r\n    let isOk = false;\r\n    if (orNode === null) {// 顶层\r\n      isOk = arg.pos === 0 ? false : true;\r\n    } else {\r\n      const andNode = arg.dragNode.parentNode && arg.node.parentNode;\r\n      if (andNode === null) {// 顶层与不同的层\r\n        isOk = false;\r\n      } else {\r\n        if (arg.dragNode.parentNode.key === arg.node.parentNode.key) {\r\n          isOk = true;\r\n        } else {\r\n          isOk = false;\r\n        }\r\n      }\r\n    }\r\n    this.isPermittedDrag = isOk;\r\n    return of(isOk);\r\n  }\r\n\r\n\r\n  /**\r\n   * 删除章/pkg/courseChapter/del 参数：id-章id\r\n   * 方视\r\n   * 删除节/pkg/courseSection/del 参数：id-节id\r\n   * 方视\r\n   * 删除节中资源、/pkg/courseSectionResource/del  id-资源记录id\r\n   * 方视\r\n   * 删除节中资源，参数不是资源的id，是这条对应记录的id。不是resourceId\r\n   * @param id id\r\n   * @param type 类型\r\n   */\r\n  delTreeNode(id: string, type: 'chapter' | 'section' | 'secRes' | 'secAllRes'): Observable<any> {\r\n    let url = '';\r\n    switch (type) {\r\n      case 'chapter':\r\n        url = 'pkg/courseChapter/del';\r\n        break;\r\n\r\n      case 'section':\r\n        url = 'pkg/courseSection/del';\r\n        break;\r\n\r\n      case 'secRes':\r\n        url = 'pkg/courseSectionResource/del';\r\n        break;\r\n\r\n      case 'secAllRes':\r\n        url = 'pkg/courseSectionResource/del';\r\n        break;\r\n\r\n      default:\r\n        url = '';\r\n    }\r\n    return new Observable<any>(observe => {\r\n      const options = {\r\n        isCommonHttpHeader: true\r\n      };\r\n      if (url === '') {\r\n        observe.error('empty url');\r\n        return;\r\n      }\r\n      this.httpService.post(url, { id }, options).subscribe(\r\n        result => {\r\n          observe.next(result);\r\n          observe.unsubscribe();\r\n        },\r\n        error => {\r\n          observe.error(error);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n\r\n  getCourseChapterTreeNode(coursePacketId: string): void {\r\n    const options = { isCommonHttpHeader: true };\r\n    this.isLoading = true;\r\n    this.httpService.post('pkg/courseChapter/courseChapterTreeNode', { coursePacketId }, options).subscribe(res => {\r\n      this.isLoading = false;\r\n\r\n      if (res.status === 200) {\r\n        this.renderTree(res.data);\r\n      } else {\r\n        this.nodes = [];\r\n      }\r\n    });\r\n  }\r\n\r\n  getChapter(): void {\r\n    this.isLoading = true;\r\n    this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe(res => {\r\n      this.isLoading = false;\r\n      if (res.status === 200) {\r\n        this.renderTree(res.data);\r\n      }\r\n    });\r\n  }\r\n\r\n  getSection(node: NzTreeNode): void {\r\n    this.courseMgService.getList_courseSection(node.key).subscribe(res => {\r\n      if (res.status === 200) {\r\n        node.addChildren(this.transformSectionTreeNodes(res.data));\r\n      } else {\r\n        node.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  transformSectionTreeNodes(nodes: any[]): NzTreeNodeOptions[] {\r\n    return nodes.map(node => {\r\n      return {\r\n        title: node.name,\r\n        cacheTitle: node.name,\r\n        key: node.id,\r\n        isEdit: false,\r\n        isLeaf: true,\r\n        _level: 2,\r\n        ...node\r\n      };\r\n    });\r\n  }\r\n\r\n  transformTreeNodes(data: any[]): any[] {\r\n\r\n    // 初始化第一层\r\n    data = data.map(ele => {\r\n      ele._level = 1;\r\n      return ele;\r\n    });\r\n\r\n    const emptyChapter = [];\r\n\r\n    const recurTree = (nodes: any[], level: number) => {\r\n\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        nodes[i].title = nodes[i].name;\r\n        nodes[i].cacheTitle = nodes[i].name;\r\n        nodes[i].key = nodes[i].id;\r\n        nodes[i].isEdit = false;\r\n\r\n        if (level !== -1) {\r\n          nodes[i]._level = level + 1;\r\n        }\r\n\r\n        if (nodes[i].children && nodes[i].children.length > 0) {\r\n          nodes[i].isLeaf = false;\r\n          recurTree(nodes[i].children, nodes[i]._level);\r\n        } else {\r\n          if (nodes[i]._level === 1) {\r\n            nodes[i].isLeaf = false;\r\n            // emptyChapter.push(nodes[i].title);\r\n          } else {\r\n            nodes[i].isLeaf = true;\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    recurTree(data, -1);\r\n    this.emptyChapter = emptyChapter;\r\n    return data;\r\n  }\r\n\r\n  transformPostTreeData(data: any[]) {\r\n    const postData: any = {\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId,\r\n      chapters: [\r\n      ]\r\n    };\r\n\r\n    const tmp = [];\r\n    const recurTree = (nodes: any[], parentNode: { [key: string]: any }) => {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < nodes.length; i++) {\r\n        let node = {};\r\n        if (nodes[i]._level === 2) {\r\n          node = {\r\n            id: nodes[i].id,\r\n            name: nodes[i].name,\r\n            seq: nodes[i].seq\r\n          };\r\n          parentNode.sections.push(node);\r\n        } else {\r\n          node = {\r\n            id: nodes[i].id,\r\n            name: nodes[i].name,\r\n            seq: nodes[i].seq,\r\n            sections: []\r\n          };\r\n        }\r\n\r\n        if (nodes[i].children && nodes[i].children.length > 0) {\r\n          tmp.push(node);\r\n          recurTree(nodes[i].children, node);\r\n        } else {\r\n          if (nodes[i]._level === 1) {\r\n            tmp.push(node);\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    recurTree(data, null);\r\n\r\n    postData.chapters = tmp;\r\n\r\n    return postData;\r\n  }\r\n\r\n  prefessionLabelShowChange(show: boolean) {\r\n    this.isAddModel = show;\r\n  }\r\n\r\n  isPermitAdd(): boolean {\r\n    if (this.isAddModel) {\r\n      this.nzMesService.warning('你已经在添加模式了，请处理完在添加！');\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  renderTree(data: any[]) {\r\n    this.nodes = this.transformTreeNodes(data);\r\n    this.expandedKeys = [...this.expandedKeys];\r\n  }\r\n\r\n  checkStructure(): boolean {\r\n    if (this.nodes.length === 0) {\r\n      return false;\r\n    }\r\n    for (const section of this.nodes) {\r\n      if (section.children && section.children.length === 0) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n\r\n  checkRepeatedName(name: string, nodes: NzTreeNode[], excludeIds: string []) {\r\n    for (const node of nodes) {\r\n      if (!excludeIds.includes(node.key) && node.title === name) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n   }\r\n\r\n}\r\n","<div class='header'>\r\n  课包内容研发统计表\r\n</div>\r\n<div class='content'>\r\n  <div class='content-title'>\r\n    学习设定\r\n  </div>\r\n  <nz-table #basicTable [nzData]=\"listOfData\">\r\n    <thead>\r\n    <tr>\r\n      <th>章名称</th>\r\n      <th>节名称</th>\r\n      <th *ngIf='teachType!==\"22\"'>讲义</th>\r\n      <th *ngIf='teachType===\"22\"'>录播</th>\r\n      <th *ngIf='teachType!==\"22\"'>任务</th>\r\n      <th>资料</th>\r\n    </tr>\r\n    </thead>\r\n    <tbody>\r\n    <tr *ngFor=\"let data of basicTable.data\">\r\n      <td>{{ data.courseChapterName }}</td>\r\n      <td>{{ data.courseSectionName }}</td>\r\n      <td *ngIf='teachType!==\"22\"'>{{ data.lectureNum }}</td>\r\n      <td *ngIf='teachType===\"22\"'>{{ data.videoNum }}</td>\r\n      <td *ngIf='teachType!==\"22\"'>{{ data.taskNum }}</td>\r\n      <td>{{ data.resourseNum }}</td>\r\n    </tr>\r\n    </tbody>\r\n  </nz-table>\r\n</div>\r\n<div class='content'>\r\n  <div class='content-title'>\r\n    其他设置\r\n  </div>\r\n  <nz-descriptions>\r\n    <nz-descriptions-item nzTitle=\"总课次\">{{lessonCount}}</nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"免费题库\">{{quebankNum}}个题库</nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"教学示范\">{{teachDemoNum}}个视频</nz-descriptions-item>\r\n  </nz-descriptions>\r\n</div>\r\n<div class='content'>\r\n  <div class='content-title'>\r\n    智适应\r\n  </div>\r\n  <nz-descriptions>\r\n    <nz-descriptions-item nzTitle=\"指导讲师\">{{authorNum}}位</nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"章节绑定\">共{{sectionNum}}个小节 、{{knowledgeNum}}个知识点</nz-descriptions-item>\r\n    <!--    <nz-descriptions-item nzTitle=\"冲刺考试\">-->\r\n    <!--      共2套试卷-->\r\n    <!--    </nz-descriptions-item>-->\r\n    <!--    <nz-descriptions-item nzTitle=\"押题考试\">共5套试卷</nz-descriptions-item>-->\r\n  </nz-descriptions>\r\n</div>\r\n\r\n\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\n\r\n@Component({\r\n  selector: 'app-complete-course',\r\n  templateUrl: './complete-course.component.html',\r\n  styleUrls: ['./complete-course.component.less']\r\n})\r\nexport class CompleteCourseComponent implements OnInit {\r\n  listOfData = [];\r\n  lessonCount: any = 0;\r\n  quebankNum: any = 0;\r\n  knowledgeNum: any = 0;\r\n  authorNum: any = 0;\r\n  sectionNum: any = 0;\r\n  teachDemoNum: any = 0;\r\n  teachType;\r\n  preview;\r\n  coursePacketId;\r\n\r\n  constructor(\r\n    private courseManageService: CourseManageService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.initParams();\r\n    this.getDetails();\r\n  }\r\n\r\n  getDetails() {\r\n    this.courseManageService.getDetails(this.coursePacketId).subscribe(res => {\r\n      if (res.status === 200) {\r\n        const {studySet, lessonCount, quebankNum, knowledgeNum, authorNum, sectionNum, teachDemoNum} = res.data;\r\n        this.listOfData = studySet ? studySet : [];\r\n        this.lessonCount = lessonCount ? lessonCount : 0;\r\n        this.quebankNum = quebankNum ? quebankNum : 0;\r\n        this.knowledgeNum = knowledgeNum ? knowledgeNum : 0;\r\n        this.authorNum = authorNum ? authorNum : 0;\r\n        this.sectionNum = sectionNum ? sectionNum : 0;\r\n        this.teachDemoNum = teachDemoNum ? teachDemoNum : 0;\r\n      }\r\n    });\r\n  }\r\n\r\n  private initParams() {\r\n    const {teachType, preview, id} = SessionStorageUtil.getPacketInfo();\r\n    this.teachType = teachType;\r\n    this.preview = preview;\r\n    this.coursePacketId = id;\r\n  }\r\n}\r\n","import {AfterViewChecked, Component} from '@angular/core';\r\nimport {timer} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'app-flex-table',\r\n  template: ``\r\n})\r\nexport class FlexTableComponent implements AfterViewChecked {\r\n  dom: any;\r\n  height;\r\n  lock = false;\r\n  limitHeight = 60;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngAfterViewChecked() {\r\n    if (!this.dom) {\r\n      if (!this.lock) {// 性能锁\r\n        this.lock = true;\r\n        const dom = document.getElementById('tableScroll'); // detached状态可能为空\r\n        if (dom) {\r\n            timer(0).subscribe(() => {\r\n              this.dom = document.getElementById('tableScroll'); // 异步渲染从渲染树重新获取\r\n              if (this.dom) {\r\n                this.height = this.dom.clientHeight - this.limitHeight; // 动态获取计算后的高度\r\n              }\r\n              this.lock = false;\r\n            });\r\n        } else {\r\n          this.lock = false;\r\n        }\r\n      }\r\n    } else {\r\n      const dom = document.getElementById('tableScroll');\r\n      if (dom && (dom.clientHeight - this.limitHeight) !== this.height) {\r\n        if (!this.lock) {\r\n          this.lock = true;\r\n          if (dom) {\r\n            timer(0).subscribe(() => {\r\n              this.dom = document.getElementById('tableScroll');\r\n              if (this.dom) {\r\n                this.height = this.dom.clientHeight - this.limitHeight;\r\n              }\r\n              this.lock = false;\r\n            });\r\n          } else {\r\n            this.lock = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import {Component, Inject, LOCALE_ID} from '@angular/core';\r\nimport {CourseListParams} from 'core/base/common';\r\nimport {formatDate} from '@angular/common';\r\nimport {FlexTableComponent} from '../flex-table/flex-table.component';\r\nimport {PAGE_CONSTANT} from 'core/base/static-data';\r\n\r\n@Component({\r\n  selector: 'app-course-data',\r\n  template: ``\r\n})\r\nexport class CourseDataComponent extends FlexTableComponent {\r\n  pageIndex = PAGE_CONSTANT.page;\r\n  pageSize = PAGE_CONSTANT.limit;\r\n  searchWord = '';\r\n  selectedValue = '';\r\n  dateRange = [];\r\n  data = [];\r\n  total = 0;\r\n  isLoading = false;\r\n  _PAGE_ID_;\r\n  courseMgService;\r\n  message;\r\n  route;\r\n  locale;\r\n\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  getDataList() {\r\n    this.isLoading = true;\r\n    const type = this.route.routeConfig.path;\r\n    const param: CourseListParams = {\r\n      page: this.pageIndex,\r\n      limit: this.pageSize,\r\n      searchKey: this.searchWord.trim(),\r\n      auditStatus: this.selectedValue || '',\r\n      filterKey: 'MANAGER',\r\n\r\n    };\r\n    if (type === 'course-list') {\r\n      param.startTime = '';\r\n      param.endTime = '';\r\n      if (this.dateRange.length) {\r\n        param.startTime = formatDate(this.dateRange[0], 'yyyy-MM-dd', this.locale);\r\n        param.endTime = formatDate(this.dateRange[1], 'yyyy-MM-dd', this.locale);\r\n      }\r\n    } else {\r\n      param.startBillDate = '';\r\n      param.endBillDate = '';\r\n      if (this.dateRange.length) {\r\n        param.startBillDate = formatDate(this.dateRange[0], 'yyyy-MM-dd', this.locale);\r\n        param.endBillDate = formatDate(this.dateRange[1], 'yyyy-MM-dd', this.locale);\r\n      }\r\n      if (type === 'i-initiated') {\r\n        param.queryFilterType = 'I_STARTED';\r\n      } else if (type === 'approve-all') {\r\n        param.queryFilterType = 'ALL_APPROVED';\r\n      }\r\n    }\r\n\r\n    this.courseMgService.getCourseListNew(param).subscribe(res => {\r\n      this.isLoading = false;\r\n      if (res.status !== 200) {\r\n        this.message.error(res.message);\r\n        return;\r\n      }\r\n      this.data = res.data || [];\r\n      this.total = res.page ? res.page.totalResult : 0;\r\n    }, err => {\r\n      this.isLoading = false;\r\n      this.message.error(JSON.stringify(err));\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","import {Component, Inject, LOCALE_ID, OnDestroy, OnInit} from '@angular/core';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {CourseDataComponent} from '@app/routes/course-manage/components/course-data/course-data.component';\r\nimport {of, Subject} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, startWith} from 'rxjs/operators';\r\nimport {formatDate} from '@angular/common';\r\nimport {PAGE_CONSTANT} from 'core/base/static-data';\r\n\r\n@Component({\r\n  selector: 'app-search-table',\r\n  template: ``\r\n})\r\nexport class SearchTableComponent extends CourseDataComponent implements OnInit, OnDestroy {\r\n  searchWordVal = '';\r\n  dateRangeVal = [];\r\n  selectedVal = '';\r\n  subject: Subject<object> = new Subject<object>();\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscribeChange();\r\n    this.initData();\r\n  }\r\n\r\n\r\n  ngOnAttach() {\r\n    this.collectParam();\r\n    this.sybcParam();\r\n    this.initData();\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.removeData();\r\n    this.subject.unsubscribe();\r\n  }\r\n\r\n\r\n  initData() {\r\n    this.searchData();\r\n  }\r\n\r\n\r\n  searchData(reset: boolean | string = false) {\r\n    if (reset === 'button') {\r\n      this.pageIndex = 1;\r\n      this.sybcParam();\r\n    } else if (reset === 'collect') {\r\n      this.collectParam();\r\n      this.sybcParam();\r\n    } else if (reset) {\r\n      this.resetData();\r\n    }\r\n    this.getDataList();\r\n  }\r\n\r\n  getDate(createTime) {\r\n    const now = new Date();\r\n    const startTime = new Date(formatDate(now, 'yyyy-MM-dd 00:00:00', this.locale)).getTime();\r\n    const endTime = new Date(formatDate(now, 'yyyy-MM-dd 23:59:59', this.locale)).getTime();\r\n    if (createTime) {\r\n      if (startTime < createTime && createTime < endTime) {\r\n        return formatDate(createTime, 'HH:mm', this.locale);\r\n      } else {\r\n        return formatDate(createTime, 'yyyy-MM-dd', this.locale);\r\n      }\r\n    } else {\r\n      return '--';\r\n    }\r\n  }\r\n\r\n\r\n  resetData() {\r\n    this.pageIndex = 1;\r\n    this.resetInit();\r\n    this.removeData();\r\n    this.getDataList();\r\n  }\r\n\r\n  resetInit() {\r\n    this.searchWord = '';\r\n    this.dateRange = [];\r\n    this.selectedValue = '';\r\n    this.searchWordVal = '';\r\n    this.dateRangeVal = [];\r\n    this.selectedVal = '';\r\n  }\r\n\r\n\r\n  collectParam() {\r\n    const {searchWordVal, dateRangeVal, selectedVal} = SessionStorageUtil.getSearch(this._PAGE_ID_);\r\n    this.searchWordVal = searchWordVal || '';\r\n    this.dateRangeVal = dateRangeVal || [];\r\n    this.selectedVal = selectedVal || '';\r\n  }\r\n\r\n  sybcParam() {\r\n    this.searchWord = this.searchWordVal;\r\n    this.dateRange = this.dateRangeVal;\r\n    this.selectedValue = this.selectedVal;\r\n  }\r\n\r\n  storingData() {\r\n    const {selectedVal, dateRangeVal, searchWordVal} = this;\r\n    this.passData({selectedVal, dateRangeVal, searchWordVal});\r\n  }\r\n\r\n  passData(value) {\r\n    this.subject.next(value);\r\n  }\r\n\r\n  subscribeChange() {\r\n    // distinctUntilChanged()\r\n    this.subject.pipe(debounceTime(200)).subscribe((value) => {\r\n      SessionStorageUtil.putSearch(this._PAGE_ID_, value);\r\n    });\r\n  }\r\n\r\n  removeData() {\r\n    SessionStorageUtil.clearSearch(this._PAGE_ID_);\r\n  }\r\n\r\n}\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {SearchTableComponent} from '@app/routes/course-manage/components/search-table/search-table.component';\r\nimport {map} from 'rxjs/operators';\r\nimport {Subscription} from 'rxjs';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\n\r\n@Component({\r\n  selector: 'app-course-data',\r\n  template: ``\r\n})\r\n\r\nexport class ResolverDataComponent extends SearchTableComponent implements OnDestroy {\r\n  pageIndex;\r\n  data$: Subscription;\r\n\r\n\r\n  constructor(public route: ActivatedRoute) {\r\n    super();\r\n  }\r\n\r\n  /*\r\n * @Override\r\n * */\r\n  initData() {\r\n    this.data$ = this.route.data.pipe(map(res => res.courseListData)).subscribe((ret) => {\r\n      const res = ret[0];\r\n      this.data = res.data || [];\r\n      this.total = res.page ? res.page.totalResult : 0;\r\n    });\r\n  }\r\n\r\n  ngOnDetach() {\r\n    SessionStorageUtil.putPageInfo(this._PAGE_ID_, JSON.stringify({\r\n      page: this.pageIndex,\r\n      limit: this.pageSize\r\n    }));\r\n    this.data$.unsubscribe();\r\n  }\r\n\r\n  /*\r\n  * @Overide\r\n  * */\r\n  ngOnDestroy() {\r\n    super.ngOnDestroy();\r\n    SessionStorageUtil.removePageInfo(this._PAGE_ID_);\r\n  }\r\n\r\n}\r\n","import {Component, OnInit, Input, Output, EventEmitter, ViewChild} from '@angular/core';\r\nimport {NzTreeComponent, NzFormatEmitEvent, NzTreeNode, NzTreeNodeOptions} from 'ng-zorro-antd/tree';\r\nimport {CourseManageService} from 'src/app/busi-services/course-manage.service';\r\nimport {timer} from \"rxjs\";\r\n\r\nexport type CourseStructureTreeType = 'chapter' | 'section' | 'course-time-division';\r\n\r\nexport interface NodeChangeEvent {\r\n  type: CourseStructureTreeType;\r\n  data: any;\r\n\r\n  [key: string]: any;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-course-structure-tree',\r\n  templateUrl: './course-structure-tree.component.html',\r\n  styleUrls: ['./course-structure-tree.component.less']\r\n})\r\nexport class CourseStructureTreeComponent implements OnInit {\r\n  nodes: NzTreeNodeOptions[] = [];\r\n  expandedKeys = [];\r\n  selectedKeys = [];\r\n  @Input() coursePacketId: string;\r\n  @Input() defaultSection: any;\r\n  @Input() defaultExpandedKeys = [];\r\n  @Input() chapterSelectable = true;\r\n  @Input() type: 'display' | 'operate' = 'operate'; // display 纯展示  operate 可操作节点\r\n  @Output() nodeChange = new EventEmitter<NodeChangeEvent>();\r\n  @ViewChild('treeVar') treeCom: NzTreeComponent;\r\n\r\n  constructor(\r\n    private courseMgService: CourseManageService) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getChapter();\r\n  }\r\n\r\n  nzEvent(evt: NzFormatEmitEvent): void {\r\n    if (evt.eventName === 'click') {\r\n      const node = evt.node;\r\n      const type = node.level === 0 ? 'chapter' : 'section';\r\n      this.sendNodeChange(type, node.origin);\r\n    } else if (evt.eventName === 'expand') {\r\n      const node = evt.node;\r\n      if (node?.getChildren().length === 0 && node?.isExpanded) {\r\n        this.getSection(node);\r\n      }\r\n    }\r\n  }\r\n\r\n  getChapter(): void {\r\n    this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe(res => {\r\n      if (res.status === 200) {\r\n        this.nodes = this.transformTreeNodes(res.data, false, 0);\r\n        if (this.nodes.length > 0) {\r\n          if (this.defaultExpandedKeys && this.defaultExpandedKeys.length) {\r\n            setTimeout(() => {\r\n              this.expandedKeys = this.defaultExpandedKeys;\r\n              const treeNode = this.treeCom.getTreeNodeByKey(this.defaultExpandedKeys[0]);\r\n              this.getSection(treeNode);\r\n            }, 400);\r\n          } else {\r\n            this.expandedKeys = [this.nodes[0].id];\r\n            setTimeout(() => {\r\n              const treeNode = this.treeCom.getTreeNodeByKey(this.nodes[0].id);\r\n              this.getSection(treeNode);\r\n            }, 400);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  getSection(node: NzTreeNode): void {\r\n    if (node) {\r\n      node.isLoading = true;\r\n      this.courseMgService.getList_courseSection(node.key).subscribe(res => {\r\n        if (res.status === 200) {\r\n          const childrenNodes = this.transformTreeNodes(res.data, true, node.origin.index);\r\n          node.addChildren(childrenNodes);\r\n          if (this.defaultSection) {\r\n            this.selectedKeys = [this.defaultSection.key];\r\n            this.sendNodeChange('section',  this.defaultSection);\r\n          } else {\r\n            if (childrenNodes.length > 0) {\r\n              this.selectedKeys = [childrenNodes[0].key];\r\n              this.sendNodeChange('section', childrenNodes[0]);\r\n            }\r\n          }\r\n        } else {\r\n          node.isLoading = false;\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  transformTreeNodes(nodes: any[], isLeaf: boolean, chapterIdx: number): NzTreeNodeOptions[] {\r\n    return nodes.map((node, index) => {\r\n      return {\r\n        title: !isLeaf ? `第${index + 1}章   ${node.name}` : `${chapterIdx + 1}.${index + 1}节 ${node.name}`,\r\n        key: node.id,\r\n        selectable: !isLeaf ? this.chapterSelectable : true,\r\n        index,\r\n        isLeaf,\r\n        ...node\r\n      };\r\n    });\r\n  }\r\n\r\n  sendNodeChange(type: CourseStructureTreeType, data: any) {\r\n    if (type === 'chapter' && !this.chapterSelectable) {\r\n      return;\r\n    }\r\n    this.nodeChange.emit({type, data});\r\n  }\r\n\r\n}\r\n","<nz-tree\r\n#treeVar\r\nnzBlockNode\r\nnzAsyncData\r\n[nzData]=\"nodes\"\r\n[nzExpandedKeys]=\"expandedKeys\"\r\n[nzSelectedKeys]=\"selectedKeys\"\r\n(nzClick)=\"nzEvent($event)\"\r\n[nzTreeTemplate]=\"type=='display'?nzTreeTemplate:null\"\r\n(nzExpandChange)=\"nzEvent($event)\"\r\n[nzShowIcon]=\"type=='display'\"\r\n[nzExpandedIcon]=\"multiExpandedIconTpl\"\r\n[nzShowLine]=\"type=='display'\">\r\n</nz-tree>\r\n\r\n<ng-template #nzTreeTemplate let-node>\r\n    <div class=\"node-row\">\r\n        <span>\r\n            {{node.origin.title}}\r\n        </span>\r\n        <span style=\"font-size:12px;color:#999;\"  *ngIf=\"!node.isLeaf\">\r\n            共{{node.origin.sectionCount||0}}个小节\r\n        </span>\r\n    </div>\r\n</ng-template>\r\n\r\n<ng-template #multiExpandedIconTpl let-node let-origin=\"origin\">\r\n    <i *ngIf=\"!origin.isLeaf\" nz-icon [nzType]=\"node.isExpanded ? 'caret-down' : 'caret-right'\" class=\"ant-tree-switcher-line-icon\"></i>\r\n    <i *ngIf=\"origin.isLeaf&&type=='display'\" class=\"circle\"></i>\r\n  </ng-template>","import {ConfirmableDescription, ConfirmableFlatDescription, Json, LoadingControl} from '../base/common';\r\nimport {NzModalRef} from 'ng-zorro-antd';\r\nimport {ToolsUtil} from '../utils/tools.util';\r\n\r\n// 属性装饰器\r\nexport function takeAnInteger() {\r\n  return (target: object, key: string | symbol) => {\r\n    let val = target[key];\r\n    const getter = () => {\r\n      return val;\r\n    };\r\n    const setter = value => {\r\n      val = value.tofix(0);\r\n    };\r\n    Object.defineProperty(target, key, {\r\n      get: getter,\r\n      set: setter,\r\n      enumerable: true,\r\n      configurable: true\r\n    });\r\n  };\r\n}\r\n\r\nexport declare interface GetSetCallOption<T> {\r\n  get?: (propertyValue: T) => T;\r\n  set?: (newValue: T, preValue: T) => void;\r\n  initSet?: (newValue: T, preValue: T) => void;\r\n  initValue?: T; // 此处设置初始值不会调用set\r\n}\r\n\r\n// 属性装饰器\r\n/*\r\n集中私有属性添加，分化&简化\r\n */\r\nexport function getSetChange<T>(getSetCall: GetSetCallOption<T>) {\r\n  return (target: object, key: string): void => {\r\n    let propertyValue = getSetCall.initValue;\r\n    const label = new Array(16).fill(0).reduce(total => total += Math.floor(Math.random() * 16).toString(16));\r\n    Object.defineProperty(target, key, {\r\n      get() {\r\n        if (this[label]) {\r\n          return getSetCall.get ? getSetCall.get.call(this, propertyValue) : propertyValue;\r\n        } else {\r\n          return getSetCall.get ? getSetCall.get.call(this, getSetCall.initValue) : getSetCall.initValue;\r\n        }\r\n      },\r\n      set(newValue) {\r\n        if (this[label]) {\r\n          getSetCall.set?.call(this, newValue, propertyValue);\r\n        } else {\r\n          this[label] = true;\r\n          if (getSetCall.initSet) {\r\n            getSetCall.initSet.call(this, newValue, propertyValue);\r\n          } else {\r\n            getSetCall.set?.call(this, newValue, propertyValue);\r\n          }\r\n        }\r\n        propertyValue = newValue;\r\n      }\r\n    });\r\n  };\r\n}\r\n\r\n// 构造器装饰器\r\nexport function extendPrototype(greeting: string) {\r\n  // tslint:disable-next-line:ban-types only-arrow-functions\r\n  return function(target: Function) {\r\n    // tslint:disable-next-line:only-arrow-functions\r\n    target.prototype.greet = function(): void {\r\n      console.log(greeting);\r\n    };\r\n  };\r\n}\r\n\r\n// 方法装饰器\r\nexport function ConfirmableDesc(params: ConfirmableDescription) {\r\n  return (\r\n    target: object,\r\n    key: string | symbol,\r\n    descriptor: PropertyDescriptor\r\n  ) => {\r\n    const original = descriptor.value;\r\n    descriptor.value = function(...args: any[]) {\r\n      const {\r\n        title, content, type, replaceXxxField,\r\n        conditionField, conditionResult, conditionTitleReplace, conditionContentReplace, condition\r\n      } = params;\r\n      const conditionIf = typeof condition !== 'undefined';\r\n      // tslint:disable-next-line:max-line-length\r\n      const resultCondition = conditionIf ? condition() : (conditionField && conditionResult && (args[0][conditionField] === conditionResult));\r\n      const resultContent = resultCondition ? conditionContentReplace : content;\r\n      this.modalService[type]({\r\n        nzTitle: resultCondition ? conditionTitleReplace || title : title,\r\n        nzContent: replaceXxxField ? resultContent.replace('xxx', args[0][replaceXxxField]) : resultContent,\r\n        nzMaskClosable: false,\r\n        nzWrapClassName: 'vertical-center-modal',\r\n        nzCancelText: '取消',\r\n        nzOkText: '确定',\r\n        nzOnOk: (e) => {\r\n          const result = original.apply(this, args);\r\n          return result;\r\n        },\r\n        nzOnCancel() {\r\n          return null;\r\n        }\r\n      });\r\n    };\r\n    return descriptor;\r\n  };\r\n}\r\n\r\n// 方法装饰器\r\nexport function ConfirmableFlat(params: ConfirmableFlatDescription) {\r\n  return (\r\n    target: object,\r\n    key: string | symbol,\r\n    descriptor: PropertyDescriptor\r\n  ) => {\r\n    const {title, content, type, nzBodyStyle, nzWrapClassName, nzComponentParams, nzOkText, nzCancelText, nzOnCancel} = params;\r\n    const original = descriptor.value;\r\n    descriptor.value = function(...args: any[]) {\r\n      const loadingControl: Partial<LoadingControl> = {};\r\n      const modal: NzModalRef = this.modalService[typeof type === 'function' ? type.call(this, args) : (type || 'info')]({\r\n        nzTitle: typeof title === 'function' ? title.call(this, args) : title,\r\n        nzContent: typeof content === 'function' ? content.call(this, args) : content,\r\n        nzMaskClosable: false,\r\n        nzWrapClassName,\r\n        nzComponentParams,\r\n        nzBodyStyle,\r\n        nzOkText: nzOkText || '确定',\r\n        nzCancelText: nzCancelText || '取消',\r\n        nzOnCancel: () => {\r\n          if (nzOnCancel) {\r\n            return nzOnCancel.apply(this, Array.prototype.concat.call(args, loadingControl, modal));\r\n          }\r\n        },\r\n        nzOnOk: () => {\r\n          return original.apply(this, Array.prototype.concat.call(args, loadingControl, modal));\r\n        },\r\n      });\r\n      ToolsUtil.watchTool(loadingControl, 'loading', false, (val) => {\r\n        modal.updateConfig({nzOkLoading: val});\r\n      });\r\n    };\r\n    return descriptor;\r\n  };\r\n}\r\n\r\n// 方法装饰器\r\n// tslint:disable-next-line:ban-types\r\nexport function LogOutput(tarage: Function, key: string, descriptor: any) {\r\n  const originalMethod = descriptor.value;\r\n  const newMethod = function(...args: any[]): any {\r\n    const result: any = originalMethod.apply(this, args);\r\n    if (!this.loggedOutput) {\r\n      this.loggedOutput = new Array<any>();\r\n    }\r\n    this.loggedOutput.push({\r\n      method: key,\r\n      parameters: args,\r\n      output: result,\r\n      timestamp: new Date()\r\n    });\r\n    return result;\r\n  };\r\n  descriptor.value = newMethod;\r\n}\r\n\r\n// 参数装饰器\r\n// tslint:disable-next-line:ban-types\r\nexport function Log(target: Function, key: string, parameterIndex: number) {\r\n  const functionLogged = key || target.prototype.constructor.name;\r\n  console.log(`The parameter in position ${parameterIndex} at ${functionLogged} has\r\n    been decorated`);\r\n}\r\n\r\n\r\n// 类装饰器\r\n// @Component、@NgModule、@Pipe、@Injectable\r\n// 属性装饰器\r\n// @Input、@Output、@ContentChild、@ContentChildren、@ViewChild、@ViewChildren\r\n// 方法装饰器\r\n// @HostListener\r\n// 参数装饰器\r\n// @Inject、@Optional、@Self、@SkipSelf、@Host\r\n\r\n\r\n/**\r\n * Component decorator and metadata.\r\n */\r\n// export const Component: ComponentDecorator = <ComponentDecorator>makeDecorator(\r\n//   'Component', {\r\n//     selector: undefined, // 用于定义组件在HTML代码中匹配的标签\r\n//     inputs: undefined, // 组件的输入属性\r\n//     outputs: undefined, // 组件的输出属性\r\n//     host: undefined, // 绑定宿主的属性、事件等\r\n//     exportAs: undefined, // 导出指令，使得可以在模板中调用\r\n//     moduleId: undefined, // 包含该组件模块的id，它被用于解析模板和样式的相对路径\r\n//     providers: undefined, // 设置组件及其子组件可以用的服务\r\n//     viewProviders: undefined, // 设置组件及其子组件(不含ContentChildren)可以用的服务\r\n//     changeDetection: ChangeDetectionStrategy.Default, // 指定组件使用的变化检测策略\r\n//     queries: undefined, // 设置组件的查询条件\r\n//     templateUrl: undefined, // 为组件指定一个外部模板的URL地址\r\n//     template: undefined, // 为组件指定一个内联的模板\r\n//     styleUrls: undefined, // 为组件指定一系列用于该组件的样式表文件\r\n//     styles: undefined, // 为组件指定内联样式\r\n//     animations: undefined, // 设置组件相关动画\r\n//     encapsulation: undefined, // 设置组件视图包装选项\r\n//     interpolation: undefined, // 设置默认的插值运算符，默认是\"{{\"和\"}}\"\r\n//     entryComponents: undefined // 设置需要被提前编译的组件\r\n//   },\r\n//   Directive);\r\n// 模块注入器和组件注入器，Angular 还提供了第三种注入器，即多级元素注入器\r\n// Angular 会按照三个阶段来解析依赖，起始阶段就是使用多级元素注入器，然后是多级组件注入器，最后是多级模块注入器。\r\n","<div class=\"container\">\r\n  <div class='item'>\r\n    <div class='item-left'>\r\n      <span style='color:red;margin-right:10px;' *ngIf='examTimeRequire&&intellectualAdaptation'>*</span>国家考试日期：\r\n    </div>\r\n    <nz-date-picker [(ngModel)]=\"examTime\"\r\n                    (nzOnOpenChange)='timeOpen($event,\"examTime\")'\r\n                    (ngModelChange)=\"timeChange($event,'examTime')\"\r\n                    style='margin-left:20px;width:200px' [disabled]='preview===\"1\"'></nz-date-picker>\r\n  </div>\r\n  <div class='item'>\r\n    <div class='item-left'>\r\n      <span style='color:red;margin-right:10px;'>*</span>智适应：\r\n    </div>\r\n    <nz-switch [(ngModel)]=\"intellectualAdaptation\" nzCheckedChildren=\"开\" nzUnCheckedChildren=\"关\"\r\n               style='margin-left:20px;' [nzDisabled]='preview===\"1\"||isStandard'></nz-switch>\r\n\r\n<!--    <button nz-button nzType=\"primary\" (click)='export()' style='float:right'>知识点详情导出</button>-->\r\n  </div>\r\n  <ng-container *ngIf='intellectualAdaptation'>\r\n    <div class='item' *ngIf='teachType===\"22\"'>\r\n      <div class='item-left'>\r\n        <span style='color:red;margin-right:10px;'>*</span>指导讲师：\r\n      </div>\r\n      <ng-container *ngIf='teacherData.length'>\r\n        <div class='instructor-teach'\r\n             [class.active]='clickFlag[i]'\r\n             [ngStyle]='{cursor: preview===\"0\"?\"\":\"not-allowed\"}'\r\n             (click)='getflag(i,item)'\r\n             *ngFor='let item of teacherData;let i= index;'>\r\n          <div class='title'>\r\n            {{item.teacherName}}\r\n          </div>\r\n          <div class='sub-title'>\r\n            缺少{{item.lackVideoNum}}个主视频\r\n          </div>\r\n          <div class='icon-teacher'>\r\n            <i nz-icon nzType=\"check\" nzTheme=\"outline\"></i>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n      <span *ngIf='!teacherData.length' style='margin-left: 10px;'>暂无数据</span>\r\n    </div>\r\n\r\n\r\n    <div class='item'>\r\n      <div class='item-left'>\r\n        <span style='color:red;margin-right:10px;'>*</span>章节绑定：\r\n      </div>\r\n      <button nz-button nzType=\"primary\" style='margin-left:20px;' (click)='bind()' [disabled]='preview===\"1\"'>绑定\r\n      </button>\r\n      <nz-spin [nzSpinning]=\"untieLoading\" [nzDelay]=\"0\">\r\n        <nz-table #basicTable [nzData]=\"listOfData\" style='margin:20px 0 0 130px' [nzPageSize]='5'>\r\n          <thead>\r\n          <tr>\r\n            <th>课包结构</th>\r\n            <th>知识图谱</th>\r\n            <th>操作</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr *ngFor=\"let data of basicTable.data\">\r\n            <td>{{ data.sectionName }}</td>\r\n            <td nz-tooltip [nzTooltipTitle]=\"data.knowledgeUnits\">{{ getBingData(data.knowledgeUnits) }}</td>\r\n            <td>\r\n              <a (click)=\"modify(data)\" style='margin-right:5px;'>修改</a>\r\n              <a (click)=\"untie(data)\" style='color:red;'>解绑</a>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </nz-spin>\r\n      <nz-divider></nz-divider>\r\n\r\n      <ng-container *ngIf='teachType===\"22\"'>\r\n        <div class='item-left'>\r\n          <span style='color:red;margin-right:10px;'>*</span>学习计划：<i nz-icon nzType=\"question-circle\" nzTheme=\"outline\"\r\n                                                                     nz-tooltip nzTooltipTitle=\"学习周期不能大于课包中小节总数\"\r\n                                                                     class='question-circle'\r\n                                                                     [nzTooltipOverlayStyle]='{\"max-width\": \"255px\"}'></i>\r\n        </div>\r\n        <nz-table style='margin:20px 0 0 130px' [nzFrontPagination]='false' [nzData]=\"dataSet\">\r\n          <thead>\r\n          <tr>\r\n            <th>适用人群</th>\r\n            <th>学习周期(共{{totalSectionNum}}节）</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr>\r\n            <td>\r\n              适合初学\r\n            </td>\r\n            <td>\r\n              <label nz-checkbox [(ngModel)]=\"applicableZeroBasis\"\r\n                     [disabled]='preview===\"1\"'\r\n                     (ngModelChange)='applicableChange($event,\"juniorWeekNum\",\"applicableZeroBasisWeek\")'\r\n                     style='margin-right:20px;'></label>计划1\r\n              <nz-input-number [disabled]=\"!applicableZeroBasis||preview==='1'\" [(ngModel)]=\"applicableZeroBasisWeek\"\r\n                               [nzMin]=\"1\"\r\n                               (nzFocus)='applicableFocus(\"applicableZeroBasisWeek\")'\r\n                               nzPlaceHolder='请输入周期'\r\n                               (nzBlur)='applicableWeekChange($event,\"juniorWeekNum\",\"applicableZeroBasisWeek\")'\r\n                               [nzStep]=\"1\" style='margin:0 10px;min-width:120px'></nz-input-number>\r\n              周\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              适合有基础\r\n            </td>\r\n            <td>\r\n              <label nz-checkbox [(ngModel)]=\"applicableHasAFoundation\"\r\n                     [disabled]='preview===\"1\"'\r\n                     (ngModelChange)='applicableChange($event,\"middleWeekNum\",\"applicableHasAFoundationWeek\")'\r\n                     style='margin-right:20px;'></label>计划2\r\n              <nz-input-number [disabled]=\"!applicableHasAFoundation||preview==='1'\"\r\n                               [(ngModel)]=\"applicableHasAFoundationWeek\"\r\n                               [nzMin]=\"1\" [nzStep]=\"1\" style='margin:0 10px;min-width:120px'\r\n                               nzPlaceHolder='请输入周期'\r\n                               (nzFocus)='applicableFocus(\"applicableHasAFoundationWeek\")'\r\n                               (nzBlur)='applicableWeekChange($event,\"middleWeekNum\",\"applicableHasAFoundationWeek\")'\r\n              ></nz-input-number>\r\n              周\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>\r\n              适合速成\r\n            </td>\r\n            <td>\r\n              <label nz-checkbox [(ngModel)]=\"applicableExperts\"\r\n                     [disabled]='preview===\"1\"'\r\n                     (ngModelChange)='applicableChange($event,\"seniorWeekNum\",\"applicableExpertsWeek\")'\r\n                     style='margin-right:20px;'></label>计划3\r\n              <nz-input-number [disabled]=\"!applicableExperts||preview==='1'\" [(ngModel)]=\"applicableExpertsWeek\"\r\n                               [nzMin]=\"1\"\r\n                               [nzStep]=\"1\" style='margin:0 10px;min-width:120px'\r\n                               nzPlaceHolder='请输入周期'\r\n                               (nzFocus)='applicableFocus(\"applicableExpertsWeek\")'\r\n                               (nzBlur)='applicableWeekChange($event,\"seniorWeekNum\",\"applicableExpertsWeek\")'\r\n              ></nz-input-number>\r\n              周\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </nz-table>\r\n        <nz-divider></nz-divider>\r\n      </ng-container>\r\n      <!--      <div>-->\r\n      <!--        <div class='item-left'>-->\r\n      <!--          <span style='color:red;margin-right:10px;'>*</span>精讲阶段：-->\r\n      <!--        </div>-->\r\n      <!--        <nz-switch [(ngModel)]=\"isDailyOn\" nzCheckedChildren=\"开\"-->\r\n      <!--                   (ngModelChange)=\"isSwitchOnChange('isDailyOn')\"-->\r\n      <!--                   nzUnCheckedChildren=\"关\"-->\r\n      <!--                   style='margin-left:20px;' [nzDisabled]='preview===\"1\"||isStandard'></nz-switch>-->\r\n      <!--      </div>-->\r\n      <!--      <nz-divider></nz-divider>-->\r\n      <div>\r\n        <div class='item-left'>\r\n          <span style='color:red;margin-right:10px;'>*</span>冲刺阶段：\r\n        </div>\r\n        <nz-switch [nzDisabled]='preview===\"1\"||isStandard' [(ngModel)]=\"isSprintOn\" nzCheckedChildren=\"开\"\r\n                   nzUnCheckedChildren=\"关\"\r\n                   (ngModelChange)=\"isSwitchOnChange('isSprintOn')\"\r\n                   style='margin-left:20px;'></nz-switch>\r\n      </div>\r\n      <div *ngIf='isSprintOn' style='margin-top:20px'>\r\n        <div class='item-left'>\r\n          <span style='color:red;margin-right:10px;'>*</span>冲刺开始日期：\r\n        </div>\r\n        <nz-date-picker [(ngModel)]=\"sprintTime\"\r\n                        (nzOnOpenChange)='timeOpen($event,\"sprintTime\")'\r\n                        (ngModelChange)=\"timeChange($event,'sprintTime')\"\r\n                        style='margin-left:20px;width:200px' [disabled]='preview===\"1\"'></nz-date-picker>\r\n      </div>\r\n      <!--      <div class='item'>-->\r\n      <!--        <div class='item-left'>-->\r\n      <!--          <span style='color:red;margin-right:10px;'>*</span>冲刺考试：-->\r\n      <!--        </div>-->\r\n      <!--        <div class='list-container'>-->\r\n      <!--          <div class='list'>-->\r\n      <!--            <div style='float:left'>-->\r\n      <!--              <i nz-icon nzType=\"file-text\" nzTheme=\"outline\"></i>-->\r\n      <!--              <span style='margin-left:20px;'>试卷名称</span>-->\r\n      <!--            </div>-->\r\n      <!--            <div style='float:right'>-->\r\n      <!--              <div class='operat'>-->\r\n      <!--                <i nz-icon nzType=\"eye\" nzTheme=\"outline\" style='cursor:pointer;'></i>-->\r\n      <!--                <span class='icon-del'>预览</span>-->\r\n      <!--              </div>-->\r\n      <!--              <div class='operat' *ngIf='preview===\"0\"'>-->\r\n      <!--                <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style='cursor:pointer;'></i>-->\r\n      <!--                <span class='icon-del'>编辑</span>-->\r\n      <!--              </div>-->\r\n      <!--              <div class='operat' *ngIf='preview===\"0\"'>-->\r\n      <!--                <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style='cursor:pointer;'></i>-->\r\n      <!--                <span class='icon-del'>删除</span>-->\r\n      <!--              </div>-->\r\n      <!--            </div>-->\r\n      <!--          </div>-->\r\n      <!--        </div>-->\r\n\r\n      <!--      </div>-->\r\n      <!--      <button nz-button style='margin-left:100px' (click)='addVolume()' *ngIf='preview===\"0\"'>新增组卷</button>-->\r\n      <!--      <button nz-button style='margin-left:20px' *ngIf='preview===\"0\"'>试卷调用</button>-->\r\n      <nz-divider></nz-divider>\r\n      <div>\r\n        <div class='item-left'>\r\n          <span style='color:red;margin-right:10px;'>*</span>密押阶段：\r\n        </div>\r\n        <nz-switch [(ngModel)]=\"isFinalOn\" nzCheckedChildren=\"开\" nzUnCheckedChildren=\"关\"\r\n                   (ngModelChange)=\"isSwitchOnChange('isFinalOn')\"\r\n                   style='margin-left:20px;' [nzDisabled]='preview===\"1\"||isStandard'></nz-switch>\r\n      </div>\r\n\r\n\r\n      <div *ngIf='isFinalOn' style='margin-top:20px'>\r\n        <div class='item-left'>\r\n          <span style='color:red;margin-right:10px;'>*</span>密押开始日期：\r\n        </div>\r\n        <nz-date-picker [(ngModel)]=\"finalTime\"\r\n                        (nzOnOpenChange)='timeOpen($event,\"finalTime\")'\r\n                        (ngModelChange)=\"timeChange($event,'finalTime')\"\r\n                        style='margin-left:20px;width:200px' [disabled]='preview===\"1\"'></nz-date-picker>\r\n      </div>\r\n\r\n      <!--      <div class='item'>-->\r\n      <!--        <div class='item-left'>-->\r\n      <!--          <span style='color:red;margin-right:10px;'>*</span>押题考试：-->\r\n      <!--        </div>-->\r\n      <!--        <div class='list-container'>-->\r\n      <!--          <div class='list'>-->\r\n      <!--            <div style='float:left'>-->\r\n      <!--              <i nz-icon nzType=\"file-text\" nzTheme=\"outline\"></i>-->\r\n      <!--              <span style='margin-left:20px;'>试卷名称</span>-->\r\n      <!--            </div>-->\r\n      <!--            <div style='float:right'>-->\r\n      <!--              <div class='operat'>-->\r\n      <!--                <i nz-icon nzType=\"eye\" nzTheme=\"outline\" style='cursor:pointer;'></i>-->\r\n      <!--                <span class='icon-del'>预览</span>-->\r\n      <!--              </div>-->\r\n      <!--              <div class='operat'>-->\r\n      <!--                <i nz-icon nzType=\"edit\" nzTheme=\"outline\" style='cursor:pointer;' *ngIf='preview===\"0\"'></i>-->\r\n      <!--                <span class='icon-del'>编辑</span>-->\r\n      <!--              </div>-->\r\n      <!--              <div class='operat'>-->\r\n      <!--                <i nz-icon nzType=\"delete\" nzTheme=\"outline\" style='cursor:pointer;' *ngIf='preview===\"0\"'></i>-->\r\n      <!--                <span class='icon-del'>删除</span>-->\r\n      <!--              </div>-->\r\n      <!--            </div>-->\r\n      <!--          </div>-->\r\n      <!--        </div>-->\r\n      <!--      </div>-->\r\n      <!--      <button nz-button style='margin-left:100px' (click)='addVolume()' *ngIf='preview===\"0\"'>新增组卷</button>-->\r\n      <!--      <button nz-button style='margin-left:20px' *ngIf='preview===\"0\"'>试卷调用</button>-->\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n\r\n\r\n<!--<nz-modal [(nzVisible)]=\"isVisible\" [nzMaskClosable]=\"false\" nzTitle=\"考试设置\" (nzOnCancel)=\"isVisible=false\">-->\r\n<!--  <form nz-form [formGroup]=\"examSettingForm\">-->\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>考试时长</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"不能为空\">-->\r\n<!--        <nz-input-number [nzMin]=\"1\" [nzStep]=\"1\"-->\r\n<!--                         formControlName=\"examLength\" style='margin-right:10px'></nz-input-number>-->\r\n<!--        分钟-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>是否机考</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"不能为空\">-->\r\n<!--        <nz-radio-group formControlName='isComputer'>-->\r\n<!--          <label nz-radio nzValue=\"1\">是</label>-->\r\n<!--          <label nz-radio nzValue=\"0\">否</label>-->\r\n<!--        </nz-radio-group>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n\r\n\r\n<!--    <nz-form-item *ngIf='examSettingForm.value.isComputer===\"1\"'>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>机考类型</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"不能为空\">-->\r\n<!--        <nz-select formControlName=\"computerType\">-->\r\n<!--          <nz-option nzValue=\"1\" nzLabel=\"初级\"></nz-option>-->\r\n<!--          <nz-option nzValue=\"2\" nzLabel=\"中级\"></nz-option>-->\r\n<!--          <nz-option nzValue=\"3\" nzLabel=\"税务师\"></nz-option>-->\r\n<!--        </nz-select>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>有效时间</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"不能为空\">-->\r\n<!--        <nz-date-picker (ngModelChange)=\"onChange($event)\" formControlName=\"deadTime\"></nz-date-picker>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>答题次数</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"不能为空\">-->\r\n<!--        <nz-radio-group formControlName='answerTimes' [(ngModel)]='examSettingForm.value.answerTimes'>-->\r\n<!--          <label nz-radio [nzValue]=\"0\">无限制</label>-->\r\n<!--          <label nz-radio [nzValue]=\"1\">-->\r\n<!--            <nz-input-number [(ngModel)]=\"value\" [nzMin]=\"1\" [nzMax]=\"100\" [nzStep]=\"1\"-->\r\n<!--                             [ngModelOptions]=\"{standalone: true}\"></nz-input-number>-->\r\n<!--          </label>-->\r\n<!--        </nz-radio-group>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n\r\n\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>出成绩</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"不能为空\">-->\r\n<!--        <nz-radio-group formControlName='resultWay'>-->\r\n<!--          <label nz-radio nzValue=\"1\">交卷即出</label>-->\r\n<!--        </nz-radio-group>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n\r\n\r\n<!--  </form>-->\r\n<!--  <div *nzModalFooter>-->\r\n<!--    <button nz-button (click)=\"isVisible = false\">取消</button>-->\r\n<!--    <button nz-button nzType=\"primary\" (click)=\"saveExamination()\">确定</button>-->\r\n<!--  </div>-->\r\n<!--</nz-modal>-->\r\n\r\n\r\n<nz-modal [(nzVisible)]=\"chapterBindingVisible\" [nzMaskClosable]=\"false\" nzTitle=\"章节绑定\"\r\n          (nzOnCancel)=\"chapterBindingVisible=false;\"\r\n          [nzFooter]='null'\r\n          nzClassName='self-modal'\r\n          [nzBodyStyle]='{padding:0,\"overflow\": \"auto\"}' [nzWidth]='800'>\r\n  <nz-spin [nzSpinning]=\"bindLoading\" [nzDelay]=\"0\">\r\n    <div class='tree-container'>\r\n      <div class='tree-left'>\r\n        <span class='tree-title'>课包结构</span>\r\n        <div class='struct-container'>\r\n          <app-course-structure-tree\r\n            style='padding-top: 40px;'\r\n            type='operate'\r\n            *ngIf='lessonPackageStructureVisible'\r\n            [chapterSelectable]=\"false\"\r\n            [coursePacketId]=\"coursePacketId\"\r\n            [defaultSection]='defaultSection'\r\n            [defaultExpandedKeys]='defaultChapter'\r\n            (nodeChange)=\"nodeChange($event)\">\r\n          </app-course-structure-tree>\r\n        </div>\r\n      </div>\r\n      <div class='tree-right'>\r\n        <span class='tree-title'>知识图谱结构</span>\r\n        <nz-spin [nzSpinning]=\"knowledgeGraphLoading\" [nzDelay]=\"0\" style='padding: 52px 0 0 20px;'>\r\n          <app-simple-knowledgegraph-tree\r\n            *ngIf=\"knowledgeGraphStructureVisible\"\r\n            model=\"check\"\r\n            [isExpandAll]='false'\r\n            [professionId]=\"knowledgeSubjectId\"\r\n            [defaultCheckedKeys]=\"defaultTreeKey\"\r\n            (nodeChange)=\"nodeChangeKnowledge($event)\"\r\n            [all]='true'>\r\n          </app-simple-knowledgegraph-tree>\r\n        </nz-spin>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class='bind-button'>\r\n      <button nz-button (click)=\"bindKnowledgePoints()\" nzType='primary'>绑定</button>\r\n    </div>\r\n  </nz-spin>\r\n</nz-modal>\r\n\r\n\r\n<!--<ng-template #addExam>-->\r\n<!--  <form nz-form [formGroup]=\"addExamFrom\">-->\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>任务名称</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"任务名称不能为空\">-->\r\n<!--        <input nz-input type=\"text\" formControlName=\"missionName\" placeholder=\"请输入任务名称\"/>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n<!--    <nz-form-item>-->\r\n<!--      <nz-form-label [nzSpan]=\"5\" nzRequired>组卷方式</nz-form-label>-->\r\n<!--      <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"组卷方式不能为空\">-->\r\n<!--        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择组卷方式\" formControlName=\"formingMethod\">-->\r\n<!--          <nz-option nzLabel=\"选题/录题组卷\" nzValue=\"1\"></nz-option>-->\r\n<!--          <nz-option nzLabel=\"题型难度随机组卷\" nzValue=\"2\"></nz-option>-->\r\n<!--          <nz-option nzLabel=\"知识点难度抽题组卷\" nzValue=\"3\"></nz-option>-->\r\n<!--        </nz-select>-->\r\n<!--      </nz-form-control>-->\r\n<!--    </nz-form-item>-->\r\n<!--  </form>-->\r\n<!--</ng-template>-->\r\n\r\n\r\n<!--<nz-modal [(nzVisible)]=\"examListPreview\" (nzOnCancel)=\"examListPreview=false\" nzTitle='选择试卷'-->\r\n<!--          nzWidth='1000'>-->\r\n<!--  <div class='header'>-->\r\n<!--    <div class='header-container'>-->\r\n<!--      <div class='header-item'>-->\r\n<!--        <label style='min-width:90px;line-height:32px'>组卷方式: </label>-->\r\n<!--        <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"请选择组卷方式\" [(ngModel)]=\"selectedValue\"-->\r\n<!--                   style='margin-right: 20px;width:calc(100% - 100px);flex:1'>-->\r\n<!--          <nz-option nzValue=\"1\" nzLabel=\"选题组卷/录题组卷\"></nz-option>-->\r\n<!--          <nz-option nzValue=\"2\" nzLabel=\"题型难度随机组卷\"></nz-option>-->\r\n<!--          <nz-option nzValue=\"3\" nzLabel=\"知识点难度抽题组卷\"></nz-option>-->\r\n<!--        </nz-select>-->\r\n<!--      </div>-->\r\n<!--      <button nz-button nzType=\"primary\" (click)=\"search()\">查询</button>-->\r\n<!--    </div>-->\r\n<!--  </div>-->\r\n<!--  <nz-table #basicTable [nzData]=\"listOfData\">-->\r\n<!--    <thead>-->\r\n<!--    <tr>-->\r\n<!--      <th>Name</th>-->\r\n<!--      <th>Age</th>-->\r\n<!--      <th>Address</th>-->\r\n<!--      <th>Action</th>-->\r\n<!--    </tr>-->\r\n<!--    </thead>-->\r\n<!--    <tbody>-->\r\n<!--    <tr *ngFor=\"let data of basicTable.data\">-->\r\n<!--      <td>{{ data.name }}</td>-->\r\n<!--      <td>{{ data.age }}</td>-->\r\n<!--      <td>{{ data.address }}</td>-->\r\n<!--      <td>-->\r\n<!--        <a>Action 一 {{ data.name }}</a>-->\r\n<!--        <nz-divider nzType=\"vertical\"></nz-divider>-->\r\n<!--        <a>Delete</a>-->\r\n<!--      </td>-->\r\n<!--    </tr>-->\r\n<!--    </tbody>-->\r\n<!--  </nz-table>-->\r\n\r\n<!--</nz-modal>-->\r\n","import {Component, Inject, Input, LOCALE_ID, OnInit, TemplateRef, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NzMessageService, NzModalService, NzTreeComponent, NzTreeNodeOptions} from 'ng-zorro-antd';\r\nimport {CourseManageService} from '@app/busi-services/course-manage.service';\r\nimport {NodeChangeEvent} from '../course-structure-tree/course-structure-tree.component';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {MenuService} from 'core/services/menu.service';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {formatDate} from '@angular/common';\r\nimport {timer} from 'rxjs';\r\nimport {ConfirmableFlat, getSetChange} from 'core/decorators';\r\nimport {HttpHeaders, HttpResponse} from '@angular/common/http';\r\nimport {LoadingControl} from 'core/base/common';\r\nimport {STATISTICALRULES} from 'core/base/static-data';\r\nimport {StatisticsLogService} from '@app/busi-services/statistics-log.service';\r\n\r\n@Component({\r\n  selector: 'app-intellectual-adaptation',\r\n  templateUrl: './intellectual-adaptation.component.html',\r\n  styleUrls: ['./intellectual-adaptation.component.less']\r\n})\r\nexport class IntellectualAdaptationComponent implements OnInit {\r\n  date;\r\n  nodes: NzTreeNodeOptions[] = [];\r\n  teacherData = [];\r\n  listOfData = [];\r\n  knowledgeSubjectId = '';\r\n  examSettingForm: FormGroup;\r\n  curNode: NodeChangeEvent;\r\n  defaultTreeKey = [];\r\n  knowledgePointIds = [];\r\n  selectId: any[];\r\n  clickFlag: any = {};\r\n  isVisible = false;\r\n  value = '';\r\n  chapterBindingVisible = false;\r\n  now = new Date();\r\n  isDailyOn = false;\r\n  isSprintOn = false;\r\n  isFinalOn = false;\r\n  courseService;\r\n  defaultTeacherId = [];\r\n  addExamFrom: any;\r\n  selectedValue: any;\r\n  isStandard = false;\r\n  dataSet = [\r\n    {}\r\n  ];\r\n  applicableZeroBasis = false;\r\n  applicableExperts = false;\r\n  applicableHasAFoundation = false;\r\n  examTimePre;\r\n  finalTimePre;\r\n  sprintTimePre;\r\n  examTime; // 国家考试\r\n  finalTime; // 秘压\r\n  sprintTime; // 冲刺\r\n  applicableHasAFoundationWeekPre: any; // 有基础\r\n  applicableExpertsWeekPre: any; // 专家\r\n  applicableZeroBasisWeekPre: any; // 零基础\r\n  applicableHasAFoundationWeek: any;\r\n  applicableExpertsWeek: any;\r\n  applicableZeroBasisWeek: any;\r\n  teachType;\r\n  preview;\r\n  code;\r\n  coursePacketId;\r\n  courseId;\r\n  professionId;\r\n  @getSetChange<boolean>({\r\n    initSet(val) {\r\n      // if (val) {\r\n      this.initIntellectualAdaptationData();\r\n      // }\r\n    },\r\n    set(val) {\r\n      const flag = val ? '1' : '0';\r\n      this.courseMgService.isSmartUpdate(this.coursePacketId, flag).subscribe(res => {\r\n        if (res.status === 201) {\r\n          if (val) {\r\n            this.initIntellectualAdaptationData();\r\n          }\r\n          SessionStorageUtil.putPacketInfoItem('isSmart', flag);\r\n        }\r\n      });\r\n    }\r\n  })\r\n  intellectualAdaptation: boolean;\r\n  bindList = [];\r\n  bindLoading = false; // 章节绑定loading\r\n  knowledgeGraphLoading = false; // 知识图谱loading\r\n  untieLoading = false; // 解绑loading\r\n  totalSectionNum = 0; // 左右节总数\r\n  knowledgeGraphStructureVisible = false;  // 知识图谱树\r\n  lessonPackageStructureVisible = true; // 课程章节树\r\n  defaultSection: object; // 默认选中节\r\n  defaultChapter = []; // 默认点选章\r\n  chapterBindingEdit: boolean;\r\n  examTimeRequire = false;\r\n  @Input() adaptive = {\r\n    middleWeekNum: false,\r\n    juniorWeekNum: false,\r\n    seniorWeekNum: false,\r\n    listOfData: [],\r\n    examTime: null,\r\n    finalTime: null,\r\n    sprintTime: null,\r\n    isSprintOn: false,\r\n    isFinalOn: false,\r\n    examTimeRequire: false\r\n  }; // 用来通知父级当前组件状态\r\n\r\n\r\n  @ViewChild('nzTreeComponent', {static: false}) nzTreeComponent!: NzTreeComponent;\r\n  @ViewChild('addExam') addExam: TemplateRef<any>;\r\n\r\n  constructor(private fb: FormBuilder,\r\n              private courseMgService: CourseManageService,\r\n              private modalService: NzModalService,\r\n              private nzMesService: NzMessageService,\r\n              private route: ActivatedRoute,\r\n              private menuService: MenuService,\r\n              private statisticsLogService: StatisticsLogService,\r\n              @Inject(LOCALE_ID) public locale: string\r\n  ) {\r\n    // this.initFrom();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getParams();\r\n  }\r\n\r\n  initIntellectualAdaptationData() {\r\n    this.getLessonPackage();\r\n    this.getChapterBindList();\r\n  }\r\n\r\n  initFrom() {\r\n    this.addExamFrom = this.fb.group({\r\n      missionName: ['', [Validators.required]],\r\n      formingMethod: [1, [Validators.required]],\r\n    });\r\n    this.examSettingForm = this.fb.group({\r\n      id: [this.courseId],\r\n      examLength: [0, Validators.required],\r\n      isComputer: ['1', Validators.required],\r\n      computerType: ['1'],\r\n      answerTimes: [0, Validators.required],\r\n      deadTime: [new Date(), Validators.required],\r\n      resultWay: ['1', Validators.required],\r\n    });\r\n  }\r\n\r\n// 回显操作\r\n  getLessonPackage() {\r\n    this.courseMgService.getLessonPackage(this.coursePacketId, this.courseId).subscribe(res => {\r\n      if (res.status === 200) {\r\n        const {\r\n          teacherDtoList, knowledgeSubjectId, examTime, sprintTime, finalTime,\r\n          isDailyOn, isSprintOn, isFinalOn, defaultTeacherId, juniorWeekNum, middleWeekNum, seniorWeekNum, totalSectionNum\r\n        } = res.data;\r\n        this.teacherData = teacherDtoList;\r\n        this.defaultTeacherId = defaultTeacherId ? defaultTeacherId.split(',') : [];\r\n        this.knowledgeSubjectId = knowledgeSubjectId;\r\n        this.isDailyOn = isDailyOn === '1' ? true : false;\r\n        this.isSprintOn = this.adaptive.isSprintOn = isSprintOn === '1' ? true : false;\r\n        this.isFinalOn = this.adaptive.isFinalOn = isFinalOn === '1' ? true : false;\r\n        this.totalSectionNum = totalSectionNum ? totalSectionNum : 0;\r\n        if ((this.isSprintOn || this.isFinalOn) && this.intellectualAdaptation) {\r\n          this.examTimeRequire = true;\r\n          this.adaptive.examTimeRequire = true;\r\n        } else {\r\n          this.examTimeRequire = false;\r\n          this.adaptive.examTimeRequire = false;\r\n        }\r\n        // 回显考试日期\r\n        ['examTime', 'sprintTime', 'finalTime'].forEach((item => {\r\n          if (res.data[item]) {\r\n            this[item] = this[item + 'Pre'] = this.adaptive[item] = new Date(res.data[item]);\r\n          } else {\r\n            this[item] = this[item + 'Pre'] = this.adaptive[item] = null;\r\n          }\r\n        }));\r\n        // 回显录播讲师\r\n        if (teacherDtoList.length) {\r\n          teacherDtoList.forEach((ee, ii) => {\r\n            if (this.defaultTeacherId.indexOf(ee.teacherId) > -1) {\r\n              this.clickFlag[ii] = true;\r\n            } else {\r\n              this.clickFlag[ii] = false;\r\n            }\r\n          });\r\n        }\r\n        // 回显录播计划\r\n        if (juniorWeekNum) {\r\n          this.applicableZeroBasisWeekPre = this.applicableZeroBasisWeek = juniorWeekNum;\r\n          this.applicableZeroBasis = true;\r\n          this.adaptive.juniorWeekNum = true;\r\n        } else {\r\n          this.adaptive.juniorWeekNum = false;\r\n        }\r\n        if (middleWeekNum) {\r\n          this.applicableHasAFoundationWeekPre = this.applicableHasAFoundationWeek = middleWeekNum;\r\n          this.applicableHasAFoundation = true;\r\n          this.adaptive.middleWeekNum = true;\r\n        } else {\r\n          this.adaptive.middleWeekNum = false;\r\n        }\r\n        if (seniorWeekNum) {\r\n          this.applicableExpertsWeekPre = this.applicableExpertsWeek = seniorWeekNum;\r\n          this.applicableExperts = true;\r\n          this.adaptive.seniorWeekNum = true;\r\n        } else {\r\n          this.adaptive.seniorWeekNum = false;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n// 保存操作\r\n  setLessonPackage(params) {\r\n    // if (this.checkData() || this.checkPlan()) {\r\n    //   return true;\r\n    // }\r\n    // const {\r\n    //   coursePacketId, defaultTeacherId, examTime, sprintTime, finalTime, isDailyOn,\r\n    //   isSprintOn, isFinalOn, applicableHasAFoundationWeek, applicableExpertsWeek, applicableZeroBasisWeek\r\n    // } = this;\r\n    // const params = {\r\n    //   id: coursePacketId,\r\n    //   defaultTeacherId: defaultTeacherId.join(','),\r\n    //   examTime: formatDate(examTime, 'yyyy-MM-dd', this.locale),\r\n    //   sprintTime: formatDate(sprintTime, 'yyyy-MM-dd', this.locale),\r\n    //   finalTime: formatDate(finalTime, 'yyyy-MM-dd', this.locale),\r\n    //   isDailyOn: isDailyOn ? '1' : '0',\r\n    //   isSprintOn: isSprintOn ? '1' : '0',\r\n    //   isFinalOn: isFinalOn ? '1' : '0',\r\n    //   middleWeekNum: applicableHasAFoundationWeek ? applicableHasAFoundationWeek : 0,\r\n    //   seniorWeekNum: applicableExpertsWeek ? applicableExpertsWeek : 0,\r\n    //   juniorWeekNum: applicableZeroBasisWeek ? applicableZeroBasisWeek : 0,\r\n    // };\r\n    return new Promise((resolve) => {\r\n      this.courseMgService.setLessonPackage(params).subscribe(res => {\r\n        if (res.status === 201) {\r\n          if ((this.isSprintOn || this.isFinalOn) && this.intellectualAdaptation) {\r\n            this.examTimeRequire = true;\r\n            this.adaptive.examTimeRequire = true;\r\n          } else {\r\n            this.examTimeRequire = false;\r\n            this.adaptive.examTimeRequire = false;\r\n          }\r\n          const paramsKey = Object.keys(params);\r\n          const arr = ['middleWeekNum', 'seniorWeekNum', 'juniorWeekNum', 'isSprintOn', 'isFinalOn']\r\n            .filter(item => paramsKey.indexOf(item) > -1);\r\n          // 保存向父级传输数据\r\n          arr.forEach((value) => {\r\n            if (Number(params[value])) {\r\n              this.adaptive[value] = true;\r\n            } else {\r\n              this.adaptive[value] = false;\r\n            }\r\n          });\r\n          resolve(true);\r\n        } else {\r\n          resolve(false);\r\n        }\r\n      }, err => {\r\n        resolve(false);\r\n      });\r\n    });\r\n  }\r\n\r\n// 点击指导老师\r\n  getflag(i: number, item) {\r\n    if (this.preview === '1') {\r\n      return;\r\n    }\r\n    Object.keys(this.clickFlag).forEach((e, ii) => {\r\n      this.clickFlag[ii] = false;\r\n    });\r\n    this.clickFlag[i] = true;\r\n    this.defaultTeacherId = [];\r\n    this.defaultTeacherId.push(item.teacherId);\r\n    this.setLessonPackage({\r\n      id: this.coursePacketId,\r\n      defaultTeacherId: this.defaultTeacherId.join(','),\r\n    });\r\n  }\r\n\r\n// 获取章节绑定列表\r\n  getChapterBindList() {\r\n    const params = {\r\n      courseId: this.courseId,\r\n      coursePacketId: this.coursePacketId\r\n    };\r\n    this.courseMgService.getChapterBindList(params).subscribe(res => {\r\n      if (res.status === 200) {\r\n        if (res.data.length > 0) {\r\n          this.listOfData = res.data.map((e, i) => {\r\n            return {\r\n              sectionName: e.chapterSeq + '.' + e.sectionSeq + ' ' + e.sectionName,\r\n              knowledgeUnits: e.knowledgeUnits,\r\n              sectionId: e.sectionId,\r\n              chapterId: e.chapterId\r\n            };\r\n          });\r\n          this.adaptive.listOfData = JSON.parse(JSON.stringify(this.listOfData));\r\n        } else {\r\n          this.listOfData = [];\r\n          this.adaptive.listOfData = [];\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n// 点击章节绑定\r\n  bindKnowledgePoints() {\r\n    this.bindLoading = true;\r\n    this.courseMgService.bindKnowledgePointsBatch(this.bindList).subscribe(res => {\r\n      if (res.status === 201) {\r\n        const field = this.chapterBindingEdit ? 'modify' : 'addCode';\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '章节绑定' + (this.chapterBindingEdit ? '修改' : '新增'),\r\n          actionCode: STATISTICALRULES.packetInfo['intellectual-chapterbind-action'][field],\r\n          content: JSON.stringify(this.bindList),\r\n        });\r\n        this.getChapterBindList();\r\n      }\r\n      this.bindLoading = false;\r\n    }, err => {\r\n      this.bindLoading = false;\r\n    });\r\n  }\r\n\r\n  bind() {\r\n    this.bindList = [];\r\n    this.chapterBindingVisible = true;\r\n    this.chapterBindingEdit = false;\r\n    this.knowledgeGraphStructureVisible = false;\r\n    this.lessonPackageStructureVisible = false;\r\n    timer(0).subscribe(() => {\r\n      this.lessonPackageStructureVisible = true;\r\n    });\r\n  }\r\n\r\n\r\n  // 章节点击\r\n  nodeChange(node: NodeChangeEvent) {\r\n    this.curNode = node;\r\n    const {id, key} = node.data;\r\n    const idR = id ? id : (key ? key : '');\r\n    let idx;\r\n    if (this.bindList.every((e, i) => {\r\n      if (e.courseSectionId === idR) {\r\n        idx = i;\r\n        return;\r\n      } else {\r\n        return true;\r\n      }\r\n    })) {\r\n      // 没有缓存\r\n      this.knowledgeGraphLoading = true;\r\n      const params = {\r\n        courseSectionId: idR,\r\n        courseId: this.courseId,\r\n        coursePacketId: this.coursePacketId\r\n      };\r\n      this.courseMgService.getKnowledgePoints(params).subscribe(res => {\r\n        this.knowledgeGraphLoading = false;\r\n        if (res.status === 200) {\r\n          this.defaultTreeKey = res.data.map(e => e.knowledgeUnitId);\r\n          this.knowledgeGraphStructureVisible = true;\r\n          this.selectId = this.defaultTreeKey;\r\n          this.bindList.push({\r\n            courseSectionId: idR,\r\n            courseId: this.courseId,\r\n            coursePacketId: this.coursePacketId,\r\n            knowledgeUnitIdList: this.defaultTreeKey\r\n          });\r\n        }\r\n      }, () => {\r\n        this.knowledgeGraphLoading = false;\r\n      });\r\n    } else {\r\n      // 从缓存中取\r\n      this.defaultTreeKey = this.bindList.filter((ee, ii) => ii === idx)[0].knowledgeUnitIdList;\r\n      this.selectId = this.defaultTreeKey;\r\n      this.knowledgeGraphStructureVisible = true;\r\n    }\r\n  }\r\n\r\n// 知识点点击\r\n  nodeChangeKnowledge(nodeOpt: any) {\r\n    // 收集点选\r\n    if (nodeOpt.length) {\r\n      this.selectId = [];\r\n      nodeOpt.forEach(e => {\r\n        if (e.origin.kType === '2') {\r\n          if (e.origin.children && e.origin.children.length) {\r\n            e.origin.children.forEach(eeee => {\r\n              this.selectId.push(eeee.id);\r\n            });\r\n          }\r\n        } else if (e.origin.kType === '3') {\r\n          this.selectId.push(e.origin.id);\r\n        } else {\r\n          if (e.origin.children && e.origin.children.length) {\r\n            e.origin.children.forEach(ee => {\r\n              if (ee.children && ee.children.length) {\r\n                ee.children.forEach((eee) => {\r\n                  this.selectId.push(eee.id);\r\n                });\r\n              }\r\n            });\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      this.selectId = [];\r\n    }\r\n    // 存到缓存\r\n    this.bindList.every((eee, iii) => {\r\n      if (eee.courseSectionId === this.curNode.data.id || eee.courseSectionId === this.curNode.data.key) {\r\n        this.bindList[iii].knowledgeUnitIdList = this.selectId;\r\n        return;\r\n      } else {\r\n        return true;\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  applicableChange(e: boolean, key: string, label: string) {\r\n    if (!e) {\r\n      const map = {\r\n        seniorWeekNum: 'applicableExperts',\r\n        middleWeekNum: 'applicableHasAFoundation',\r\n        juniorWeekNum: 'applicableZeroBasis'\r\n      };\r\n      const {applicableZeroBasisWeek, applicableExpertsWeek, applicableHasAFoundationWeek} = this;\r\n      if ((\r\n        key === 'juniorWeekNum' && !(applicableHasAFoundationWeek || applicableExpertsWeek)\r\n      ) || (\r\n        key === 'middleWeekNum' && !(applicableZeroBasisWeek || applicableExpertsWeek)\r\n      ) || (\r\n        key === 'seniorWeekNum' && !(applicableHasAFoundationWeek || applicableZeroBasisWeek)\r\n      )) {\r\n        this.nzMesService.warning('学习计划为必填项,请保留至少一个计划');\r\n        timer(0).subscribe(() => {\r\n          this[map[key]] = true;\r\n        });\r\n        return;\r\n      }\r\n      this[label] = '';\r\n      this.setLessonPackage({\r\n        id: this.coursePacketId,\r\n        [key]: 0\r\n      });\r\n    }\r\n  }\r\n\r\n  private getParams() {\r\n    const {courseId, id, professionId, status, code, teachType, isSmart, preview, isUsed} = SessionStorageUtil.getPacketInfo();\r\n    this.courseId = courseId;\r\n    this.coursePacketId = id;\r\n    this.professionId = professionId;\r\n    this.isStandard = isUsed > 0;\r\n    this.code = code;\r\n    this.teachType = teachType;\r\n    this.intellectualAdaptation = isSmart === '1';\r\n    this.preview = preview;\r\n  }\r\n\r\n\r\n  private checkPlan() {\r\n    if (this.applicableZeroBasis) {\r\n      if (!this.applicableZeroBasisWeek) {\r\n        this.nzMesService.warning('学习计划勾选了适用零基础必须填写具体值');\r\n        return true;\r\n      }\r\n    }\r\n    if (this.applicableHasAFoundation) {\r\n      if (!this.applicableHasAFoundationWeek) {\r\n        this.nzMesService.warning('学习计划勾选了适用有基础必须填写具体值');\r\n        return true;\r\n      }\r\n    }\r\n    if (this.applicableExperts) {\r\n      if (!this.applicableExpertsWeek) {\r\n        this.nzMesService.warning('学习计划勾选了使用专家必须填写具体值');\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n// 根据需求检查日期\r\n  private checkData(key) {\r\n    const {isSprintOn, isFinalOn, examTime, sprintTime, finalTime} = this;\r\n    if (isSprintOn) {\r\n      if (examTime && sprintTime) {\r\n        if (examTime.getTime() <= sprintTime.getTime()) {\r\n          this.nzMesService.warning(key === 'examTime' ? '国家考试日期应大于冲刺开始日期' : '冲刺开始日期应小于国家考试日期');\r\n          return true;\r\n        }\r\n      }\r\n      if (isFinalOn && finalTime && sprintTime) {\r\n        if (finalTime.getTime() <= sprintTime.getTime()) {\r\n          this.nzMesService.warning(key === 'sprintTime' ? '冲刺开始日期应小于密押开始日期' : '密押开始日期应大于冲刺开始日期');\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    if (isFinalOn && examTime && finalTime) {\r\n      if (examTime.getTime() <= finalTime.getTime()) {\r\n        this.nzMesService.warning(key === 'examTime' ? '国家考试日期应大于密押开始日期' : '密押开始日期应小于国家考试日期');\r\n        return true;\r\n      }\r\n    }\r\n  }\r\n\r\n  timeChange(date: any, key: string) {\r\n    if (this[key + 'Pre']) { // 非第一次\r\n      if (date && date.getTime() !== this[key + 'Pre'].getTime()) { // 对比上次时间不同才保存\r\n        this.checkAndSave(date, key, this[key + 'Pre']);\r\n      } else {\r\n        if (!date) {\r\n          if (key === 'examTime' && !this.examTimeRequire) {\r\n            this.checkAndSave(date, key, null);\r\n          } else {\r\n            if (!this.intellectualAdaptation) {\r\n              this.checkAndSave(date, key, null);\r\n            } else {\r\n              this.nzMesService.warning(key === 'examTime' ? '开启了冲刺阶段或者密押阶段，国家考试时间是必填项，请不要清除掉！'\r\n                : this.isStandard ? '课包启用后不可清空' : '如果需要清空日期请关闭该阶段即可');  // 开关打开下不能清空日期\r\n              timer(0).subscribe(() => {\r\n                this[key] = this[key + 'Pre'];\r\n              });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } else { // 第一次\r\n      if (date) {\r\n        this.checkAndSave(date, key, null);\r\n      }\r\n    }\r\n  }\r\n\r\n  checkAndSave(date: any, key: string, setValue) {\r\n    if (this.checkData(key) || this.checkPlan()) { // 保证了空值跳过校验\r\n      timer(0).subscribe(() => {\r\n        this[key] = setValue; // 如果校验失败回显缓存的值\r\n      });\r\n      return;\r\n    }\r\n    this.setLessonPackage({\r\n      id: this.coursePacketId,\r\n      [key]: formatDate(date, 'yyyy-MM-dd', this.locale)\r\n    }).then((flag) => {\r\n      if (!flag) {\r\n        timer(0).subscribe(() => {\r\n          this[key] = setValue;\r\n        });\r\n      } else {\r\n        this[key + 'Pre'] = this.adaptive[key] = this[key];\r\n      }\r\n    });\r\n  }\r\n\r\n  isSwitchOnChange(key: string) {\r\n    const param = {\r\n      id: this.coursePacketId,\r\n      [key]: this[key] ? '1' : '0'\r\n    };\r\n    if (key === 'isSprintOn' && !this[key]) {\r\n      this.sprintTime = this.sprintTimePre = null;\r\n      param.sprintTime = formatDate(null, 'yyyy-MM-dd', this.locale);\r\n    } else if (key === 'isFinalOn' && !this[key]) {\r\n      this.finalTime = this.finalTimePre = null;\r\n      param.finalTime = formatDate(null, 'yyyy-MM-dd', this.locale);\r\n    }\r\n    this.setLessonPackage(param);\r\n  }\r\n\r\n  applicableWeekChange(data: any, key: string, label: string) {\r\n    //   middleWeekNum: applicableHasAFoundationWeek ? applicableHasAFoundationWeek : 0,\r\n    //   seniorWeekNum: applicableExpertsWeek ? applicableExpertsWeek : 0,\r\n    //   juniorWeekNum: applicableZeroBasisWeek ? applicableZeroBasisWeek : 0,\r\n    if (this[label + 'Pre']) {\r\n      if (this[label] && this[label] > 0) {\r\n        if (this[label] !== this[label + 'Pre']) {\r\n          this.setLessonPackage({\r\n            id: this.coursePacketId,\r\n            [key]: this[label]\r\n          });\r\n        }\r\n      } else {\r\n        timer(0).subscribe(() => {\r\n          this[label] = this[label + 'Pre'];\r\n        });\r\n      }\r\n    } else {\r\n      if (this[label] && this[label] > 0) {\r\n        this.setLessonPackage({\r\n          id: this.coursePacketId,\r\n          [key]: this[label]\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n// 缓存上次时间用以校验是否请求保存\r\n  timeOpen(flag: boolean, key: string) {\r\n    if (flag) {\r\n      this[key + 'Pre'] = this[key];\r\n    }\r\n  }\r\n\r\n  applicableFocus(key: string) {\r\n    this[key + 'Pre'] = this[key];\r\n  }\r\n\r\n  // 解绑\r\n  @ConfirmableFlat({\r\n      title: '解绑',\r\n      content: (args) => ('确定对“' + args[0].sectionName + '小节名称”与知识图谱进行解绑吗？'),\r\n      type: 'warning'\r\n    }\r\n  )\r\n  untie(data: any, loadingControl?: LoadingControl) {\r\n    this.untieLoading = loadingControl.loading = true;\r\n    this.courseMgService.unbindKnowledgePoints(data.sectionId).subscribe((res) => {\r\n      this.untieLoading = loadingControl.loading = false;\r\n      if (res.status === 200) {\r\n        this.statisticsLogService.statisticsPacketInfoLog({\r\n          name: '章节绑定解绑',\r\n          actionCode: STATISTICALRULES.packetInfo['intellectual-chapterbind-action'].delCode,\r\n          content: JSON.stringify({sectionId: data.sectionId}),\r\n        });\r\n        this.bindList.every((item, itemIndex) => {\r\n          if (item.id === data.sectionId) {\r\n            this.bindList.splice(itemIndex, 1);\r\n          } else {\r\n            return true;\r\n          }\r\n        });\r\n        this.getChapterBindList();\r\n      }\r\n    }, () => {\r\n      this.untieLoading = loadingControl.loading = false;\r\n    });\r\n  }\r\n\r\n  // 修改\r\n  modify(data: any) {\r\n    this.chapterBindingEdit = true;\r\n    this.knowledgeGraphStructureVisible = false;\r\n    this.lessonPackageStructureVisible = false;\r\n    this.chapterBindingVisible = true;\r\n    this.bindList = [];\r\n    setTimeout(() => {\r\n      this.defaultSection = {key: data.sectionId}; // 定位节\r\n      this.defaultChapter = [data.chapterId.split(',')[0]]; // 定位章\r\n      this.lessonPackageStructureVisible = true;\r\n    });\r\n  }\r\n\r\n  getBingData(knowledgeUnits: any) {\r\n    const knoArr = knowledgeUnits.split(',');\r\n    if (knoArr.length > 5) {\r\n      knoArr.length = 5;\r\n      return knoArr.join(',') + ',...';\r\n    } else {\r\n      return knowledgeUnits;\r\n    }\r\n  }\r\n\r\n  export() {\r\n    this.courseMgService.exportExcelKno(this.coursePacketId).subscribe((resp: HttpResponse<Blob>) => {\r\n        const headers: HttpHeaders = resp.headers;\r\n        // (window as any).aa=headers.get('content-disposition').split('=')[1];\r\n        // console.log(headers.get('content-disposition').split('=')[1]);\r\n        const link = document.createElement('a');\r\n        // 支持HTML5下载属性的浏览器\r\n        const url = URL.createObjectURL(resp.body);\r\n        link.setAttribute('href', url);\r\n        link.setAttribute('download', '课包知识点题目难度导出.xls');\r\n        link.style.visibility = 'hidden';\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      },\r\n      error => this.nzMesService.error(error));\r\n  }\r\n}\r\n"]}