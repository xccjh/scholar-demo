function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var i=_superPropBase(e,t);if(i){var a=Object.getOwnPropertyDescriptor(i,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var a=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,c=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(s){a=!0,c=s}finally{try{i||null==o.return||o.return()}finally{if(a)throw c}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,r=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){o=!0,c=e},f:function(){try{r||null==n.return||n.return()}finally{if(o)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"19W7":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("WTGI"),a=n("mhyn"),c=n("+O+V"),r=n("Vhue"),o=n("55n1"),s=n("fXoL"),l=n("JFwS"),u=function(){var e=function(){function e(t){_classCallCheck(this,e),this.http=t}return _createClass(e,[{key:"statisticsPacketInfoLog",value:function(e){var t=r.a.getPacketInfo();if("1"===t.status){this.http.postBody(c.j.recordControlUrl,Object.assign(Object.assign({},e),{businessCode:c.j.packetInfo.businessId,orgCode:i.a.getOrgCode(),source:1,informationId:t.pcode,userName:o.a.getUser().userName,userId:o.a.getUserId()}),{isCommonHttpHeader:!0}).subscribe((function(){}),(function(){}))}}},{key:"packageOperatLog",value:function(e){return this.http.postBody(c.j.pageListUrl,e,{isCommonHttpHeader:!0})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.ec(l.a))},e.\u0275prov=s.Qb({token:e,factory:e.\u0275fac,providedIn:a.a}),e}()},"6iFG":function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var i=n("mrSG"),a=n("fXoL"),c=n("odmk"),r=n("ApCc"),o=n("5+WD"),s=n("WTGI"),l=n("HDdC"),u=n("4tR+"),d=n("Vhue"),p=n("wsOq"),b=n("tyNb"),f=n("uMH2"),h=n("PScX"),g=n("dEAy"),m=n("Wc2E"),v=n("3Pt+"),z=n("ofXK"),y=n("IvDN"),k=n("OzZK"),S=n("RwU8"),P=n("C2AL"),C=n("FwiY"),E=n("ocnv"),w=n("B+r4"),x=n("qAZ0"),O=n("D9mS"),M=["localuploadmodal"],I=["qkcupload"];function T(e,t){1&e&&(a.ac(0,"div",10),a.Pc(1," \u8be5\u8bfe\u5305\u5c1a\u672a\u5efa\u7acb\u7ae0\u8282\u5185\u5bb9 "),a.Zb())}function Z(e,t){if(1&e){var n=a.bc();a.ac(0,"button",11),a.ic("click",(function(){return a.Ec(n),a.lc().chapterImport()})),a.Pc(1,"excel\u5bfc\u5165\u7ae0\u8282 "),a.Zb()}}function L(e,t){if(1&e){var n=a.bc();a.ac(0,"button",12),a.ic("click",(function(){return a.Ec(n),a.lc().knowledgeGraph()})),a.Pc(1,"\u77e5\u8bc6\u56fe\u8c31\u5bfc\u5165\u7ae0\u8282"),a.Zb()}if(2&e){var i=a.lc();a.tc("nzLoading",i.knowledgeGraphLoading)}}function N(e,t){if(1&e){var n=a.bc();a.ac(0,"button",13),a.ic("click",(function(){return a.Ec(n),a.lc().chapterExport()})),a.Pc(1,"\u7ae0\u8282\u5bfc\u51fa"),a.Zb()}if(2&e){var i=a.lc();a.tc("nzLoading",i.chapterExportLoading)}}function _(e,t){if(1&e&&(a.ac(0,"span"),a.ac(1,"span",20),a.Pc(2),a.Zb(),a.ac(3,"span"),a.Pc(4),a.Zb(),a.Zb()),2&e){var n=a.lc(),i=n.index,c=n.$implicit,r=a.lc();a.Mc("cursor",r.isStandard||"0"!==r.preview?"not-allowed":"inherit"),a.Eb(2),a.Rc("\u7b2c",i+1,"\u7ae0"),a.Eb(2),a.Qc(c.name)}}function F(e,t){if(1&e){var n=a.bc();a.ac(0,"a",23),a.ic("click",(function(e){a.Ec(n);var t=a.lc(2).$implicit,i=a.lc();return e.stopPropagation(),i.addChapter(t)})),a.Vb(1,"i",24),a.Pc(2," \u91cd\u547d\u540d "),a.Zb()}}var V=function(){return{color:"#f53131","margin-left":"20px"}};function j(e,t){if(1&e){var n=a.bc();a.ac(0,"a",23),a.ic("click",(function(e){a.Ec(n);var t=a.lc(2).$implicit,i=a.lc();return e.stopPropagation(),i.delChapter(t)})),a.Vb(1,"i",25),a.Pc(2," \u5220\u9664 "),a.Zb()}2&e&&a.Lc(a.wc(2,V))}function D(e,t){if(1&e&&(a.Nc(0,F,3,0,"a",21),a.Nc(1,j,3,3,"a",22)),2&e){var n=a.lc(2);a.tc("ngIf","0"===n.preview),a.Eb(1),a.tc("ngIf",!n.isStandard&&"0"===n.preview)}}function A(e,t){if(1&e){var n=a.bc();a.ac(0,"a",30),a.ic("click",(function(){a.Ec(n);var e=a.lc().$implicit,t=a.lc().$implicit;return a.lc().addSection(t,e)})),a.Vb(1,"i",24),a.Pc(2," \u91cd\u547d\u540d "),a.Zb()}}var q=function(){return{color:"#f53131"}};function U(e,t){if(1&e){var n=a.bc();a.ac(0,"a",30),a.ic("click",(function(){a.Ec(n);var e=a.lc().$implicit,t=a.lc().$implicit;return a.lc().delSection(t,e)})),a.Vb(1,"i",25),a.Pc(2," \u5220\u9664 "),a.Zb()}2&e&&a.Lc(a.wc(2,q))}function B(e,t){if(1&e&&(a.Yb(0),a.ac(1,"div",26),a.ac(2,"div"),a.ac(3,"span",20),a.Pc(4),a.Zb(),a.ac(5,"span"),a.Pc(6),a.Zb(),a.Zb(),a.ac(7,"div",27),a.Nc(8,A,3,0,"a",28),a.Nc(9,U,3,3,"a",29),a.Zb(),a.Zb(),a.Xb()),2&e){var n=t.$implicit,i=t.index,c=a.lc().index,r=a.lc();a.Eb(1),a.Mc("cursor",r.isStandard||"0"!==r.preview?"not-allowed":"inherit"),a.Eb(3),a.Sc("",c+1,".",i+1,"\u8282"),a.Eb(2),a.Qc(n.name),a.Eb(2),a.tc("ngIf","0"===r.preview),a.Eb(1),a.tc("ngIf",!r.isStandard&&"0"===r.preview)}}function R(e,t){if(1&e){var n=a.bc();a.ac(0,"div",31),a.ac(1,"div"),a.ac(2,"a",30),a.ic("click",(function(){a.Ec(n);var e=a.lc().$implicit;return a.lc().addSection(e,null)})),a.Vb(3,"i",32),a.Pc(4," \u6dfb\u52a0\u5c0f\u8282 "),a.Zb(),a.Zb(),a.Vb(5,"div"),a.Zb()}}function $(e,t){if(1&e){var n=a.bc();a.ac(0,"nz-collapse-panel",14),a.ic("nzActiveChange",(function(e){return a.Ec(n),t.$implicit.active=e}))("nzActiveChange",(function(){a.Ec(n);var e=t.$implicit;return a.lc().sectionChange(e)})),a.Nc(1,_,5,4,"ng-template",null,15,a.Oc),a.Nc(3,D,2,2,"ng-template",null,16,a.Oc),a.ac(5,"div",17),a.ic("cdkDropListDropped",(function(e){return a.Ec(n),a.lc().sectionDrop(e)})),a.Nc(6,B,10,7,"ng-container",18),a.Nc(7,R,6,0,"div",19),a.Zb(),a.Zb()}if(2&e){var i=t.$implicit,c=a.Cc(2),r=a.Cc(4),o=a.lc();a.Mc("cursor",o.isStandard||"0"!==o.preview?"not-allowed":"inherit"),a.tc("nzActive",i.active)("nzHeader",c)("nzExtra",r),a.Eb(5),a.Mc("cursor",o.isStandard||"0"!==o.preview?"not-allowed":"inherit"),a.Eb(1),a.tc("ngForOf",i.children),a.Eb(1),a.tc("ngIf",!o.isStandard&&"0"===o.preview)}}function Q(e,t){if(1&e){var n=a.bc();a.ac(0,"button",33),a.ic("click",(function(){return a.Ec(n),a.lc().addChapter(null)})),a.Vb(1,"i",32),a.Pc(2," \u65b0\u589e\u7ae0 "),a.Zb()}2&e&&a.tc("nzSize","large")}var W=function(){return{showPreviewIcon:!1,showRemoveIcon:!0,showDownloadIcon:!1}};function H(e,t){if(1&e){var n=a.bc();a.ac(0,"form",34),a.ac(1,"nz-form-item"),a.ac(2,"nz-form-label",35),a.Pc(3,"\u7ae0\u8282\u7ed3\u6784"),a.Zb(),a.ac(4,"nz-form-control",36),a.ac(5,"nz-spin",37),a.ac(6,"nz-upload",38,39),a.ac(8,"button",40),a.ac(9,"span"),a.Vb(10,"i",41),a.Pc(11,"\u4e0a\u4f20\u6587\u4ef6"),a.Zb(),a.Zb(),a.Zb(),a.ac(12,"div",42),a.Pc(13,"excel\u5bfc\u5165\u7ae0\u8282\u540c\u65f6\u5c06\u4f1a\u6e05\u9664\u5df2\u6709\u7684\u7ae0\u8282\u7ed3\u6784\uff01"),a.Zb(),a.ac(14,"button",43),a.ic("click",(function(){return a.Ec(n),a.lc().downTemplate()})),a.ac(15,"span"),a.Vb(16,"i",44),a.Pc(17,"\u6a21\u677f\u4e0b\u8f7d"),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.Zb()}if(2&e){var i=a.lc();a.tc("formGroup",i.localUploadChapter),a.Eb(2),a.tc("nzSpan",5),a.Eb(3),a.tc("nzSpinning",i.loading)("nzDelay",0),a.Eb(1),a.tc("nzShowUploadList",a.wc(11,W))("nzFileList",!1)("nzRemove",i.removeFileSelf())("nzBeforeUpload",i.beforeChapterUpload())("nzCustomRequest",i.customChapterRequest()),a.Eb(2),a.tc("disabled",""!==i.localUploadChapter.value.chapterUrl),a.Eb(6),a.tc("nzLoading",i.downTemplateLoading)}}var J=function(){return{border:"none","background-color":"#fff"}},K=function(){var e=function(){function e(t,n,i,c,r,o,s){_classCallCheck(this,e),this.route=t,this.courseMgService=n,this.nzMesService=i,this.nzModalService=c,this.uploadOssService=r,this.fb=o,this.modalService=s,this.courseId="",this.coursePacketId="",this.packageName="",this.isStandard=!1,this.preview="0",this.nodes=[],this.isVisible=!1,this.fileList=[],this.loading=!1,this.afterOpen=new a.n,this.downTemplateLoading=!1,this.knowledgeGraphLoading=!1,this.chapterExportLoading=!1}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.initParams(),this.afterOpen.subscribe((function(t){e.localUploadChapter.patchValue({chapterUrl:""}),e.qkcupload.nzFileList=[]}))}},{key:"ngOnDestroy",value:function(){this.afterOpen.unsubscribe()}},{key:"initParams",value:function(){var e=d.a.getPacketInfo(),t=e.courseId,n=e.id,i=e.preview,a=e.isUsed,c=e.name;this.courseId=t,this.coursePacketId=n,this.packageName=c,this.isStandard=a>0,this.preview=i,this.getChapter(),this.localUploadChapter=this.fb.group({chapterUrl:[""]})}},{key:"checkStructure",value:function(){if(0===this.nodes.length)return!1;var e,t=_createForOfIteratorHelper(this.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.children&&0===n.children.length)return!1}}catch(i){t.e(i)}finally{t.f()}return!0}},{key:"getChapter",value:function(){var e=this;this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe((function(t){200===t.status&&(t.data.forEach((function(e){e.active=!1})),e.nodes=t.data,e.nodes.length>0&&(e.nodes[0].active=!0,e.sectionChange(e.nodes[0])))}))}},{key:"getSection",value:function(e){this.courseMgService.getList_courseSection(e.id).subscribe((function(t){200===t.status?e.children=t.data:e.isLoading=!1}))}},{key:"sectionChange",value:function(e){this.setChapter(e),e.children&&0!==e.children.length||this.getSection(e)}},{key:"setChapter",value:function(e){this.curChapter=e}},{key:"addChapter",value:function(e){var t=this,n=!!e;this.nzModalService.create({nzTitle:n?"\u91cd\u547d\u540d\u7ae0":"\u65b0\u589e\u7ae0",nzContent:r.a,nzComponentParams:{courseId:this.courseId,coursePacketId:this.coursePacketId,data:this.nodes,formData:e},nzMaskClosable:!1,nzFooter:null}).afterClose.subscribe((function(i){if(i)if(n){var a=i.name;e.name=a}else{i.active||(i.active=!0);var c=t.nodes.findIndex((function(e){return e.id===i.id}));t.nodes.splice(-1===c?t.nodes.length:c,-1===c?0:1,i)}}))}},{key:"addSection",value:function(e,t){var n=this;this.setChapter(e),this.nzModalService.create({nzTitle:t?"\u91cd\u547d\u540d\u8282":"\u65b0\u589e\u8282",nzContent:c.a,nzComponentParams:{courseId:this.courseId,coursePacketId:this.coursePacketId,data:e,formData:t},nzMaskClosable:!1,nzFooter:null}).afterClose.subscribe((function(e){e&&n.getSection(n.curChapter)}))}},{key:"delSection",value:function(e,t){var n=this;this.setChapter(e),this.nzModalService.confirm({nzTitle:"\u8b66\u544a",nzContent:"\u786e\u5b9a\u8981\u5220\u9664".concat(t.name,"\u5417"),nzOnOk:function(){return new Promise((function(i,a){n.courseMgService.delTreeNode(t.id,"section").subscribe((function(a){if(204!==a.status)return n.nzMesService.error(a.message),void i(!1);var c=e.children.findIndex((function(e){return e.id===t.id}));e.children.splice(c,1);var r={courseId:n.courseId,coursePacketId:n.coursePacketId,chapters:[{id:n.curChapter.id,seq:n.curChapter.seq,sections:e.children.map((function(e,t){return{id:e.id,seq:t+1}}))}]};n.sort(r),i(!0)}))}))}})}},{key:"delChapter",value:function(e){var t=this;this.nzModalService.confirm({nzTitle:"\u8b66\u544a",nzContent:"\u786e\u5b9a\u8981\u5220\u9664".concat(e.name,"\u5417"),nzOnOk:function(){return new Promise((function(n,i){t.courseMgService.delTreeNode(e.id,"chapter").subscribe((function(i){if(204!==i.status)return t.nzMesService.error(i.message),void n(!1);var a=t.nodes.findIndex((function(t){return t.id===e.id}));t.nodes.splice(a,1);var c={courseId:t.courseId,coursePacketId:t.coursePacketId,chapters:t.nodes.map((function(e,t){return{id:e.id,seq:t+1}}))};t.sort(c),n(!0)}))}))}})}},{key:"sort",value:function(e){var t=this;this.courseMgService.save_courseChapter(e).subscribe((function(e){200===e.status||t.nzMesService.error(e.message||"\u79fb\u52a8\u5931\u8d25\uff0c\u672a\u77e5\u9519\u8bef\uff01")}),(function(e){t.nzMesService.error(JSON.stringify(e))}))}},{key:"chapterDrop",value:function(e){if(!this.isStandard&&"0"===this.preview){var t=this.nodes||[];Object(o.g)(t,e.previousIndex,e.currentIndex);var n={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:t.map((function(e,t){return{id:e.id,seq:t+1}}))};this.sort(n)}}},{key:"sectionDrop",value:function(e){var t=this.curChapter.children||[];Object(o.g)(t,e.previousIndex,e.currentIndex);var n={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.curChapter.id,seq:this.curChapter.seq,sections:t.map((function(e,t){return{id:e.id,seq:t+1}}))}]};this.sort(n)}},{key:"chapterImport",value:function(){var e=this;this.modalFormRef=this.modalService.create({nzTitle:"excel\u5bfc\u5165\u7ae0\u8282",nzContent:this.localuploadmodal,nzMaskClosable:!1,nzWrapClassName:"vertical-center-modal",nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a\u4e0a\u4f20",nzAfterOpen:this.afterOpen,nzOnOk:function(t){return new Promise((function(t,n){if(!e.localUploadChapter.value.chapterUrl)return e.nzMesService.warning("\u8bf7\u5148\u4e0a\u4f20\u6587\u4ef6"),void t(!1);e.courseMgService.excelImportChapter({courseId:e.courseId,coursePacketId:e.coursePacketId,fileUrl:e.localUploadChapter.value.chapterUrl}).subscribe((function(n){200===n.status?(e.getChapter(),t(!0)):(500===n.status&&e.nzMesService.warning(n.message),t(!1))}),(function(e){t(!1)}))}))}})}},{key:"chapterExport",value:function(){var e=this;this.chapterExportLoading=!0,this.courseMgService.packetChapterExport(this.coursePacketId).subscribe((function(t){e.chapterExportLoading=!1;var n=document.createElement("a"),i=URL.createObjectURL(t.body);n.setAttribute("href",i),n.setAttribute("download",e.packageName+"\u7ae0\u8282\u7ed3\u6784.xls"),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n)}),(function(){e.chapterExportLoading=!1}))}},{key:"knowledgeGraph",value:function(e){var t=this;return new Promise((function(n){t.knowledgeGraphLoading=e.loading=!0,t.courseMgService.synchronizedKnowledge({courseId:t.courseId,coursePacketId:t.coursePacketId}).subscribe((function(i){t.knowledgeGraphLoading=e.loading=!1,201===i.status?(t.getChapter(),n(!0)):n(!1)}),(function(){t.knowledgeGraphLoading=e.loading=!1,n(!1)}))}))}},{key:"customChapterRequest",value:function(){var e=this,t=this;return function(n){e.loading=!0,t.uploadOssService.uploadOss(n.file,u.a.knowledge_file).subscribe((function(t){e.loading=!1,e.localUploadChapter.patchValue({chapterUrl:t}),n.onSuccess(Object.assign({},n),n.file,{})}),(function(i){e.loading=!1,n.onError(i,n.file),t.nzMesService.error(JSON.stringify(i))}))}}},{key:"beforeChapterUpload",value:function(){var e=this;return function(t){return"excel"!==s.a.getFileType(t.name)?(e.nzMesService.error("\u8bf7\u4e0a\u4f20excel,\u652f\u6301\u540e\u7f00xls, xlsx"),!1):new l.a((function(e){e.next(!0)}))}}},{key:"removeFileSelf",value:function(){var e=this;return function(){e.localUploadChapter.patchValue({chapterUrl:""}),this.nzFileList=[]}}},{key:"downTemplate",value:function(){var e=this;this.downTemplateLoading=!0,this.courseMgService.exportExcel().subscribe((function(t){var n=document.createElement("a"),i=URL.createObjectURL(t.body);n.setAttribute("href",i),n.setAttribute("download","\u7ae0\u8282\u7ed3\u6784\u6a21\u677f"),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),e.downTemplateLoading=!1}),(function(t){e.nzMesService.error(JSON.stringify(t)),e.downTemplateLoading=!1}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Ub(b.a),a.Ub(f.a),a.Ub(h.e),a.Ub(g.e),a.Ub(m.a),a.Ub(v.d),a.Ub(g.e))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-structure-adjustment"]],viewQuery:function(e,t){var n;1&e&&(a.Vc(M,!0),a.Vc(I,!0)),2&e&&(a.Bc(n=a.jc())&&(t.localuploadmodal=n.first),a.Bc(n=a.jc())&&(t.qkcupload=n.first))},decls:11,vars:11,consts:[[1,"container"],["class","not-content",4,"ngIf"],[1,"operation-button"],["nz-button","","nzType","primary","style","margin-right:20px;",3,"click",4,"ngIf"],["nz-button","","nzType","primary","style","margin-right:20px;",3,"nzLoading","click",4,"ngIf"],["nz-button","","nzType","primary",3,"nzLoading","click",4,"ngIf"],["cdkDropList","",3,"cdkDropListDropped"],["class","collapse-panel","cdkDrag","",3,"cursor","nzActive","nzHeader","nzExtra","nzActiveChange",4,"ngFor","ngForOf"],["nz-button","","nzType","primary","nzBlock","",3,"nzSize","click",4,"ngIf"],["localuploadmodal",""],[1,"not-content"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"click"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"nzLoading","click"],["nz-button","","nzType","primary",3,"nzLoading","click"],["cdkDrag","",1,"collapse-panel",3,"nzActive","nzHeader","nzExtra","nzActiveChange"],["panelHeaderTpl",""],["panelExtraTpl",""],["cdkDropList","",1,"list",3,"cdkDropListDropped"],[4,"ngFor","ngForOf"],["class","add-section",4,"ngIf"],[2,"margin-right","20px"],[3,"click",4,"ngIf"],[3,"style","click",4,"ngIf"],[3,"click"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["cdkDrag","",1,"list-item"],[1,"action-group"],["nz-button","","nzType","link",3,"click",4,"ngIf"],["nz-button","","nzType","link",3,"style","click",4,"ngIf"],["nz-button","","nzType","link",3,"click"],[1,"add-section"],["nz-icon","","nzType","plus","nzTheme","outline"],["nz-button","","nzType","primary","nzBlock","",3,"nzSize","click"],["nz-form","",3,"formGroup"],["nzRequired","",2,"max-width","100px",3,"nzSpan"],[2,"position","relative"],[3,"nzSpinning","nzDelay"],["nzListType","picture",1,"upload-list-inline-strure",3,"nzShowUploadList","nzFileList","nzRemove","nzBeforeUpload","nzCustomRequest"],["qkcupload",""],["nz-button","",2,"margin-bottom","20px",3,"disabled"],["nz-icon","","nzType","upload",2,"font-size","20px"],[2,"position","absolute","top","35px"],["nz-button","",2,"position","absolute","left","126px","top","0",3,"nzLoading","click"],["nz-icon","","nzType","snippets","nzTheme","outline",2,"font-size","20px","margin-right","20px"]],template:function(e,t){1&e&&(a.ac(0,"div",0),a.Nc(1,T,2,0,"div",1),a.ac(2,"div",2),a.Nc(3,Z,2,0,"button",3),a.Nc(4,L,2,1,"button",4),a.Nc(5,N,2,1,"button",5),a.Zb(),a.ac(6,"nz-collapse",6),a.ic("cdkDropListDropped",(function(e){return t.chapterDrop(e)})),a.Nc(7,$,8,9,"nz-collapse-panel",7),a.Zb(),a.Nc(8,Q,3,1,"button",8),a.Zb(),a.Nc(9,H,18,12,"ng-template",null,9,a.Oc)),2&e&&(a.Eb(1),a.tc("ngIf","1"===t.preview&&!t.nodes.length),a.Eb(2),a.tc("ngIf",!t.isStandard&&"0"===t.preview),a.Eb(1),a.tc("ngIf",!t.isStandard&&"0"===t.preview),a.Eb(1),a.tc("ngIf","0"===t.preview),a.Eb(1),a.Lc(a.wc(10,J)),a.Mc("cursor",t.isStandard||"0"!==t.preview?"not-allowed":"inherit"),a.Eb(1),a.tc("ngForOf",t.nodes),a.Eb(1),a.tc("ngIf",!t.isStandard&&"0"===t.preview))},directives:[z.n,y.a,o.d,z.m,k.a,S.a,P.a,y.c,o.a,C.a,v.y,v.p,E.b,v.i,w.c,E.c,w.a,E.d,E.a,x.a,O.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:15px;background-color:#fff}.container[_ngcontent-%COMP%]   .operation-button[_ngcontent-%COMP%]{margin-bottom:20px}.not-content[_ngcontent-%COMP%]{font-size:20px;text-align:center;margin-top:200px}.list[_ngcontent-%COMP%]{position:relative;width:100%}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;cursor:pointer;padding:0 10px;transition:all .3s}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{opacity:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{padding:0 12px 0 0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#fafafa}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .action-group[_ngcontent-%COMP%]{opacity:1}.list[_ngcontent-%COMP%]   .add-section[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}.collapse-panel[_ngcontent-%COMP%]{margin-bottom:24px;border:1px solid #d9d9d9}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header{background-color:#fafafa}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header .ant-collapse-extra{opacity:0}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header:hover .ant-collapse-extra{opacity:1}[_nghost-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:13px 30px 0}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]{box-sizing:border-box;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-header{position:relative;padding:12px 16px 12px 20px;color:rgba(0,0,0,.85);line-height:22px;background-color:#fafafa}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-header .ant-collapse-arrow{margin-right:10px}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-header .ant-collapse-extra{display:none}.cdk-drag-preview.collapse-panel[_ngcontent-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:13px 30px 0}.cdk-drag-preview.list-item[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;padding:0 10px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-preview.list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{opacity:0}.cdk-drag-preview.list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{padding:0 12px 0 0}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}[_nghost-%COMP%]     .ant-upload-list-picture .ant-upload-list-item{margin-top:20px}.upload-list-inline-strure[_ngcontent-%COMP%]{display:inline-block;max-width:330px}"]}),Object(i.b)([Object(p.b)({title:"\u5bfc\u5165\u77e5\u8bc6\u56fe\u8c31",content:"\u60a8\u786e\u5b9a\u5c06\u77e5\u8bc6\u56fe\u8c31\u4e2d\u7684\u7ae0\u8282\u7ed3\u6784\u4e00\u952e\u540c\u6b65\u5230\u8bfe\u5305\u7ed3\u6784\u5417\uff1f\u5c06\u4f1a\u6e05\u9664\u5df2\u6709\u7684\u7ae0\u8282\u7ed3\u6784\u3002",type:"warning"})],e.prototype,"knowledgeGraph",null),e}()},"7lsC":function(e,t,n){"use strict";n.d(t,"a",(function(){return it}));var i=n("mrSG"),a=n("AytR"),c=n("wsOq"),r=n("55n1"),o=n("ngz8"),s=n("HDdC"),l=n("quSY"),u=n("7Hc7"),d=n("jtHE"),p=n("7+OI"),b=n("LRne"),f=n("7HRe"),h=n("qgXg"),g=n("z6cu"),m=n("itXk"),v=n("XNiG"),z=n("EY2u"),y=n("bOdf"),k=n("zp1y"),S=n("1G5W"),P=n("IzEk"),C=n("lJxs"),E=n("/uUt"),w=n("UXun"),x=n("vkgz"),O=n("JIr8"),M=n("fXoL");function I(){return function(e){return new s.a((function(t){var n,i,a=new l.a;return a.add(e.subscribe({complete:function(){n&&t.next(i),t.complete()},error:function(e){t.error(e)},next:function(e){i=e,n||(n=u.a.schedule((function(){t.next(i),n=void 0})),a.add(n))}})),a}))}}var T,Z=new M.q("ComponentStore InitState"),L=((T=function(){function e(t){_classCallCheck(this,e),this.destroySubject$=new d.a(1),this.destroy$=this.destroySubject$.asObservable(),this.stateSubject$=new d.a(1),this.isInitialized=!1,this.notInitializedErrorMessage=this.constructor.name+" has not been initialized yet. Please make sure it is initialized before updating/getting.",this.state$=this.select((function(e){return e})),t&&this.initState(t)}return _createClass(e,[{key:"ngOnDestroy",value:function(){this.stateSubject$.complete(),this.destroySubject$.next()}},{key:"updater",value:function(e){var t=this;return function(n){var i,a=(Object(p.a)(n)?n:Object(b.a)(n)).pipe(Object(y.a)((function(e){return t.isInitialized?Object(f.a)([e],h.a).pipe(Object(k.a)(t.stateSubject$)):Object(g.a)(new Error(t.notInitializedErrorMessage))})),Object(S.a)(t.destroy$)).subscribe({next:function(n){var i=_slicedToArray(n,2),a=i[0],c=i[1];t.stateSubject$.next(e(c,a))},error:function(e){i=e,t.stateSubject$.error(e)}});if(i)throw i;return a}}},{key:"initState",value:function(e){var t=this;Object(f.a)([e],h.a).subscribe((function(e){t.isInitialized=!0,t.stateSubject$.next(e)}))}},{key:"setState",value:function(e){"function"!=typeof e?this.initState(e):this.updater(e)()}},{key:"patchState",value:function(e){this.setState((function(t){var n="function"==typeof e?e(t):e;return Object.assign(Object.assign({},t),n)}))}},{key:"get",value:function(e){if(!this.isInitialized)throw new Error(this.notInitializedErrorMessage);var t;return this.stateSubject$.pipe(Object(P.a)(1)).subscribe((function(n){t=e?e(n):n})),t}},{key:"select",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=function(e){var t,n=Array.from(e),i={debounce:!1},a=n.pop();return"function"!=typeof a?(i=Object.assign(Object.assign({},i),a),t=n.pop()):t=a,{observables:n,projector:t,config:i}}(t),a=i.observables,c=i.projector,r=i.config;return(0===a.length?this.stateSubject$.pipe(r.debounce?I():function(e){return e},Object(C.a)(c)):Object(m.a)(a).pipe(r.debounce?I():function(e){return e},Object(C.a)((function(e){return c.apply(void 0,_toConsumableArray(e))})))).pipe(Object(E.a)(),Object(w.a)({refCount:!0,bufferSize:1}),Object(S.a)(this.destroy$))}},{key:"effect",value:function(e){var t=this,n=new v.a;return e(n).pipe(Object(S.a)(this.destroy$)).subscribe(),function(e){return(Object(p.a)(e)?e:Object(b.a)(e)).pipe(Object(S.a)(t.destroy$)).subscribe((function(e){n.next(e)}))}}}]),e}()).\u0275fac=function(e){return new(e||T)(M.ec(Z,8))},T.\u0275prov=M.Qb({token:T,factory:T.\u0275fac}),T);function N(e,t,n){return function(i){return i.pipe(Object(x.a)({next:e,error:t,complete:n}),Object(O.a)((function(){return z.a})))}}function _(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}var F=n("SeVD"),V=n("pLZG");function j(e,t,n){return[Object(V.a)(t,n)(new s.a(Object(F.a)(e))),Object(V.a)(_(t,n))(new s.a(Object(F.a)(e)))]}var D=n("eIep"),A=n("7o/Q");function q(e){return function(t){return t.lift(new U(e))}}var U=function(){function e(t){_classCallCheck(this,e),this.predicate=t}return _createClass(e,[{key:"call",value:function(e,t){return t.subscribe(new B(e,this.predicate))}}]),e}(),B=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i){var a;return _classCallCheck(this,n),(a=t.call(this,e)).predicate=i,a.skipping=!0,a.index=0,a}return _createClass(n,[{key:"_next",value:function(e){var t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}},{key:"tryCallPredicate",value:function(e){try{var t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(n){this.destination.error(n)}}}]),n}(A.a),R=n("VRyK");function $(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return e.lift.call(Object(R.a).apply(void 0,[e].concat(t)))}}var Q,W=n("Vhue"),H=n("WTGI"),J=n("mhyn"),K=n("BmWY"),G=n("i+L+"),X=n("bSaw"),Y=n("5+WD"),ee=n("+O+V"),te=n("mwdn"),ne=n("PScX"),ie=n("dEAy"),ae=n("19W7"),ce=((Q=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,c,r){var o;return _classCallCheck(this,n),(o=t.call(this,{packetInfo:W.a.getPacketInfo(),isLoading:!1,searchLoad:!1,exam:[],intelligent:[],subQuestionBankCurrent:[],subQuestionBankCurrentPre:[],subQuestionBank:[],subQuestionBankInt:[],listSublibrary:[],subQuestionBankIntCurrent:[],subQuestionBankIntCurrentPre:[],moduleArr:[],levelLists:[],companyLists:[],listOfData:[],idMap:{},breakthroughMode:!1,practiceOn:!1,isBet:!1,knowledgeNum:0})).courseManageService=e,o.message=i,o.modalService=c,o.statisticsLogService=r,o.packetInfo$=o.select((function(e){return e.packetInfo})),o.listSublibrary$=o.select((function(e){return e.listSublibrary})),o.listOfData$=o.select((function(e){return e.listOfData})),o.moduleArr$=o.select((function(e){return e.moduleArr})),o.levelLists$=o.select((function(e){return e.levelLists})),o.companyLists$=o.select((function(e){return e.companyLists})),o.knowledgeNum$=o.select((function(e){return e.knowledgeNum})),o.idMap$=o.select((function(e){return e.idMap})),o.subQuestionBankCurrentPre$=o.select((function(e){return e.subQuestionBankCurrentPre})),o.subQuestionBank$=o.select((function(e){return e.subQuestionBank})),o.subQuestionBankIntCurrentPre$=o.select((function(e){return e.subQuestionBankIntCurrentPre})),o.subQuestionBankInt$=o.select((function(e){return e.subQuestionBankInt})),o.vm$=o.select((function(e){return e}),{debounce:!0}),o.setPacketInfo=o.updater((function(e,t){return Object.assign(Object.assign({},e),{packetInfo:t})})),o.setLoading=o.updater((function(e,t){return Object.assign(Object.assign({},e),{loadObj:t})})),o.getLevel=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(D.a)((function(e){var t=_slicedToArray(e,2)[1];return"1"===t.isCard?o.courseManageService.levelList(t.id).pipe(N((function(e){if(200===e.status){var t=e.data.sort((function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0}));t.forEach((function(e){e.coursePacketCardRecourseList&&(e.coursePacketCardRecourseList=e.coursePacketCardRecourseList.sort((function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0})))})),o.patchState({levelLists:t})}}),(function(){return z.a}))):Object(b.a)([])})))})),o.getCompany=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(D.a)((function(e){var t=_slicedToArray(e,2)[1];return"1"===t.is99Train?o.courseManageService.getCompany(t.id).pipe(N((function(e){200===e.status&&o.patchState({companyLists:e.data})}),(function(){return z.a}))):Object(b.a)([])})))})),o.setBreakthroughMode=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(e){var t=_slicedToArray(e,2)[1];o.patchState({breakthroughMode:"1"===t.isCard})})))})),o.setPracticeOn=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(e){var t=_slicedToArray(e,2)[1];o.patchState({practiceOn:"1"===t.is99Train})})))})),o.setIsBet=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(e){var t=_slicedToArray(e,2)[1];"22"!==t.teacherType&&o.patchState({isBet:"1"===t.isBet})})))})),o.getSubLibrary=o.effect((function(e){return e.pipe(Object(k.a)(Object(m.a)([o.packetInfo$,o.listSublibrary$])),Object(D.a)((function(e){var t=_slicedToArray(e,2),n=_slicedToArray(t[1],1)[0];return o.courseManageService.getSubLibrary({coursePacketId:n.id,quebankType:1}).pipe(N((function(e){if(200===e.status){var t=e.data.sort((function(e,t){return Number(e.quebankId)>Number(t.quebankId)?1:Number(e.quebankId)<Number(t.quebankId)?-1:0})),n=t.filter((function(e){return"1"===e.busType})).sort((function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0})),i=t.filter((function(e){return"2"===e.busType})).sort((function(e,t){return e.seq>t.seq?1:e.seq<t.seq?-1:0})),a=n.map((function(e){return String(e.quebankId)})),c=JSON.parse(JSON.stringify(a)),r=i.map((function(e){return String(e.quebankId)})),s=JSON.parse(JSON.stringify(r));o.patchState({subQuestionBankCurrentPre:a,subQuestionBankCurrent:c,subQuestionBankIntCurrentPre:r,subQuestionBankIntCurrent:s,listSublibrary:t,subQuestionBank:n,subQuestionBankInt:i})}}),(function(){return z.a})))})))})),o.getLessonCountTable=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),q((function(e){return"22"===_slicedToArray(e,2)[1].teachType})),Object(D.a)((function(e){var t=_slicedToArray(e,2)[1];return o.courseManageService.getLessonPackageTable(t.id).pipe(N((function(e){200===e.status&&(e.data&&e.data.length?(e.data.forEach((function(t,n){e.data[n].index=n+1})),o.patchState({listOfData:e.data,packetInfo:Object.assign(Object.assign({},t),{lessonCount:e.data.length})})):o.patchState({listOfData:[]}))}),(function(){return z.a})))})))})),o.getSubQuestionBank=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(){return o.patchState({searchLoad:!1})})),Object(D.a)((function(e){var t=_slicedToArray(e,2)[1];return H.a.getAjax(a.a.questionBankApi+"system/qkcPaper/courseCode",{courseCode:t.code,type:""}).pipe(N((function(e){o.patchState({searchLoad:!1});var t=JSON.parse(e);if(200===t.code)if(t.data&&t.data.length){var n=JSON.parse(JSON.stringify(t.data)),i=JSON.parse(JSON.stringify(t.data)),a=[];i.forEach((function(e){a=e.sublibraryModuleList.filter((function(e){return"EXAM"===e.type})).concat(a)})),n.forEach((function(e){e.sublibraryModuleList=e.sublibraryModuleList.filter((function(e){return"PRACTICE"===e.type}))}));var c={};t.data.forEach((function(e){e.sublibraryModuleList.forEach((function(e){c[e.id]=e.type}))}));var r=o.conversionNode(n).sort((function(e,t){return e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0})),s=o.conversionNode(t.data).sort((function(e,t){return e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0}));o.patchState({exam:s,intelligent:r,moduleArr:a,idMap:c})}else o.patchState({exam:[],intelligent:[],moduleArr:[]});else o.message.error(t.message)}),(function(){o.patchState({searchLoad:!1}),o.message.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38")})))})))})),o.dellistSublibraryItem=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),q((function(e){return+_slicedToArray(e,2)[1].isUsed>0})),Object(D.a)((function(e){var t=_slicedToArray(e,1)[0];return t.loadingControl.loading=!0,o.courseManageService.delSubLibrary({id:t.data.id}).pipe(N((function(e){t.loadingControl.loading=!1,204===e.status&&o.getSubLibrary()}),(function(){return t.loadingControl.loading=!1})))})))})),o.deleteGift=o.effect((function(e){return e.pipe(Object(D.a)((function(e){return e.loadingControl.loading=!0,o.courseManageService.levelDataDeletion(e.id).pipe(N((function(t){e.loadingControl.loading=!1,204===t.status&&(o.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u5956\u52b1",actionCode:ee.j.packetInfo["otherSet-levelthrough-action"].modify,content:e.id}),o.getLevel())}),(function(){return e.loadingControl.loading=!1})))})))})),o.levelDeletion=o.effect((function(e){return e.pipe(Object(D.a)((function(e){return e.loadingControl.loading=!0,o.courseManageService.levelDeletion(e.id).pipe(N((function(t){e.loadingControl.loading=!1,204===t.status&&(o.getLevel(),o.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u5173\u5361",actionCode:ee.j.packetInfo["otherSet-levelthrough-action"].delCode,content:e.id}))}),(function(){return e.loadingControl.loading=!1})))})))})),o.companyDeletion=o.effect((function(e){return e.pipe(Object(D.a)((function(e){return e.loadingControl.loading=!0,o.courseManageService.companyDeletion(e.id).pipe(N((function(t){e.loadingControl.loading=!1,o.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u516c\u53f8",actionCode:ee.j.packetInfo["otherSet-99train-action"].delCode,content:e.id}),204===t.status&&o.getCompany()}),(function(){return e.loadingControl.loading=!1})))})))})),o.delTable=o.effect((function(e){return e.pipe(Object(D.a)((function(e){return e.loadingControl.loading=!0,o.courseManageService.delTable(e.id).pipe(N((function(t){e.loadingControl.loading=!1,o.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664\u8bfe\u6b21",actionCode:ee.j.packetInfo["otherSet-lessons-action"].delCode,content:e.id}),204===t.status&&o.getLessonCountTable()}),(function(){return e.loadingControl.loading=!1})))})))})),o.dataInit=o.effect((function(e){return e.pipe(Object(x.a)({next:function(e){o.setBreakthroughMode(),o.setPracticeOn(),o.setIsBet(),o.setLoading({isLoading:!0,searchLoad:!0}),o.getKnowledgeNum(),o.getLessonCountTable(),o.getLevel(),o.getCompany(),o.getSubLibrary(),o.getSubQuestionBank()},error:function(){}}))})),o.getKnowledgeNum=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(D.a)((function(e){var t=_slicedToArray(e,2)[1];return o.courseManageService.getKnos({knowledgeSubjectId:t.knowledgeSubjectId}).pipe(N((function(e){o.patchState(200===e.status?{knowledgeNum:e.data.num||0}:{knowledgeNum:0})}),(function(){return o.patchState({knowledgeNum:0})})))})))})),o.subQuestionBankChange=o.effect((function(e){var t=j(e.pipe(Object(k.a)(Object(m.a)([o.packetInfo$,o.idMap$])),Object(D.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=_slicedToArray(t[1],2),a=i[0],c=i[1];return Object(b.a)(n).pipe(Object(k.a)(Object(m.a)([o[n.type+"CurrentPre$"],o[n.type+"$"],Object(b.a)(a),Object(b.a)(c),o[n.type+"$"]])))}))),(function(e){var t=_slicedToArray(e,2),n=t[0];return _slicedToArray(t[1],1)[0].length<n.data.length})),n=_slicedToArray(t,2),i=n[0],a=n[1];return i.pipe(Object(D.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=_slicedToArray(t[1],5),a=(i[0],i[2]),c=i[3],r=i[4],s=n.treeSelect.getTreeNodeByKey(String(n.data[n.data.length-1]));return o.courseManageService.callSubLibrary({courseId:a.courseId,coursePacketId:a.id,busType:"subQuestionBank"===n.type?"1":"2",quebankId:s.origin.id,quebankName:s.origin.name,quebankType:1,seq:H.a.getMaxSeq(r),quebankModuleType:"subQuestionBankInt"===n.type?"1":"EXAM"===c[n.data[n.data.length-1]]?"2":"1"}).pipe(N((function(e){201===e.status&&o.getSubLibrary()}),(function(){return z.a})))})),$(a.pipe(Object(x.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=_slicedToArray(t[1],2),a=i[0],c=i[1];a.every((function(e,t){if(!(n.data.indexOf(e)<0))return!0;o.courseManageService.delSubLibrary({id:c[t].id}).subscribe((function(e){204===e.status&&o.getSubLibrary()}))}))})))))})),o.generateLessonsReal=o.effect((function(e){return e.pipe(Object(k.a)(o.packetInfo$),Object(D.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];return o.patchState({isLoading:!0}),o.courseManageService.lessonPackage(i.id,i.lessonCount,i.courseId).pipe(N((function(e){o.patchState({isLoading:!1}),o.statisticsLogService.statisticsPacketInfoLog({name:"\u751f\u6210\u8bfe\u6b21",actionCode:ee.j.packetInfo["otherSet-lessons-action"].addCode,content:JSON.stringify({coursePacketId:i.id,lessonCount:i.lessonCount,courseId:i.courseId})}),201===e.status&&(o.getLessonCountTable(),n(!0))}),(function(){o.patchState({isLoading:!1}),n(!1)})))})))})),o.generateLessonsEffect=o.effect((function(e){var t=j(e.pipe(Object(k.a)(Object(m.a)([o.listOfData$,o.packetInfo$])),q((function(e){var t=_slicedToArray(e,2);return"1"===_slicedToArray(t[1],2)[1].preview})),Object(D.a)((function(e){var t=_slicedToArray(e,2),n=_slicedToArray(t[1],1)[0];return Object(b.a)(n)}))),(function(e){return!!e.length})),n=_slicedToArray(t,2),i=n[0],a=n[1];return i.pipe(Object(x.a)((function(){o.generateLessonsAlert()})),$(a.pipe(Object(x.a)((function(){o.generateLessonsReal((function(){}))})))))})),o.newClass=o.effect((function(e){return e.pipe(Object(k.a)(Object(m.a)([o.listOfData$,o.packetInfo$])),Object(D.a)((function(e){var t=_slicedToArray(e,2),n=_slicedToArray(t[1],2),i=n[0],a=n[1];if(i.length>=200)return o.message.warning("\u8bfe\u6b21\u6700\u591a\u53ea\u80fd\u65b0\u589e200\u4e2a"),Object(b.a)([]);var c=H.a.getMaxSeq(i.filter((function(e){return e.seq})));o.patchState({isLoading:!0});var r={name:"\u7b2c"+c+"\u8bfe\u6b21",courseId:a.courseId,coursePacketId:a.id,seq:c};return o.courseManageService.saveTable(r).pipe(N((function(e){o.patchState({isLoading:!1}),o.statisticsLogService.statisticsPacketInfoLog({name:"\u65b0\u589e\u8bfe\u6b21",actionCode:ee.j.packetInfo["otherSet-lessons-action"].addCode,content:JSON.stringify(r)}),201===e.status&&o.getLessonCountTable()}),(function(){return o.patchState({isLoading:!1})})))})))})),o.addLevelEffect=o.effect((function(e){return e.pipe(Object(k.a)(Object(m.a)([o.packetInfo$,o.moduleArr$,o.levelLists$])),Object(D.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=_slicedToArray(t[1],3),c=i[0],r=i[1],s=i[2];return H.a.getAjax(a.a.questionBankApi+"system/qkcPaper/courseCode",{courseCode:c.code,type:""}).pipe(N((function(e){try{var t=JSON.parse(e);if(200===t.code){if(t.data){var i=[];t.data.length?(JSON.parse(JSON.stringify(t.data)).forEach((function(e){i=e.sublibraryModuleList.filter((function(e){return"EXAM"===e.type})).concat(i)})),o.patchState({moduleArr:i})):o.patchState({exam:[],intelligent:[],moduleArr:[]}),i.length?o.modalService.create({nzTitle:n.id?"\u7f16\u8f91\u5173\u5361":"\u65b0\u589e\u5173\u5361",nzContent:K.a,nzComponentParams:{courseId:c.courseId,coursePacketId:c.id,moduleArr:r,levelLists:s,levelItem:n},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzWidth:900}).afterClose.subscribe((function(e){e&&o.getLevel()})):o.message.warning("\u8be5\u8bfe\u5305\u7684\u8bfe\u7a0b\u5c1a\u6ca1\u6709\u5b50\u6a21\u5757\uff0c\u8bf7\u5230\u9898\u5e93\u65b0\u52a0\u5b50\u6a21\u5757\u518d\u6765\u65b0\u589e\u5173\u5361")}}else o.message.error(t.message)}catch(a){o.message.error("\u83b7\u53d6\u9898\u5e93\u5b50\u6a21\u5757\u5217\u8868\u5931\u8d25\uff0c\u65b0\u589e\u5173\u5361\u9700\u8981\u5b50\u6a21\u5757\u4fe1\u606f\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u65b0\u589e")}}),(function(){o.patchState({searchLoad:!1}),o.message.error("\u83b7\u53d6\u9898\u5e93\u5b50\u6a21\u5757\u5217\u8868\u5931\u8d25\uff0c\u65b0\u589e\u5173\u5361\u9700\u8981\u5b50\u6a21\u5757\u4fe1\u606f\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\u65b0\u589e")})))})))})),o.addCompanyEffect=o.effect((function(e){return e.pipe(Object(k.a)(Object(m.a)([o.packetInfo$,o.companyLists$])),Object(x.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=_slicedToArray(t[1],2),a=i[0],c=i[1];o.modalService.create({nzTitle:n.id?"\u7f16\u8f91\u516c\u53f8":"\u65b0\u589e\u516c\u53f8",nzContent:X.a,nzComponentParams:{courseId:a.courseId,coursePacketId:a.id,companyLists:c,companyItem:n},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzWidth:600}).afterClose.subscribe((function(e){e&&o.getCompany()}))})))})),o.rewardSettings=o.effect((function(e){return e.pipe(Object(x.a)((function(e){e.coursePacketCardRecourseList&&e.coursePacketCardRecourseList.length&&e.coursePacketCardRecourseList.forEach((function(e,t){e.thumbUrl=null,e.name=e.title}))})),Object(k.a)(o.packetInfo$),Object(x.a)((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];return o.modalService.create({nzTitle:"\u5956\u52b1\u8bbe\u7f6e",nzContent:G.a,nzComponentParams:{courseId:i.courseId,coursePacketId:i.id,professionId:i.professionId,currentCard:n},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a\u4e0a\u4f20"}).afterClose.subscribe((function(e){e&&o.getLevel()}))})))})),o.listDrop=o.effect((function(e){return e.pipe(Object(D.a)((function(e){return Object(b.a)(e).pipe(Object(k.a)(o[e.label+"$"]))})),Object(x.a)((function(e){var t,n=_slicedToArray(e,2),i=n[0],a=n[1];if(i.data.previousIndex!==i.data.currentIndex){Object(Y.g)(a,i.data.previousIndex,i.data.currentIndex);var c=a.map((function(e){return String(e.quebankId)}));o.patchState((_defineProperty(t={},i.label+"CurrentPre",c),_defineProperty(t,i.label+"Current",JSON.parse(JSON.stringify(c))),_defineProperty(t,i.label,a),t));var r=[];a.forEach((function(e,t){r.push({id:e.id,seq:t})})),o.courseManageService.sortSubQuestionBank(r).subscribe((function(e){201!==e.status&&o.message.error(e.message||"\u79fb\u52a8\u5931\u8d25\uff0c\u672a\u77e5\u9519\u8bef\uff01")}))}})))})),o.breakthroughModeChange=function(e){var t=e?"1":"0",n=Object(b.a)(null).pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(e){var n=_slicedToArray(e,2)[1];o.setPacketInfo(Object.assign(Object.assign({},n),{isCard:t}))})),Object(D.a)((function(e){var n=_slicedToArray(e,2)[1];return o.courseManageService.isCardUpdate(n.id,t).pipe(N((function(e){201===e.status&&("1"===t&&o.getLevel(),W.a.putPacketInfoItem("isCard",t))}),(function(){return z.a})))}))).subscribe((function(){return n.unsubscribe()}))},o.practiceOnChange=function(e){var t=e?"1":"0",n=Object(b.a)(null).pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(e){var n=_slicedToArray(e,2)[1];o.setPacketInfo(Object.assign(Object.assign({},n),{is99Train:t}))})),Object(D.a)((function(e){var n=_slicedToArray(e,2)[1];return o.courseManageService.is99TrainUpdate(n.id,t).pipe(N((function(e){201===e.status&&("1"===t&&o.getCompany(),W.a.putPacketInfoItem("is99Train",t))}),(function(){return z.a})))}))).subscribe((function(){return n.unsubscribe()}))},o.isBetChange=function(e){var t=e?"1":"0",n=Object(b.a)(null).pipe(Object(k.a)(o.packetInfo$),Object(x.a)((function(t){var n=_slicedToArray(t,2)[1];o.setPacketInfo(Object.assign(Object.assign({},n),{isBet:e}))})),Object(D.a)((function(e){var n=_slicedToArray(e,2)[1];return o.courseManageService.isBetUpdate(n.id,t).pipe(N((function(e){201===e.status&&W.a.putPacketInfoItem("isBet",t)}),(function(){return z.a})))}))).subscribe((function(){return n.unsubscribe()}))},o.conversionNode=function(e){return e.length&&e.forEach((function(t,n){t.sublibraryModuleList&&t.sublibraryModuleList.length&&(e[n].children=t.sublibraryModuleList,e[n].children.forEach((function(t,i){e[n].children[i].title=t.name,e[n].children[i].key=String(t.id),e[n].children[i].isLeaf=!0}))),e[n].title=t.name,e[n].key=t.code,e[n].disabled=!0,e[n].selectable=!1,t.sublibraryModuleList&&t.sublibraryModuleList.length||(e[n].isLeaf=!0)})),e},o}return _createClass(n,[{key:"generateLessonsAlert",value:function(){var e=this;return new Promise((function(t){e.generateLessonsReal(t)}))}}]),n}(L)).\u0275fac=function(e){return new(e||Q)(M.ec(te.b),M.ec(ne.e),M.ec(ie.e),M.ec(ae.a))},Q.\u0275prov=M.Qb({token:Q,factory:Q.\u0275fac,providedIn:J.a}),Object(i.b)([Object(c.a)({title:"\u63d0\u793a",content:"\u91cd\u65b0\u751f\u6210\u8bfe\u6b21\u4f1a\u8986\u76d6\u5df2\u751f\u6210\u7684\u8bfe\u6b21\uff0c\u786e\u5b9a\u91cd\u65b0\u751f\u6210\u5417\uff1f",type:"warning"})],Q.prototype,"generateLessonsAlert",null),Q),re=n("tyNb"),oe=n("FwiY"),se=n("ofXK"),le=n("qAZ0"),ue=n("VXpv"),de=n("3Pt+"),pe=n("EGpF"),be=n("OzZK"),fe=n("RwU8"),he=n("C2AL"),ge=n("z4wI"),me=n("rMZv"),ve=n("5vDB"),ze=["treeSelect"],ye=["treeSelectInt"];function ke(e,t){1&e&&(M.ac(0,"span"),M.Pc(1,"\u65e0\u5b50\u9898\u5e93"),M.Zb())}function Se(e,t){if(1&e&&(M.ac(0,"span"),M.Vb(1,"i",24),M.ac(2,"span",25),M.Pc(3),M.Zb(),M.Zb()),2&e){var n=M.lc().$implicit;M.Eb(1),M.tc("nzType",n.isExpanded?"folder-open":"folder"),M.Eb(2),M.Qc(n.title)}}function Pe(e,t){if(1&e&&(M.ac(0,"span"),M.Vb(1,"i",26),M.ac(2,"span",27),M.Pc(3),M.Zb(),M.Zb()),2&e){var n=M.lc().$implicit;M.Eb(3),M.Qc(n.title)}}function Ce(e,t){if(1&e&&(M.ac(0,"span",23),M.Nc(1,Se,4,2,"span",2),M.Nc(2,Pe,4,1,"span",2),M.Zb()),2&e){var n=t.$implicit;M.Eb(1),M.tc("ngIf",!n.isLeaf),M.Eb(1),M.tc("ngIf",n.isLeaf)}}function Ee(e,t){if(1&e){var n=M.bc();M.ac(0,"span",36),M.ic("click",(function(){M.Ec(n);var e=M.lc(2).$implicit;return M.lc(3).dellistSublibraryItem(e)})),M.Pc(1,"\u5220\u9664"),M.Zb()}}function we(e,t){if(1&e){var n=M.bc();M.ac(0,"div",33),M.ac(1,"i",34),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).dellistSublibraryItem(e)})),M.Zb(),M.Nc(2,Ee,2,0,"span",35),M.Zb()}if(2&e){var i=M.lc(2).ngIf;M.Eb(2),M.tc("ngIf",!("1"===i.preview||i.isUsed>0))}}function xe(e,t){if(1&e&&(M.ac(0,"div",28),M.ac(1,"div",29),M.Vb(2,"i",30),M.ac(3,"span",31),M.Pc(4),M.Zb(),M.Zb(),M.Nc(5,we,3,1,"div",32),M.Zb()),2&e){var n=t.$implicit,i=M.lc().ngIf;M.Mc("cursor","1"===i.preview||i.isUsed>0?"not-allowed":"move"),M.Eb(1),M.tc("title",n.quebankName),M.Eb(3),M.Qc(n.quebankName),M.Eb(1),M.tc("ngIf",!("1"===i.preview||i.isUsed>0))}}function Oe(e,t){1&e&&(M.ac(0,"span"),M.Pc(1," \u65e0\u5b50\u9898\u5e93 "),M.Zb())}function Me(e,t){if(1&e&&(M.ac(0,"span"),M.Vb(1,"i",24),M.ac(2,"span",25),M.Pc(3),M.Zb(),M.Zb()),2&e){var n=M.lc().$implicit;M.Eb(1),M.tc("nzType",n.isExpanded?"folder-open":"folder"),M.Eb(2),M.Qc(n.title)}}function Ie(e,t){if(1&e&&(M.ac(0,"span"),M.Vb(1,"i",26),M.ac(2,"span",27),M.Pc(3),M.Zb(),M.Zb()),2&e){var n=M.lc().$implicit;M.Eb(3),M.Qc(n.title)}}function Te(e,t){if(1&e&&(M.ac(0,"span",23),M.Nc(1,Me,4,2,"span",2),M.Nc(2,Ie,4,1,"span",2),M.Zb()),2&e){var n=t.$implicit;M.Eb(1),M.tc("ngIf",!n.isLeaf),M.Eb(1),M.tc("ngIf",n.isLeaf)}}function Ze(e,t){if(1&e){var n=M.bc();M.ac(0,"span",36),M.ic("click",(function(){M.Ec(n);var e=M.lc(2).$implicit;return M.lc(3).dellistSublibraryItem(e)})),M.Pc(1,"\u5220\u9664"),M.Zb()}}function Le(e,t){if(1&e){var n=M.bc();M.ac(0,"div",33),M.ac(1,"i",34),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).dellistSublibraryItem(e)})),M.Zb(),M.Nc(2,Ze,2,0,"span",35),M.Zb()}if(2&e){var i=M.lc(2).ngIf;M.Eb(2),M.tc("ngIf",!("1"===i.preview||i.isUsed>0))}}function Ne(e,t){if(1&e&&(M.ac(0,"div",28),M.ac(1,"div",29),M.Vb(2,"i",30),M.ac(3,"span",31),M.Pc(4),M.Zb(),M.Zb(),M.Nc(5,Le,3,1,"div",32),M.Zb()),2&e){var n=t.$implicit,i=M.lc().ngIf;M.Mc("cursor","1"===i.preview||i.isUsed>0?"not-allowed":"move"),M.Eb(1),M.tc("title",n.quebankName),M.Eb(3),M.Qc(n.quebankName),M.Eb(1),M.tc("ngIf",!("1"===i.preview||i.isUsed>0))}}function _e(e,t){if(1&e){var n=M.bc();M.ac(0,"a",50),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).editLevel(e)})),M.Vb(1,"i",51),M.ac(2,"span",52),M.Pc(3,"\u7f16\u8f91"),M.Zb(),M.Zb()}}function Fe(e,t){if(1&e){var n=M.bc();M.Yb(0),M.ac(1,"i",53),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).deleteLevel(e)})),M.Zb(),M.ac(2,"span",54),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).deleteLevel(e)})),M.Pc(3,"\u5220\u9664"),M.Zb(),M.Xb()}}function Ve(e,t){1&e&&(M.ac(0,"a",55),M.Vb(1,"i",56),M.ac(2,"span",57),M.Pc(3,"\u7f16\u8f91"),M.Zb(),M.Zb())}function je(e,t){1&e&&(M.Vb(0,"i",58),M.ac(1,"span",59),M.Pc(2,"\u5220\u9664"),M.Zb())}function De(e,t){if(1&e){var n=M.bc();M.Yb(0),M.ac(1,"i",53),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(4).deleteGift(e.id)})),M.Zb(),M.ac(2,"span",54),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(4).deleteGift(e.id)})),M.Pc(3,"\u5220\u9664"),M.Zb(),M.Xb()}}function Ae(e,t){if(1&e&&(M.ac(0,"div",60),M.ac(1,"div",40),M.ac(2,"span",61),M.Pc(3,"\u8d44"),M.Zb(),M.ac(4,"span",42),M.Pc(5),M.Zb(),M.Zb(),M.ac(6,"div",43),M.Nc(7,De,4,0,"ng-container",46),M.Zb(),M.Zb()),2&e){var n=t.$implicit;M.lc();var i=M.Cc(17),a=M.lc().ngIf;M.Eb(5),M.Qc(n.title),M.Eb(2),M.tc("ngIf","1"!==a.preview)("ngIfElse",i)}}function qe(e,t){if(1&e){var n=M.bc();M.ac(0,"div",37),M.ac(1,"div",38),M.Pc(2),M.Zb(),M.ac(3,"div",39),M.ac(4,"div",40),M.ac(5,"span",41),M.Pc(6,"\u8bd5"),M.Zb(),M.ac(7,"span",42),M.Pc(8),M.Zb(),M.Zb(),M.ac(9,"div",43),M.ac(10,"button",44),M.ic("click",(function(){M.Ec(n);var e=t.$implicit;return M.lc(3).rewardSettings(e)})),M.Pc(11," \u5956\u52b1\u8bbe\u7f6e "),M.Zb(),M.Nc(12,_e,4,0,"a",45),M.Nc(13,Fe,4,0,"ng-container",46),M.Nc(14,Ve,4,0,"ng-template",null,47,M.Oc),M.Nc(16,je,3,0,"ng-template",null,48,M.Oc),M.Zb(),M.Zb(),M.Nc(18,Ae,8,3,"div",49),M.Zb()}if(2&e){var i=t.$implicit,a=t.index,c=M.Cc(15),r=M.Cc(17),o=M.lc().ngIf,s=M.lc().ngIf;M.Eb(2),M.Rc(" \u5173\u5361",a+1,"\uff1a "),M.Eb(6),M.Qc(i.name),M.Eb(2),M.Kb("disable-edit","1"===o.preview||null),M.tc("disabled","1"===o.preview||null),M.Eb(2),M.tc("ngIf","1"!==o.preview)("ngIfElse",c),M.Eb(1),M.tc("ngIf",!("1"===o.preview||o.isUsed>0&&a!==s.levelLists.length-1))("ngIfElse",r),M.Eb(5),M.tc("ngForOf",i.coursePacketCardRecourseList)}}function Ue(e,t){if(1&e){var n=M.bc();M.ac(0,"a",50),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).editCompany(e)})),M.Vb(1,"i",62),M.ac(2,"span",52),M.Pc(3,"\u7f16\u8f91"),M.Zb(),M.Zb()}}function Be(e,t){1&e&&(M.ac(0,"a",55),M.Vb(1,"i",56),M.ac(2,"span",57),M.Pc(3,"\u7f16\u8f91"),M.Zb(),M.Zb())}function Re(e,t){if(1&e){var n=M.bc();M.Yb(0),M.ac(1,"i",63),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).deleteCompany(e)})),M.Zb(),M.ac(2,"span",54),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(3).deleteCompany(e)})),M.Pc(3,"\u5220\u9664"),M.Zb(),M.Xb()}}function $e(e,t){1&e&&(M.Vb(0,"i",64),M.ac(1,"span",57),M.Pc(2,"\u5220\u9664"),M.Zb())}function Qe(e,t){if(1&e&&(M.ac(0,"div",37),M.ac(1,"div",38),M.Pc(2),M.Zb(),M.ac(3,"div",39),M.ac(4,"div",40),M.ac(5,"span",41),M.Pc(6,"\u516c"),M.Zb(),M.ac(7,"span",42),M.Pc(8),M.Zb(),M.Zb(),M.ac(9,"div",43),M.Nc(10,Ue,4,0,"a",45),M.Nc(11,Be,4,0,"ng-template",null,47,M.Oc),M.Nc(13,Re,4,0,"ng-container",46),M.Nc(14,$e,3,0,"ng-template",null,48,M.Oc),M.Zb(),M.Zb(),M.Zb()),2&e){var n=t.$implicit,i=t.index,a=M.Cc(12),c=M.Cc(15),r=M.lc().ngIf;M.Eb(2),M.Rc(" \u516c\u53f8",i+1,"\uff1a "),M.Eb(6),M.Qc(n.name),M.Eb(2),M.tc("ngIf",!("1"===r.preview))("ngIfElse",a),M.Eb(3),M.tc("ngIf",!("1"===r.preview||r.isUsed>0))("ngIfElse",c)}}function We(e,t){if(1&e){var n=M.bc();M.ac(0,"div",15),M.ac(1,"div",4),M.ac(2,"span",5),M.Pc(3," \u62bc\u9898\u5b9d\uff1a"),M.ac(4,"nz-switch",16),M.ic("ngModelChange",(function(e){return M.Ec(n),M.lc(2).ngIf.isBet=e}))("ngModelChange",(function(e){return M.Ec(n),M.lc(3).otherSettingStoreService.isBetChange(e)})),M.mc(5,"async"),M.Zb(),M.Zb(),M.ac(6,"div",65),M.Pc(7,"\u63d0\u793a\uff1a\u77e5\u8bc6\u70b9\u6570\u91cf\u5927\u4e8e\u7b49\u4e8e100\u4e2a\u624d\u53ef\u4ee5\u5f00\u542f\u62bc\u9898\u5b9d"),M.Zb(),M.Zb(),M.Zb()}if(2&e){var i=M.lc().ngIf,a=M.lc().ngIf,c=M.lc();M.Eb(4),M.tc("ngModel",a.isBet)("nzDisabled","1"===i.preview||i.isUsed>0||M.nc(5,2,c.knowledgeNum$)<100)}}function He(e,t){1&e&&(M.ac(0,"th"),M.Pc(1,"\u64cd\u4f5c"),M.Zb())}function Je(e,t){if(1&e){var n=M.bc();M.Yb(0),M.Vb(1,"nz-divider",74),M.ac(2,"a",73),M.ic("click",(function(){M.Ec(n);var e=M.lc(2).$implicit;return M.lc(4).delTable(e.id)})),M.Pc(3,"\u5220\u9664"),M.Zb(),M.Xb()}}function Ke(e,t){if(1&e){var n=M.bc();M.ac(0,"td"),M.ac(1,"a",73),M.ic("click",(function(){M.Ec(n);var e=M.lc().$implicit;return M.lc(4).edit(e)})),M.Pc(2,"\u7f16\u8f91"),M.Zb(),M.Nc(3,Je,4,0,"ng-container",2),M.Zb()}if(2&e){var i=M.lc(3).ngIf,a=M.lc(2);M.Eb(3),M.tc("ngIf",!(i.isUsed>0&&a.userId!==i.majorLeaderId))}}function Ge(e,t){if(1&e&&(M.ac(0,"tr"),M.ac(1,"td"),M.Pc(2),M.Zb(),M.ac(3,"td"),M.Pc(4),M.Zb(),M.Nc(5,Ke,4,1,"td",2),M.Zb()),2&e){var n=t.$implicit,i=M.lc(2).ngIf;M.Eb(2),M.Qc(n.index),M.Eb(2),M.Qc(n.name),M.Eb(1),M.tc("ngIf","1"!==i.preview)}}function Xe(e,t){if(1&e){var n=M.bc();M.Yb(0),M.ac(1,"div",4),M.ac(2,"span",5),M.Pc(3," \u603b\u8bfe\u6b21\uff1a "),M.Zb(),M.ac(4,"nz-input-number",66),M.ic("ngModelChange",(function(e){return M.Ec(n),M.lc().ngIf.lessonCount=e})),M.Zb(),M.ac(5,"button",67),M.ic("click",(function(){return M.Ec(n),M.lc(3).generateLessons()})),M.Pc(6," \u751f\u6210\u8bfe\u6b21 "),M.Zb(),M.ac(7,"button",68),M.ic("click",(function(){return M.Ec(n),M.lc(3).newClass()})),M.Pc(8," \u65b0\u589e\u8bfe\u6b21 "),M.Zb(),M.Zb(),M.ac(9,"nz-spin",69),M.ac(10,"nz-table",70,71),M.ac(12,"thead"),M.ac(13,"tr"),M.ac(14,"th"),M.Pc(15,"\u8bfe\u6b21\u5e8f\u53f7"),M.Zb(),M.ac(16,"th"),M.Pc(17,"\u540d\u79f0"),M.Zb(),M.Nc(18,He,2,0,"th",2),M.Zb(),M.Zb(),M.ac(19,"tbody"),M.Nc(20,Ge,6,3,"tr",72),M.Zb(),M.Zb(),M.Zb(),M.Xb()}if(2&e){var i=M.Cc(11),a=M.lc().ngIf,c=M.lc().ngIf,r=M.lc();M.Eb(4),M.tc("ngModel",a.lessonCount)("nzMin",1)("nzStep",1)("nzMax",200)("nzDisabled","1"===a.preview||a.isUsed>0&&r.userId!==a.majorLeaderId),M.Eb(1),M.tc("disabled",a.isUsed>0||"1"===a.preview||null)("nzLoading",c.isLoading),M.Eb(2),M.tc("nzLoading",c.isLoading)("disabled",a.isUsed>0&&r.userId!==a.majorLeaderId||"1"===a.preview||null),M.Eb(2),M.tc("nzSpinning",c.isLoading)("nzDelay",0),M.Eb(1),M.tc("nzData",c.listOfData)("nzFrontPagination",!0),M.Eb(8),M.tc("ngIf","1"!==a.preview),M.Eb(2),M.tc("ngForOf",i.data)}}var Ye=function(){return{"max-height":"200px"}};function et(e,t){if(1&e){var n=M.bc();M.Yb(0),M.ac(1,"div",3),M.ac(2,"div",4),M.ac(3,"span",5),M.Pc(4," \u8003\u6838\u4e13\u7528\uff1a "),M.Zb(),M.Nc(5,ke,2,0,"span",2),M.ac(6,"nz-spin",6),M.ac(7,"nz-tree-select",7,8),M.ic("ngModelChange",(function(e){return M.Ec(n),M.lc().ngIf.subQuestionBankCurrent=e}))("ngModelChange",(function(e){return M.Ec(n),M.lc(2).subQuestionBankChange(e,"subQuestionBank")})),M.Zb(),M.Nc(9,Ce,3,2,"ng-template",null,9,M.Oc),M.Zb(),M.Zb(),M.ac(11,"div",10),M.ic("cdkDropListDropped",(function(e){return M.Ec(n),M.lc(2).listDrop(e,"subQuestionBank")})),M.Nc(12,xe,6,5,"div",11),M.Zb(),M.ac(13,"div",4),M.ac(14,"span",5),M.Pc(15,"\u667a\u9002\u5e94\u4e13\u7528\uff1a"),M.Zb(),M.Nc(16,Oe,2,0,"span",2),M.ac(17,"nz-spin",6),M.ac(18,"nz-tree-select",12,13),M.ic("ngModelChange",(function(e){return M.Ec(n),M.lc().ngIf.subQuestionBankIntCurrent=e}))("ngModelChange",(function(e){return M.Ec(n),M.lc(2).subQuestionBankChange(e,"subQuestionBankInt")})),M.Zb(),M.Nc(20,Te,3,2,"ng-template",null,14,M.Oc),M.Zb(),M.Zb(),M.ac(22,"div",10),M.ic("cdkDropListDropped",(function(e){return M.Ec(n),M.lc(2).listDrop(e,"subQuestionBankInt")})),M.Nc(23,Ne,6,5,"div",11),M.Zb(),M.Zb(),M.ac(24,"div",15),M.ac(25,"div",4),M.ac(26,"span",5),M.Pc(27," \u95ef\u5173\u6a21\u5f0f\uff1a"),M.ac(28,"nz-switch",16),M.ic("ngModelChange",(function(e){return M.Ec(n),M.lc().ngIf.breakthroughMode=e}))("ngModelChange",(function(e){return M.Ec(n),M.lc(2).otherSettingStoreService.breakthroughModeChange(e)})),M.Zb(),M.Zb(),M.Zb(),M.ac(29,"div",17),M.Nc(30,qe,19,10,"div",18),M.Zb(),M.ac(31,"div",19),M.ac(32,"button",20),M.ic("click",(function(){return M.Ec(n),M.lc(2).addLevel()})),M.Vb(33,"i",21),M.Pc(34," \u65b0\u589e\u5173\u5361 "),M.Zb(),M.Zb(),M.Zb(),M.ac(35,"div",15),M.ac(36,"div",4),M.ac(37,"span",5),M.Pc(38," 99\u5b9e\u8bad\uff1a"),M.ac(39,"nz-switch",16),M.ic("ngModelChange",(function(e){return M.Ec(n),M.lc().ngIf.practiceOn=e}))("ngModelChange",(function(e){return M.Ec(n),M.lc(2).otherSettingStoreService.practiceOnChange(e)})),M.Zb(),M.Zb(),M.Zb(),M.ac(40,"div",17),M.Nc(41,Qe,16,6,"div",18),M.Zb(),M.ac(42,"div",19),M.ac(43,"button",20),M.ic("click",(function(){return M.Ec(n),M.lc(2).addCompany()})),M.Vb(44,"i",21),M.Pc(45," \u65b0\u589e\u516c\u53f8 "),M.Zb(),M.Zb(),M.Zb(),M.Nc(46,We,8,4,"div",22),M.Nc(47,Xe,21,15,"ng-container",2),M.Xb()}if(2&e){var i=t.ngIf,a=M.Cc(10),c=M.Cc(21),r=M.lc().ngIf;M.Eb(5),M.tc("ngIf","1"===i.preview&&!r.subQuestionBank.length),M.Eb(1),M.tc("nzSpinning",r.searchLoad)("nzDelay",0),M.Eb(1),M.tc("disabled","1"===i.preview||i.isUsed>0)("nzMultiple",!0)("nzNodes",r.exam)("nzAllowClear",!1)("ngModel",r.subQuestionBankCurrent)("nzDropdownStyle",M.wc(44,Ye))("nzTreeTemplate",a),M.Eb(4),M.Mc("margin",r.subQuestionBank.length?"20px 60px":"0"),M.Eb(1),M.tc("ngForOf",r.subQuestionBank),M.Eb(4),M.tc("ngIf","1"===i.preview&&!r.subQuestionBankInt.length),M.Eb(1),M.tc("nzSpinning",r.searchLoad)("nzDelay",0),M.Eb(1),M.tc("disabled","1"===i.preview||i.isUsed>0)("nzMultiple",!0)("nzAllowClear",!1)("nzNodes",r.intelligent)("ngModel",r.subQuestionBankIntCurrent)("nzDropdownStyle",M.wc(45,Ye))("nzTreeTemplate",c),M.Eb(4),M.Mc("margin",r.subQuestionBankInt.length?"20px 60px":"0"),M.Eb(1),M.tc("ngForOf",r.subQuestionBankInt),M.Eb(5),M.tc("ngModel",r.breakthroughMode)("nzDisabled","1"===i.preview||i.isUsed>0),M.Eb(1),M.tc("hidden",!r.breakthroughMode),M.Eb(1),M.tc("ngForOf",r.levelLists),M.Eb(1),M.tc("hidden",!r.breakthroughMode),M.Eb(1),M.Kb("disable-edit","1"===i.preview||null),M.tc("disabled","1"===i.preview||null),M.Eb(7),M.tc("ngModel",r.practiceOn)("nzDisabled","1"===i.preview||i.isUsed>0),M.Eb(1),M.tc("hidden",!r.practiceOn),M.Eb(1),M.tc("ngForOf",r.companyLists),M.Eb(1),M.tc("hidden",!r.practiceOn),M.Eb(1),M.Kb("disable-edit","1"===i.preview||i.isUsed>0||null),M.tc("disabled","1"===i.preview||i.isUsed>0||null),M.Eb(3),M.tc("ngIf","22"!==i.teachType),M.Eb(1),M.tc("ngIf","22"!==i.teachType)}}function tt(e,t){if(1&e&&(M.ac(0,"div",1),M.Nc(1,et,48,46,"ng-container",2),M.mc(2,"async"),M.Zb()),2&e){var n=M.lc();M.Eb(1),M.tc("ngIf",M.nc(2,1,n.packetInfo$))}}var nt,it=((nt=function(){function e(t,n,i){_classCallCheck(this,e),this.route=t,this.modalService=n,this.otherSettingStoreService=i,this.vm$=this.otherSettingStoreService.vm$,this.knowledgeNum$=this.otherSettingStoreService.knowledgeNum$,this.packetInfo$=this.otherSettingStoreService.packetInfo$,this.ossUrl=a.a.OSS_URL,this.userId=r.a.getUserId(),this.status=W.a.getPacketInfoItem("isUsed")>0,this.knoNumLimit=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.otherSettingStoreService.dataInit()}},{key:"delTable",value:function(e,t){this.otherSettingStoreService.delTable({id:e,loadingControl:t})}},{key:"deleteLevel",value:function(e,t){this.otherSettingStoreService.levelDeletion({id:e.id,loadingControl:t})}},{key:"deleteCompany",value:function(e,t){this.otherSettingStoreService.companyDeletion({id:e.id,loadingControl:t})}},{key:"editCompany",value:function(e){this.otherSettingStoreService.addCompanyEffect(e)}},{key:"deleteGift",value:function(e,t){this.otherSettingStoreService.deleteGift({id:e,loadingControl:t})}},{key:"dellistSublibraryItem",value:function(e,t){this.otherSettingStoreService.dellistSublibraryItem({data:e,loadingControl:t})}},{key:"formatProgress",value:function(e){return Math.trunc(e)+"%"}},{key:"generateLessons",value:function(){this.otherSettingStoreService.generateLessonsEffect()}},{key:"newClass",value:function(){this.otherSettingStoreService.newClass()}},{key:"edit",value:function(e){var t=this;this.modalService.create({nzTitle:"\u7f16\u8f91\u8bfe\u6b21",nzContent:o.a,nzComponentParams:{data:e},nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a"}).afterClose.subscribe((function(e){e&&t.otherSettingStoreService.getLessonCountTable()}))}},{key:"subQuestionBankChange",value:function(e,t){var n=this.treeSelect,i=this.treeSelectInt;this.otherSettingStoreService.subQuestionBankChange({data:e,type:t,treeSelect:"subQuestionBank"===t?n:i})}},{key:"rewardSettings",value:function(e){this.otherSettingStoreService.rewardSettings(e)}},{key:"addLevel",value:function(){this.otherSettingStoreService.addLevelEffect({})}},{key:"editLevel",value:function(e){this.otherSettingStoreService.addLevelEffect(e)}},{key:"addCompany",value:function(){this.otherSettingStoreService.addCompanyEffect({})}},{key:"listDrop",value:function(e,t){this.otherSettingStoreService.listDrop({data:e,label:t})}}]),e}()).\u0275fac=function(e){return new(e||nt)(M.Ub(re.a),M.Ub(ie.e),M.Ub(ce))},nt.\u0275cmp=M.Ob({type:nt,selectors:[["app-other-setting"]],viewQuery:function(e,t){var n;1&e&&(M.Vc(ze,!0),M.Vc(ye,!0)),2&e&&(M.Bc(n=M.jc())&&(t.treeSelect=n.first),M.Bc(n=M.jc())&&(t.treeSelectInt=n.first))},features:[M.Db([ce])],decls:2,vars:3,consts:[["class","container",4,"ngIf"],[1,"container"],[4,"ngIf"],[1,"module-tree","pt20"],[1,"item"],[1,"item-label"],[2,"width","calc(100% - 100px)","display","inline-block",3,"nzSpinning","nzDelay"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u7ed1\u5b9a\u5b50\u9898\u5e93",2,"width","100%",3,"disabled","nzMultiple","nzNodes","nzAllowClear","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["treeSelect",""],["nzTreeTemplate",""],["cdkDropList","",1,"list-container",3,"cdkDropListDropped"],["class","list","cdkDrag","",3,"cursor",4,"ngFor","ngForOf"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u7ed1\u5b9a\u5b50\u9898\u5e93",2,"width","100%",3,"disabled","nzMultiple","nzAllowClear","nzNodes","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["treeSelectInt",""],["nzTreeTemplateInt",""],[1,"module-tree"],["nzCheckedChildren","\u5f00","nzUnCheckedChildren","\u5173",3,"ngModel","nzDisabled","ngModelChange"],[1,"list-container",3,"hidden"],["class","list-item",4,"ngFor","ngForOf"],[1,"item","pt0",3,"hidden"],["nz-button","","nzType","primary",1,"other-button",2,"margin-left","70px",3,"disabled","click"],["nz-icon","","nzType","plus","nzTheme","outline",1,"add-member-icon"],["class","module-tree",4,"ngIf"],[1,"custom-node"],["nz-icon","",3,"nzType"],[1,"folder-name"],["nz-icon","","nzType","file"],[1,"file-name"],["cdkDrag","",1,"list"],[2,"float","left",3,"title"],["nz-icon","","nzType","file-text","nzTheme","outline"],[2,"margin-left","20px"],["style","float:right",4,"ngIf"],[2,"float","right"],["nz-icon","","nzType","delete","nzTheme","outline",2,"cursor","pointer",3,"click"],["class","icon-del",3,"click",4,"ngIf"],[1,"icon-del",3,"click"],[1,"list-item"],[1,"gk-text","fl"],[1,"list","fr",2,"width","calc(100% - 70px)"],[1,"fl"],[1,"icon-pre"],[1,"icon-text"],[1,"fr"],["nz-button","","nzType","primary",1,"other-button",3,"disabled","click"],["nz-button","","nzType","link",3,"click",4,"ngIf","ngIfElse"],[4,"ngIf","ngIfElse"],["editDisable",""],["delDisable",""],["class","list fr","style","width:calc(100% - 130px);",4,"ngFor","ngForOf"],["nz-button","","nzType","link",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline",2,"cursor","pointer","line-height","38px"],[1,"lh34","mr20","ml10"],["nz-icon","","nzType","delete","nzTheme","outline",2,"cursor","pointer","line-height","38px",3,"click"],[1,"icon-del","lh34",3,"click"],["nz-button","","nzType","link",2,"cursor","not-allowed"],["nz-icon","","nzType","edit","nzTheme","outline",1,"icon-disable"],[1,"icon-del","lh34","text-disbale"],["nz-icon","","nzType","delete","nzTheme","outline",2,"cursor","pointer","line-height","38px","color","#bfb6b6","cursor","not-allowed"],[1,"icon-del","lh34",2,"color","#bfb6b6","cursor","not-allowed"],[1,"list","fr",2,"width","calc(100% - 130px)"],[1,"icon-pre","yellow"],["nz-icon","","nzType","edit","nzTheme","outline",1,"icon"],["nz-icon","","nzType","delete","nzTheme","outline",1,"icon",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline",1,"icon-disable"],[2,"margin-top","20px","padding-left","56px"],[3,"ngModel","nzMin","nzStep","nzMax","nzDisabled","ngModelChange"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"disabled","nzLoading","click"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"nzLoading","disabled","click"],[3,"nzSpinning","nzDelay"],[2,"margin","0 60px",3,"nzData","nzFrontPagination"],["basicTable",""],[4,"ngFor","ngForOf"],[3,"click"],["nzType","vertical"]],template:function(e,t){1&e&&(M.Nc(0,tt,3,3,"div",0),M.mc(1,"async")),2&e&&M.tc("ngIf",M.nc(1,1,t.vm$))},directives:[se.n,le.a,ue.a,de.o,de.q,Y.d,se.m,pe.a,be.a,fe.a,he.a,oe.a,Y.a,ge.a,me.c,me.j,me.k,me.b,me.h,me.e,ve.a],pipes:[se.b],styles:[".container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]{border-bottom:1px solid #f0f1f3}.container[_ngcontent-%COMP%]   .module-tree.pt20[_ngcontent-%COMP%]{padding-top:20px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{margin:20px 60px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{margin-bottom:20px;overflow:hidden}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .gk-text[_ngcontent-%COMP%]{width:70px;line-height:42px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]{background:#fbfbfb;padding:10px 20px;margin-bottom:10px;overflow:hidden;border-radius:5px;box-shadow:1px 1px 8px #dfdfdf}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-pre[_ngcontent-%COMP%]{display:inline-block;width:22px;height:22px;border-radius:50%;text-align:center;color:#fff;background-color:#39b097;vertical-align:middle;margin-right:20px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-text[_ngcontent-%COMP%]{line-height:34px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-text.yellow[_ngcontent-%COMP%]{background-color:#feca59}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]:hover{box-shadow:2px 2px 6px #dfdfdf}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-del[_ngcontent-%COMP%]{float:right;margin-left:10px;cursor:pointer;color:red}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .lh34[_ngcontent-%COMP%]{line-height:34px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .mr20[_ngcontent-%COMP%]{margin-right:20px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .ml10[_ngcontent-%COMP%]{margin-left:10px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .disable[_ngcontent-%COMP%]{cursor:not-allowed}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{cursor:pointer;line-height:38px}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-disable[_ngcontent-%COMP%]{line-height:38px;color:#bfb6b6;cursor:not-allowed}.container[_ngcontent-%COMP%]   .module-tree[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .text-disbale[_ngcontent-%COMP%]{color:#bfb6b6;cursor:not-allowed}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:20px 60px}.container[_ngcontent-%COMP%]   .item.pt0[_ngcontent-%COMP%]{padding-top:0}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-label[_ngcontent-%COMP%]{min-width:100px;display:inline-block}.container[_ngcontent-%COMP%]   .other-button[_ngcontent-%COMP%]{border:1px solid #79bdfa;border-radius:6px;background-color:#fff;text-align:center;color:#79bdfa;margin-right:50px}.container[_ngcontent-%COMP%]   .disable-edit[_ngcontent-%COMP%]{color:#bfb6b6;cursor:not-allowed;border-color:#bfb6b6}"],changeDetection:0}),Object(i.b)([Object(c.b)({title:"\u5220\u9664",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8bfe\u6b21\u5417\uff1f",type:"error"})],nt.prototype,"delTable",null),Object(i.b)([Object(c.b)({title:"\u5220\u9664\u5173\u5361",content:function(e){return this.status?"\u5220\u9664\u8be5\u5173\u5361\u5c06\u540c\u6b65\u5220\u9664\u6240\u6709\u5b66\u5458\u5728\u6b64\u5173\u5361\u4e0a\u7684\u6240\u6709\u95ef\u5173\u8bb0\u5f55\u3002":"\u786e\u5b9a\u5220\u9664"+e[0].name+"\u5173\u5361\u5417\uff1f"},type:"error"})],nt.prototype,"deleteLevel",null),Object(i.b)([Object(c.b)({title:"\u5220\u9664\u516c\u53f8",content:function(e){return"\u786e\u5b9a\u5220\u9664"+e[0].name+"\u516c\u53f8\u5417\uff1f"},type:"error"})],nt.prototype,"deleteCompany",null),Object(i.b)([Object(c.b)({title:"\u5220\u9664\u5956\u52b1",content:"\u786e\u5b9a\u5220\u9664\u8be5\u8d44\u6e90\u5417\uff1f",type:"error"})],nt.prototype,"deleteGift",null),Object(i.b)([Object(c.b)({title:"\u5220\u9664\u5b50\u9898\u5e93",content:"\u786e\u5b9a\u5220\u9664\u8be5\u5b50\u9898\u5e93\u5417\uff1f",type:"error"})],nt.prototype,"dellistSublibraryItem",null),nt)},ApCc:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("3Pt+"),a=n("3JH+"),c=n("fXoL"),r=n("uMH2"),o=n("dEAy"),s=n("ocnv"),l=n("B+r4"),u=n("PTRe"),d=n("OzZK"),p=n("RwU8"),b=n("C2AL"),f=n("ofXK");function h(e,t){1&e&&(c.Yb(0),c.Pc(1," \u8bf7\u8f93\u5165\u7ae0\u540d\u79f0 "),c.Xb())}function g(e,t){1&e&&(c.Yb(0),c.Pc(1," \u540d\u79f060\u5b57\u4ee5\u5185 "),c.Xb())}function m(e,t){1&e&&(c.Yb(0),c.Pc(1," \u91cd\u590d\u540d\u79f0 "),c.Xb())}function v(e,t){if(1&e&&(c.Nc(0,h,2,0,"ng-container",8),c.Nc(1,g,2,0,"ng-container",8),c.Nc(2,m,2,0,"ng-container",8)),2&e){var n=t.$implicit;c.tc("ngIf",n.hasError("required")),c.Eb(1),c.tc("ngIf",n.hasError("maxlength")),c.Eb(1),c.tc("ngIf",n.hasError("repeatName"))}}var z=function(){return{span:24,offset:0}},y=function(){return{span:16,offset:8}},k=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.fb=t,this.courseMgService=n,this.nzModalRef=i,this.loading=!1,this.lock=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=this.fb.group({name:[this.formData?this.formData.name:"",[i.w.required,i.w.maxLength(60),Object(a.a)(this.data),Object(a.b)()]]})}},{key:"save",value:function(){var e=this;if(!this.lock){if(Object.keys(this.formGroup.controls).forEach((function(t){e.formGroup.controls[t].markAsDirty(),e.formGroup.controls[t].updateValueAndValidity()})),this.formGroup.invalid)return;this.lock=!0;var t={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.formData?this.formData.id:"",name:this.formGroup.value.name,seq:this.formData?this.formData.seq:this.data.length>0?this.data.length+1:1}]};this.loading=!0,this.courseMgService.save_courseChapter(t).subscribe((function(t){e.lock=!1,e.loading=!1,200===t.status&&(t.data[0].children=[],e.nzModalRef.close(t.data[0]))}),(function(){return e.lock=!1}))}}},{key:"cancel",value:function(){this.nzModalRef.close(null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Ub(i.d),c.Ub(r.a),c.Ub(o.d))},e.\u0275cmp=c.Ob({type:e,selectors:[["ng-component"]],inputs:{data:"data",formData:"formData",courseId:"courseId",coursePacketId:"coursePacketId"},decls:14,vars:11,consts:[["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","placeholder","\u8bf7\u8f93\u5165\u7ae0\u8282\u540d\u79f0\uff0c60\u5b57\u4ee5\u5185"],["errNameTipsTpl",""],[3,"nzXs","nzSm"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-button","","nzType","default",2,"margin-left","20px",3,"click"],[4,"ngIf"]],template:function(e,t){if(1&e&&(c.ac(0,"form",0),c.ac(1,"nz-form-item"),c.ac(2,"nz-form-label",1),c.Pc(3,"\u672c\u7ae0\u540d\u79f0"),c.Zb(),c.ac(4,"nz-form-control",2),c.Vb(5,"input",3),c.Nc(6,v,3,3,"ng-template",null,4,c.Oc),c.Zb(),c.Zb(),c.ac(8,"nz-form-item"),c.ac(9,"nz-form-control",5),c.ac(10,"button",6),c.ic("click",(function(){return t.save()})),c.Pc(11,"\u4fdd\u5b58"),c.Zb(),c.ac(12,"button",7),c.ic("click",(function(){return t.cancel()})),c.Pc(13,"\u53d6\u6d88"),c.Zb(),c.Zb(),c.Zb(),c.Zb()),2&e){var n=c.Cc(7);c.tc("formGroup",t.formGroup),c.Eb(2),c.tc("nzSm",6)("nzXs",24),c.Eb(2),c.tc("nzSm",16)("nzXs",24)("nzErrorTip",n),c.Eb(5),c.tc("nzXs",c.wc(9,z))("nzSm",c.wc(10,y)),c.Eb(1),c.tc("nzLoading",t.loading)}},directives:[i.y,i.p,s.b,i.i,l.c,s.c,l.a,s.d,s.a,u.b,i.c,i.o,i.g,d.a,p.a,b.a,f.n],styles:[""]}),e}()},BmWY:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var i=n("3Pt+"),a=n("WTGI"),c=n("AytR"),r=n("Vhue"),o=n("+O+V"),s=n("fXoL"),l=n("PScX"),u=n("dEAy"),d=n("19W7"),p=n("uMH2"),b=n("qAZ0"),f=n("ocnv"),h=n("B+r4"),g=n("zAKX"),m=n("ofXK"),v=n("z4wI"),z=n("OzZK"),y=n("RwU8"),k=n("C2AL");function S(e,t){if(1&e&&s.Vb(0,"nz-option",15),2&e){var n=t.$implicit;s.tc("nzValue",n.id)("nzLabel",n.name)}}function P(e,t){if(1&e&&s.Vb(0,"nz-option",15),2&e){var n=t.$implicit;s.tc("nzValue",n.examId)("nzLabel",n.examName)}}function C(e,t){if(1&e){var n=s.bc();s.ac(0,"div"),s.ac(1,"button",16),s.ic("click",(function(){return s.Ec(n),s.lc().cancel()})),s.Pc(2,"\u53d6\u6d88"),s.Zb(),s.ac(3,"button",17),s.ic("click",(function(){return s.Ec(n),s.lc().save()})),s.Pc(4,"\u786e\u5b9a"),s.Zb(),s.Zb()}if(2&e){var i=s.lc();s.Eb(3),s.tc("nzLoading",i.newLevelLoading)}}var E=function(){var e=function(){function e(t,n,a,c,r,o){_classCallCheck(this,e),this.nzMesService=t,this.nzModalService=n,this.nzModalRef=a,this.fb=c,this.statisticsLogService=r,this.courseManageService=o,this.moduleArr=[],this.levelLists=[],this.levelItem={},this.newLevelLoading=!1,this.paperArr=[],this.totalTestPaperScore=0,this.paperIdToName={},this.examIdToPaperUUId={},this.newLevelForm=this.fb.group({newLevel:["",[i.w.required]],testPaperName:[null,[i.w.required]],complianceConditions:[void 0,[i.w.required]]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e,t=this,n=this.levelItem,i=r.a.getSubmodule();this.newLevelForm.patchValue({newLevel:n.id?Number(n.quebankId):i?Number(i):null===(e=this.moduleArr[0])||void 0===e?void 0:e.id}),this.getPapers(!1).then((function(e){if(e){var i={};n.id?(i.complianceConditions=n.passScore,i.testPaperName=Number(n.examId.split("-")[1])):i.testPaperName=t.paperArr[0]?Number(t.paperArr[0].examId):null,t.newLevelForm.patchValue(i)}}))}},{key:"disableIf",value:function(e){return this.levelLists.map((function(e){return e.examId.split("-")[0]})).indexOf(e.paperUuid)>-1}},{key:"getPapers",value:function(e){var t=this;return e&&r.a.putSubmodule(this.newLevelForm.value.newLevel),new Promise((function(n){a.a.postAjax(c.a.questionBankApi+"system/qkcPaper/examInfoByModuleId",{sublibraryModuleIdList:[t.newLevelForm.value.newLevel],pageNum:1,pageSize:1e4},{"Content-Type":"application/json"}).subscribe((function(i){try{var a=JSON.parse(i);if(200===a.code){if(t.paperArr=a.data.rows,e){var c=t.paperArr[0]&&t.paperArr[0].examId?Number(t.paperArr[0].examId):void 0;t.newLevelForm.patchValue({testPaperName:c}),Object.keys(t.newLevelForm.controls).forEach((function(e){t.newLevelForm.controls[e].markAsUntouched(),t.newLevelForm.controls[e].markAsPristine(),t.newLevelForm.controls[e].updateValueAndValidity()}))}t.paperArr.forEach((function(e){t.paperIdToName[e.examId]=e.examName,t.examIdToPaperUUId[e.examId]=e.paperUuid})),n(!0)}else n(!1),t.paperArr=[],t.nzMesService.error(a.message)}catch(r){t.paperArr=[],t.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38"),n(!1)}}))}))}},{key:"save",value:function(){var e,t,n=this;for(var i in this.newLevelForm.controls)this.newLevelForm.controls.hasOwnProperty(i)&&(this.newLevelForm.controls[i].markAsDirty(),this.newLevelForm.controls[i].updateValueAndValidity());if(!this.newLevelForm.invalid){this.newLevelLoading=!0;var c=this.newLevelForm.value.testPaperName,r=null===(e=this.levelItem)||void 0===e?void 0:e.seq,s={id:null===(t=this.levelItem)||void 0===t?void 0:t.id,courseId:this.courseId,coursePacketId:this.coursePacketId,quebankId:this.newLevelForm.value.newLevel,name:this.paperIdToName[c],examId:this.examIdToPaperUUId[c]+"-"+this.newLevelForm.value.testPaperName,passScore:this.newLevelForm.value.complianceConditions,seq:r||a.a.getMaxSeq(this.levelLists)};this.courseManageService.addCoursePacketCard(s).subscribe((function(e){if(n.newLevelLoading=!1,201===e.status){var t=!!n.levelItem.id;n.statisticsLogService.statisticsPacketInfoLog({name:t?"\u4fee\u6539\u5173\u5361\u8bd5\u5377":"\u65b0\u589e\u5173\u5361",actionCode:o.j.packetInfo["otherSet-levelthrough-action"][t?"modify":"addCode"],content:JSON.stringify(s)}),n.nzModalRef.close(!0)}}),(function(){n.newLevelLoading=!1}))}}},{key:"cancel",value:function(){this.nzModalRef.close(!1)}},{key:"testPaperNameChange",value:function(e){var t=this;e?this.paperArr.every((function(n){if(n.examId!==e)return!0;t.totalTestPaperScore=n.score,t.totalTestPaperScore<t.newLevelForm.value.complianceConditions&&t.newLevelForm.patchValue({complianceConditions:t.totalTestPaperScore})})):(this.totalTestPaperScore=0,this.newLevelForm.patchValue({complianceConditions:this.totalTestPaperScore}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Ub(l.e),s.Ub(u.e),s.Ub(u.d),s.Ub(i.d),s.Ub(d.a),s.Ub(p.a))},e.\u0275cmp=s.Ob({type:e,selectors:[["app-new-level"]],inputs:{courseId:"courseId",coursePacketId:"coursePacketId",moduleArr:"moduleArr",levelLists:"levelLists",levelItem:"levelItem"},decls:22,vars:16,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],[2,"width","50%","float","left"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","","nzErrorTip","\u6a21\u5757\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","newLevel",2,"flex","1",3,"nzShowSearch","ngModelChange"],[3,"nzValue","nzLabel",4,"ngFor","ngForOf"],["nzHasFeedback","","nzErrorTip","\u8bd5\u5377\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","testPaperName",2,"flex","1",3,"nzShowSearch","ngModelChange"],[2,"width","50%"],["nzHasFeedback","","nzErrorTip","\u8fbe\u6807\u6761\u4ef6\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzPlaceHolder","\u8bf7\u8f93\u5165\u5206\u6570\u503c","formControlName","complianceConditions",2,"min-width","140px",3,"nzMin","nzMax","nzStep"],[2,"margin-left","20px"],[2,"color","#8fc9fe"],[4,"nzModalFooter"],[3,"nzValue","nzLabel"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(s.ac(0,"nz-spin",0),s.ac(1,"form",1),s.ac(2,"nz-form-item",2),s.ac(3,"nz-form-label",3),s.Pc(4,"\u9009\u62e9\u8bd5\u5377"),s.Zb(),s.ac(5,"nz-form-control",4),s.ac(6,"nz-select",5),s.ic("ngModelChange",(function(){return t.getPapers(!0)})),s.Nc(7,S,1,2,"nz-option",6),s.Zb(),s.Zb(),s.Zb(),s.ac(8,"nz-form-item",2),s.ac(9,"nz-form-control",7),s.ac(10,"nz-select",8),s.ic("ngModelChange",(function(e){return t.testPaperNameChange(e)})),s.Nc(11,P,1,2,"nz-option",6),s.Zb(),s.Zb(),s.Zb(),s.ac(12,"nz-form-item",9),s.ac(13,"nz-form-label",3),s.Pc(14,"\u8fbe\u6807\u6761\u4ef6"),s.Zb(),s.ac(15,"nz-form-control",10),s.Vb(16,"nz-input-number",11),s.ac(17,"span",12),s.Pc(18,"\u8bd5\u5377\u603b\u5206\uff1a"),s.ac(19,"span",13),s.Pc(20),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Zb(),s.Nc(21,C,5,1,"div",14),s.Zb()),2&e&&(s.tc("nzSpinning",t.newLevelLoading)("nzDelay",0),s.Eb(1),s.tc("formGroup",t.newLevelForm),s.Eb(2),s.tc("nzSpan",5),s.Eb(2),s.tc("nzSpan",18),s.Eb(1),s.tc("nzShowSearch",!0),s.Eb(1),s.tc("ngForOf",t.moduleArr),s.Eb(2),s.tc("nzSpan",18),s.Eb(1),s.tc("nzShowSearch",!0),s.Eb(1),s.tc("ngForOf",t.paperArr),s.Eb(2),s.tc("nzSpan",5),s.Eb(2),s.tc("nzSpan",18),s.Eb(1),s.tc("nzMin",0)("nzMax",t.totalTestPaperScore)("nzStep",1),s.Eb(4),s.Rc("",t.totalTestPaperScore,"\u5206"))},directives:[b.a,i.y,i.p,f.b,i.i,h.c,f.c,h.a,f.d,f.a,g.d,i.o,i.g,m.m,v.a,u.b,g.a,z.a,y.a,k.a],styles:[""]}),e}()},DzeW:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var i=n("fXoL"),a=n("3Pt+"),c=n("WTGI"),r=n("mhyn"),o=n("4tR+"),s=n("tyNb"),l=n("pz6Z"),u=n("PScX"),d=n("uMH2"),p=n("dEAy"),b=n("b5Nk"),f=n("iacB"),h=n("2+G5"),g=n("jhN1"),m=n("Wc2E"),v=n("qAZ0"),z=n("ocnv"),y=n("B+r4"),k=n("D9mS"),S=n("OzZK"),P=n("RwU8"),C=n("C2AL"),E=n("FwiY");function w(e,t){if(1&e){var n=i.bc();i.ac(0,"div"),i.ac(1,"button",10),i.ic("click",(function(){return i.Ec(n),i.lc().cancel()})),i.Pc(2,"\u53d6\u6d88"),i.Zb(),i.ac(3,"button",11),i.ic("click",(function(){return i.Ec(n),i.lc().save()})),i.Pc(4,"\u786e\u5b9a"),i.Zb(),i.Zb()}if(2&e){var a=i.lc();i.Eb(3),i.tc("nzLoading",a.videoImportLoading)}}var x=function(){return{showPreviewIcon:!1,showRemoveIcon:!0,showDownloadIcon:!1}},O=function(){var e=function(){function e(t,n,i,a,r,s,l,u,d,p,b,f,h,g,m,v){var z=this;_classCallCheck(this,e),this.route=t,this.menuService=n,this.nzMesService=i,this.courseMgService=a,this.nzModalService=r,this.nzModalRef=s,this.aliOssService=l,this.fb=u,this.modalService=d,this.knowledgeManageService=p,this.renderer2=b,this.trainManageService=f,this.sanitizer=h,this.uploadOssService=g,this.locale=m,this.win=v,this.videoImportLoading=!1,this.loading=!1,this.nzFileList=[],this.removeFileSelf=function(){z.videoImportForm.patchValue({videoUrl:""}),z.nzFileList=[]},this.beforeVideoUpload=function(e){if("excel"===c.a.getFileType(e.name))return!0;z.nzMesService.error("\u8bf7\u4e0a\u4f20excel,\u652f\u6301\u540e\u7f00xls, xlsx")},this.customVideoRequest=function(e){z.loading=!0,z.uploadOssService.uploadOss(e.file,o.a.knowledge_file).subscribe((function(t){z.loading=!1,z.videoImportForm.patchValue({videoUrl:t}),e.onSuccess(Object.assign({},e),e.file,{})}),(function(t){z.loading=!1,e.onError(t,e.file),z.nzMesService.error(JSON.stringify(t))}))}}return _createClass(e,[{key:"ngOnInit",value:function(){this.videoImportForm=this.fb.group({videoUrl:["",a.w.required]})}},{key:"ngOnDestroy",value:function(){}},{key:"downTemplate",value:function(){var e=this;this.courseMgService.exportExcelVideo().subscribe((function(e){var t=document.createElement("a"),n=URL.createObjectURL(e.body);t.setAttribute("href",n),t.setAttribute("download","\u5bfc\u5165\u89c6\u9891\u6a21\u677f"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}),(function(t){return e.nzMesService.error(t)}))}},{key:"save",value:function(){var e=this;this.videoImportForm.value.videoUrl?(this.videoImportLoading=!0,this.courseMgService.excelImportVideo({courseId:this.courseId,coursePacketId:this.coursePacketId,fileUrl:this.videoImportForm.value.videoUrl}).subscribe((function(t){e.videoImportLoading=!1,200===t.status?(e.nzMesService.success("\u5bfc\u5165\u6210\u529f"),e.nzModalRef.close(!0)):500===t.status&&e.nzMesService.warning(t.message)}),(function(){e.videoImportLoading=!1}))):this.nzMesService.warning("\u8bf7\u5148\u4e0a\u4f20\u6587\u4ef6")}},{key:"cancel",value:function(){this.nzModalRef.close(!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Ub(s.a),i.Ub(l.a),i.Ub(u.e),i.Ub(d.a),i.Ub(p.e),i.Ub(p.d),i.Ub(b.a),i.Ub(a.d),i.Ub(p.e),i.Ub(f.a),i.Ub(i.E),i.Ub(h.a),i.Ub(g.b),i.Ub(m.a),i.Ub(i.u),i.Ub(r.b))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-video-import"]],inputs:{courseId:"courseId",coursePacketId:"coursePacketId"},decls:17,vars:13,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],["nzRequired","",2,"max-width","100px",3,"nzSpan"],[2,"position","relative"],["nzListType","picture",1,"upload-list-inline",3,"nzShowUploadList","nzFileList","nzRemove","nzBeforeUpload","nzCustomRequest","nzFileListChange"],["nz-button","",2,"margin-bottom","20px",3,"disabled"],["nz-icon","","nzType","upload",2,"font-size","20px"],["nz-button","",2,"position","absolute","left","126px","top","0",3,"click"],["nz-icon","","nzType","snippets","nzTheme","outline",2,"font-size","20px","margin-right","20px"],[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(i.ac(0,"nz-spin",0),i.ac(1,"form",1),i.ac(2,"nz-form-item"),i.ac(3,"nz-form-label",2),i.Pc(4,"\u672c\u5730\u4e0a\u4f20"),i.Zb(),i.ac(5,"nz-form-control",3),i.ac(6,"nz-spin",0),i.ac(7,"nz-upload",4),i.ic("nzFileListChange",(function(e){return t.nzFileList=e})),i.ac(8,"button",5),i.ac(9,"span"),i.Vb(10,"i",6),i.Pc(11,"\u4e0a\u4f20\u6587\u4ef6"),i.Zb(),i.Zb(),i.Zb(),i.ac(12,"button",7),i.ic("click",(function(){return t.downTemplate()})),i.ac(13,"span"),i.Vb(14,"i",8),i.Pc(15,"\u6a21\u677f\u4e0b\u8f7d"),i.Zb(),i.Zb(),i.Zb(),i.Zb(),i.Zb(),i.Zb(),i.Nc(16,w,5,1,"div",9),i.Zb()),2&e&&(i.tc("nzSpinning",t.loading)("nzDelay",0),i.Eb(1),i.tc("formGroup",t.videoImportForm),i.Eb(2),i.tc("nzSpan",5),i.Eb(3),i.tc("nzSpinning",t.videoImportLoading)("nzDelay",0),i.Eb(1),i.tc("nzShowUploadList",i.wc(12,x))("nzFileList",t.nzFileList)("nzRemove",t.removeFileSelf)("nzBeforeUpload",t.beforeVideoUpload)("nzCustomRequest",t.customVideoRequest),i.Eb(1),i.tc("disabled",""!==t.videoImportForm.value.videoUrl))},directives:[v.a,a.y,a.p,z.b,a.i,y.c,z.c,y.a,z.d,z.a,k.a,S.a,P.a,C.a,E.a,p.b],styles:[""]}),e}()},Eb0D:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("WTGI"),a=n("fXoL"),c=n("dEAy"),r=n("uMH2"),o=n("PScX"),s=n("zAKX"),l=n("3Pt+"),u=n("f3RM"),d=n("OzZK"),p=n("RwU8"),b=n("C2AL"),f=n("FwiY"),h=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.nzModalRef=t,this.courseMgService=n,this.nzMsg=i,this.isLoading=!1,this.files=[],this.acceptTypeFile={acceptType:"",desc:""},this.acceptTypeFiles={deafult:{acceptType:"pdf,doc,ppt,docx,xls,xlsx,pptx,png,jpg,jpeg,mp4,rar,zip",desc:"\u652f\u6301\u6269\u5c55\u540d\uff1apdf\u3001doc\u3001docx\u3001xls\u3001xlsx\u3001ppt\u3001pptx\u3001png\u3001jpg\u3001mp4\u3001rar\u3001zip"},courseTimeDivision:{acceptType:"pdf,doc,ppt,docx,xls,xlsx,pptx,png,jpg,jpeg,mp4",desc:"\u652f\u6301\u6269\u5c55\u540d\uff1apdf\u3001doc\u3001docx\u3001xls\u3001xlsx\u3001ppt\u3001pptx\u3001png\u3001jpg\u3001mp4"}},this.limit=0,this.learningTarget="1"}return _createClass(e,[{key:"ngOnInit",value:function(){this.setAcceptType()}},{key:"setAcceptType",value:function(){this.acceptTypeFile="course-time-division"===this.node.type?this.acceptTypeFiles.courseTimeDivision:this.acceptTypeFiles.deafult}},{key:"cancel",value:function(){this.nzModalRef.destroy()}},{key:"confirm",value:function(){var e=this,t=this.formatPostData(this.node);if(this.learningTarget)if(0!==t.length){var n=null;switch(this.node.type){case"chapter":n=this.courseMgService.batchSave_courseChapterFile(t);break;case"section":n="104"===this.type?this.courseMgService.batchSave_courseSectionTaskFile(t):this.courseMgService.batchSave_courseSectionFile(t);break;case"course-time-division":n=this.courseMgService.batchSave_courseTimeFile(t);break;default:n=null}n&&(this.isLoading=!0,n.subscribe((function(n){e.isLoading=!1,201===n.status?e.nzModalRef.destroy(t):e.nzMsg.error(n.message||"\u672a\u77e5\u9519\u8bef")}),(function(t){e.isLoading=!1,e.nzMsg.error(JSON.stringify(t))})))}else this.nzMsg.warning("\u8bf7\u4e0a\u4f20\u6587\u4ef6");else this.nzMsg.warning("\u8bf7\u9009\u62e9\u5b66\u4e60\u76ee\u6807")}},{key:"formatPostData",value:function(e){var t=this,n=e.data;return this.files.map((function(a,c){if("chapter"===e.type)return{courseId:n.courseId,coursePacketId:n.coursePacketId,courseChapterId:n.id,attachmentName:a.name,attachmentPath:a.path,aattachmentExt:i.a.getExt(a.name),seq:t.seq+c};if("section"===e.type){var r={courseId:n.courseId,coursePacketId:n.coursePacketId,courseChapterId:n.courseChapterId,courseSectionId:n.id,attachmentName:a.name,attachmentPath:a.path,aattachmentExt:i.a.getExt(a.name),sourceType:1,seq:t.seq+c,type:t.type,learningGoalCode:t.learningTarget};return"104"===t.type||"101"===t.type?(r.name=a.name,r.status="1",r.isNeed=0,r.downloadType="0",r.gradeType="1",r.taskType="0"):r.downloadType="2",r}return"course-time-division"===e.type?{courseId:n.courseId,coursePacketId:n.coursePacketId,courseTimeId:n.id,attachmentName:a.name,attachmentPath:a.path,aattachmentExt:i.a.getExt(a.name),seq:t.seq+c}:void 0}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Ub(c.d),a.Ub(r.a),a.Ub(o.e))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-upload-handout"]],inputs:{node:"node",seq:"seq",type:"type",limit:"limit",maxSize:"maxSize"},decls:24,vars:7,consts:[[2,"margin-bottom","20px"],[2,"color","red"],["nzShowSearch","","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b66\u4e60\u76ee\u6807",2,"min-width","100px",3,"ngModel","ngModelChange"],["nzLabel","\u4e86\u89e3","nzValue","1"],["nzLabel","\u7406\u89e3","nzValue","2"],["nzLabel","\u638c\u63e1","nzValue","3"],["nzLabel","\u5e94\u7528","nzValue","4"],["nzLabel","\u5206\u6790","nzValue","5"],["nzLabel","\u521b\u65b0","nzValue","6"],["multiple","true",3,"acceptType","limit","maxSize","ngModel","ngModelChange"],["nz-button",""],["nz-icon","","nzType","upload"],[2,"margin-top","8px"],[2,"text-align","center","margin-top","20px"],["nz-button","","nzType","default",2,"margin-right","20px",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(a.ac(0,"div"),a.ac(1,"div",0),a.ac(2,"span",1),a.Pc(3,"*"),a.Zb(),a.Pc(4,"\u5b66\u4e60\u76ee\u6807\uff1a "),a.ac(5,"nz-select",2),a.ic("ngModelChange",(function(e){return t.learningTarget=e})),a.Vb(6,"nz-option",3),a.Vb(7,"nz-option",4),a.Vb(8,"nz-option",5),a.Vb(9,"nz-option",6),a.Vb(10,"nz-option",7),a.Vb(11,"nz-option",8),a.Zb(),a.Zb(),a.ac(12,"qkc-upload",9),a.ic("ngModelChange",(function(e){return t.files=e})),a.ac(13,"button",10),a.Vb(14,"i",11),a.ac(15,"span"),a.Pc(16,"\u9009\u62e9\u6587\u4ef6"),a.Zb(),a.Zb(),a.ac(17,"p",12),a.Pc(18),a.Zb(),a.Zb(),a.ac(19,"div",13),a.ac(20,"button",14),a.ic("click",(function(){return t.cancel()})),a.Pc(21,"\u53d6\u6d88"),a.Zb(),a.ac(22,"button",15),a.ic("click",(function(){return t.confirm()})),a.Pc(23,"\u786e\u5b9a\u4e0a\u4f20"),a.Zb(),a.Zb(),a.Zb()),2&e&&(a.Eb(5),a.tc("ngModel",t.learningTarget),a.Eb(7),a.tc("acceptType",t.acceptTypeFiles.deafult.acceptType)("limit",t.limit)("maxSize",t.maxSize)("ngModel",t.files),a.Eb(6),a.Qc(t.acceptTypeFiles.deafult.desc),a.Eb(4),a.tc("nzLoading",t.isLoading))},directives:[s.d,l.o,l.q,s.a,u.a,d.a,p.a,b.a,f.a],styles:[""]}),e}()},WZ4L:function(e,t,n){"use strict";n.d(t,"a",(function(){return An}));var i=n("mrSG"),a=n("Eb0D"),c=n("Vhue"),r=n("3Pt+"),o=n("WTGI"),s=n("AytR"),l=n("cp0P"),u=n("HDdC"),d=n("PqYM"),p=n("5+WD"),b=n("55n1"),f=n("fyF9"),h=n("zAKX"),g=n("3JH+"),m=n("DzeW"),v=n("+O+V"),z=n("ofXK"),y=n("fXoL"),k=n("tyNb"),S=n("pz6Z"),P=n("PScX"),C=n("dEAy"),E=n("b5Nk"),w=n("iacB"),x=n("2+G5"),O=n("uMH2"),M=n("19W7"),I=n("rb97"),T=n("qAZ0"),Z=n("IvDN"),L=n("FwiY"),N=n("VXpv"),_=n("OzZK"),F=n("RwU8"),V=n("C2AL"),j=n("rMZv"),D=n("PTRe"),A=n("ocnv"),q=n("B+r4"),U=n("z4wI"),B=n("bE2y"),R=n("nJia"),$=n("ZE2D"),Q=n("TaO5"),W=n("Nqz0"),H=n("Q8cG"),J=n("f3RM"),K=n("5vDB"),G=n("u2sS"),X=["polywaymodal"],Y=["localvideomodal"],ee=["addExam"],te=["addExamExit"],ne=["jobSettings"],ie=["jobSettingsEdit"],ae=["questionnaire"],ce=["tree"];function re(e,t){1&e&&(y.ac(0,"span",108),y.Pc(1," \u8be5\u8bfe\u5305\u5c1a\u672a\u5efa\u7acb\u7ae0\u8282\u5185\u5bb9 "),y.Zb())}function oe(e,t){if(1&e){var n=y.bc();y.ac(0,"button",109),y.ic("click",(function(){return y.Ec(n),y.lc().importVideo()})),y.Pc(1,"\u5bfc\u5165\u89c6\u9891 "),y.Zb()}}var se=function(){return{"max-width":"770px"}};function le(e,t){if(1&e){var n=y.bc();y.ac(0,"span"),y.Pc(1," \u8bb2\u4e49 "),y.ac(2,"i",112),y.ic("click",(function(e){return y.Ec(n),y.lc(2).stopPropagation(e)})),y.Zb(),y.Zb()}if(2&e){y.lc();var i=y.Cc(6);y.Eb(2),y.tc("nzTooltipTitle",i)("nzTooltipOverlayStyle",y.wc(2,se))}}function ue(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bb2\u4e49\u4e3b\u8981\u63d0\u4f9b\u7ed9\u8bb2\u5e08\u7ed9\u5b66\u5458\u4e0a\u8bfe\u4f7f\u7528\uff1a"),y.Zb(),y.ac(2,"div"),y.Pc(3,"1\u3001\u5efa\u8bae\u4f18\u5148WPS\u5236\u4f5cPPT \uff1b"),y.Zb(),y.ac(4,"div"),y.Pc(5,"2\u3001\u5c3d\u91cf\u5c11\u7528\u7b2c\u4e09\u6a21\u677f\uff1b"),y.Zb(),y.ac(6,"div"),y.Pc(7,"3\u3001PPT\u7684\u6587\u4ef6\u5927\u5c0f\u5e94\u63a7\u5236\u5728100M\u4e4b\u5185\uff1b"),y.Zb())}function de(e,t){if(1&e){var n=y.bc();y.ac(0,"select",126),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc(2).$implicit.downloadType=e}))("ngModelChange",(function(e){y.Ec(n);var t=y.lc(2).$implicit;return y.lc(3).downloadChange(e,t)})),y.ac(1,"option",127),y.Pc(2,"\u4e0d\u53ef\u4e0b\u8f7d"),y.Zb(),y.ac(3,"option",128),y.Pc(4,"\u8bb2\u5e08\u53ef\u4e0b\u8f7d"),y.Zb(),y.Zb()}if(2&e){var i=y.lc(2).$implicit;y.tc("ngModel",i.downloadType)}}function pe(e,t){if(1&e){var n=y.bc();y.Yb(0),y.ac(1,"div",123),y.ac(2,"span"),y.ac(3,"label",124),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().$implicit.isMainFile=e}))("ngModelChange",(function(e){y.Ec(n);var t=y.lc().$implicit;return y.lc(3).mainFileChange(e,t)})),y.Pc(4," \u4e3b\u8bb2\u4e49 "),y.Zb(),y.Zb(),y.Zb(),y.Nc(5,de,5,1,"select",125),y.Xb()}if(2&e){var i=y.lc().$implicit,a=y.lc(3);y.Eb(3),y.tc("nzDisabled",a.disableMainLecture(i))("ngModel",i.isMainFile),y.Eb(2),y.tc("ngIf",i.attachmentPath)}}function be(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).downLoad(e)})),y.Vb(1,"i",129),y.Pc(2," \u4e0b\u8f7d "),y.Zb()}}function fe(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc(),t=e.$implicit,i=e.index;return y.lc(3).associate(t,i)})),y.Vb(1,"i",130),y.Pc(2," \u5173\u8054 "),y.Zb()}}var he=function(){return{color:"#f53131"}};function ge(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).delHandout(e)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,he))}var me=function(){return{"background-color":"#ea5c6c"}};function ve(e,t){if(1&e){var n=y.bc();y.ac(0,"div",115),y.ac(1,"span",116),y.Vb(2,"nz-avatar",117),y.Pc(3),y.Zb(),y.Nc(4,pe,6,3,"ng-container",17),y.ac(5,"nz-spin",118),y.ac(6,"div",119),y.ac(7,"a",120),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc(3).previewHandout(e)})),y.Vb(8,"i",105),y.Pc(9," \u9884\u89c8 "),y.Zb(),y.Nc(10,be,3,0,"a",121),y.Nc(11,fe,3,0,"a",121),y.Nc(12,ge,3,3,"a",122),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=t.index,c=y.lc(3);y.Eb(1),y.tc("title",i.attachmentName),y.Eb(1),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.wc(12,me))("nzText","\u8bb2"),y.Eb(1),y.Rc(" ",i.attachmentName," "),y.Eb(1),y.tc("ngIf","0"===c.preview),y.Eb(1),y.tc("nzSpinning",c.associateing[a])("nzDelay",0),y.Eb(5),y.tc("ngIf",i.attachmentPath&&i.attachmentPath.indexOf(".")>0),y.Eb(1),y.tc("ngIf",c.showassolite(i)),y.Eb(1),y.tc("ngIf","0"===c.preview)}}var ze=function(){return{"margin-right":"10px"}};function ye(e,t){if(1&e){var n=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).callSchoolEnterpriseLib("read","101")})),y.Pc(3,"\u9605\u8bfb\u5e93\u8c03\u7528 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).uploadHandout("101")})),y.Pc(5,"\u672c\u5730\u4e0a\u4f20"),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(2),y.Lc(y.wc(4,ze)),y.tc("nzSize","small"),y.Eb(2),y.tc("nzSize","small"))}function ke(e,t){if(1&e&&(y.Yb(0),y.Nc(1,ve,13,13,"div",113),y.Nc(2,ye,6,5,"div",114),y.Xb()),2&e){var n=y.lc(2);y.Eb(1),y.tc("ngForOf",n.handoutsLecture),y.Eb(1),y.tc("ngIf","0"===n.preview)}}function Se(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u8bb2\u4e49\u5185\u5bb9"),y.Zb())}var Pe=function(){return{border:"none","background-color":"#fff"}},Ce=function(){return{"margin-bottom":"24px",border:"1px solid #d9d9d9"}};function Ee(e,t){if(1&e){var n=y.bc();y.ac(0,"div",12),y.ac(1,"nz-collapse"),y.ac(2,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(e){return y.Ec(n),y.lc().active1=e})),y.Nc(3,le,3,3,"ng-template",null,110,y.Oc),y.Nc(5,ue,8,0,"ng-template",null,111,y.Oc),y.ac(7,"div",16),y.ic("cdkDropListDropped",(function(e){return y.Ec(n),y.lc().sectionDrop(e,"1")})),y.Nc(8,ke,3,2,"ng-container",17),y.Nc(9,Se,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(4),a=y.lc();y.Eb(1),y.Lc(y.wc(8,Pe)),y.Eb(1),y.Lc(y.wc(9,Ce)),y.tc("nzActive",a.active1)("nzHeader",i),y.Eb(6),y.tc("ngIf","0"===a.preview||(null==a.handoutsLecture?null:a.handoutsLecture.length)),y.Eb(1),y.tc("ngIf","1"===a.preview&&!(null!=a.handoutsLecture&&a.handoutsLecture.length))}}function we(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u5f55\u64ad"),y.Zb())}function xe(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).delHandout(e)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,he))}var Oe=function(){return{"background-color":"#675dca"}};function Me(e,t){if(1&e){var n=y.bc();y.ac(0,"div",115),y.ac(1,"div"),y.ac(2,"span",116),y.Pc(3," \xa0 "),y.Vb(4,"nz-avatar",117),y.Pc(5),y.Zb(),y.ac(6,"span",135),y.Pc(7),y.Zb(),y.Zb(),y.ac(8,"div",119),y.ac(9,"a",120),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc(3).editHandout(e)})),y.Vb(10,"i",136),y.Pc(11," \u7f16\u8f91 "),y.Zb(),y.ac(12,"a",120),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc(3).previewHandout(e)})),y.Vb(13,"i",105),y.Pc(14," \u9884\u89c8 "),y.Zb(),y.Nc(15,xe,3,3,"a",122),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc(3);y.Eb(2),y.tc("title",i.attachmentName),y.Eb(2),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.wc(8,Oe))("nzText","\u89c6"),y.Eb(1),y.Rc(" ",i.attachmentName," "),y.Eb(2),y.Qc(i.authorName),y.Eb(8),y.tc("ngIf","0"===a.preview)}}function Ie(e,t){if(1&e){var n=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).videoUpload("polyway")})),y.Pc(3,"\u4fdd\u5229\u5a01\u89c6\u9891 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).videoUpload("localVideo")})),y.Pc(5,"\u4e0a\u4f20\u89c6\u9891 "),y.Zb(),y.Zb(),y.Vb(6,"div"),y.Zb()}2&e&&(y.Eb(2),y.Lc(y.wc(4,ze)),y.tc("nzSize","small"),y.Eb(2),y.tc("nzSize","small"))}function Te(e,t){if(1&e&&(y.Yb(0),y.Nc(1,Me,16,9,"div",113),y.Nc(2,Ie,7,5,"div",114),y.Xb()),2&e){var n=y.lc(2);y.Eb(1),y.tc("ngForOf",n.handoutsRecording),y.Eb(1),y.tc("ngIf","0"===n.preview)}}function Ze(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u89c6\u9891\u5185\u5bb9"),y.Zb())}function Le(e,t){if(1&e){var n=y.bc();y.ac(0,"div",12),y.ac(1,"nz-collapse"),y.ac(2,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(e){return y.Ec(n),y.lc().active2=e})),y.Nc(3,we,2,0,"ng-template",null,134,y.Oc),y.ac(5,"div",16),y.ic("cdkDropListDropped",(function(e){return y.Ec(n),y.lc().sectionDrop(e,"2")})),y.Nc(6,Te,3,2,"ng-container",17),y.Nc(7,Ze,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(4),a=y.lc();y.Eb(1),y.Lc(y.wc(8,Pe)),y.Eb(1),y.Lc(y.wc(9,Ce)),y.tc("nzActive",a.active2)("nzHeader",i),y.Eb(4),y.tc("ngIf","0"===a.preview||(null==a.handoutsRecording?null:a.handoutsRecording.length)),y.Eb(1),y.tc("ngIf","1"===a.preview&&!(null!=a.handoutsRecording&&a.handoutsRecording.length))}}function Ne(e,t){if(1&e){var n=y.bc();y.ac(0,"span"),y.Pc(1,"\u4efb\u52a1 "),y.ac(2,"i",112),y.ic("click",(function(e){return y.Ec(n),y.lc(2).stopPropagation(e)})),y.Zb(),y.Zb()}if(2&e){y.lc();var i=y.Cc(6);y.Eb(2),y.tc("nzTooltipTitle",i)("nzTooltipOverlayStyle",y.wc(2,se))}}function _e(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u6bcf\u4e2a\u5c0f\u8282\u4e0b\u7684\u72ec\u7acb\u4efb\u52a1\u4e0d\u80fd\u8d85\u8fc73\u4e2a"),y.Zb(),y.ac(2,"div"),y.Pc(3,"\u672a\u88ab\u4e3b\u8bb2\u4e49\u7ed1\u5b9a\u7684\u4efb\u52a1\u4e3a\u72ec\u7acb\u4efb\u52a1"),y.Zb())}function Fe(e,t){if(1&e&&(y.ac(0,"span",149),y.Pc(1),y.Zb()),2&e){var n=y.lc().$implicit,i=y.lc(3);y.Eb(1),y.Qc(i.getExamText(n))}}function Ve(e,t){if(1&e&&(y.ac(0,"span",149),y.Pc(1),y.Zb()),2&e){var n=y.lc().$implicit,i=y.lc(3);y.Eb(1),y.Qc(i.getTaskFormText(n.taskForm))}}function je(e,t){1&e&&(y.ac(0,"span",150),y.Pc(1,"\u3010\u5df2\u7ed1\u3011"),y.Zb())}var De=function(){return{"other-container":!0}};function Ae(e,t){if(1&e){var n=y.bc();y.ac(0,"select",151),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().$implicit.downloadType=e}))("ngModelChange",(function(e){y.Ec(n);var t=y.lc().$implicit;return y.lc(3).downloadChange(e,t,!0)})),y.ac(1,"option",127),y.Pc(2,"\u4e0d\u53ef\u4e0b\u8f7d"),y.Zb(),y.ac(3,"option",128),y.Pc(4,"\u8bb2\u5e08\u53ef\u4e0b\u8f7d"),y.Zb(),y.ac(5,"option",152),y.Pc(6,"\u8bb2\u5e08+\u5b66\u751f\u53ef\u4e0b\u8f7d"),y.Zb(),y.Zb()}if(2&e){var i=y.lc().$implicit,a=y.lc(3);y.tc("ngModel",i.downloadType)("ngClass",y.wc(3,De))("disabled","1"===a.preview)}}function qe(e,t){1&e&&y.Vb(0,"div",153)}function Ue(e,t){if(1&e){var n=y.bc();y.ac(0,"select",154),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().$implicit.gradeType=e}))("ngModelChange",(function(e){y.Ec(n);var t=y.lc().$implicit;return y.lc(3).gradeTypeChange(e,t)})),y.ac(1,"option",128),y.Pc(2,"\u5b66\u751f\u81ea\u8bc4"),y.Zb(),y.ac(3,"option",152),y.Pc(4,"\u8001\u5e08\u6279\u6539"),y.Zb(),y.Zb()}if(2&e){var i=y.lc().$implicit,a=y.lc(3);y.Kb("disable-select","1"===a.preview||"1"===a.exerciseType||"4"===i.taskType),y.tc("ngModel",i.gradeType)("disabled","1"===a.preview||"1"===a.exerciseType||"4"===i.taskType)}}function Be(e,t){1&e&&y.Vb(0,"div",153)}function Re(e,t){if(1&e){var n=y.bc();y.ac(0,"select",154),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().$implicit.isGrade=e}))("ngModelChange",(function(e){y.Ec(n);var t=y.lc().$implicit;return y.lc(3).isGradeChange(e,t)})),y.ac(1,"option",155),y.Pc(2,"\u8bf7\u9009\u62e9"),y.Zb(),y.ac(3,"option",127),y.Pc(4,"\u4e0d\u8bc4\u5206"),y.Zb(),y.ac(5,"option",128),y.Pc(6,"\u9700\u8bc4\u5206"),y.Zb(),y.Zb()}if(2&e){var i=y.lc().$implicit,a=y.lc(3);y.tc("ngModel",i.isGrade)("disabled","1"===a.preview)}}function $e(e,t){1&e&&y.Vb(0,"div",153)}function Qe(e,t){if(1&e){var n=y.bc();y.ac(0,"button",156),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).examSetting(e)})),y.Pc(1),y.Zb()}if(2&e){var i=y.lc().$implicit;y.Eb(1),y.Rc(" ","4"===i.taskType?"\u8003\u8bd5\u8bbe\u7f6e":"\u6743\u9650\u8bbe\u7f6e"," ")}}function We(e,t){1&e&&y.Vb(0,"div",157)}function He(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).edit(e)})),y.ac(1,"i",158),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).edit(e)})),y.Zb(),y.Pc(2," \u7f16\u8f91 "),y.Zb()}}function Je(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).downLoad(e)})),y.Vb(1,"i",129),y.Pc(2," \u4e0b\u8f7d "),y.Zb()}}function Ke(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(3).delHandout(e,!0)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,he))}var Ge=function(e){return{"max-width":e}},Xe=function(e){return{"background-color":e}};function Ye(e,t){if(1&e){var n=y.bc();y.ac(0,"div",115),y.ac(1,"div",139),y.ac(2,"span",140),y.Vb(3,"nz-avatar",117),y.Pc(4),y.Nc(5,Fe,2,1,"span",141),y.Nc(6,Ve,2,1,"span",141),y.Zb(),y.Nc(7,je,2,0,"span",142),y.Zb(),y.Nc(8,Ae,7,4,"select",143),y.Nc(9,qe,1,0,"div",144),y.Nc(10,Ue,5,4,"select",145),y.Nc(11,Be,1,0,"div",144),y.Nc(12,Re,7,2,"select",146),y.Nc(13,$e,1,0,"div",144),y.Nc(14,Qe,2,1,"button",147),y.Nc(15,We,1,0,"div",148),y.ac(16,"div",119),y.ac(17,"a",120),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc(3).previewTask(e)})),y.Vb(18,"i",105),y.Pc(19," \u9884\u89c8 "),y.Zb(),y.Nc(20,He,3,0,"a",121),y.Nc(21,Je,3,0,"a",121),y.Nc(22,Ke,3,3,"a",122),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc(3);y.Eb(2),y.tc("title",i.name)("ngStyle",y.xc(21,Ge,i.linkId?"calc(100% - 56px)":"100%")),y.Eb(1),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.xc(23,Xe,a.getColor(i.taskType)))("nzText",a.getText(i.taskType)),y.Eb(1),y.Rc(" ",i.name," "),y.Eb(1),y.tc("ngIf",a.showExamType(i)),y.Eb(1),y.tc("ngIf",a.ShowJobType(i)),y.Eb(1),y.tc("ngIf",i.linkId),y.Eb(1),y.tc("ngIf",i.attachmentPath),y.Eb(1),y.tc("ngIf",!i.attachmentPath),y.Eb(1),y.tc("ngIf","2"===i.taskType||"4"===i.taskType),y.Eb(1),y.tc("ngIf",!("2"===i.taskType||"4"===i.taskType)),y.Eb(1),y.tc("ngIf","1"===i.taskType),y.Eb(1),y.tc("ngIf",!("1"===i.taskType)),y.Eb(1),y.tc("ngIf",("4"===i.taskType||"6"===i.taskType||"7"===i.taskType)&&"0"===a.preview),y.Eb(1),y.tc("ngIf",!(("4"===i.taskType||"6"===i.taskType||"7"===i.taskType)&&"0"===a.preview)),y.Eb(5),y.tc("ngIf",("4"===i.taskType||"2"===i.taskType||"6"===i.taskType||"7"===i.taskType)&&"0"===a.preview),y.Eb(1),y.tc("ngIf",i.attachmentPath&&"4"!==i.taskType&&i.attachmentPath.indexOf(".")>0),y.Eb(1),y.tc("ngIf","0"===a.preview)}}function et(e,t){if(1&e){var n=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).callSchoolEnterpriseLib("read","1")})),y.Pc(3,"\u9605\u8bfb\u5e93\u8c03\u7528 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).callSchoolEnterpriseLib("case","1")})),y.Pc(5,"\u6848\u4f8b\u5e93\u8c03\u7528 "),y.Zb(),y.ac(6,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).callSchoolEnterpriseLib("setting","1")})),y.Pc(7,"\u5b9e\u8bad\u5e93\u8c03\u7528 "),y.Zb(),y.ac(8,"button",159),y.ac(9,"a",160),y.Vb(10,"i",161),y.Pc(11," \u95ee\u5377\u8c03\u7814 "),y.Zb(),y.Zb(),y.ac(12,"nz-dropdown-menu",null,162),y.ac(14,"ul",163),y.ac(15,"li",164),y.ic("click",(function(){return y.Ec(n),y.lc(3).questionnaireCall("questionnaireType")})),y.Pc(16,"\u95ee\u5377\u8c03\u7528"),y.Zb(),y.ac(17,"li",164),y.ic("click",(function(){return y.Ec(n),y.lc(3).questionnaireCall("evaluationType")})),y.Pc(18,"\u6d4b\u8bc4\u8c03\u7528"),y.Zb(),y.Zb(),y.Zb(),y.ac(19,"button",159),y.ac(20,"a",160),y.Vb(21,"i",161),y.Pc(22," \u7ec3\u4e60\u4f5c\u4e1a "),y.Zb(),y.Zb(),y.ac(23,"nz-dropdown-menu",null,165),y.ac(25,"ul",163),y.ac(26,"li",164),y.ic("click",(function(){return y.Ec(n),y.lc(3).entryExercises()})),y.Pc(27,"\u65b0\u589e\u4f5c\u4e1a"),y.Zb(),y.ac(28,"li",164),y.ic("click",(function(){return y.Ec(n),y.lc(3).chooseExercises()})),y.Pc(29,"\u9009\u62e9\u4f5c\u4e1a"),y.Zb(),y.Zb(),y.Zb(),y.ac(30,"button",159),y.ac(31,"a",160),y.Vb(32,"i",161),y.Pc(33," \u8003\u8bd5\u4efb\u52a1 "),y.Zb(),y.Zb(),y.ac(34,"nz-dropdown-menu",null,166),y.ac(36,"ul",163),y.ac(37,"li",164),y.ic("click",(function(){return y.Ec(n),y.lc(3).addVolume()})),y.Pc(38,"\u65b0\u589e\u7ec4\u5377"),y.Zb(),y.ac(39,"li",164),y.ic("click",(function(){return y.Ec(n),y.lc(3).chooseTestPaper()})),y.Pc(40,"\u9009\u62e9\u8bd5\u5377"),y.Zb(),y.Zb(),y.Zb(),y.ac(41,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(3).uploadHandout("104")})),y.Vb(42,"i",167),y.Pc(43,"\u672c\u5730\u4e0a\u4f20 "),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(13),a=y.Cc(24),c=y.Cc(35);y.Eb(2),y.Lc(y.wc(24,ze)),y.tc("nzSize","small"),y.Eb(2),y.Lc(y.wc(25,ze)),y.tc("nzSize","small"),y.Eb(2),y.Lc(y.wc(26,ze)),y.tc("nzSize","small"),y.Eb(2),y.Lc(y.wc(27,ze)),y.tc("nzSize","small"),y.Eb(1),y.tc("nzDropdownMenu",i),y.Eb(10),y.Lc(y.wc(28,ze)),y.tc("nzSize","small"),y.Eb(1),y.tc("nzDropdownMenu",a),y.Eb(10),y.Lc(y.wc(29,ze)),y.tc("nzSize","small"),y.Eb(1),y.tc("nzDropdownMenu",c),y.Eb(10),y.Lc(y.wc(30,ze)),y.tc("nzSize","small")}}function tt(e,t){if(1&e&&(y.Yb(0),y.Nc(1,Ye,23,25,"div",113),y.Nc(2,et,44,31,"div",114),y.Xb()),2&e){var n=y.lc(2);y.Eb(1),y.tc("ngForOf",n.taskList),y.Eb(1),y.tc("ngIf","0"===n.preview&&n.taskList.length<n.limitTask)}}function nt(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u4efb\u52a1\u5185\u5bb9"),y.Zb())}function it(e,t){if(1&e){var n=y.bc();y.ac(0,"div",12),y.ac(1,"nz-collapse"),y.ac(2,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(e){return y.Ec(n),y.lc().active3=e})),y.Nc(3,Ne,3,3,"ng-template",null,137,y.Oc),y.Nc(5,_e,4,0,"ng-template",null,138,y.Oc),y.ac(7,"div",16),y.ic("cdkDropListDropped",(function(e){return y.Ec(n),y.lc().sectionDrop(e,"3")})),y.Nc(8,tt,3,2,"ng-container",17),y.Nc(9,nt,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(4),a=y.lc();y.Eb(1),y.Lc(y.wc(8,Pe)),y.Eb(1),y.Lc(y.wc(9,Ce)),y.tc("nzActive",a.active3)("nzHeader",i),y.Eb(6),y.tc("ngIf","0"===a.preview||(null==a.taskList?null:a.taskList.length)),y.Eb(1),y.tc("ngIf","1"===a.preview&&!(null!=a.taskList&&a.taskList.length))}}function at(e,t){if(1&e){var n=y.bc();y.ac(0,"span"),y.Pc(1,"\u8d44\u6599"),y.ac(2,"i",112),y.ic("click",(function(e){return y.Ec(n),y.lc().stopPropagation(e)})),y.Zb(),y.Zb()}if(2&e){y.lc();var i=y.Cc(22);y.Eb(2),y.tc("nzTooltipTitle",i)("nzTooltipOverlayStyle",y.wc(2,se))}}function ct(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u4e3b\u52a8\u53d1\u9001\u7ed9\u5b66\u5458\u5b66\u4e60\u7684\u8d44\u6e90"),y.Zb())}function rt(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(2).downLoad(e)})),y.Vb(1,"i",129),y.Pc(2," \u4e0b\u8f7d "),y.Zb()}}function ot(e,t){if(1&e){var n=y.bc();y.ac(0,"a",120),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc(2).delHandout(e)})),y.Vb(1,"i",131),y.Pc(2," \u5220\u9664 "),y.Zb()}2&e&&y.Lc(y.wc(2,he))}var st=function(){return{"background-color":"#34bbc7"}};function lt(e,t){if(1&e){var n=y.bc();y.ac(0,"div",169),y.ac(1,"div"),y.ac(2,"span",116),y.Pc(3," \xa0 "),y.Vb(4,"nz-avatar",117),y.Pc(5),y.Zb(),y.Zb(),y.ac(6,"div",119),y.ac(7,"a",120),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc(2).previewHandout(e)})),y.Vb(8,"i",105),y.Pc(9,"\u9884\u89c8 "),y.Zb(),y.Nc(10,rt,3,0,"a",121),y.Nc(11,ot,3,3,"a",122),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=t.index,c=y.lc(2);y.tc("id","material"+a),y.Eb(2),y.tc("title",i.attachmentName),y.Eb(2),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.wc(9,st))("nzText","\u8d44"),y.Eb(1),y.Rc(" ",i.attachmentName," "),y.Eb(5),y.tc("ngIf",i.attachmentPath&&i.attachmentPath.indexOf(".")>0),y.Eb(1),y.tc("ngIf","0"===c.preview)}}function ut(e,t){if(1&e){var n=y.bc();y.ac(0,"div",132),y.ac(1,"div"),y.ac(2,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(2).callSchoolEnterpriseLib("read","102")})),y.Pc(3,"\u9605\u8bfb\u5e93\u8c03\u7528 "),y.Zb(),y.ac(4,"button",133),y.ic("click",(function(){return y.Ec(n),y.lc(2).uploadHandout("102")})),y.Pc(5,"\u672c\u5730\u4e0a\u4f20"),y.Zb(),y.Zb(),y.Vb(6,"div"),y.Zb()}2&e&&(y.Eb(2),y.Lc(y.wc(4,ze)),y.tc("nzSize","small"),y.Eb(2),y.tc("nzSize","small"))}function dt(e,t){if(1&e&&(y.Yb(0),y.Nc(1,lt,12,10,"div",168),y.Nc(2,ut,7,5,"div",114),y.Xb()),2&e){var n=y.lc();y.Eb(1),y.tc("ngForOf",n.handoutsMaterial),y.Eb(1),y.tc("ngIf","0"===n.preview)}}function pt(e,t){1&e&&(y.ac(0,"span"),y.Pc(1,"\u6ca1\u6709\u8d44\u6599\u5185\u5bb9"),y.Zb())}function bt(e,t){if(1&e){var n=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u89c6\u9891ID"),y.Zb(),y.ac(3,"nz-form-control",181),y.ac(4,"input",182),y.ic("keyup.enter",(function(){return y.Ec(n),y.lc(2).comfirmUpload("polyway")})),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18))}function ft(e,t){if(1&e&&y.Vb(0,"nz-option",183),2&e){var n=t.$implicit;y.tc("nzLabel",n.name)("nzValue",n.id)}}function ht(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),y.Zb())}function gt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"),y.Zb())}function mt(e,t){if(1&e&&(y.Nc(0,ht,2,0,"div",17),y.Nc(1,gt,2,0,"div",17)),2&e){var n=t.$implicit;y.tc("ngIf",n.hasError("required")),y.Eb(1),y.tc("ngIf",n.hasError("maxlength"))}}function vt(e,t){if(1&e){var n=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u6392\u5e8f"),y.Zb(),y.ac(3,"nz-form-control",184),y.ac(4,"nz-input-number",185),y.ic("keyup.enter",(function(){return y.Ec(n),y.lc(2).comfirmUpload("polyway")})),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzStep",1)("nzMin",1))}function zt(e,t){if(1&e){var n=y.bc();y.ac(0,"form",72),y.Nc(1,bt,5,2,"nz-form-item",17),y.ac(2,"nz-form-item"),y.ac(3,"nz-form-label",73),y.Pc(4,"\u6307\u5bfc\u8bb2\u5e08"),y.Zb(),y.ac(5,"nz-form-control",170),y.ac(6,"nz-select",171),y.Nc(7,ft,1,2,"nz-option",172),y.Zb(),y.Zb(),y.Zb(),y.ac(8,"nz-form-item"),y.ac(9,"nz-form-label",73),y.Pc(10,"\u89c6\u9891\u540d\u5b57"),y.Zb(),y.ac(11,"nz-form-control",173),y.ac(12,"input",174),y.ic("keyup.enter",(function(){return y.Ec(n),y.lc().comfirmUpload("polyway")})),y.Zb(),y.Zb(),y.ac(13,"span",175),y.Pc(14),y.Zb(),y.Nc(15,mt,2,2,"ng-template",null,176,y.Oc),y.Zb(),y.ac(17,"nz-form-item"),y.ac(18,"nz-form-label",73),y.Pc(19,"\u89c6\u9891\u6807\u7b7e"),y.Zb(),y.ac(20,"nz-form-control",177),y.ac(21,"nz-select",178),y.Vb(22,"nz-option",179),y.Vb(23,"nz-option",180),y.Zb(),y.Zb(),y.Zb(),y.Nc(24,vt,5,4,"nz-form-item",17),y.Zb()}if(2&e){var i=y.Cc(16),a=y.lc();y.tc("formGroup",a.polyway),y.Eb(1),y.tc("ngIf",a.reset),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(2),y.tc("ngForOf",a.teacherList),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",i),y.Eb(2),y.Mc("color",a.polyway.controls.attachmentName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",a.polyway.value.attachmentName.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(4),y.tc("ngIf",a.reset)}}var yt=function(){return{showPreviewIcon:!0,showRemoveIcon:!0,showDownloadIcon:!1}};function kt(e,t){if(1&e){var n=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u89c6\u9891"),y.Zb(),y.ac(3,"nz-form-control",187),y.ac(4,"nz-spin",8),y.ac(5,"qkc-upload",188),y.ic("optsChange",(function(){return y.Ec(n),y.lc(2).compltedUpload()})),y.Vb(6,"i",189),y.Zb(),y.ac(7,"div",190),y.Pc(8," \u652f\u6301\u683c\u5f0fflv,avi,mpg,mp4,wmv,mov,3gp,.asf\u7b49 "),y.Zb(),y.ac(9,"div",190),y.Pc(10," (\u672c\u5730\u4e0a\u4f20\u5230\u4fdd\u5229\u5a01\u7684\u89c6\u9891\u9700\u8981\u7ecf\u8fc7\u4fdd\u5229\u5a01\u5ba1\u6838\u540e\u624d\u80fd\u6b63\u5e38\u64ad\u653e) "),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.lc(2);y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",i.loading)("nzDelay",0),y.Eb(1),y.tc("showUploadList",y.wc(6,yt))("isPolyway",!0)}}function St(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"),y.Zb())}function Pt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1,"\u8bfe\u7a0b\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"),y.Zb())}function Ct(e,t){if(1&e&&(y.Nc(0,St,2,0,"div",17),y.Nc(1,Pt,2,0,"div",17)),2&e){var n=t.$implicit;y.tc("ngIf",n.hasError("required")),y.Eb(1),y.tc("ngIf",n.hasError("maxlength"))}}function Et(e,t){if(1&e&&y.Vb(0,"nz-option",183),2&e){var n=t.$implicit;y.tc("nzLabel",n.name)("nzValue",n.id)}}function wt(e,t){if(1&e){var n=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u6392\u5e8f"),y.Zb(),y.ac(3,"nz-form-control",184),y.ac(4,"nz-input-number",185),y.ic("keyup.enter",(function(){return y.Ec(n),y.lc(2).comfirmUpload("localVideo")})),y.Zb(),y.Zb(),y.Zb()}2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzStep",1)("nzMin",1))}function xt(e,t){if(1&e){var n=y.bc();y.ac(0,"form",72),y.Nc(1,kt,11,7,"nz-form-item",17),y.ac(2,"nz-form-item"),y.ac(3,"nz-form-label",73),y.Pc(4,"\u89c6\u9891\u6807\u7b7e"),y.Zb(),y.ac(5,"nz-form-control",177),y.ac(6,"nz-select",178),y.ac(7,"nz-option",179),y.Pc(8,"\u4e3b\u8981"),y.Zb(),y.ac(9,"nz-option",180),y.Pc(10,"\u51b2\u523a"),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(11,"nz-form-item"),y.ac(12,"nz-form-label",73),y.Pc(13,"\u89c6\u9891\u540d\u5b57"),y.Zb(),y.ac(14,"nz-form-control",173),y.ac(15,"input",174),y.ic("keyup.enter",(function(){return y.Ec(n),y.lc().comfirmUpload("localVideo")})),y.Zb(),y.Zb(),y.ac(16,"span",175),y.Pc(17),y.Zb(),y.Nc(18,Ct,2,2,"ng-template",null,186,y.Oc),y.Zb(),y.ac(20,"nz-form-item"),y.ac(21,"nz-form-label",73),y.Pc(22,"\u6307\u5bfc\u8bb2\u5e08"),y.Zb(),y.ac(23,"nz-form-control",170),y.ac(24,"nz-spin",8),y.ac(25,"nz-select",171),y.Nc(26,Et,1,2,"nz-option",172),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(27,wt,5,4,"nz-form-item",17),y.Zb()}if(2&e){var i=y.Cc(19),a=y.lc();y.tc("formGroup",a.localVideo),y.Eb(1),y.tc("ngIf",a.reset),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(7),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",i),y.Eb(2),y.Mc("color",a.localVideo.controls.attachmentName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",a.localVideo.value.attachmentName.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",a.instructorLoading)("nzDelay",0),y.Eb(2),y.tc("ngForOf",a.teacherList),y.Eb(1),y.tc("ngIf",a.reset)}}function Ot(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function Mt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function It(e,t){if(1&e&&(y.Nc(0,Ot,2,0,"div",17),y.Nc(1,Mt,2,1,"div",17)),2&e){var n=t.$implicit;y.tc("ngIf",n.hasError("required")),y.Eb(1),y.tc("ngIf",n.hasError("maxlength"))}}function Tt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(1),y.tc("nzType",n.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(n.title)}}function Zt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(3),y.Qc(n.title)}}function Lt(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,Tt,4,2,"span",17),y.Nc(2,Zt,4,1,"span",17),y.Zb()),2&e){var n=t.$implicit;y.Eb(1),y.tc("ngIf",!n.isLeaf),y.Eb(1),y.tc("ngIf",n.isLeaf)}}var Nt=function(){return{"max-height":"400px"}};function _t(e,t){if(1&e){var n=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0"),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",192),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,It,2,2,"ng-template",null,194,y.Oc),y.Zb(),y.ac(10,"nz-form-item"),y.ac(11,"nz-form-label",73),y.Pc(12,"\u7ec4\u5377\u65b9\u5f0f"),y.Zb(),y.ac(13,"nz-form-control",195),y.ac(14,"nz-select",196),y.Vb(15,"nz-option",197),y.Vb(16,"nz-option",198),y.Vb(17,"nz-option",199),y.Zb(),y.Zb(),y.Zb(),y.ac(18,"nz-form-item"),y.ac(19,"nz-form-label",73),y.Pc(20,"\u5b50\u9898\u5e93"),y.Zb(),y.ac(21,"nz-form-control",200),y.ac(22,"nz-spin",8),y.ac(23,"nz-tree-select",201),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().subQuestionBankChange(e)})),y.Zb(),y.Zb(),y.Nc(24,Lt,3,2,"ng-template",null,202,y.Oc),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(9),a=y.Cc(25),c=y.lc();y.tc("formGroup",c.addExamFrom),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",i),y.Eb(2),y.Mc("color",c.addExamFrom.controls.missionName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",c.addExamFrom.value.missionName.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(2),y.tc("nzValue",1),y.Eb(1),y.tc("nzValue",2),y.Eb(1),y.tc("nzValue",3),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",c.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzNodes",c.exam)("nzDropdownStyle",y.wc(19,Nt))("nzTreeTemplate",a)}}function Ft(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function Vt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function jt(e,t){if(1&e&&(y.Nc(0,Ft,2,0,"div",17),y.Nc(1,Vt,2,1,"div",17)),2&e){var n=t.$implicit;y.tc("ngIf",n.hasError("required")),y.Eb(1),y.tc("ngIf",n.hasError("maxlength"))}}function Dt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(1),y.tc("nzType",n.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(n.title)}}function At(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(3),y.Qc(n.title)}}function qt(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,Dt,4,2,"span",17),y.Nc(2,At,4,1,"span",17),y.Zb()),2&e){var n=t.$implicit;y.Eb(1),y.tc("ngIf",!n.isLeaf),y.Eb(1),y.tc("ngIf",n.isLeaf)}}function Ut(e,t){if(1&e){var n=y.bc();y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u5b50\u9898\u5e93"),y.Zb(),y.ac(3,"nz-form-control",200),y.ac(4,"nz-spin",8),y.ac(5,"nz-tree-select",210),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc(2).subQuestionBankChange(e)})),y.Zb(),y.Zb(),y.Nc(6,qt,3,2,"ng-template",null,202,y.Oc),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(7),a=y.lc(2);y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzSpinning",a.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzDisabled",!0)("nzNodes",a.exam)("nzAllowClear",!1)("nzDropdownStyle",y.wc(9,Nt))("nzTreeTemplate",i)}}function Bt(e,t){if(1&e){var n=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0"),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",192),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,jt,2,2,"ng-template",null,194,y.Oc),y.Zb(),y.Nc(10,Ut,8,10,"nz-form-item",17),y.ac(11,"div",208),y.ac(12,"button",209),y.ic("click",(function(){return y.Ec(n),y.lc().jobCancel()})),y.Pc(13,"\u53d6\u6d88"),y.Zb(),y.ac(14,"button",209),y.ic("click",(function(){return y.Ec(n),y.lc().jumpQuestionBank("curExamData")})),y.Pc(15,"\u8df3\u8f6c\u9898\u5e93 "),y.Zb(),y.ac(16,"button",209),y.ic("click",(function(){return y.Ec(n),y.lc().examDetermine()})),y.Pc(17,"\u786e\u5b9a"),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(9),a=y.lc();y.tc("formGroup",a.addExamFrom),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",i),y.Eb(2),y.Mc("color",a.addExamFrom.controls.missionName.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",a.addExamFrom.value.missionName.length,"/50"),y.Eb(3),y.tc("ngIf",a.addExamFrom.value.subQuestionBank)}}function Rt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function $t(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function Qt(e,t){if(1&e&&(y.Nc(0,Rt,2,0,"div",17),y.Nc(1,$t,2,1,"div",17)),2&e){var n=t.$implicit;y.tc("ngIf",n.hasError("required")),y.Eb(1),y.tc("ngIf",n.hasError("maxlength"))}}function Wt(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(1),y.tc("nzType",n.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(n.title)}}function Ht(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(3),y.Qc(n.title)}}function Jt(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,Wt,4,2,"span",17),y.Nc(2,Ht,4,1,"span",17),y.Zb()),2&e){var n=t.$implicit;y.Eb(1),y.tc("ngIf",!n.isLeaf),y.Eb(1),y.tc("ngIf",n.isLeaf)}}function Kt(e,t){if(1&e){var n=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0 "),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",211),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,Qt,2,2,"ng-template",null,212,y.Oc),y.Zb(),y.ac(10,"nz-form-item"),y.ac(11,"nz-form-label",73),y.Pc(12,"\u4efb\u52a1\u7c7b\u578b "),y.Zb(),y.ac(13,"nz-form-control",213),y.ac(14,"nz-select",214),y.Vb(15,"nz-option",215),y.Vb(16,"nz-option",216),y.Vb(17,"nz-option",217),y.Zb(),y.Zb(),y.Zb(),y.ac(18,"nz-form-item"),y.ac(19,"nz-form-label",73),y.Pc(20,"\u5b50\u9898\u5e93"),y.Zb(),y.ac(21,"nz-form-control",200),y.ac(22,"nz-tree-select",201),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().execrisesSubQuestionBankChange(e)})),y.Zb(),y.Nc(23,Jt,3,2,"ng-template",null,218,y.Oc),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(9),a=y.Cc(24),c=y.lc();y.tc("formGroup",c.addJobFromSeting),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",i),y.Eb(2),y.Mc("color",c.addJobFromSeting.controls.name.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",c.addJobFromSeting.value.name.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(6),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzNodes",c.exercise)("nzDropdownStyle",y.wc(14,Nt))("nzTreeTemplate",a)}}function Gt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1," \u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),y.Zb())}function Xt(e,t){1&e&&(y.ac(0,"div"),y.Pc(1),y.Zb()),2&e&&(y.Eb(1),y.Qc("\u4efb\u52a1\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc750\u4e2a\u5b57\u7b26"))}function Yt(e,t){if(1&e&&(y.Nc(0,Gt,2,0,"div",17),y.Nc(1,Xt,2,1,"div",17)),2&e){var n=t.$implicit;y.tc("ngIf",n.hasError("required")),y.Eb(1),y.tc("ngIf",n.hasError("maxlength"))}}function en(e,t){if(1&e){var n=y.bc();y.ac(0,"form",72),y.ac(1,"nz-form-item"),y.ac(2,"nz-form-label",73),y.Pc(3,"\u4efb\u52a1\u540d\u79f0 "),y.Zb(),y.ac(4,"nz-form-control",191),y.Vb(5,"input",211),y.Zb(),y.ac(6,"span",193),y.Pc(7),y.Zb(),y.Nc(8,Yt,2,2,"ng-template",null,212,y.Oc),y.Zb(),y.ac(10,"nz-form-item"),y.ac(11,"nz-form-label",73),y.Pc(12,"\u4efb\u52a1\u7c7b\u578b "),y.Zb(),y.ac(13,"nz-form-control",213),y.ac(14,"nz-select",214),y.Vb(15,"nz-option",215),y.Vb(16,"nz-option",216),y.Vb(17,"nz-option",217),y.Zb(),y.Zb(),y.Zb(),y.ac(18,"div",208),y.ac(19,"button",209),y.ic("click",(function(){return y.Ec(n),y.lc().jobCancel()})),y.Pc(20,"\u53d6\u6d88"),y.Zb(),y.ac(21,"button",209),y.ic("click",(function(){return y.Ec(n),y.lc().jumpQuestionBank("curJobData")})),y.Pc(22,"\u8df3\u8f6c\u9898\u5e93 "),y.Zb(),y.ac(23,"button",209),y.ic("click",(function(){return y.Ec(n),y.lc().jobDetermine()})),y.Pc(24,"\u786e\u5b9a"),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=y.Cc(9),a=y.lc();y.tc("formGroup",a.addJobFromSeting),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)("nzErrorTip",i),y.Eb(2),y.Mc("color",a.addJobFromSeting.controls.name.hasError("maxlength")?"red":"inherit"),y.Eb(1),y.Rc(" ",a.addJobFromSeting.value.name.length,"/50"),y.Eb(4),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18)}}function tn(e,t){if(1&e){var n=y.bc();y.ac(0,"input",219),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().testPaperName=e}))("keyup.enter",(function(){return y.Ec(n),y.lc().getCallList("exam")})),y.Zb()}if(2&e){var i=y.lc();y.tc("ngModel",i.testPaperName)}}function nn(e,t){if(1&e){var n=y.bc();y.ac(0,"input",220),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().testPaperId=e}))("keyup.enter",(function(){return y.Ec(n),y.lc().getCallList("exam")})),y.Zb()}if(2&e){var i=y.lc();y.tc("ngModel",i.testPaperId)}}function an(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(1),y.tc("nzType",n.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(n.title)}}function cn(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(3),y.Qc(n.title)}}function rn(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,an,4,2,"span",17),y.Nc(2,cn,4,1,"span",17),y.Zb()),2&e){var n=t.$implicit;y.Eb(1),y.tc("ngIf",!n.isLeaf),y.Eb(1),y.tc("ngIf",n.isLeaf)}}function on(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().transfer(e,!1)})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function sn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().cancelCall(e,"exam")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function ln(e,t){if(1&e){var n=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Pc(10),y.Zb(),y.ac(11,"td"),y.Pc(12),y.Zb(),y.ac(13,"td"),y.Pc(14),y.Zb(),y.ac(15,"td"),y.Nc(16,on,2,0,"a",221),y.Nc(17,sn,2,0,"a",221),y.Vb(18,"nz-divider",222),y.ac(19,"a",223),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc().previewExaminationPaper(e)})),y.Pc(20,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc();y.Eb(2),y.Qc(i.id),y.Eb(2),y.Qc(i.name),y.Eb(2),y.Qc(i.year),y.Eb(2),y.Qc(a.getFormingMethod(i.groupWay)),y.Eb(2),y.Qc(a.getType(i.type)),y.Eb(2),y.Qc(i.number),y.Eb(2),y.Qc(i.score),y.Eb(2),y.tc("ngIf",a.showTransfer(i,!1)),y.Eb(1),y.tc("ngIf",a.showTransfer(i,!0))}}function un(e,t){if(1&e){var n=y.bc();y.ac(0,"input",219),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().testExerciseName=e}))("keyup.enter",(function(){return y.Ec(n),y.lc().getCallList("exercise")})),y.Zb()}if(2&e){var i=y.lc();y.tc("ngModel",i.testExerciseName)}}function dn(e,t){if(1&e){var n=y.bc();y.ac(0,"input",220),y.ic("ngModelChange",(function(e){return y.Ec(n),y.lc().testExerciseId=e}))("keyup.enter",(function(){return y.Ec(n),y.lc().getCallList("exercise")})),y.Zb()}if(2&e){var i=y.lc();y.tc("ngModel",i.testExerciseId)}}function pn(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",204),y.ac(2,"span",205),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(1),y.tc("nzType",n.isExpanded?"folder-open":"folder"),y.Eb(2),y.Qc(n.title)}}function bn(e,t){if(1&e&&(y.ac(0,"span"),y.Vb(1,"i",206),y.ac(2,"span",207),y.Pc(3),y.Zb(),y.Zb()),2&e){var n=y.lc().$implicit;y.Eb(3),y.Qc(n.title)}}function fn(e,t){if(1&e&&(y.ac(0,"span",203),y.Nc(1,pn,4,2,"span",17),y.Nc(2,bn,4,1,"span",17),y.Zb()),2&e){var n=t.$implicit;y.Eb(1),y.tc("ngIf",!n.isLeaf),y.Eb(1),y.tc("ngIf",n.isLeaf)}}function hn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().transfer(e,!0)})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function gn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().cancelCall(e,"exercise")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function mn(e,t){if(1&e){var n=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Nc(10,hn,2,0,"a",221),y.Nc(11,gn,2,0,"a",221),y.Vb(12,"nz-divider",222),y.ac(13,"a",223),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc().previewExaminationPaper(e)})),y.Pc(14,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc();y.Eb(2),y.Qc(i.id),y.Eb(2),y.Qc(i.name),y.Eb(2),y.Qc(i.number),y.Eb(2),y.Qc(i.score),y.Eb(2),y.tc("ngIf",a.showTransfer(i,!1)),y.Eb(1),y.tc("ngIf",a.showTransfer(i,!0))}}function vn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().transferQuestionnaire(e,"questionnaireType")})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function zn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().cancelCall(e,"questionnaireType")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function yn(e,t){if(1&e){var n=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Pc(10),y.Zb(),y.ac(11,"td"),y.Pc(12),y.Zb(),y.ac(13,"td"),y.Nc(14,vn,2,0,"a",221),y.Nc(15,zn,2,0,"a",221),y.Vb(16,"nz-divider",222),y.ac(17,"a",223),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc().previewExaminationQuestionnaire(e)})),y.Pc(18,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc();y.Eb(2),y.Qc(i.paperId),y.Eb(2),y.Qc(i.name),y.Eb(2),y.Qc(a.getQuestionnaireType(i.evaluateId)),y.Eb(2),y.Qc(i.majorName),y.Eb(2),y.Qc(i.questionNumber),y.Eb(2),y.Qc(a.getEvaluationStatus(i.status)),y.Eb(2),y.tc("ngIf",a.showTransfer(i,!1)),y.Eb(1),y.tc("ngIf",a.showTransfer(i,!0))}}function kn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().transferQuestionnaire(e,"evaluationType")})),y.Pc(1,"\u8c03\u7528"),y.Zb()}}function Sn(e,t){if(1&e){var n=y.bc();y.ac(0,"a",223),y.ic("click",(function(){y.Ec(n);var e=y.lc().$implicit;return y.lc().cancelCall(e,"evaluationType")})),y.Pc(1,"\u53d6\u6d88\u8c03\u7528"),y.Zb()}}function Pn(e,t){if(1&e){var n=y.bc();y.ac(0,"tr"),y.ac(1,"td"),y.Pc(2),y.Zb(),y.ac(3,"td"),y.Pc(4),y.Zb(),y.ac(5,"td"),y.Pc(6),y.Zb(),y.ac(7,"td"),y.Pc(8),y.Zb(),y.ac(9,"td"),y.Pc(10),y.Zb(),y.ac(11,"td"),y.Pc(12),y.Zb(),y.ac(13,"td"),y.Nc(14,kn,2,0,"a",221),y.Nc(15,Sn,2,0,"a",221),y.Vb(16,"nz-divider",222),y.ac(17,"a",223),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc().previewExaminationQuestionnaire(e)})),y.Pc(18,"\u9884\u89c8"),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc();y.Eb(2),y.Qc(i.paperId),y.Eb(2),y.Qc(i.name),y.Eb(2),y.Qc(a.getEvaluationType(i.evaluateId)),y.Eb(2),y.Qc(i.majorName),y.Eb(2),y.Qc(i.questionNumber),y.Eb(2),y.Qc(a.getEvaluationStatus(i.status)),y.Eb(2),y.tc("ngIf",a.showTransfer(i,!1)),y.Eb(1),y.tc("ngIf",a.showTransfer(i,!0))}}function Cn(e,t){1&e&&(y.ac(0,"nz-form-item"),y.ac(1,"nz-form-label",73),y.Pc(2,"\u673a\u8003\u7c7b\u578b"),y.Zb(),y.ac(3,"nz-form-control",224),y.ac(4,"nz-select",225),y.Vb(5,"nz-option",226),y.Vb(6,"nz-option",227),y.Vb(7,"nz-option",228),y.Zb(),y.Zb(),y.Zb()),2&e&&(y.Eb(1),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18))}function En(e,t){1&e&&(y.ac(0,"div",229),y.Pc(1," \u8865\u8003\u6309\u7ed3\u8bfe28\u5929\u540e\u9047\u5230\u768410\u53f7\u5f00\u653e\u6743\u9650\uff0c\u76f4\u5230\u5408\u683c\u4e3a\u6b62 "),y.Zb())}function wn(e,t){if(1&e){var n=y.bc();y.ac(0,"div"),y.ac(1,"button",230),y.ic("click",(function(){return y.Ec(n),y.lc().isVisible=!1})),y.Pc(2,"\u53d6\u6d88"),y.Zb(),y.ac(3,"button",231),y.ic("click",(function(){return y.Ec(n),y.lc().saveExamination()})),y.Pc(4,"\u786e\u5b9a"),y.Zb(),y.Zb()}if(2&e){var i=y.lc();y.Eb(3),y.tc("nzLoading",i.examSettingLoading)}}function xn(e,t){if(1&e){var n=y.bc();y.ac(0,"div"),y.ac(1,"button",230),y.ic("click",(function(){return y.Ec(n),y.lc().isQuestionnaireVisible=!1})),y.Pc(2,"\u53d6\u6d88"),y.Zb(),y.ac(3,"button",63),y.ic("click",(function(){return y.Ec(n),y.lc().saveQuestionnaire()})),y.Pc(4,"\u786e\u5b9a"),y.Zb(),y.Zb()}}function On(e,t){if(1&e){var n=y.bc();y.ac(0,"i",237),y.ic("click",(function(){return y.Ec(n),y.lc().$implicit.expend=!1})),y.Zb()}}function Mn(e,t){if(1&e){var n=y.bc();y.ac(0,"i",238),y.ic("click",(function(){return y.Ec(n),y.lc().$implicit.expend=!0})),y.Zb()}}var In=function(e){return{h0:e,"association-list":!0}},Tn=function(e){return{"background-color":e,marginTop:"-5px"}};function Zn(e,t){if(1&e){var n=y.bc();y.ac(0,"div",239),y.ac(1,"div",240),y.ac(2,"span",241),y.Vb(3,"nz-avatar",117),y.Pc(4),y.Zb(),y.ac(5,"nz-input-number",242),y.ic("ngModelChange",(function(e){return y.Ec(n),t.$implicit.pageNum=e}))("ngModelChange",(function(e){return y.Ec(n),y.lc(2).modelChangeDetect(e)}))("nzFocus",(function(){return y.Ec(n),y.lc(2).current=void 0}))("nzBlur",(function(){return y.Ec(n),y.lc(2).current=void 0})),y.Zb(),y.ac(6,"span",243),y.ac(7,"label",124),y.ic("ngModelChange",(function(e){return y.Ec(n),t.$implicit.isBindAssoicate=e}))("ngModelChange",(function(e){y.Ec(n);var i=t.$implicit;return y.lc(2).isBindChange(e,i)})),y.Zb(),y.ac(8,"button",244),y.ic("click",(function(){y.Ec(n);var e=t.$implicit;return y.lc(2).getBlur(e)})),y.Pc(9),y.Zb(),y.Zb(),y.Zb(),y.Zb()}if(2&e){var i=t.$implicit,a=y.lc(),c=a.$implicit,r=a.index,o=y.lc();y.tc("ngClass",y.xc(15,In,c.expend)),y.Eb(2),y.tc("title",i.name),y.Eb(1),y.tc("nzShape","circle")("nzSize",20)("ngStyle",y.xc(17,Tn,o.getColor(i.taskType)))("nzText",o.getText(i.taskType)),y.Eb(1),y.Rc(" ",i.name," "),y.Eb(1),y.tc("ngModel",i.pageNum)("nzMin",1)("nzMax",1e6)("nzStep",1),y.Eb(2),y.tc("nzDisabled",o.currentBindLength>=o.bingLimit&&!o.assocateLists[r].pageNum||!i.pageNum)("ngModel",i.isBindAssoicate),y.Eb(1),y.tc("disabled",o.currentBindLength>=o.bingLimit&&!o.assocateLists[r].pageNum||!i.pageNum||o.assocateLists[r].pageNum===i.pageNum),y.Eb(1),y.Qc("\u7ed1\u5b9a")}}function Ln(e,t){if(1&e&&(y.ac(0,"div",232),y.ac(1,"div",233),y.Pc(2),y.Nc(3,On,1,0,"i",234),y.Nc(4,Mn,1,0,"i",235),y.Zb(),y.Nc(5,Zn,10,19,"div",236),y.Zb()),2&e){var n=t.$implicit;y.Eb(2),y.Rc(" ","\u7b2c"+n[0].sectionSeq+"\u8282 "+n[0].sectionName," "),y.Eb(1),y.tc("ngIf",n.expend),y.Eb(1),y.tc("ngIf",!n.expend),y.Eb(1),y.tc("ngForOf",n)}}function Nn(e,t){if(1&e){var n=y.bc();y.ac(0,"div"),y.ac(1,"button",63),y.ic("click",(function(){return y.Ec(n),y.lc().completebind()})),y.Pc(2,"\u5173\u95ed"),y.Zb(),y.Zb()}}function _n(e,t){if(1&e){var n=y.bc();y.ac(0,"app-resource-preview-modal",245),y.ic("closePreview",(function(){return y.Ec(n),y.lc().closePreview()})),y.Zb()}if(2&e){var i=y.lc();y.tc("isPreviewpolyway",i.isPreviewpolyway)("previewTitle",i.previewTitle)("resourceUrl",i.resourceUrl)}}var Fn=function(){return{maxHeight:"550px"}},Vn=function(){return{y:"350px"}},jn=function(){return{standalone:!0}},Dn=function(){return{maxHeight:"500px",overflowY:"auto"}},An=function(){var e=function(){function e(t,n,i,a,r,s,l,u,d,p,f,h){_classCallCheck(this,e),this.fb=t,this.route=n,this.menuService=i,this.nzMesService=a,this.nzModalService=r,this.aliOssService=s,this.modalService=l,this.knowledgeManageService=u,this.trainManageService=d,this.courseMgService=p,this.statisticsLogService=f,this.doc=h,this._PAGE_ID_="MaterialCallResource",this.active1=!0,this.active2=!0,this.active3=!0,this.active4=!0,this.listLoading=!1,this.hanoutLoading=!1,this.isStandard=!1,this.totalPage=0,this.handouts=[],this.taskList=[],this.handoutsMaterial=[],this.handoutsLecture=[],this.handoutsRecording=[],this.teacherList=[],this.exam=[],this.exercise=[],this.examSearch=[],this.exerciseSearch=[],this.searchLoad=!1,this.examListPreview=!1,this.exerciseListPreview=!1,this.listOfData=[],this.listOfDataExercise=[],this.listOfQuestionnaireData=[],this.listOfEvaluationData=[],this.selectedValue="",this.examSubQuestionBankExam=[],this.examSubQuestionBankExamBak=[],this.homeworkSubQuestionBank=[],this.homeworkSubQuestionBankBak=[],this.testPaperName="",this.testPaperId="",this.testExerciseName="",this.testExerciseId="",this.NumberS=Number,this.isPreviewpolyway=!1,this.orgCode=o.a.getOrgCode(),this.value=1,this.answerTimesValue=1,this.isVisible=!1,this.isQuestionnaireVisible=!1,this.visibleAssociate=!1,this.assocateList=[],this.tokenObj=b.a.getTkToken(),this.currentExam={id:""},this.currentQuestionnair={id:""},this.currentBindLength=0,this.courseId="",this.preview="0",this.exerciseType="1",this.coursePacketId="",this.professionId="",this.lessonCount=1,this.isSmart="0",this.assocateLists=[],this.assocateClassLists=[],this.defaultExpandedKeys=[],this.examType="1",this.reset=!0,this.resourceUrl="",this.questionnairePreview=!1,this.evaluationPreview=!1,this.isCallLoading=!1,this.loading=!1,this.examSettingLoading=!1,this.bindLoading=!1,this.instructorLoading=!1,this.trainLoading=!1,this.queryKeywords="1",this.queryKeywordsJob="1",this.previewTitle="",this.previewStart=!1,this.limitTask=1e6,this.bingLimit=1e6,this.associateing={},this.curJobData={},this.curExamData={};var g=c.a.getSelection();g&&(this.defaultSection=JSON.parse(g));var m=c.a.getChapter();m&&(this.defaultExpandedKeys=[m])}return _createClass(e,[{key:"ngOnInit",value:function(){this.initParams(),this.initFrom()}},{key:"examSetting",value:function(e){"4"===e.taskType?(this.currentExam=e,this.getExamination()):this.questionnaireSetting(e)}},{key:"getExamType",value:function(e){switch(String(e)){case"1":return"\u3010\u9636\u6bb5\u8003\u8bd5\u3011";case"2":return"\u3010\u5355\u79d1\u8003\u8bd5\u3011";case"3":return"\u3010\u6a21\u62df\u8003\u8bd5\u3011";case"4":return"\u3010\u5bc6\u62bc\u8003\u8bd5\u3011";case"5":return"\u3010\u673a\u8003\u8003\u8bd5\u3011";case"6":return"\u3010\u5b9e\u64cd\u8003\u8bd5\u3011"}}},{key:"questionnaireSetting",value:function(e){var t=this;this.currentQuestionnair=e,this.courseMgService.getExamination(e.id).subscribe((function(e){if(200===e.status){var n=JSON.parse(JSON.stringify(e.data||{}));for(var i in n.answerTimes&&0!==Number(n.answerTimes)?(t.answerTimesValue=n.answerTimes,t.questionnairSettingForm.patchValue({answerTimes:1})):(t.questionnairSettingForm.patchValue({answerTimes:0}),t.answerTimesValue=void 0),t.questionnairSettingForm.controls)t.questionnairSettingForm.controls[i].markAsUntouched(),t.questionnairSettingForm.controls[i].markAsPristine(),t.questionnairSettingForm.controls[i].updateValueAndValidity();t.isQuestionnaireVisible=!0}}))}},{key:"saveQuestionnaire",value:function(){var e=this,t=this.questionnairSettingForm.value.answerTimes;if(1!==t||this.answerTimesValue){var n={answerTimes:Object.is(t,1)?String(this.answerTimesValue):"0",id:this.currentQuestionnair.id};this.courseMgService.examSetting(n).subscribe((function(t){201===t.status&&(e.statisticsLogService.statisticsPacketInfoLog({name:("6"===e.currentQuestionnair.taskType?"\u95ee\u5377":"\u6d4b\u8bc4")+"\u4efb\u52a1\u6743\u9650\u8bbe\u7f6e\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(n)}),e.isQuestionnaireVisible=!1)}))}else this.nzMesService.warning("\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u7684\u7b54\u9898\u6b21\u6570")}},{key:"saveExamination",value:function(){var e=this;if(1!==this.examSettingForm.value.answerTimes||this.value){if(Object.keys(this.examSettingForm.controls).forEach((function(t){e.examSettingForm.controls[t].markAsDirty(),e.examSettingForm.controls[t].updateValueAndValidity()})),!this.examSettingForm.invalid){this.examSettingLoading=!0;var t=JSON.parse(JSON.stringify(this.examSettingForm.value));Object.is(t.answerTimes,1)&&(t.answerTimes=String(this.value)),t.id=this.currentExam.id,this.courseMgService.examSetting(t).subscribe((function(n){e.examSettingLoading=!1,201===n.status&&(e.statisticsLogService.statisticsPacketInfoLog({name:"\u8003\u8bd5\u4efb\u52a1\u8003\u8bd5\u8bbe\u7f6e\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(t)}),e.isVisible=!1,e.getTaskList())}),(function(){e.examSettingLoading=!1}))}}else this.nzMesService.warning("\u8bf7\u8f93\u5165\u4f60\u60f3\u8981\u7684\u7b54\u9898\u6b21\u6570")}},{key:"conversionNode",value:function(e,t){return e.length&&e.forEach((function(n,i){n.sublibraryModuleList&&n.sublibraryModuleList.length&&(e[i].children=n.sublibraryModuleList,e[i].children.forEach((function(t,n){e[i].children[n].title=t.name,e[i].children[n].key=t.id,e[i].children[n].isLeaf=!0}))),e[i].title=n.name,e[i].key=n.code,"exam"!==t&&"exercise"!==t||(e[i].disabled=!0,e[i].selectable=!1),n.sublibraryModuleList&&n.sublibraryModuleList.length||(e[i].isLeaf=!0)})),e}},{key:"sectionDrop",value:function(e,t){var n=this,i=[],a=function(e){201===e.status||n.nzMesService.error(e.message||"\u79fb\u52a8\u5931\u8d25\uff0c\u672a\u77e5\u9519\u8bef\uff01")},c=function(e){n.nzMesService.error(JSON.stringify(e))};"3"===t?(Object(p.g)(this.taskList,e.previousIndex,e.currentIndex),this.taskList.forEach((function(e,t){var a={};a.id=e.id,a.seq=n.taskList.length-t,n.taskList[t].seq=a.seq,i.push(a)})),this.courseMgService.saveOrUpdateTask(i).subscribe(a,c)):("1"===t?(Object(p.g)(this.handoutsLecture,e.previousIndex,e.currentIndex),this.handoutsLecture.forEach((function(e,t){var a={};a.id=e.id,a.seq=n.handoutsLecture.length-t,n.handoutsLecture[t].seq=a.seq,i.push(a)}))):"2"===t?(Object(p.g)(this.handoutsRecording,e.previousIndex,e.currentIndex),this.handoutsRecording.forEach((function(e,t){var a={};a.id=e.id,a.seq=n.handoutsRecording.length-t,n.handoutsRecording[t].seq=a.seq,i.push(a)}))):(Object(p.g)(this.handoutsMaterial,e.previousIndex,e.currentIndex),this.handoutsMaterial.forEach((function(e,t){var a={};a.id=e.id,a.seq=n.handoutsMaterial.length-t,n.handoutsMaterial[t].seq=a.seq,i.push(a)}))),this.courseMgService.saveOrUpdate(i).subscribe(a,c)),console.log(this.handoutsRecording)}},{key:"getExamination",value:function(){var e=this;this.courseMgService.getExamination(this.currentExam.id).subscribe((function(t){if(200===t.status){var n=JSON.parse(JSON.stringify(t.data||{}));e.examType=n.examType;var i={id:n.id,examLength:n.examLength||0,passScore:n.passScore||0,paperType:n.paperType||"1",isRedo:n.isRedo&&String(n.isRedo)||"0",computerType:n.computerType||"1",resultWay:n.resultWay||"1",configType:n.configType||"1"};for(var a in e.examSettingForm.patchValue(i),Object.is(n.answerTimes,0)?(e.value=void 0,e.examSettingForm.patchValue({answerTimes:0})):(e.value=n.answerTimes,e.examSettingForm.patchValue({answerTimes:1})),e.examSettingForm.controls)e.examSettingForm.controls[a].markAsUntouched(),e.examSettingForm.controls[a].markAsPristine(),e.examSettingForm.controls[a].updateValueAndValidity();e.isVisible=!0}}))}},{key:"getTeacher",value:function(){var e=this;this.instructorLoading=!0,this.knowledgeManageService.getTeacher().subscribe((function(t){e.instructorLoading=!1,200===t.status&&(e.teacherList=t.data)}),(function(){e.instructorLoading=!1}))}},{key:"initFrom",value:function(){this.examSettingForm=this.fb.group({id:[""],examLength:[0,r.w.required],passScore:[0,r.w.required],computerType:["1"],isRedo:["0"],paperType:["1"],answerTimes:[0,r.w.required],resultWay:["1",r.w.required],configType:["1",r.w.required]}),this.questionnairSettingForm=this.fb.group({answerTimes:[1,r.w.required]}),this.addJobFromSeting=this.fb.group({id:[this.courseId],taskForm:["2",r.w.required],name:["\u8bfe\u540e\u7ec3\u4e60",[r.w.required,Object(g.b)(),r.w.maxLength(50)]],subQuestionBank:["",[r.w.required]]}),this.addExamFrom=this.fb.group({missionName:["",[r.w.required,r.w.maxLength(50),Object(g.b)()]],formingMethod:[1,[r.w.required]],subQuestionBank:["",[r.w.required]]}),this.polyway=this.fb.group({videoUrl:["",[r.w.required]],authorId:["",[r.w.required]],videoType:["1",[r.w.required]],seq:[1,[r.w.required]],id:[""],attachmentName:["",[r.w.required,r.w.maxLength(50),Object(g.b)()]]}),this.localVideo=this.fb.group({videoUrl:[[],[r.w.required]],authorId:["",[r.w.required]],videoType:["1",[r.w.required]],seq:[1,[r.w.required]],id:[""],attachmentName:["",[r.w.required,r.w.maxLength(50),Object(g.b)()]]})}},{key:"initParams",value:function(){var e=c.a.getPacketInfo(),t=e.courseId,n=e.id,i=e.professionId,a=e.status,r=e.code,o=e.teachType,s=e.name,l=e.auditStatus,u=e.lessonCount,d=e.isSmart,p=e.preview,b=e.isUsed,f=e.exerciseType;this.courseId=t,this.coursePacketId=n,this.professionId=i,this.isStandard=b>0,this.code=r,this.teachType=o,this.title=s,this.status=a,this.auditStatus=l,this.lessonCount=Number(u),this.isSmart=d,this.preview=p,this.exerciseType=f}},{key:"getTaskList",value:function(){var e=this;this.listLoading=!0,this.knowledgeManageService.getTaskList({courseSectionId:this.curNode.data.id}).subscribe((function(t){e.isCallLoading=!1,e.listLoading=!1,200===t.status&&(t.data&&t.data.length?(e.taskList=t.data,e.taskList.forEach((function(t,n){e.taskList[n].isDownloadType="1"===t.downloadType,e.taskList[n].isNeed="1"===t.isNeed})),e.taskList.sort((function(e,t){return e.seq>t.seq?-1:e.seq<t.seq?1:e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0}))):e.taskList=[])}),(function(){e.listLoading=!1,e.isCallLoading=!1}))}},{key:"getHandoutFiles",value:function(){var e=this;if(this.curNode){var t=this.courseMgService.sectionFileList_courseSectionFile(this.curNode.data.id);t&&(this.hanoutLoading=!0,t.subscribe((function(t){e.hanoutLoading=!1,200===t.status?(e.handouts=t.data,e.handouts.forEach((function(t,n){e.handouts[n].isDownloadType="1"===t.downloadType})),e.handoutsLecture=e.getTypeData("101"),e.handoutsMaterial=e.getTypeData("102"),e.handoutsRecording=e.getTypeData("103")):e.nzMesService.error(t.message)}),(function(){e.hanoutLoading=!1})))}else console.error("please select node")}},{key:"getTypeData",value:function(e){var t=this.handouts.filter((function(t){return t.type===e})).map((function(e){var t=o.a.getFileExt(e.title);return e.aattachmentExt=Object.is(t,e.title)?"":t,e.attachmentName=e.title||e.attachmentName,e.attachmentPath=e.attachmentPath,e.isMainFile="0"!==e.isMainFile,e}));return t.sort((function(e,t){return e.seq>t.seq?-1:e.seq<t.seq?1:e.createTime>t.createTime?-1:e.createTime<t.createTime?1:0})),t}},{key:"getssocateList",value:function(){var e=this;this.courseMgService.getssocateList(this.curNode.data.courseChapterId,this.currentAssocate.id).subscribe((function(t){if(200===t.status)if(t.data&&t.data.length){var n;e.assocateList=t.data,e.assocateList.forEach((function(t,n){e.assocateList[n].isBindAssoicate=!!t.pageNum})),e.assocateLists=JSON.parse(JSON.stringify(e.assocateList)),e.assocateClassLists=[];var i=[];e.assocateList.forEach((function(t,a){n||(n=t.sectionSeq),n===t.sectionSeq?(i.push(t),a===e.assocateList.length-1&&e.assocateClassLists.push(i)):(e.assocateClassLists.push(i),i=[],n=t.sectionSeq,i.push(t),a===e.assocateList.length-1&&e.assocateClassLists.push(i))})),e.currentBindLength=t.data.filter((function(e){return e.pageNum})).length}else e.assocateList=[]}))}},{key:"previewpolyway",value:function(e){this.previewTitle="",this.isPreviewpolyway=!0,this.resourceUrl=this.polywayId=e.attachmentPath,this.previewStart=!0}},{key:"previewHandout",value:function(e){e.attachmentPath.indexOf("/")<0?this.previewpolyway(e):(this.previewTitle=e.attachmentName,this.isPreviewpolyway=!1,this.resourceUrl=e.attachmentPath,this.previewStart=!0)}},{key:"uploadHandout",value:function(e){var t,n=this,i={node:this.curNode,type:e};t="104"===e?"learnSet-task-action":"101"===e?"learnSet-lecture-action":"102"===e?"learnSet-material-action":"learnSet-record-action","101"===e?(i.seq=o.a.getMaxSeq(this.handoutsLecture),i.maxSize=100):"102"===e?i.seq=o.a.getMaxSeq(this.handoutsMaterial):"104"===e&&(i.seq=o.a.getMaxSeq(this.taskList)),"104"===e&&(i.limit=this.limitTask-this.taskList.length),this.nzModalService.create({nzTitle:"\u672c\u5730\u4e0a\u4f20",nzContent:a.a,nzComponentParams:i,nzFooter:null,nzMaskClosable:!1}).afterClose.subscribe((function(e){e&&(n.statisticsLogService.statisticsPacketInfoLog({name:"\u672c\u5730\u4e0a\u4f20",actionCode:v.j.packetInfo[t].addCode,content:JSON.stringify(e)}),n.getHandoutFiles(),n.getTaskList())}))}},{key:"nodeChange",value:function(e){c.a.setChapter(e.data.courseChapterId),c.a.setSelection(e.data),this.curNode=e,this.getHandoutFiles(),this.getTaskList()}},{key:"getDescType",value:function(e){return["\u9605\u8bfb\u4efb\u52a1","\u6848\u4f8b\u4efb\u52a1","\u4f5c\u4e1a\u4efb\u52a1","\u5b9e\u8bad\u4efb\u52a1","\u8003\u8bd5\u4efb\u52a1","\u5b9e\u6218\u4efb\u52a1","\u95ee\u5377","\u6d4b\u8bc4"][e]}},{key:"delHandout",value:function(e,t){var n=this;this.nzModalService.confirm({nzTitle:"\u8b66\u544a",nzContent:"\u786e\u5b9a\u8981\u5220\u9664\u201c".concat(e.attachmentName?e.attachmentName:e.name,"\u201d\u5417\uff1f"),nzOnOk:function(){return new Promise((function(i){(t?n.courseMgService.del_courseSectionFileTask(e.id):n.courseMgService.del_courseSectionFile(e.id)).subscribe((function(a){if(204!==a.status)return n.nzMesService.error(a.message),void i(!1);if(t){n.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664"+n.getDescType(e.taskType),actionCode:v.j.packetInfo["learnSet-task-action"].delCode,content:e.id});var c=[];n.taskList.filter((function(t){return t.id!==e.id})).forEach((function(e,t){var n={};n.id=e.id,n.seq=t,c.push(n)})),c.length&&n.courseMgService.saveOrUpdateTask(c).subscribe((function(e){201===e.status||n.nzMesService.error(e.message)}),(function(e){n.nzMesService.error(JSON.stringify(e))}))}else{var r,o,s=e.type;"101"===s?(r="\u8bb2\u4e49",o="learnSet-lecture-action"):"103"===s?(r="\u5f55\u64ad\u89c6\u9891",o="learnSet-record-action"):"102"===s&&(r="\u8d44\u6599",o="learnSet-material-action"),n.statisticsLogService.statisticsPacketInfoLog({name:"\u5220\u9664"+r,actionCode:v.j.packetInfo[o].delCode,content:e.id})}e.isMainFile?(n.getTaskList(),n.getHandoutFiles()):t?n.getTaskList():n.getHandoutFiles(),i(!0)}))}))}})}},{key:"mainFileChange",value:function(e,t){var n=this,i=[this.courseMgService.modifySectionResource({id:t.id,isMainFile:e?"1":"0"})];e&&this.handoutsLecture.every((function(e,a){if(!e.isMainFile||e.id===t.id)return!0;i.push(n.courseMgService.modifySectionResource({id:e.id,isMainFile:"0"})),n.handoutsLecture[a].isMainFile=!1})),Object(l.a)(i).subscribe((function(i){201===i[0].status?(n.statisticsLogService.statisticsPacketInfoLog({name:"\u4e3b\u8bb2\u4e49\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify({id:t.id,isMainFile:e?"1":"0"})}),t.isMainFile=e,n.getTaskList()):n.nzMesService.error(i[0].message)}),(function(e){n.nzMesService.error(JSON.stringify(e))}))}},{key:"gradeTypeChange",value:function(e,t){var n=this,i={id:t.id,gradeType:e,needTeacherProc:"1"===e?0:1};this.courseMgService.modifySectionResourceTask(i).subscribe((function(a){201===a.status?(n.statisticsLogService.statisticsPacketInfoLog({name:"\u4f5c\u4e1a\u4efb\u52a1\u81ea\u8bc4\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(i)}),t.gradeType=e):n.nzMesService.error(a.message)}),(function(e){n.nzMesService.error(JSON.stringify(e))}))}},{key:"isGradeChange",value:function(e,t){var n=this,i={id:t.id,isGrade:e};this.courseMgService.modifySectionResourceTask(i).subscribe((function(a){201===a.status?(n.statisticsLogService.statisticsPacketInfoLog({name:"\u6848\u4f8b\u4efb\u52a1\u662f\u5426\u8bc4\u5206\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(i)}),t.isGrade=e):n.nzMesService.error(a.message)}),(function(e){n.nzMesService.error(JSON.stringify(e))}))}},{key:"downloadChange",value:function(e,t,n){var i=this,a={id:t.id,downloadType:e};(n?this.courseMgService.modifySectionResourceTask(a):this.courseMgService.modifySectionResource(a)).subscribe((function(c){201===c.status?(i.statisticsLogService.statisticsPacketInfoLog(n?{name:"\u9605\u8bfb\u4efb\u52a1\u80fd\u5426\u4e0b\u8f7d\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(a)}:{name:"\u8bb2\u4e49\u80fd\u5426\u4e0b\u8f7d\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify(a)}),t.downloadType=e):i.nzMesService.error(c.message)}),(function(e){i.nzMesService.error(JSON.stringify(e))}))}},{key:"videoUpload",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0;for(var a in this.reset=n,this.getTeacher(),this[e].controls)this[e].controls[a].markAsUntouched(),this[e].controls[a].markAsPristine(),this[e].controls[a].updateValueAndValidity();n&&this[e].patchValue({seq:this.handoutsRecording[0]&&this.handoutsRecording[0].seq?this.handoutsRecording[0].seq+1:1}),this.modalFormRef=this.modalService.create({nzTitle:this.getLabel(e,n),nzContent:this[e+"Modal"],nzMaskClosable:!1,nzWrapClassName:"vertical-center-modal",nzCancelText:"\u53d6\u6d88",nzOkText:"\u4fdd\u5b58",nzOnOk:function(n){return t.comfirmUpload(e,i)},nzOnCancel:function(n){t[e].patchValue({videoUrl:"localVideo"===e?[]:"",authorId:"",videoType:"1",seq:1,attachmentName:"",id:""})}})}},{key:"getLabel",value:function(e,t){return t?"polyway"===e?"\u4fdd\u5229\u5a01":"\u672c\u5730\u4e0a\u4f20":"\u7f16\u8f91\u4fe1\u606f"}},{key:"comfirmUpload",value:function(e,t){var n=this;return new Promise((function(i,a){for(var c in n[e].controls)n[e].controls[c].markAsDirty(),n[e].controls[c].updateValueAndValidity();if(n[e].invalid)return n.nzMesService.warning("\u8bf7\u6309\u89c4\u5219\u586b\u5199\u6240\u6709\u5fc5\u586b\u9879"),void i(!1);var r=n[e].value.videoUrl,o=n.getParams(e,n.reset);n.reset?"polyway"===e?n.getDuration(r).subscribe((function(t){200===t.code?t.data.length?(o[0].videoLength=n.getVideoLength(t.data[0].duration),n.storingData(o,i,e,n.reset)):(n.nzMesService.warning("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u89c6\u9891ID"),i(!1)):(n.nzMesService.warning("\u4fdd\u5229\u5a01\u670d\u52a1\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5"),i(!1))})):(o[0].videoLength=n.getVideoLength(o[0].attachmentPath[0].videoLength),o[0].attachmentPath=o[0].attachmentPath[0].path,n.storingData(o,i,e,n.reset)):("string"!=typeof o[0].attachmentPath&&(o[0].attachmentPath=o[0].attachmentPath[0].path,o[0].resourceId=t.resourceId),n.storingData(o,i,e,n.reset))}))}},{key:"getParams",value:function(e,t){var n=this.courseId,i=this.coursePacketId,a=this.curNode.data,c=a.id,r=a.courseChapterId,s=this[e].value,l=s.authorId,u=s.videoType,d=s.seq,p=s.videoUrl,b=s.attachmentName,f=s.videoLength,h={courseId:n,coursePacketId:i,courseChapterId:r,courseSectionId:c,title:b,attachmentName:b,attachmentPath:p,authorId:l,attachmentExt:"string"==typeof p?"":o.a.getFileExt(p[0].name),authorName:this.teacherList.filter((function(e){return Object.is(e.id,l)}))[0].name,type:"103",sourceType:2,seq:d,videoType:u,videoLength:f};return t||(h.id=s.id),[h]}},{key:"getDuration",value:function(e){var t={ptime:(new Date).getTime(),vids:e},n=Object(f.a)(Object(o.b)(t)+s.a.secretkey).toUpperCase();return t.sign=n,this.courseMgService.getVideoLength(t,s.a.userid)}},{key:"storingData",value:function(e,t,n,i){var a=this;this.courseMgService.batchSave_courseSectionFile(e).subscribe((function(c){if(201===c.status){for(var r in a.statisticsLogService.statisticsPacketInfoLog({name:(i?"\u65b0\u589e":"\u7f16\u8f91")+"\u5f55\u64ad\u89c6\u9891",actionCode:v.j.packetInfo["learnSet-record-action"][i?"addCode":"modify"],content:JSON.stringify(e)}),a.getHandoutFiles(),a[n].patchValue({videoUrl:"localVideo"===n?[]:"",authorId:"",videoType:"1",seq:1,attachmentName:"",id:""}),a[n].controls)a[n].controls[r].markAsUntouched(),a[n].controls[r].markAsPristine(),a[n].controls[r].updateValueAndValidity();a.modalFormRef.destroy(),t(!0)}}))}},{key:"callSchoolEnterpriseLib",value:function(e,t,n){var i;"1"===t?i=this.taskList:"101"===t?i=this.handoutsLecture:"102"===t?i=this.handoutsMaterial:"103"===t&&(i=this.handoutsRecording);var a=i.map((function(e){return{taskId:e.id,id:e.resourceId}})),r={type:"scp-section-handout",professionId:this.professionId,sectionInfo:{courseId:this.courseId,coursePacketId:this.coursePacketId,courseChapterId:this.curNode.data.courseChapterId,courseSectionId:this.curNode.data.id},seq:o.a.getMaxSeq(i),nodes:a};r.isStandard=this.isStandard?"1":"","1"===t&&(r.limit=this.limitTask),c.a.putScpResourceMaterial(r),"read"===e?c.a.removeReadtree():"case"===e?c.a.removeCasetree():"setting"===e&&c.a.removeTrainTree(),this.menuService.gotoUrl({url:"/m/rm/"+e,paramUrl:"?from=scp&task="+t})}},{key:"downLoad",value:function(e){var t=e.attachmentName;if(t.indexOf(".")<0){var n=e.attachmentPath.split(".");t+="."+n[n.length-1]}this.aliOssService.downloadFile(t,e.attachmentPath).subscribe((function(e){return e}))}},{key:"getCallList",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getProdIdSync();case 2:n=t.sent,i={id:"exam"===e?String(this.testPaperId)&&"null"!==String(this.testPaperId)?this.testPaperId:"":String(this.testExerciseId)&&"null"!==String(this.testExerciseId)?this.testExerciseId:"",proId:n,groupWay:"exercise"===e?"":this.selectedValue?this.selectedValue:"",courseCode:this.code,name:"exam"===e?this.testPaperName?this.testPaperName:"":this.testExerciseName?this.testExerciseName:"",isNotTaskType:"exam"===e?"4":"2",sublibraryModuleIds:"exam"===e?this.examSubQuestionBankExamBak.join(","):this.homeworkSubQuestionBankBak.join(","),pageSize:"10000",pageNum:"1"},o.a.getAjax(s.a.questionBankApi+"system/qkcPaper/list",i).subscribe((function(t){try{var n=JSON.parse(t);200===n.code?"exam"===e?a.listOfData=n.data.rows:a.listOfDataExercise=n.data.rows:a.nzMesService.warning(t)}catch(i){a.nzMesService.warning(t||i)}}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getSubQuestionBank",value:function(e){var t=this;return new Promise((function(n){t.searchLoad=!0,o.a.getAjax(s.a.questionBankApi+"system/qkcPaper/courseCode",{courseCode:t.code,type:"exam"===e||"examSearch"===e?"EXAM":"PRACTICE"}).subscribe((function(i){t.searchLoad=!1;try{var a=JSON.parse(i);200===a.code?(t[e]=t.conversionNode(a.data,e),n(!0)):(t.nzMesService.error(a.message),n(!1))}catch(c){n(!1),t.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38")}}))}))}},{key:"getTaskFormText",value:function(e){switch(e){case"0":return"\u3010\u8bfe\u524d\u3011";case"1":return"\u3010\u8bfe\u4e2d\u3011";case"2":return"\u3010\u8bfe\u540e\u3011"}}},{key:"entryExercises",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.curJobData=e||{},t.next=3,o.a.getProdIdSync();case 3:n=t.sent,this.getSubQuestionBank("exercise").then((function(t){if(t){if(e)a.addJobFromSeting.patchValue({name:e.name,taskForm:e.taskForm,subQuestionBank:Number(e.quebankId)});else{var c=b.a.getPracSubquestionbank();a.addJobFromSeting.patchValue({name:"\u8bfe\u540e\u7ec3\u4e60",taskForm:"2",subQuestionBank:c?Number(c):""})}a.modalRef=a.nzModalService.create({nzTitle:e?"\u7f16\u8f91\u4f5c\u4e1a":"\u65b0\u589e\u4f5c\u4e1a",nzContent:e?a.jobSettingsEdit:a.jobSettings,nzMaskClosable:!1,nzCancelText:"\u53d6\u6d88",nzFooter:e?null:void 0,nzOkText:"\u786e\u5b9a",nzOnOk:function(){return new Promise((function(t){if(Object.keys(a.addJobFromSeting.controls).forEach((function(e){a.addJobFromSeting.controls[e].markAsDirty(),a.addJobFromSeting.controls[e].updateValueAndValidity()})),a.addJobFromSeting.invalid)t(!1);else if(e)a.realSave({id:e.id,name:a.addJobFromSeting.value.name,taskForm:a.addJobFromSeting.value.taskForm}).subscribe((function(e){e?(a.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u4f5c\u4e1a",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),t(!0)):t(!1)}));else{var c={name:a.addJobFromSeting.value.name,proId:n,courseCode:a.code,taskType:2,groupWay:1,sublibraryModuleId:a.addJobFromSeting.value.subQuestionBank,userPhone:b.a.getUser().userName};o.a.postAjax(s.a.questionBankApi+"system/qkcPaper/savePaper",c).subscribe((function(e){try{var c=JSON.parse(e);if(200===c.code){var r={proId:n,courseCode:a.code,mobile:b.a.getUser().userName};o.a.postAjax(s.a.questionBankApi+"system/qkcPaper/saveDefaultCourse",r).subscribe((function(e){return Object(i.a)(a,void 0,void 0,regeneratorRuntime.mark((function n(){var i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,200!==JSON.parse(e).code){n.next=7;break}return n.next=4,this.postTaskList(c,!0);case 4:n.sent.subscribe((function(e){e?(i.statisticsLogService.statisticsPacketInfoLog({name:"\u65b0\u589e\u4f5c\u4e1a",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),i.edit({id:c.data.paperId,taskType:"2"}),t(!0)):t(!1)})),n.next=8;break;case 7:this.nzMesService.error(e),t(!1);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),this.nzMesService.error(e),t(!1);case 13:case"end":return n.stop()}}),n,this,[[0,10]])})))}))}else a.nzMesService.warning(99===c.code?"\u901a\u8fc7\u5ba1\u6838\u7684\u8bfe\u7a0b\u624d\u80fd\u65b0\u589e\u4f5c\u4e1a,\u9898\u5e93\u8bfe\u7a0b\u67e5\u8be2\u7f16\u7801\u4e0d\u5b58\u5728":e),t(!1)}catch(l){a.nzMesService.warning(l),t(!1)}}))}}))}})}}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"addVolume",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.curExamData=e||{},t.next=3,o.a.getProdIdSync();case 3:n=t.sent,this.getSubQuestionBank("exam").then((function(t){if(t){if(a.addExamFrom.reset(),e)a.addExamFrom.patchValue({missionName:e.name,formingMethod:e.groupWay?Number(e.groupWay):e.examType?Number(e.examType):1,subQuestionBank:Number(e.quebankId)});else{var c=b.a.getExamSubquestionbank();a.addExamFrom.patchValue({missionName:"",formingMethod:1,subQuestionBank:c?Number(c):""})}a.modalRef=a.nzModalService.create({nzTitle:e?"\u7f16\u8f91\u7ec4\u5377":"\u65b0\u589e\u7ec4\u5377",nzContent:e?a.addExamExit:a.addExam,nzMaskClosable:!1,nzFooter:e?null:void 0,nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzOnOk:function(){return new Promise((function(t,c){if(Object.keys(a.addExamFrom.controls).forEach((function(e){a.addExamFrom.controls[e].markAsDirty(),a.addExamFrom.controls[e].updateValueAndValidity()})),a.addExamFrom.invalid)t(!1);else if(e)a.realSave({id:e.id,name:a.addExamFrom.value.missionName}).subscribe((function(e){e?(a.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u7ec4\u5377",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(e)}),t(!0)):t(!1)}));else{var r={name:a.addExamFrom.value.missionName,groupWay:a.addExamFrom.value.formingMethod,proId:n,courseCode:a.code,taskType:4,sublibraryModuleId:a.addExamFrom.value.subQuestionBank,userPhone:b.a.getUser().userName};o.a.postAjax(s.a.questionBankApi+"system/qkcPaper/savePaper",r).subscribe((function(e){try{var c=JSON.parse(e);if(200===c.code){var r={proId:n,courseCode:a.code,mobile:b.a.getUser().userName};o.a.postAjax(s.a.questionBankApi+"system/qkcPaper/saveDefaultCourse",r).subscribe((function(e){return Object(i.a)(a,void 0,void 0,regeneratorRuntime.mark((function n(){var i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,200!==JSON.parse(e).code){n.next=7;break}return n.next=4,this.postTaskList(c,!1);case 4:n.sent.subscribe((function(e){e?(i.statisticsLogService.statisticsPacketInfoLog({name:"\u65b0\u589e\u7ec4\u5377",actionCode:v.j.packetInfo["learnSet-task-action"].addCode,content:JSON.stringify(e)}),i.edit({id:c.data.paperId,taskType:"4"}),t(!0)):t(!1)})),n.next=8;break;case 7:this.nzMesService.error(e),t(!1);case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),this.nzMesService.error(e),t(!1);case 13:case"end":return n.stop()}}),n,this,[[0,10]])})))}))}else a.nzMesService.warning(99===c.code?"\u901a\u8fc7\u5ba1\u6838\u7684\u8bfe\u7a0b\u624d\u80fd\u65b0\u589e\u7ec4\u5377,\u9898\u5e93\u8bfe\u7a0b\u67e5\u8be2\u7f16\u7801\u4e0d\u5b58\u5728":e),t(!1)}catch(l){a.nzMesService.warning(e||l)}}))}}))}})}}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"postTaskList",value:function(e,t,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var a,c,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,o.a.getProdIdSync();case 2:return a=i.sent,c=t||"1"===this.exerciseType?1:2,r={courseId:this.courseId,coursePacketId:this.coursePacketId,courseChapterId:this.curNode.data.courseChapterId,courseSectionId:this.curNode.data.id,status:1,seq:o.a.getMaxSeq(this.taskList),examType:1,gradeType:c,needTeacherProc:1===c?0:1,isGrade:1,attachmentPath:s.a.questionBank+"#/questionList?proId="+a+"&courseCode="+this.code},i.abrupt("return",(t?(r.taskType=2,n?(r.name=n.name,r.attachmentName=n.name,r.quebankId=n.sublibraryModuleIdList&&n.sublibraryModuleIdList.length?n.sublibraryModuleIdList.map((function(e){return e.sublibraryModuleId})).join(","):"",r.resourceId=n.paperUuid+"-"+n.id,r.taskForm="2"):(r.name=this.addJobFromSeting.value.name,r.attachmentName=this.addJobFromSeting.value.name,r.resourceId=e.data.paperUuid+"-"+e.data.paperId,r.taskForm=this.addJobFromSeting.value.taskForm,r.quebankId=this.addJobFromSeting.value.subQuestionBank)):(r.taskType=4,r.paperType="1",n?(r.quebankId=n.sublibraryModuleIdList&&n.sublibraryModuleIdList.length?n.sublibraryModuleIdList.map((function(e){return e.sublibraryModuleId})).join(","):"",r.examType=n.groupWay,r.name=n.name,r.attachmentName=n.name,r.resourceId=n.paperUuid+"-"+n.id):(r.examType=this.addExamFrom.value.formingMethod,r.name=this.addExamFrom.value.missionName,r.attachmentName=this.addExamFrom.value.missionName,r.resourceId=e.data.paperUuid+"-"+e.data.paperId,r.quebankId=this.addExamFrom.value.subQuestionBank),"2"===this.exerciseType&&(r.answerTimes=1)),this.realSave(r)));case 6:case"end":return i.stop()}}),i,this)})))}},{key:"realSave",value:function(e){var t=this;return new u.a((function(n){t.courseMgService.newTestPaper(e).subscribe((function(i){201===i.status?(t.getTaskList(),n.next(e),n.complete(),n.unsubscribe()):(t.isCallLoading=!1,n.next(!1),n.complete(),n.unsubscribe())}))}))}},{key:"chooseTestPaper",value:function(){this.getSubQuestionBank("examSearch"),this.getCallList("exam"),this.selectedValue="",this.testPaperName="",this.examSubQuestionBankExam=[],this.examSubQuestionBankExamBak=[],this.examListPreview=!0}},{key:"chooseExercises",value:function(){this.getSubQuestionBank("exerciseSearch"),this.getCallList("exercise"),this.homeworkSubQuestionBank=[],this.homeworkSubQuestionBankBak=[],this.testExerciseName="",this.exerciseListPreview=!0}},{key:"associate",value:function(e,t){var n=this;this.associateing[t]=!0,this.totalPage=0,this.currentAssocate=e,this.courseMgService.getViewUrlWebPath(s.a.OSS_URL+e.attachmentPath).subscribe((function(e){return Object(i.a)(n,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=200===e.status,!n.t0){n.next=13;break}return this.wps=WebOfficeSDK.config({url:e.data.wpsUrl}),this.wps.iframe.style.display="none",n.next=6,this.wps.ready();case 6:return this.wpsApplication=this.wps.Application,this.stack=this.wpsApplication.Stack(),n.next=10,this.wpsApplication.ActivePresentation.Slides.Count;case 10:this.totalPage=n.sent,this.associateing[t]=!1,this.visibleAssociate=!0;case 13:case"end":return n.stop()}}),n,this)})))})),this.getssocateList()}},{key:"isNeedChange",value:function(e,t){var n=this;this.courseMgService.modifySectionResourceTask({id:t.id,isNeed:t.isNeed?"1":"0"}).subscribe((function(i){201===i.status?t.isNeed=e:n.nzMesService.error(i.message)}),(function(e){n.nzMesService.error(JSON.stringify(e))}))}},{key:"disableMainLecture",value:function(e){return!("1"===this.preview||e.attachmentPath&&(e.attachmentPath.indexOf(".ppt")>-1||e.attachmentPath.indexOf(".pptx")>-1))}},{key:"showassolite",value:function(e){return"0"===this.preview&&e.isMainFile&&e.attachmentPath&&(e.attachmentPath.indexOf(".ppt")>-1||e.attachmentPath.indexOf(".pptx")>-1)}},{key:"saveAssociate",value:function(){var e=this,t=[];this.assocateList.forEach((function(n,i){var a={};a.id=n.linkId,a.courseId=n.courseId,a.coursePacketId=n.coursePacketId,a.courseChapterId=n.courseChapterId,a.courseSectionId=n.courseSectionId,a.courseTaskId=n.id,a.resourceId=e.currentAssocate.id,a.pageNum=n.pageNum,a.seq=n.seq,t.push(a)})),this.courseMgService.saveAssocateList(t).subscribe((function(t){201===t.status&&(e.visibleAssociate=!1)}))}},{key:"getType",value:function(e){switch(e){case 1:return"\u771f\u9898";case 2:return"\u6a21\u62df";case 3:return"\u539f\u521b";case 4:return"\u6d4b\u8bd5\u5377"}}},{key:"showTransfer",value:function(e,t){if(this.taskList.length>=this.limitTask&&!t)return!1;var n=[];if(this.taskList.length&&(n=this.taskList.map((function(e){return e.resourceId.split("-")[0]}))),t){if(n.length&&n.indexOf(e.paperUuid)>-1)return!0}else{if(!n.length)return!0;if(n.indexOf(e.paperUuid)<0)return!0}}},{key:"transfer",value:function(e,t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.isCallLoading=!0,n.next=3,this.postTaskList(null,t,e);case 3:n.sent.subscribe((function(e){e&&i.statisticsLogService.statisticsPacketInfoLog({name:t?"\u8c03\u7528\u4f5c\u4e1a":"\u8c03\u7528\u8bd5\u5377",actionCode:v.j.packetInfo["learnSet-task-action"].addCode,content:JSON.stringify(e)})}));case 4:case"end":return n.stop()}}),n,this)})))}},{key:"cancelCall",value:function(e,t){var n=this;this.isCallLoading=!0;var i=this.taskList.map((function(e){return e.resourceId.split("-")[0]})).findIndex((function(t){return t===e.paperUuid}));this.courseMgService.del_courseSectionFileTask(this.taskList[i].id).subscribe((function(e){204===e.status?n.getTaskList():n.nzMesService.error(e.message)}),(function(){n.isCallLoading=!1}))}},{key:"previewExaminationPaper",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getProdIdSync();case 2:n=t.sent,e.resourceId?open(s.a.questionBank+"#/paper/previewPaper?paperId="+e.resourceId.split("-")[1]+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+n+"&courseCode="+this.code):open(s.a.questionBank+"#/paper/previewPaper?paperId="+e.id+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+n+"&courseCode="+this.code);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"edit",value:function(e){e.name?"2"===e.taskType?this.entryExercises(e):"4"===e.taskType?this.addVolume(e):this.otherEdit(e):this.otherEdit(e)}},{key:"otherEdit",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getProdIdSync();case 2:n=t.sent,i={proId:n,courseCode:this.code,mobile:b.a.getUser().userName},o.a.postAjax(s.a.questionBankApi+"system/qkcPaper/saveDefaultCourse",i).subscribe((function(t){try{if(200===JSON.parse(t).code){var i,c="courseCode="+a.code+"&proId="+n+"&token="+a.tokenObj.token+"&refreshToken="+a.tokenObj.refreshToken+"&paperId=";i="7"===e.taskType?s.a.questionBank+"#/PaperEvaluation/List?"+c:"6"===e.taskType?s.a.questionBank+"#/PaperQuestionnaire/List?"+c:s.a.questionBank+"#/paper/createPaper?"+c,i+=e.resourceId?e.resourceId.split("-")[1]:e.id,open(i)}else a.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38\uff0c\u8bbe\u7f6e\u9ed8\u8ba4\u8bfe\u7a0b\u5931\u8d25")}catch(r){a.nzMesService.error(t)}}));case 5:case"end":return t.stop()}}),t,this)})))}},{key:"previewTask",value:function(e){"3"===e.taskType?this.previewTraining(e):"1"===e.taskType?this.menuService.gotoUrl({url:"/m/rm/material-pre-case",paramUrl:"/".concat(e.resourceId,"/104/").concat(e.courseChapterId),title:"\u9884\u89c8\u6848\u4f8b"}):"2"===e.taskType||"4"===e.taskType||"6"===e.taskType||"7"===e.taskType?this.previewExaminationPaper(e):this.previewHandout(e)}},{key:"modelChangeDetect",value:function(e){"number"==typeof e&&(this.current=e)}},{key:"stopPropagation",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"getBlur",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bindLoading=!0,!this.totalPage){t.next=6;break}if(!(this.totalPage<(this.current||e.pageNum))){t.next=3;break}return t.abrupt("return",(this.bindLoading=!1,Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!1})),void this.nzMesService.warning("\u5f53\u524d\u8bb2\u4e49\u603b\u5171 "+this.totalPage+" \u9875,\u7ed1\u5b9a\u9875\u7801\u8d85\u8fc7\u4e86\u4e3b\u8bb2\u4e49\u7684\u9875\u6570\u8303\u56f4!")));case 3:e.paperId?o.a.getAjax(s.a.questionBankApi+"system/qkcPaper/decidePaper?paperId="+e.paperId).subscribe((function(t){try{var i=JSON.parse(t);200===i.code?i.data.decide?(n.nzMesService.warning("\u5305\u542b\u7efc\u5408\u9898\u7684\u4f5c\u4e1a\u4efb\u52a1\u4e0d\u80fd\u7ed1\u5b9a\u5230\u4e3b\u8bb2\u4e49\u4e2d"),n.bindLoading=!1,Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!1}))):n.boundTask(e):n.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38\uff0c\u67e5\u8be2\u4efb\u52a1\u4fe1\u606f\u5931\u8d25")}catch(a){n.nzMesService.error(t)}})):this.boundTask(e),t.next=7;break;case 6:this.bindLoading=!1,Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!1})),this.nzMesService.error("\u8be5\u4e3b\u8bb2\u4e49\u6ca1\u6709\u9875\u9762\uff0c\u8bf7\u4fdd\u8bc1\u6709\u9875\u9762\u7684\u524d\u63d0\u4e0b\u7ed1\u5b9a\u4efb\u52a1");case 7:case"end":return t.stop()}}),t,this)})))}},{key:"boundTask",value:function(e){var t=this,n={courseId:e.courseId,coursePacketId:e.coursePacketId,courseChapterId:e.courseChapterId,courseSectionId:e.courseSectionId,courseTaskId:e.id,resourceId:this.currentAssocate.id,pageNum:this.current||e.pageNum,seq:e.seq,id:e.linkId};this.courseMgService.handoutPageNumberRelatedTasks(n).subscribe((function(i){if(t.bindLoading=!1,201===i.status){t.statisticsLogService.statisticsPacketInfoLog({name:"\u8bb2\u4e49\u8d44\u6599\u5173\u8054\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify(n)}),e.linkId=i.data.id,e.isBindAssoicate=!0;var a=t.assocateList.findIndex((function(t){return t.id===e.id}));t.assocateLists[a]=JSON.parse(JSON.stringify(t.assocateList[a])),t.currentBindLength=t.assocateList.filter((function(e){return e.isBindAssoicate})).length,console.log(t.currentBindLength)}else Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!1}))}),(function(){t.bindLoading=!1,Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!1}))}))}},{key:"getApp",value:function(e){var t=this;if(this.bindLoading)if(this.totalPage)e(!1);else{var n=this.doc.getElementById("iframePage").contentWindow.wps;n?e(n):Object(d.a)(100).subscribe((function(){t.getApp(e)}))}}},{key:"isBindChange",value:function(e,t){e?this.getBlur(t):this.delBind(t)}},{key:"delBind",value:function(e){var t=this;this.knowledgeManageService.delBind(e.linkId).subscribe((function(n){if(204===n.status){t.statisticsLogService.statisticsPacketInfoLog({name:"\u8bb2\u4e49\u8d44\u6599\u5173\u8054\u66f4\u6539",actionCode:v.j.packetInfo["learnSet-lecture-action"].modify,content:JSON.stringify({id:e.linkId})}),delete e.pageNum,delete e.linkId,e.isBindAssoicate=!1;var i=t.assocateList.findIndex((function(t){return t.id===e.id}));t.assocateLists[i]=JSON.parse(JSON.stringify(t.assocateList[i])),t.currentBindLength=t.assocateList.filter((function(e){return e.isBindAssoicate})).length}else Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!0}))}),(function(t){Object(d.a)(0).subscribe((function(){e.isBindAssoicate=!0}))}))}},{key:"completebind",value:function(){this.visibleAssociate=!1,this.totalPage=0,this.wps.iframe.parentNode.parentNode.removeChild(this.wps.iframe.parentNode),this.stack.End(),this.wpsApplication=null,this.wps.destroy(),this.wps=null,this.getTaskList()}},{key:"getText",value:function(e){switch(String(e)){case"0":return"\u8bfb";case"1":return"\u4f8b";case"2":return"\u4f5c";case"3":return"\u8bad";case"4":return"\u8003";case"5":return"\u6218";case"6":return"\u95ee";case"7":return"\u6d4b"}}},{key:"getColor",value:function(e){switch(e){case"0":return"#f0a14d";case"1":return"#35ad8e";case"2":return"#b27fd7";case"3":return"#ecc13a";case"4":return"#33ade7";case"5":return"#5f88f2";case"6":return"#40a9ff";case"7":return"#567180"}}},{key:"getFormingMethod",value:function(e){switch(e){case 1:return"\u9009\u9898\u7ec4\u5377/\u5f55\u9898\u7ec4\u5377";case 2:return"\u9898\u578b\u96be\u5ea6\u968f\u673a\u7ec4\u5377";case 3:return"\u77e5\u8bc6\u70b9\u96be\u5ea6\u62bd\u9898\u7ec4\u5377"}}},{key:"previewTraining",value:function(e){var t=this;this.trainLoading=!0,this.trainManageService.getAccountPeriodId(e.resourceId).subscribe((function(n){if(200===n.status){t.trainManageService.getPracticalDetail({id:e.resourceId,accountId:n.data.accountId}).subscribe((function(e){t.trainLoading=!1,200===e.status&&e.data&&window.open(e.data)}),(function(e){t.trainLoading=!1,t.nzMesService.create("error",JSON.stringify(e))}))}else t.trainLoading=!1}),(function(e){t.trainLoading=!1}))}},{key:"clearStatus",value:function(e){var t=this[e].controls.answerTimes;t.markAsUntouched(),t.markAsPristine(),t.updateValueAndValidity()}},{key:"editHandout",value:function(e){e.attachmentExt?(e.attachmentName=e.title,e.videoUrl=[{name:e.title,title:e.title,path:e.attachmentPath,videoLength:e.videoLength}],this.localVideo.patchValue(e),this.videoUpload("localVideo",!1,e)):(e.attachmentName=e.title,e.videoUrl=e.attachmentPath,this.polyway.patchValue(e),this.videoUpload("polyway",!1,e))}},{key:"compltedUpload",value:function(){var e=this.localVideo.value.videoUrl;this.localVideo.patchValue({attachmentName:e[0].title.split(".")[0]})}},{key:"getVideoLength",value:function(e){var t=0,n=e.split(":"),i=Number(n[0]),a=Number(n[1]);return i>0&&(t+=60*i),a>0&&(t+=a),Number(n[2])>0&&(t+=1),t}},{key:"paperTypeChange",value:function(e){this.examSettingForm.patchValue("6"!==e||"3"!==this.examType&&"2"!==this.examType?{isRedo:"0"}:{isRedo:"1"})}},{key:"transferQuestionnaire",value:function(e,t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,c=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.getProdIdSync();case 2:i=n.sent,this.isCallLoading=!0,a={courseId:this.courseId,coursePacketId:this.coursePacketId,courseChapterId:this.curNode.data.courseChapterId,courseSectionId:this.curNode.data.id,status:1,seq:o.a.getMaxSeq(this.taskList),attachmentPath:s.a.questionBank+("evaluationType"===t?"#/PaperEvaluation/List":"#/PaperQuestionnaire/List")+"?proId="+i+"&courseCode="+this.code,name:e.name,attachmentName:e.name,resourceId:e.paperUuid+"-"+e.paperId,taskType:"evaluationType"===t?7:6,answerTimes:1},this.courseMgService.newTestPaper(a).subscribe((function(e){c.statisticsLogService.statisticsPacketInfoLog({name:"evaluationType"===t?"\u8c03\u7528\u6d4b\u8bc4":"\u8c03\u7528\u95ee\u5377",actionCode:v.j.packetInfo["learnSet-task-action"].addCode,content:JSON.stringify(a)}),201===e.status&&c.getTaskList()}),(function(){c.isCallLoading=!1}));case 6:case"end":return n.stop()}}),n,this)})))}},{key:"previewExaminationQuestionnaire",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getProdIdSync();case 2:n=t.sent,open(s.a.questionBank+"#/paper/previewPaper?paperId="+e.paperId+"&token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+n+"&courseCode="+this.code);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"questionnaireCall",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i,a,c,r,l,u=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.evaluationType,i=this.questionnaireType,a=this.evaluationName,c=this.questionnaireName,r=this.code,t.next=7,o.a.getProdIdSync();case 7:l=t.sent,o.a.getAjax(s.a.questionBankApi+"system/qkcPaper/evaluateQuestionnaireList",{proId:l,typeId:"evaluationType"===e?3:4,evaluateId:"evaluationType"===e?n||void 0:i||void 0,name:"evaluationType"===e?a||void 0:c||void 0,courseCode:r,status:2,pageSize:"10000",pageNum:"1"}).subscribe((function(t){try{var n=JSON.parse(t);200===n.code?"evaluationType"===e?(u.listOfEvaluationData=n.data.rows,u.evaluationPreview=!0):(u.listOfQuestionnaireData=n.data.rows,u.questionnairePreview=!0):u.nzMesService.error(n.message)}catch(i){u.nzMesService.error("\u9898\u5e93\u670d\u52a1\u5f02\u5e38")}}));case 9:case"end":return t.stop()}}),t,this)})))}},{key:"getEvaluationType",value:function(e){switch(e){case"1":return"\u62db\u751f\u6d4b\u8bc4";case"2":return"\u5165\u5b66\u6d4b\u8bc4"}}},{key:"getQuestionnaireType",value:function(e){switch(e){case"1":return"\u603b\u90e8\u6d4b\u8bc4";case"2":return"\u6821\u533a\u6d4b\u8bc4"}}},{key:"getEvaluationStatus",value:function(e){switch(e){case 1:return"\u672a\u53d1\u5e03";case 2:return"\u5df2\u53d1\u5e03";case 3:return"\u5df2\u8fc7\u671f";case 4:return"\u672a\u5b8c\u6210"}}},{key:"newQuestionnaire",value:function(e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.getProdIdSync();case 2:n=t.sent,i="token="+this.tokenObj.token+"&refreshToken="+this.tokenObj.refreshToken+"&proId="+n+"&courseCode="+this.code,"evaluationType"===e?open(s.a.questionBank+"#/PaperEvaluation/List?"+i):open(s.a.questionBank+"#/PaperQuestionnaire/List?"+i);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"closeQuestionnaire",value:function(e){"evaluationType"===e?(this.questionnaireType="",this.questionnaireName="",this.evaluationPreview=!1):(this.questionnairePreview=!1,this.evaluationType="",this.evaluationName="")}},{key:"subQuestionBankChange",value:function(e){e&&b.a.putExamSubquestionbank(e)}},{key:"execrisesSubQuestionBankChange",value:function(e){e&&b.a.putPracSubquestionbank(e)}},{key:"subQuestionBankChangeSearch",value:function(e,t){var n=this,i="examSearch"===t?"examSubQuestionBankExamBak":"homeworkSubQuestionBankBak";this[i]=[],e.length&&e.forEach((function(e){"NaN"===parseFloat(e).toString()?n[t].every((function(t){if(t.code!==e)return!0;t.children.forEach((function(e){n[i].push(e.key)}))})):n[i].push(e)}))}},{key:"importVideo",value:function(){var e=this;this.nzModalService.create({nzTitle:"\u5bfc\u5165\u89c6\u9891",nzContent:m.a,nzComponentParams:{courseId:this.courseId,coursePacketId:this.coursePacketId},nzMaskClosable:!1}).afterClose.subscribe((function(t){t&&e.getHandoutFiles()}))}},{key:"queryKeywordsChange",value:function(){1===Number(this.queryKeywords)?this.testPaperName="":this.testPaperId=""}},{key:"queryKeywordsJobChange",value:function(){1===Number(this.queryKeywordsJob)?this.testExerciseName="":this.testExerciseId=""}},{key:"getExamText",value:function(e){return"4"===String(e.taskType)?this.getExamType(e.paperType||"1"):""}},{key:"showExamType",value:function(e){return"4"===String(e.taskType)}},{key:"ShowJobType",value:function(e){return"2"===String(e.taskType)}},{key:"jobCancel",value:function(){this.modalRef.destroy()}},{key:"jumpQuestionBank",value:function(e){this.otherEdit(this[e])}},{key:"jobDetermine",value:function(){var e=this;Object.keys(this.addJobFromSeting.controls).forEach((function(t){e.addJobFromSeting.controls[t].markAsDirty(),e.addJobFromSeting.controls[t].updateValueAndValidity()})),this.addJobFromSeting.invalid||this.realSave({id:this.curJobData.id,name:this.addJobFromSeting.value.name,taskForm:this.addJobFromSeting.value.taskForm}).subscribe((function(t){t&&(e.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u4f5c\u4e1a",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(t)}),e.modalRef.destroy())}))}},{key:"examDetermine",value:function(){var e=this;Object.keys(this.addExamFrom.controls).forEach((function(t){e.addExamFrom.controls[t].markAsDirty(),e.addExamFrom.controls[t].updateValueAndValidity()})),this.addExamFrom.invalid||this.realSave({id:this.curExamData.id,name:this.addExamFrom.value.missionName}).subscribe((function(t){t&&(e.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u7ec4\u5377",actionCode:v.j.packetInfo["learnSet-task-action"].modify,content:JSON.stringify(t)}),e.modalRef.destroy())}))}},{key:"closePreview",value:function(){this.isPreviewpolyway=!1,this.resourceUrl="",this.previewTitle="",this.previewStart=!1}}]),e}();return e.\u0275fac=function(t){return new(t||e)(y.Ub(r.d),y.Ub(k.a),y.Ub(S.a),y.Ub(P.e),y.Ub(C.e),y.Ub(E.a),y.Ub(C.e),y.Ub(w.a),y.Ub(x.a),y.Ub(O.a),y.Ub(M.a),y.Ub(z.d))},e.\u0275cmp=y.Ob({type:e,selectors:[["app-chapter-handout"]],viewQuery:function(e,t){var n;1&e&&(y.Vc(X,!0),y.Vc(Y,!0),y.Vc(ee,!0),y.Vc(te,!0),y.Vc(ne,!0),y.Vc(ie,!0),y.Vc(ae,!0),y.Vc(ce,!0),y.Vc(h.d,!0)),2&e&&(y.Bc(n=y.jc())&&(t.polywayModal=n.first),y.Bc(n=y.jc())&&(t.localVideoModal=n.first),y.Bc(n=y.jc())&&(t.addExam=n.first),y.Bc(n=y.jc())&&(t.addExamExit=n.first),y.Bc(n=y.jc())&&(t.jobSettings=n.first),y.Bc(n=y.jc())&&(t.jobSettingsEdit=n.first),y.Bc(n=y.jc())&&(t.questionnaire=n.first),y.Bc(n=y.jc())&&(t.tree=n.first),y.Bc(n=y.jc())&&(t.nzSelects=n))},decls:272,vars:149,consts:[[1,"container"],[1,"left"],[1,"row-title"],[3,"chapterSelectable","coursePacketId","defaultSection","defaultExpandedKeys","nodeChange"],["tree",""],["class","not-content",4,"ngIf"],[1,"gap"],[1,"right-content"],[3,"nzSpinning","nzDelay"],[1,"row-title",2,"padding-left","10px","margin-top","20px"],["nz-button","","nzType","primary","style","float:right;margin-right:15px;",3,"click",4,"ngIf"],["class","right",4,"ngIf"],[1,"right"],[3,"nzActive","nzHeader","nzActiveChange"],["zlTpl",""],["tipszl",""],["cdkDropList","",1,"list",3,"cdkDropListDropped"],[4,"ngIf"],["polywaymodal",""],["localvideomodal",""],["addExam",""],["addExamExit",""],["jobSettings",""],["jobSettingsEdit",""],["nzTitle","\u9009\u62e9\u8bd5\u5377","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],[1,"header"],[1,"header-container","wcl"],[1,"header-item","w31"],["nzPlaceHolder","\u8bf7\u9009\u62e9\u67e5\u8be2\u5173\u952e\u5b57",2,";width","150px",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u8bd5\u5377ID"],["nzValue","2","nzLabel","\u8bd5\u5377\u540d\u79f0"],["nz-input","","placeholder","\u540d\u79f0\u641c\u7d22",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],["nz-input","","placeholder","ID\u641c\u7d22","type","number","min","0",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],[2,"min-width","90px","line-height","32px"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u7ec4\u5377\u65b9\u5f0f",2,"margin-right","20px","width","calc(100% - 100px)","flex","1",3,"ngModel","ngModelChange"],["nzValue","1","nzLabel","\u9009\u9898\u7ec4\u5377/\u5f55\u9898\u7ec4\u5377"],["nzValue","2","nzLabel","\u9898\u578b\u96be\u5ea6\u968f\u673a\u7ec4\u5377"],["nzValue","3","nzLabel","\u77e5\u8bc6\u70b9\u96be\u5ea6\u62bd\u9898\u7ec4\u5377"],[1,"header-item","mr0","w31"],["nzDefaultExpandAll","","nzShowSearch","","nzMultiple","","nzCheckable","",2,"width","178px",3,"nzNodes","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nzTreeTemplateSearchExam",""],["nz-button","","nzType","primary",2,"margin-left","20px","vertical-align","top",3,"click"],[1,"evaluation-table",3,"nzData","nzScroll","nzFrontPagination"],["basicTable",""],["nzWidth","100px"],["nzWidth","150px"],["nzWidth","80px"],["nzWidth","120px"],[4,"ngFor","ngForOf"],["nzTitle","\u9009\u62e9\u4f5c\u4e1a","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],[1,"header-container"],[1,"header-item"],["nzValue","1","nzLabel","\u4f5c\u4e1aID"],["nzValue","2","nzLabel","\u4f5c\u4e1a\u540d\u79f0"],["nzDefaultExpandAll","","nzShowSearch","","nzMultiple","","nzCheckable","",2,"width","250px",3,"nzNodes","ngModel","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nzTreeTemplateSearchPractice",""],["nz-button","","nzType","primary",2,"margin-left","20px",3,"click"],["basicTableExercise",""],["nzTitle","\u9009\u62e9\u95ee\u5377","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],["nz-input","","placeholder","\u652f\u6301\u540d\u79f0\u641c\u7d22",3,"ngModel","ngModelChange"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u95ee\u5377\u7c7b\u578b",3,"ngModel","ngModelChange"],["nzLabel","\u603b\u90e8\u6d4b\u8bc4","nzValue","1"],["nzLabel","\u6821\u533a\u6d4b\u8bc4","nzValue","2"],["nz-button","","nzType","primary",3,"click"],["nz-button","","nzType","primary",2,"margin-left","50px",3,"click"],["questionnaireTable",""],["nzTitle","\u9009\u62e9\u6d4b\u8bc4","nzWidth","1000",3,"nzVisible","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u6d4b\u8bc4\u7c7b\u578b",3,"ngModel","ngModelChange"],["nzLabel","\u62db\u751f\u6d4b\u8bc4","nzValue","1"],["nzLabel","\u5165\u5b66\u6d4b\u8bc4","nzValue","2"],["evaluationTable",""],["nzTitle","\u8003\u8bd5\u8bbe\u7f6e",3,"nzVisible","nzMaskClosable","nzVisibleChange","nzOnCancel"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","","nzErrorTip","\u8003\u8bd5\u8bbe\u7f6e\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","examLength",2,"margin-right","10px",3,"nzMin","nzStep"],["nzHasFeedback","","nzErrorTip","\u53ca\u683c\u5206\u6570\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","passScore",2,"margin-right","10px",3,"nzMin","nzStep"],["nzHasFeedback","","nzErrorTip","\u8bd5\u5377\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","paperType",3,"ngModelChange"],["nzValue","1","nzLabel","\u9636\u6bb5\u8003\u8bd5"],["nzValue","2","nzLabel","\u5355\u79d1\u8003\u8bd5"],["nzValue","3","nzLabel","\u6a21\u62df\u8003\u8bd5"],["nzValue","4","nzLabel","\u5bc6\u62bc\u8003\u8bd5"],["nzValue","6","nzLabel","\u5b9e\u64cd\u8003\u8bd5"],["nzHasFeedback","","nzErrorTip","\u662f\u5426\u91cd\u8003\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","isRedo"],["nz-radio","","nzValue","1","nzDisabled",""],["nz-radio","","nzValue","0","nzDisabled",""],["style","position:absolute;",4,"ngIf"],["nzHasFeedback","","nzErrorTip","\u7b54\u9898\u6b21\u6570\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","answerTimes",3,"ngModel","nzDisabled","ngModelChange"],["nz-radio","",3,"nzValue"],[3,"ngModel","nzMin","nzMax","nzStep","ngModelOptions","disabled","ngModelChange"],["nzHasFeedback","","nzErrorTip","\u662f\u5426\u51fa\u6210\u7ee9\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","resultWay"],["nz-radio","","nzValue","1"],[4,"nzModalFooter"],["nzTitle","\u6743\u9650\u8bbe\u7f6e",3,"nzVisible","nzMaskClosable","nzVisibleChange","nzOnCancel"],["formControlName","answerTimes",3,"ngModel","ngModelChange"],[3,"ngModel","nzMin","nzMax","nzStep","ngModelOptions","ngModelChange"],["nzTitle","\u8bb2\u4e49\u8d44\u6e90\u5173\u8054",3,"nzVisible","nzMaskClosable","nzFooter","nzBodyStyle","nzVisibleChange","nzOnCancel"],[1,"associate"],[2,"float","left"],[2,"float","right","cursor","pointer",3,"click"],["nz-icon","","nzType","eye","nzTheme","outline"],["class","association-table",4,"ngFor","ngForOf"],[3,"isPreviewpolyway","previewTitle","resourceUrl","closePreview",4,"ngIf"],[1,"not-content"],["nz-button","","nzType","primary",2,"float","right","margin-right","15px",3,"click"],["lectureTpl",""],["tipsJy",""],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTrigger","click",1,"font-question",3,"nzTooltipTitle","nzTooltipOverlayStyle","click"],["class","list-item","cdkDrag","",4,"ngFor","ngForOf"],["class","add-section",4,"ngIf"],["cdkDrag","",1,"list-item"],[1,"title",3,"title"],[2,"vertical-align","middle",3,"nzShape","nzSize","ngStyle","nzText"],["nzTip","\u67e5\u8be2\u4e3b\u8bb2\u4e49\u4fe1\u606f\u4e2d...",3,"nzSpinning","nzDelay"],[1,"action-group"],["nz-button","","nzType","link",3,"click"],["nz-button","","nzType","link",3,"click",4,"ngIf"],["nz-button","","nzType","link",3,"style","click",4,"ngIf"],[1,"other-containers"],["nz-checkbox","",3,"nzDisabled","ngModel","ngModelChange"],["class","other-container",3,"ngModel","ngModelChange",4,"ngIf"],[1,"other-container",3,"ngModel","ngModelChange"],["value","0"],["value","1"],["nz-icon","","nzType","download","nzTheme","outline"],["nz-icon","","nzType","disconnect","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],[1,"add-section"],["nz-button","","nzType","primary",3,"nzSize","click"],["recordingTpl",""],[2,"margin-left","10px","color","#1890ff","vertical-align","top"],["nz-icon","","nzType","edit","nzTheme","outline"],["panelHeaderTpl",""],["tipsPak",""],[1,"title","task"],[1,"title-name",3,"title","ngStyle"],["style","color:#33ade7",4,"ngIf"],["style","color:red;min-width:56px;vertical-align: top;",4,"ngIf"],[3,"ngModel","ngClass","disabled","ngModelChange",4,"ngIf"],["style","min-width: 100px;height: 10px;",4,"ngIf"],["class","other-container",3,"ngModel","disable-select","disabled","ngModelChange",4,"ngIf"],["class","other-container",3,"ngModel","disabled","ngModelChange",4,"ngIf"],["class","other-button","nz-button","","nzType","primary",3,"click",4,"ngIf"],["style","width: 88px;height: 10px;",4,"ngIf"],[2,"color","#33ade7"],[2,"color","red","min-width","56px","vertical-align","top"],[3,"ngModel","ngClass","disabled","ngModelChange"],["value","2"],[2,"min-width","100px","height","10px"],[1,"other-container",3,"ngModel","disabled","ngModelChange"],["value",""],["nz-button","","nzType","primary",1,"other-button",3,"click"],[2,"width","88px","height","10px"],["nz-icon","","nzType","edit","nzTheme","outline",3,"click"],["nz-button","","nzType","primary",3,"nzSize"],["nz-dropdown","",3,"nzDropdownMenu"],["nz-icon","","nzType","plus","nzTheme","outline"],["menuwj","nzDropdownMenu"],["nz-menu","","nzSelectable",""],["nz-menu-item","",3,"click"],["menuExercises","nzDropdownMenu"],["menu","nzDropdownMenu"],["nz-icon","","nzType","upload","nzTheme","outline"],["class","list-item","cdkDrag","",3,"id",4,"ngFor","ngForOf"],["cdkDrag","",1,"list-item",3,"id"],["nzHasFeedback","","nzErrorTip","\u6307\u5bfc\u8bb2\u5e08\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u6307\u5bfc\u8bb2\u5e08","formControlName","authorId"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["nzHasFeedback","",2,"max-width","316px",3,"nzSpan","nzErrorTip"],["nz-input","","type","text","formControlName","attachmentName","placeholder","\u8bf7\u8f93\u5165\u89c6\u9891\u540d\u5b57",3,"keyup.enter"],[2,"margin","5px 0 0 10px"],["attachmentNameTpl",""],["nzHasFeedback","","nzErrorTip","\u89c6\u9891\u6807\u7b7e\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u89c6\u9891\u6807\u7b7e","formControlName","videoType"],["nzLabel","\u4e3b\u8981","nzValue","1"],["nzLabel","\u51b2\u523a","nzValue","2"],["nzHasFeedback","","nzErrorTip","\u89c6\u9891ID\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nz-input","","type","text","formControlName","videoUrl","placeholder","\u8bf7\u8f93\u5165\u89c6\u9891ID",3,"keyup.enter"],[3,"nzLabel","nzValue"],[3,"nzSpan"],["formControlName","seq",3,"nzStep","nzMin","keyup.enter"],["attachmentNameTplLocal",""],["nzErrorTip","\u8bf7\u4e0a\u4f20\u89c6\u9891",3,"nzSpan"],["limit","1","listType","picture-card","acceptType","flv,avi,mpg,mp4,wmv,mov,3gp,.asf","formControlName","videoUrl",3,"showUploadList","isPolyway","optsChange"],["nz-icon","","nzType","upload",2,"font-size","20px"],[1,"desc"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","type","text","formControlName","missionName","placeholder","\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0"],[2,"margin","5px 0 0 10px","display","inline-block"],["examNameTpl",""],["nzHasFeedback","","nzErrorTip","\u7ec4\u5377\u65b9\u5f0f\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u7ec4\u5377\u65b9\u5f0f","formControlName","formingMethod"],["nzLabel","\u9009\u9898/\u5f55\u9898\u7ec4\u5377",3,"nzValue"],["nzLabel","\u9898\u578b\u96be\u5ea6\u968f\u673a\u7ec4\u5377",3,"nzValue"],["nzLabel","\u77e5\u8bc6\u70b9\u96be\u5ea6\u62bd\u9898\u7ec4\u5377",3,"nzValue"],["nzHasFeedback","","nzErrorTip","\u5b50\u9898\u5e93\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b50\u9898\u5e93","formControlName","subQuestionBank",2,"width","100%",3,"nzNodes","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nzTreeTemplate",""],[1,"custom-node"],["nz-icon","",3,"nzType"],[1,"folder-name"],["nz-icon","","nzType","file"],[1,"file-name"],[2,"text-align","right"],["nz-button","","nzType","primary",2,"margin-right","20px",3,"click"],["nzDefaultExpandAll","","nzShowSearch","","nzPlaceHolder","\u8bf7\u9009\u62e9\u5b50\u9898\u5e93","formControlName","subQuestionBank",2,"width","100%",3,"nzDisabled","nzNodes","nzAllowClear","nzDropdownStyle","nzTreeTemplate","ngModelChange"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u4efb\u52a1\u540d\u79f0","formControlName","name"],["jobNameTpl",""],["nzHasFeedback","","nzErrorTip","\u4efb\u52a1\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","\u8bf7\u9009\u62e9\u4efb\u52a1\u7c7b\u578b","formControlName","taskForm"],["nzLabel","\u8bfe\u524d","nzValue","0"],["nzLabel","\u8bfe\u4e2d","nzValue","1"],["nzLabel","\u8bfe\u540e","nzValue","2"],["nzTreeTemplateSubQuestionBank",""],["nz-input","","placeholder","\u540d\u79f0\u641c\u7d22",3,"ngModel","ngModelChange","keyup.enter"],["nz-input","","placeholder","ID\u641c\u7d22","type","number","min","0",3,"ngModel","ngModelChange","keyup.enter"],[3,"click",4,"ngIf"],["nzType","vertical"],[3,"click"],["nzHasFeedback","","nzErrorTip","\u673a\u8003\u7c7b\u578b\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","computerType"],["nzValue","1","nzLabel","\u521d\u7ea7"],["nzValue","2","nzLabel","\u4e2d\u7ea7"],["nzValue","3","nzLabel","\u7a0e\u52a1\u5e08"],[2,"position","absolute"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"],[1,"association-table"],[2,"margin-bottom","10px"],["nz-icon","","nzType","caret-right","nzTheme","outline","style","cursor: pointer",3,"click",4,"ngIf"],["nz-icon","","nzType","caret-down","nzTheme","outline","style","cursor: pointer",3,"click",4,"ngIf"],[3,"ngClass",4,"ngFor","ngForOf"],["nz-icon","","nzType","caret-right","nzTheme","outline",2,"cursor","pointer",3,"click"],["nz-icon","","nzType","caret-down","nzTheme","outline",2,"cursor","pointer",3,"click"],[3,"ngClass"],[1,"list-item"],[1,"associate-title",3,"title"],["nzPlaceHolder","\u8bf7\u8f93\u5165\u9875\u7801",2,"width","120px","float","right",3,"ngModel","nzMin","nzMax","nzStep","ngModelChange","nzFocus","nzBlur"],[2,"min-width","70px","float","right"],["nz-button","","nzType","dashed",2,"margin","0 10px",3,"disabled","click"],[3,"isPreviewpolyway","previewTitle","resourceUrl","closePreview"]],template:function(e,t){if(1&e&&(y.ac(0,"div",0),y.ac(1,"div",1),y.ac(2,"div",2),y.Pc(3,"\u7ae0\u8282\u7ed3\u6784"),y.Zb(),y.ac(4,"app-course-structure-tree",3,4),y.ic("nodeChange",(function(e){return t.nodeChange(e)})),y.Zb(),y.Nc(6,re,2,0,"span",5),y.Zb(),y.Vb(7,"div",6),y.ac(8,"div",7),y.ac(9,"nz-spin",8),y.ac(10,"div",9),y.Pc(11),y.Nc(12,oe,2,0,"button",10),y.Zb(),y.Nc(13,Ee,10,10,"div",11),y.Nc(14,Le,8,10,"div",11),y.Nc(15,it,10,10,"div",11),y.ac(16,"div",12),y.ac(17,"nz-collapse"),y.ac(18,"nz-collapse-panel",13),y.ic("nzActiveChange",(function(e){return t.active4=e})),y.Nc(19,at,3,3,"ng-template",null,14,y.Oc),y.Nc(21,ct,2,0,"ng-template",null,15,y.Oc),y.ac(23,"div",16),y.ic("cdkDropListDropped",(function(e){return t.sectionDrop(e,"4")})),y.Nc(24,dt,3,2,"ng-container",17),y.Nc(25,pt,2,0,"span",17),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(26,zt,25,14,"ng-template",null,18,y.Oc),y.Nc(28,xt,28,16,"ng-template",null,19,y.Oc),y.Nc(30,_t,26,20,"ng-template",null,20,y.Oc),y.Nc(32,Bt,18,8,"ng-template",null,21,y.Oc),y.Nc(34,Kt,25,15,"ng-template",null,22,y.Oc),y.Nc(36,en,25,9,"ng-template",null,23,y.Oc),y.ac(38,"nz-modal",24),y.ic("nzVisibleChange",(function(e){return t.examListPreview=e}))("nzOnCancel",(function(){return t.examListPreview=!1,t.examSubQuestionBankExam=[]})),y.ac(39,"div",25),y.ac(40,"div",26),y.ac(41,"div",27),y.ac(42,"nz-select",28),y.ic("ngModelChange",(function(e){return t.queryKeywords=e}))("ngModelChange",(function(){return t.queryKeywordsChange()})),y.Vb(43,"nz-option",29),y.Vb(44,"nz-option",30),y.Zb(),y.Nc(45,tn,1,1,"input",31),y.Nc(46,nn,1,1,"input",32),y.Zb(),y.ac(47,"div",27),y.ac(48,"label",33),y.Pc(49,"\u7ec4\u5377\u65b9\u5f0f: "),y.Zb(),y.ac(50,"nz-select",34),y.ic("ngModelChange",(function(e){return t.selectedValue=e})),y.Vb(51,"nz-option",35),y.Vb(52,"nz-option",36),y.Vb(53,"nz-option",37),y.Zb(),y.Zb(),y.ac(54,"div",38),y.ac(55,"label",33),y.Pc(56,"\u5b50\u9898\u5e93: "),y.Zb(),y.ac(57,"nz-spin",8),y.ac(58,"nz-tree-select",39),y.ic("ngModelChange",(function(e){return t.examSubQuestionBankExam=e}))("ngModelChange",(function(e){return t.subQuestionBankChangeSearch(e,"examSearch")})),y.Zb(),y.Zb(),y.Nc(59,rn,3,2,"ng-template",null,40,y.Oc),y.Zb(),y.Zb(),y.ac(61,"button",41),y.ic("click",(function(){return t.getCallList("exam")})),y.Pc(62,"\u67e5\u8be2 "),y.Zb(),y.Zb(),y.ac(63,"nz-spin",8),y.ac(64,"nz-table",42,43),y.ac(66,"thead"),y.ac(67,"tr"),y.ac(68,"th",44),y.Pc(69,"\u8bd5\u5377ID"),y.Zb(),y.ac(70,"th",45),y.Pc(71,"\u8bd5\u5377\u540d\u79f0"),y.Zb(),y.ac(72,"th",44),y.Pc(73,"\u8bd5\u5377\u5e74\u4efd"),y.Zb(),y.ac(74,"th",44),y.Pc(75,"\u7ec4\u5377\u65b9\u5f0f"),y.Zb(),y.ac(76,"th",44),y.Pc(77,"\u8bd5\u5377\u5206\u7c7b"),y.Zb(),y.ac(78,"th",46),y.Pc(79,"\u9898\u91cf"),y.Zb(),y.ac(80,"th",46),y.Pc(81,"\u5206\u6570"),y.Zb(),y.ac(82,"th",47),y.Pc(83,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(84,"tbody"),y.Nc(85,ln,21,9,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(86,"nz-modal",49),y.ic("nzVisibleChange",(function(e){return t.exerciseListPreview=e}))("nzOnCancel",(function(){return t.exerciseListPreview=!1,t.homeworkSubQuestionBank=[]})),y.ac(87,"nz-spin",8),y.ac(88,"div",25),y.ac(89,"div",50),y.ac(90,"div",51),y.ac(91,"nz-select",28),y.ic("ngModelChange",(function(e){return t.queryKeywordsJob=e}))("ngModelChange",(function(){return t.queryKeywordsJobChange()})),y.Vb(92,"nz-option",52),y.Vb(93,"nz-option",53),y.Zb(),y.Nc(94,un,1,1,"input",31),y.Nc(95,dn,1,1,"input",32),y.Zb(),y.ac(96,"div",51),y.ac(97,"label",33),y.Pc(98,"\u5b50\u9898\u5e93: "),y.Zb(),y.ac(99,"nz-spin",8),y.ac(100,"nz-tree-select",54),y.ic("ngModelChange",(function(e){return t.homeworkSubQuestionBank=e}))("ngModelChange",(function(e){return t.subQuestionBankChangeSearch(e,"exerciseSearch")})),y.Zb(),y.Zb(),y.Nc(101,fn,3,2,"ng-template",null,55,y.Oc),y.Zb(),y.ac(103,"button",56),y.ic("click",(function(){return t.getCallList("exercise")})),y.Pc(104,"\u67e5\u8be2"),y.Zb(),y.Zb(),y.Zb(),y.ac(105,"nz-table",42,57),y.ac(107,"thead"),y.ac(108,"tr"),y.ac(109,"th",44),y.Pc(110,"\u4f5c\u4e1aID"),y.Zb(),y.ac(111,"th",45),y.Pc(112,"\u4f5c\u4e1a\u540d\u79f0"),y.Zb(),y.ac(113,"th",46),y.Pc(114,"\u9898\u91cf"),y.Zb(),y.ac(115,"th",46),y.Pc(116,"\u5206\u6570"),y.Zb(),y.ac(117,"th",47),y.Pc(118,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(119,"tbody"),y.Nc(120,mn,15,6,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(121,"nz-modal",58),y.ic("nzVisibleChange",(function(e){return t.questionnairePreview=e}))("nzOnCancel",(function(){return t.closeQuestionnaire("questionnaireType")})),y.ac(122,"div",25),y.ac(123,"div",50),y.ac(124,"div",51),y.ac(125,"label",33),y.Pc(126,"\u5173\u952e\u8bcd\u641c\u7d22: "),y.Zb(),y.ac(127,"input",59),y.ic("ngModelChange",(function(e){return t.questionnaireName=e})),y.Zb(),y.Zb(),y.ac(128,"div",51),y.ac(129,"label",33),y.Pc(130,"\u95ee\u5377\u7c7b\u578b: "),y.Zb(),y.ac(131,"nz-select",60),y.ic("ngModelChange",(function(e){return t.questionnaireType=e})),y.Vb(132,"nz-option",61),y.Vb(133,"nz-option",62),y.Zb(),y.Zb(),y.ac(134,"button",63),y.ic("click",(function(){return t.questionnaireCall("questionnaireType")})),y.Pc(135,"\u67e5\u8be2"),y.Zb(),y.ac(136,"button",64),y.ic("click",(function(){return t.newQuestionnaire("questionnaireType")})),y.Pc(137," \u65b0\u589e\u95ee\u5377 "),y.Zb(),y.Zb(),y.Zb(),y.ac(138,"nz-spin",8),y.ac(139,"nz-table",42,65),y.ac(141,"thead"),y.ac(142,"tr"),y.ac(143,"th",44),y.Pc(144,"\u95ee\u5377ID"),y.Zb(),y.ac(145,"th",45),y.Pc(146,"\u95ee\u5377\u540d\u79f0"),y.Zb(),y.ac(147,"th",44),y.Pc(148,"\u95ee\u5377\u7c7b\u578b"),y.Zb(),y.ac(149,"th",44),y.Pc(150,"\u95ee\u5377\u5b66\u79d1"),y.Zb(),y.ac(151,"th",44),y.Pc(152,"\u9898\u91cf"),y.Zb(),y.ac(153,"th",46),y.Pc(154,"\u95ee\u5377\u72b6\u6001"),y.Zb(),y.ac(155,"th",47),y.Pc(156,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(157,"tbody"),y.Nc(158,yn,19,8,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(159,"nz-modal",66),y.ic("nzVisibleChange",(function(e){return t.evaluationPreview=e}))("nzOnCancel",(function(){return t.closeQuestionnaire("evaluationType")})),y.ac(160,"div",25),y.ac(161,"div",50),y.ac(162,"div",51),y.ac(163,"label",33),y.Pc(164,"\u5173\u952e\u8bcd\u641c\u7d22: "),y.Zb(),y.ac(165,"input",59),y.ic("ngModelChange",(function(e){return t.evaluationName=e})),y.Zb(),y.Zb(),y.ac(166,"div",51),y.ac(167,"label",33),y.Pc(168,"\u6d4b\u8bc4\u7c7b\u578b: "),y.Zb(),y.ac(169,"nz-select",67),y.ic("ngModelChange",(function(e){return t.evaluationType=e})),y.Vb(170,"nz-option",68),y.Vb(171,"nz-option",69),y.Zb(),y.Zb(),y.ac(172,"button",63),y.ic("click",(function(){return t.questionnaireCall("evaluationType")})),y.Pc(173,"\u67e5\u8be2"),y.Zb(),y.ac(174,"button",64),y.ic("click",(function(){return t.newQuestionnaire("evaluationType")})),y.Pc(175,"\u65b0\u589e\u6d4b\u8bc4 "),y.Zb(),y.Zb(),y.Zb(),y.ac(176,"nz-spin",8),y.ac(177,"nz-table",42,70),y.ac(179,"thead"),y.ac(180,"tr"),y.ac(181,"th",44),y.Pc(182,"\u6d4b\u8bc4ID"),y.Zb(),y.ac(183,"th",45),y.Pc(184,"\u6d4b\u8bc4\u540d\u79f0"),y.Zb(),y.ac(185,"th",44),y.Pc(186,"\u6d4b\u8bc4\u7c7b\u578b"),y.Zb(),y.ac(187,"th",44),y.Pc(188,"\u6d4b\u8bc4\u5b66\u79d1"),y.Zb(),y.ac(189,"th",44),y.Pc(190,"\u9898\u91cf"),y.Zb(),y.ac(191,"th",46),y.Pc(192,"\u6d4b\u8bc4\u72b6\u6001"),y.Zb(),y.ac(193,"th",47),y.Pc(194,"\u64cd\u4f5c"),y.Zb(),y.Zb(),y.Zb(),y.ac(195,"tbody"),y.Nc(196,Pn,19,8,"tr",48),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(197,"nz-modal",71),y.ic("nzVisibleChange",(function(e){return t.isVisible=e}))("nzOnCancel",(function(){return t.isVisible=!1})),y.ac(198,"nz-spin",8),y.ac(199,"form",72),y.ac(200,"nz-form-item"),y.ac(201,"nz-form-label",73),y.Pc(202,"\u8003\u8bd5\u65f6\u957f"),y.Zb(),y.ac(203,"nz-form-control",74),y.Vb(204,"nz-input-number",75),y.Pc(205," \u5206\u949f "),y.Zb(),y.Zb(),y.ac(206,"nz-form-item"),y.ac(207,"nz-form-label",73),y.Pc(208,"\u53ca\u683c\u5206\u6570"),y.Zb(),y.ac(209,"nz-form-control",76),y.Vb(210,"nz-input-number",77),y.Zb(),y.Zb(),y.ac(211,"nz-form-item"),y.ac(212,"nz-form-label",73),y.Pc(213,"\u8bd5\u5377\u7c7b\u578b"),y.Zb(),y.ac(214,"nz-form-control",78),y.ac(215,"nz-select",79),y.ic("ngModelChange",(function(e){return t.paperTypeChange(e)})),y.Vb(216,"nz-option",80),y.Vb(217,"nz-option",81),y.Vb(218,"nz-option",82),y.Vb(219,"nz-option",83),y.Vb(220,"nz-option",84),y.Zb(),y.Zb(),y.Zb(),y.Nc(221,Cn,8,2,"nz-form-item",17),y.ac(222,"nz-form-item"),y.ac(223,"nz-form-label",73),y.Pc(224,"\u662f\u5426\u91cd\u8003"),y.Zb(),y.ac(225,"nz-form-control",85),y.ac(226,"nz-radio-group",86),y.ac(227,"label",87),y.Pc(228,"\u662f"),y.Zb(),y.ac(229,"label",88),y.Pc(230,"\u5426"),y.Zb(),y.Zb(),y.Nc(231,En,2,0,"div",89),y.Zb(),y.Zb(),y.ac(232,"nz-form-item"),y.ac(233,"nz-form-label",73),y.Pc(234,"\u7b54\u9898\u6b21\u6570"),y.Zb(),y.ac(235,"nz-form-control",90),y.ac(236,"nz-radio-group",91),y.ic("ngModelChange",(function(e){return t.examSettingForm.value.answerTimes=e}))("ngModelChange",(function(){return t.clearStatus("examSettingForm")})),y.ac(237,"label",92),y.Pc(238,"\u65e0\u9650\u5236"),y.Zb(),y.ac(239,"label",92),y.ac(240,"nz-input-number",93),y.ic("ngModelChange",(function(e){return t.value=e})),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.ac(241,"nz-form-item"),y.ac(242,"nz-form-label",73),y.Pc(243,"\u51fa\u6210\u7ee9"),y.Zb(),y.ac(244,"nz-form-control",94),y.ac(245,"nz-radio-group",95),y.ac(246,"label",96),y.Pc(247,"\u4ea4\u5377\u5373\u51fa"),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(248,wn,5,1,"div",97),y.Zb(),y.ac(249,"nz-modal",98),y.ic("nzVisibleChange",(function(e){return t.isQuestionnaireVisible=e}))("nzOnCancel",(function(){return t.isQuestionnaireVisible=!1})),y.ac(250,"form",72),y.ac(251,"nz-form-item"),y.ac(252,"nz-form-label",73),y.Pc(253,"\u7b54\u9898\u6b21\u6570"),y.Zb(),y.ac(254,"nz-form-control",90),y.ac(255,"nz-radio-group",99),y.ic("ngModelChange",(function(e){return t.questionnairSettingForm.value.answerTimes=e}))("ngModelChange",(function(){return t.clearStatus("questionnairSettingForm")})),y.ac(256,"label",92),y.Pc(257,"\u65e0\u9650\u5236"),y.Zb(),y.ac(258,"label",92),y.ac(259,"nz-input-number",100),y.ic("ngModelChange",(function(e){return t.answerTimesValue=e})),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Zb(),y.Nc(260,xn,5,0,"div",97),y.Zb(),y.ac(261,"nz-modal",101),y.ic("nzVisibleChange",(function(e){return t.visibleAssociate=e}))("nzOnCancel",(function(){return t.completebind()})),y.ac(262,"nz-spin",8),y.ac(263,"div",102),y.ac(264,"span",103),y.Pc(265),y.Zb(),y.ac(266,"span",104),y.ic("click",(function(){return t.previewHandout(t.currentAssocate)})),y.Vb(267,"i",105),y.Pc(268," \u9884\u89c8 "),y.Zb(),y.Zb(),y.Nc(269,Ln,6,4,"div",106),y.Nc(270,Nn,3,0,"div",97),y.Zb(),y.Zb(),y.Nc(271,_n,1,3,"app-resource-preview-modal",107)),2&e){var n=y.Cc(5),i=y.Cc(20),a=y.Cc(60),c=y.Cc(65),r=y.Cc(102),o=y.Cc(106),s=y.Cc(140),l=y.Cc(178);y.Eb(4),y.tc("chapterSelectable",!1)("coursePacketId",t.coursePacketId)("defaultSection",t.defaultSection)("defaultExpandedKeys",t.defaultExpandedKeys),y.Eb(2),y.tc("ngIf","1"===t.preview&&!(null!=n&&n.nodes.length)),y.Eb(3),y.tc("nzSpinning",t.listLoading||t.hanoutLoading)("nzDelay",0),y.Eb(2),y.Rc(" ",null==t.curNode||null==t.curNode.data?null:t.curNode.data.title," "),y.Eb(1),y.tc("ngIf","22"===t.teachType),y.Eb(1),y.tc("ngIf","22"!==t.teachType),y.Eb(1),y.tc("ngIf","22"===t.teachType),y.Eb(1),y.tc("ngIf","22"!==t.teachType),y.Eb(2),y.Lc(y.wc(134,Pe)),y.Eb(1),y.Lc(y.wc(135,Ce)),y.tc("nzActive",t.active4)("nzHeader",i),y.Eb(6),y.tc("ngIf","0"===t.preview||(null==t.handoutsMaterial?null:t.handoutsMaterial.length)),y.Eb(1),y.tc("ngIf","1"===t.preview&&!(null!=t.handoutsMaterial&&t.handoutsMaterial.length)),y.Eb(13),y.tc("nzVisible",t.examListPreview)("nzFooter",null)("nzBodyStyle",y.wc(136,Fn)),y.Eb(4),y.tc("ngModel",t.queryKeywords),y.Eb(3),y.tc("ngIf",2===t.NumberS(t.queryKeywords)),y.Eb(1),y.tc("ngIf",1===t.NumberS(t.queryKeywords)),y.Eb(4),y.tc("ngModel",t.selectedValue),y.Eb(7),y.tc("nzSpinning",t.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzNodes",t.examSearch)("ngModel",t.examSubQuestionBankExam)("nzDropdownStyle",y.wc(137,Nt))("nzTreeTemplate",a),y.Eb(5),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(1),y.tc("nzData",t.listOfData)("nzScroll",y.wc(138,Vn))("nzFrontPagination",!1),y.Eb(21),y.tc("ngForOf",c.data),y.Eb(1),y.tc("nzVisible",t.exerciseListPreview)("nzFooter",null)("nzBodyStyle",y.wc(139,Fn)),y.Eb(1),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(4),y.tc("ngModel",t.queryKeywordsJob),y.Eb(3),y.tc("ngIf",2===t.NumberS(t.queryKeywordsJob)),y.Eb(1),y.tc("ngIf",1===t.NumberS(t.queryKeywordsJob)),y.Eb(4),y.tc("nzSpinning",t.searchLoad)("nzDelay",0),y.Eb(1),y.tc("nzNodes",t.exerciseSearch)("ngModel",t.homeworkSubQuestionBank)("nzDropdownStyle",y.wc(140,Nt))("nzTreeTemplate",r),y.Eb(5),y.tc("nzData",t.listOfDataExercise)("nzScroll",y.wc(141,Vn))("nzFrontPagination",!1),y.Eb(15),y.tc("ngForOf",o.data),y.Eb(1),y.tc("nzVisible",t.questionnairePreview)("nzFooter",null)("nzBodyStyle",y.wc(142,Fn)),y.Eb(6),y.tc("ngModel",t.questionnaireName),y.Eb(4),y.tc("ngModel",t.questionnaireType),y.Eb(7),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(1),y.tc("nzData",t.listOfQuestionnaireData)("nzScroll",y.wc(143,Vn))("nzFrontPagination",!1),y.Eb(19),y.tc("ngForOf",s.data),y.Eb(1),y.tc("nzVisible",t.evaluationPreview)("nzFooter",null)("nzBodyStyle",y.wc(144,Fn)),y.Eb(6),y.tc("ngModel",t.evaluationName),y.Eb(4),y.tc("ngModel",t.evaluationType),y.Eb(7),y.tc("nzSpinning",t.isCallLoading)("nzDelay",0),y.Eb(1),y.tc("nzData",t.listOfEvaluationData)("nzScroll",y.wc(145,Vn))("nzFrontPagination",!1),y.Eb(19),y.tc("ngForOf",l.data),y.Eb(1),y.tc("nzVisible",t.isVisible)("nzMaskClosable",!1),y.Eb(1),y.tc("nzSpinning",t.examSettingLoading)("nzDelay",0),y.Eb(1),y.tc("formGroup",t.examSettingForm),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzMin",1)("nzStep",1),y.Eb(3),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("nzMin",1)("nzStep",1),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(7),y.tc("ngIf","5"===t.examSettingForm.value.paperType),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(6),y.tc("ngIf","6"===t.examSettingForm.value.paperType&&("3"===t.examType||"2"===t.examType)),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("ngModel",t.examSettingForm.value.answerTimes)("nzDisabled","2"===t.exerciseType||null),y.Eb(1),y.tc("nzValue",0),y.Eb(2),y.tc("nzValue",1),y.Eb(1),y.tc("ngModel",t.value)("nzMin",1)("nzMax",100)("nzStep",1)("ngModelOptions",y.wc(146,jn))("disabled","2"===t.exerciseType||null),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(5),y.tc("nzVisible",t.isQuestionnaireVisible)("nzMaskClosable",!1),y.Eb(1),y.tc("formGroup",t.questionnairSettingForm),y.Eb(2),y.tc("nzSpan",5),y.Eb(2),y.tc("nzSpan",18),y.Eb(1),y.tc("ngModel",t.questionnairSettingForm.value.answerTimes),y.Eb(1),y.tc("nzValue",0),y.Eb(2),y.tc("nzValue",1),y.Eb(1),y.tc("ngModel",t.answerTimesValue)("nzMin",1)("nzMax",100)("nzStep",1)("ngModelOptions",y.wc(147,jn)),y.Eb(2),y.tc("nzVisible",t.visibleAssociate)("nzMaskClosable",!1)("nzFooter",null)("nzBodyStyle",y.wc(148,Dn)),y.Eb(1),y.tc("nzSpinning",t.bindLoading)("nzDelay",0),y.Eb(3),y.Rc(" \u4e3b\u8bb2\u4e49\uff08\u5171",t.totalPage,"\u9875\uff09 "),y.Eb(4),y.tc("ngForOf",t.assocateClassLists),y.Eb(2),y.tc("ngIf",t.previewStart)}},directives:[I.a,z.n,T.a,Z.a,Z.c,p.d,C.a,h.d,r.o,r.q,h.a,N.a,_.a,F.a,V.a,j.c,j.j,j.k,j.b,j.h,j.e,z.m,D.b,r.c,r.y,r.p,A.b,r.i,q.c,A.c,q.a,A.d,A.a,U.a,r.g,B.c,B.b,C.b,L.a,R.d,p.a,$.a,z.o,Q.a,r.v,r.r,r.x,z.l,W.a,W.b,W.e,H.c,H.d,J.a,r.s,K.a,G.a],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex}.container[_ngcontent-%COMP%]   .not-content[_ngcontent-%COMP%]{text-align:center;margin:20px 0 0 12px}.container[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]{height:100%;flex:0 0 250px;padding:15px;overflow-x:hidden;overflow-y:auto}.container[_ngcontent-%COMP%]   .gap[_ngcontent-%COMP%]{width:100%;height:100%;flex:0 0 20px;background-color:#f0f2f5}.container[_ngcontent-%COMP%]   .right-content[_ngcontent-%COMP%]{padding-left:15px;width:calc(100% - 270px);height:100%;overflow:auto}.container[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%;padding:15px 15px 0;overflow-x:hidden;overflow-y:auto}.list[_ngcontent-%COMP%]{position:relative;width:100%}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;cursor:pointer;padding:0 10px;transition:all .3s}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:inline-block;width:300px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;word-break:break-all}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-button[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-containers[_ngcontent-%COMP%]{opacity:0;visibility:hidden}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-button[_ngcontent-%COMP%]{transition:none}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]{outline:none;padding-left:10px;min-width:100px;border:1px solid #40a9ff;height:30px;border-radius:3px;visibility:hidden!important;opacity:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-container.disable-select[_ngcontent-%COMP%]{color:#9e9b9b;border:1px solid #ada9a9;cursor:not-allowed}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .other-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{border:none;outline:none;padding-left:10px;font-size:14px;visibility:hidden!important;opacity:0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]{opacity:0;white-space:nowrap;overflow:hidden}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   .action-group[_ngcontent-%COMP%]   [nz-button][_ngcontent-%COMP%]{padding:0 12px 0 0}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:#fafafa}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .action-group[_ngcontent-%COMP%]{opacity:1}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-button[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-container[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-containers[_ngcontent-%COMP%]{visibility:visible!important;opacity:1}.list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-button[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-container[_ngcontent-%COMP%]   option[_ngcontent-%COMP%], .list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover   .other-containers[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{visibility:visible!important}.list[_ngcontent-%COMP%]   .add-section[_ngcontent-%COMP%]{width:100%;height:45px;box-sizing:border-box;display:flex;justify-content:space-between;align-items:center}.row-title[_ngcontent-%COMP%]{font-size:18px;line-height:22px;padding-left:10px;margin-bottom:15px}[_nghost-%COMP%]     .ant-collapse>.ant-collapse-item>.ant-collapse-header{background-color:#fafafa}[_nghost-%COMP%]     .ant-collapse-content>.ant-collapse-content-box{padding:16px 30px}.title-name[_ngcontent-%COMP%]{text-overflow:ellipsis;overflow:hidden;display:inline-block}@media screen and (min-width:1200px) and (max-width:1400px){.list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:150px}}@media screen and (min-width:1401px) and (max-width:1600px){.list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:250px}}@media screen and (min-width:1601px) and (max-width:1800px){.list[_ngcontent-%COMP%] > .list-item[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{width:350px}}.header[_ngcontent-%COMP%]{width:100%}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;overflow:hidden;display:inline-block}.header[_ngcontent-%COMP%]   .header-container.wcl[_ngcontent-%COMP%]{width:calc(100% - 85px)!important}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]{width:33.3%;float:left;display:flex;margin-right:20px}.header[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .w31[_ngcontent-%COMP%]{width:31%!important}.associate[_ngcontent-%COMP%]{overflow:hidden;padding-bottom:10px;margin-top:-20px;border-bottom:1px solid grey}  .association-table .ant-avatar-string{position:static}.font-question[_ngcontent-%COMP%]{font-size:20px;cursor:pointer;color:#fff;background-color:#1890ff;border-radius:50%;vertical-align:bottom}.associate-title[_ngcontent-%COMP%]{display:inline-block;width:238px;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;vertical-align:-webkit-baseline-middle}.association-table[_ngcontent-%COMP%]{padding:10px 0}.association-table[_ngcontent-%COMP%]   .association-list[_ngcontent-%COMP%]{transition:all .3s;overflow:hidden}.association-table[_ngcontent-%COMP%]   .association-list.h0[_ngcontent-%COMP%]{height:0}.association-table[_ngcontent-%COMP%]   .association-list[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]{overflow:hidden;margin-bottom:10px}nz-tree[_ngcontent-%COMP%]{overflow:hidden;margin:0 -24px;padding:0 24px}.custom-node[_ngcontent-%COMP%]{cursor:pointer;line-height:24px;display:inline-block}.custom-node[_ngcontent-%COMP%], .file-name[_ngcontent-%COMP%], .folder-name[_ngcontent-%COMP%]{margin-left:4px}.file-desc[_ngcontent-%COMP%], .folder-desc[_ngcontent-%COMP%]{padding:0 8px;display:inline-block;background:#87ceff;color:#fff;position:relative;left:12px}.mr0[_ngcontent-%COMP%]{margin-right:0!important}[_nghost-%COMP%]     .ant-btn>.anticon+span{margin-left:5px}  .evaluation-table .ant-table-expanded-row-fixed{left:50%!important;transform:translateX(-50%)!important}"]}),e}()},Wc2E:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var i=n("HDdC"),a=n("WTGI"),c=n("tk/3"),r=n("AytR"),o=n("mhyn"),s=n("fXoL"),l=n("JFwS"),u=function(){var e=function e(t,n){var o=this;_classCallCheck(this,e),this.httpService=t,this.httpClient=n,this.uploadOss=function(e,t){return new i.a((function(n){o.httpService.post("res/oss/getPolicy",{dir:t},{}).subscribe((function(t){200===t.status?(o.uploadData=t.data,o.customReq(e).subscribe((function(e){n.next(e),n.unsubscribe()}))):(n.next(!1),n.unsubscribe())}),(function(e){n.next(!1),n.unsubscribe()}))}))},this.customReq=function(e){var t=new FormData,n=o.uploadData.dir+a.a.getRandomFileName()+"."+a.a.getFileExt(e.name);t.append("OSSAccessKeyId",o.uploadData.accessKeyId),t.append("policy",o.uploadData.policy),t.append("Signature",o.uploadData.signature),t.append("key",n),t.append("success_action_status","200"),t.append("file",e);var s=new c.h("POST",r.a.OSS_URL,t,{reportProgress:!0});return new i.a((function(e){o.httpClient.request(s).subscribe((function(t){t.type===c.f.UploadProgress||t instanceof c.i&&(e.next("/"+n),e.unsubscribe())}),(function(){e.next(!1),e.unsubscribe()}))}))}};return e.\u0275fac=function(t){return new(t||e)(s.ec(l.a),s.ec(c.c))},e.\u0275prov=s.Qb({token:e,factory:e.\u0275fac,providedIn:o.a}),e}()},bSaw:function(e,t,n){"use strict";n.d(t,"a",(function(){return Z}));var i=n("3Pt+"),a=n("WTGI"),c=n("HDdC"),r=n("4tR+"),o=n("Vhue"),s=n("+O+V"),l=n("fXoL"),u=n("PScX"),d=n("dEAy"),p=n("Wc2E"),b=n("uMH2"),f=n("19W7"),h=n("qAZ0"),g=n("ocnv"),m=n("B+r4"),v=n("PTRe"),z=n("zAKX"),y=n("D9mS"),k=n("OzZK"),S=n("RwU8"),P=n("C2AL"),C=n("FwiY"),E=n("ofXK");function w(e,t){1&e&&(l.ac(0,"div"),l.Pc(1,"\u516c\u53f8\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),l.Zb())}function x(e,t){1&e&&(l.ac(0,"div"),l.Pc(1,"\u516c\u53f8\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc740\u4e2a\u5b57\u7b26 "),l.Zb())}function O(e,t){if(1&e&&(l.Nc(0,w,2,0,"div",23),l.Nc(1,x,2,0,"div",23)),2&e){var n=t.$implicit;l.tc("ngIf",n.hasError("required")),l.Eb(1),l.tc("ngIf",n.hasError("maxlength"))}}function M(e,t){1&e&&(l.ac(0,"div"),l.Pc(1," \u652f\u6301zip\u3001rar\u683c\u5f0f "),l.Zb())}function I(e,t){if(1&e){var n=l.bc();l.ac(0,"div"),l.ac(1,"button",25),l.ic("click",(function(){return l.Ec(n),l.lc().cancel()})),l.Pc(2,"\u53d6\u6d88"),l.Zb(),l.ac(3,"button",26),l.ic("click",(function(){return l.Ec(n),l.lc().save()})),l.Pc(4,"\u786e\u5b9a"),l.Zb(),l.Zb()}if(2&e){var i=l.lc();l.Eb(3),l.tc("nzLoading",i.newCompanyLoading)}}var T=function(){return{showPreviewIcon:!1,showRemoveIcon:!0,showDownloadIcon:!1}},Z=function(){var e=function(){function e(t,n,i,s,l,u,d){var p=this;_classCallCheck(this,e),this.nzMesService=t,this.nzModalService=n,this.nzModalRef=i,this.fb=s,this.uploadOssService=l,this.courseManageService=u,this.statisticsLogService=d,this.newCompanyLoading=!1,this.nzFileList=[],this.isUsed=o.a.getPacketInfoItem("isUsed"),this.acceptType=["zip","rar"],this.beforeUpload=function(e){return new c.a((function(t){var n=!0;e.name.length>35&&(p.nzMesService.error("\u6587\u4ef6\u540d\u5b57\u592a\u957f\u5566\uff0c\u4fdd\u8bc1\u5305\u542b\u6269\u5c55\u540d35\u4e2a\u6587\u5b57\u4ee5\u5185"),n=!1),p.acceptType.indexOf(a.a.getExt(e.name))<0&&(p.nzMesService.error("\u8bf7\u4e0a\u4f20zip\u6216rar\u538b\u7f29\u7c7b\u578b\u7684\u6587\u4ef6"),n=!1),n?(t.next(!0),t.complete()):t.next(!1)}))},this.removeFileSelf=function(e){p.nzFileList=[],p.newCompanyForm.patchValue({filePath:""}),p.newCompanyForm.controls.filePath.markAsUntouched(),p.newCompanyForm.controls.filePath.markAsPristine(),p.newCompanyForm.controls.filePath.updateValueAndValidity()},this.customRewardRequest=function(e){p.newCompanyLoading=!0,p.uploadOssService.uploadOss(e.file,r.a.company_file).subscribe((function(t){p.newCompanyLoading=!1,p.newCompanyForm.patchValue({filePath:t}),e.onSuccess(Object.assign({},e),e.file,{})}),(function(t){p.newCompanyLoading=!1,e.onError(t,e.file),p.nzMesService.error(JSON.stringify(t))}))}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this.companyItem;if(e.id){var t=e.name,n=e.termType,c=e.filePath,r=e.fileName,o=e.permission,s={name:t,termType:n,filePath:c,permission:o?o.split(","):[]};this.nzFileList=[Object.assign(Object.assign({},s),{uid:a.a.getRandomFileName(),name:r})],this.newCompanyForm=new i.h({name:new i.e({value:s.name,disabled:this.isUsed>0},[i.w.required,i.w.maxLength(40)]),termType:new i.e({value:s.termType,disabled:this.isUsed>0},i.w.required),filePath:new i.e(s.filePath,i.w.required),permission:new i.e(s.permission,i.w.required)})}else this.newCompanyForm=this.fb.group({name:["",[i.w.required,i.w.maxLength(40)]],termType:[0,[i.w.required]],filePath:["",[i.w.required]],permission:[["\u4e1a\u52a1\u4e2d\u5fc3","\u6570\u5b57\u5927\u8111"],[i.w.required]]})}},{key:"save",value:function(){var e,t,n=this;for(var i in this.newCompanyForm.controls)this.newCompanyForm.controls.hasOwnProperty(i)&&(this.newCompanyForm.controls[i].markAsDirty(),this.newCompanyForm.controls[i].updateValueAndValidity());if(!this.newCompanyForm.invalid){this.newCompanyLoading=!0;var c=null===(e=this.companyItem)||void 0===e?void 0:e.seq,r={id:null===(t=this.companyItem)||void 0===t?void 0:t.id,courseId:this.courseId,coursePacketId:this.coursePacketId,name:this.newCompanyForm.value.name,seq:c||a.a.getMaxSeq(this.companyLists),filePath:this.newCompanyForm.value.filePath,status:1,fileName:this.nzFileList[0].name,termType:this.newCompanyForm.value.termType,permission:this.newCompanyForm.value.permission.join(",")};this.courseManageService.addCoursePacketCompany(r).subscribe((function(e){n.newCompanyLoading=!1;var t=!!n.companyItem.id;n.statisticsLogService.statisticsPacketInfoLog({name:t?"\u4fee\u6539\u516c\u53f8\u4fe1\u606f":"\u65b0\u589e\u516c\u53f8",actionCode:s.j.packetInfo["otherSet-99train-action"][t?"modify":"addCode"],content:JSON.stringify(r)}),201===e.status&&n.nzModalRef.close(!0)}),(function(){n.newCompanyLoading=!1}))}}},{key:"cancel",value:function(){this.nzModalRef.close(!1)}},{key:"getNameLength",value:function(){var e=this.newCompanyForm.controls.name;return"string"==typeof e?e.length:e.value.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(l.Ub(u.e),l.Ub(d.e),l.Ub(d.d),l.Ub(i.d),l.Ub(p.a),l.Ub(b.a),l.Ub(f.a))},e.\u0275cmp=l.Ob({type:e,selectors:[["app-new-company"]],inputs:{courseId:"courseId",coursePacketId:"coursePacketId",companyLists:"companyLists",companyItem:"companyItem"},decls:39,vars:29,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","placeholder","\u8bf7\u8f93\u5165\u516c\u53f8\u540d\u79f0","formControlName","name"],[2,"margin-left","10px"],["nameTpl",""],["nzHasFeedback","","nzErrorTip","\u6709\u6548\u671f\u9650\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","termType",2,"flex","1",3,"nzShowSearch"],["nzLabel","\u534a\u5e74",3,"nzValue"],["nzLabel","1\u5e74",3,"nzValue"],["nzLabel","2\u5e74",3,"nzValue"],["nzLabel","3\u5e74",3,"nzValue"],["nzHasFeedback","","nzErrorTip","\u6743\u9650\u8bbe\u7f6e\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["formControlName","permission","nzMode","multiple",2,"flex","1",3,"nzShowSearch"],["nzValue","\u4e1a\u52a1\u4e2d\u5fc3","nzLabel","\u4e1a\u52a1\u4e2d\u5fc3"],["nzValue","\u6570\u5b57\u5927\u8111","nzLabel","\u6570\u5b57\u5927\u8111"],["nzValue","\u8d22\u52a1\u4e2d\u5fc3","nzLabel","\u8d22\u52a1\u4e2d\u5fc3"],["nzHasFeedback","","nzErrorTip","\u6570\u636e\u5305\u4e0d\u80fd\u4e3a\u7a7a",3,"nzSpan"],["type","hidden","formControlName","filePath"],[3,"nzBeforeUpload","nzCustomRequest","nzRemove","nzFileList","nzShowUploadList","nzFileListChange"],["nz-button","",3,"disabled"],["nz-icon","","nzType","upload",2,"font-size","20px"],[4,"ngIf"],[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){if(1&e&&(l.ac(0,"nz-spin",0),l.ac(1,"form",1),l.ac(2,"nz-form-item"),l.ac(3,"nz-form-label",2),l.Pc(4,"\u516c\u53f8\u540d\u79f0"),l.Zb(),l.ac(5,"nz-form-control",3),l.Vb(6,"input",4),l.Zb(),l.ac(7,"span",5),l.Pc(8),l.Zb(),l.Nc(9,O,2,2,"ng-template",null,6,l.Oc),l.Zb(),l.ac(11,"nz-form-item"),l.ac(12,"nz-form-label",2),l.Pc(13,"\u6709\u6548\u671f\u9650"),l.Zb(),l.ac(14,"nz-form-control",7),l.ac(15,"nz-select",8),l.Vb(16,"nz-option",9),l.Vb(17,"nz-option",10),l.Vb(18,"nz-option",11),l.Vb(19,"nz-option",12),l.Zb(),l.Zb(),l.Zb(),l.ac(20,"nz-form-item"),l.ac(21,"nz-form-label",2),l.Pc(22,"\u6743\u9650\u8bbe\u7f6e"),l.Zb(),l.ac(23,"nz-form-control",13),l.ac(24,"nz-select",14),l.Vb(25,"nz-option",15),l.Vb(26,"nz-option",16),l.Vb(27,"nz-option",17),l.Zb(),l.Zb(),l.Zb(),l.ac(28,"nz-form-item"),l.ac(29,"nz-form-label",2),l.Pc(30,"\u4e0a\u4f20\u6570\u636e\u5305"),l.Zb(),l.ac(31,"nz-form-control",18),l.Vb(32,"input",19),l.ac(33,"nz-upload",20),l.ic("nzFileListChange",(function(e){return t.nzFileList=e})),l.ac(34,"button",21),l.Vb(35,"i",22),l.Pc(36,"\u672c\u5730\u4e0a\u4f20 "),l.Zb(),l.Nc(37,M,2,0,"div",23),l.Zb(),l.Zb(),l.Zb(),l.Zb(),l.Nc(38,I,5,1,"div",24),l.Zb()),2&e){var n=l.Cc(10);l.tc("nzSpinning",t.newCompanyLoading)("nzDelay",0),l.Eb(1),l.tc("formGroup",t.newCompanyForm),l.Eb(2),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18)("nzErrorTip",n),l.Eb(2),l.Mc("color",t.newCompanyForm.controls.name.hasError("maxlength")?"red":"inherit"),l.Eb(1),l.Rc(" ",t.getNameLength(),"/40"),l.Eb(4),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18),l.Eb(1),l.tc("nzShowSearch",!0),l.Eb(1),l.tc("nzValue",0),l.Eb(1),l.tc("nzValue",1),l.Eb(1),l.tc("nzValue",2),l.Eb(1),l.tc("nzValue",3),l.Eb(2),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18),l.Eb(1),l.tc("nzShowSearch",!0),l.Eb(5),l.tc("nzSpan",5),l.Eb(2),l.tc("nzSpan",18),l.Eb(2),l.tc("nzBeforeUpload",t.beforeUpload)("nzCustomRequest",t.customRewardRequest)("nzRemove",t.removeFileSelf)("nzFileList",t.nzFileList)("nzShowUploadList",l.wc(28,T)),l.Eb(1),l.tc("disabled",!!t.newCompanyForm.value.filePath||null),l.Eb(3),l.tc("ngIf",!t.newCompanyForm.value.filePath)}},directives:[h.a,i.y,i.p,g.b,i.i,m.c,g.c,m.a,g.d,g.a,v.b,i.c,i.o,i.g,z.d,z.a,y.a,k.a,S.a,P.a,C.a,E.n,d.b],styles:[""]}),e}()},duvs:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),a=n("3Pt+"),c=n("uMH2"),r=n("PScX"),o=n("VXpv"),s=n("TaO5");function l(e,t){1&e&&i.Pc(0),2&e&&i.Rc(" \u8fd8\u6709 ",t.$implicit.length," \u4e2a\u6821\u533a/\u5927\u533a...")}var u=function(){return{"max-height":"400px"}},d=function(){var e=function(){function e(t,n,a){_classCallCheck(this,e),this.cdr=t,this.courseMgService=n,this.nzMsg=a,this.opts=[],this.selectedValues=[],this.expandKeys=[],this.checkAll={flag:!1},this.schoolZone=new i.n,this.dataLength=0,this.dataPLength=0,this.onModelChange=function(e){}}return _createClass(e,[{key:"ngOnInit",value:function(){this.collegeList()}},{key:"writeValue",value:function(e){this.selectedValues=e,this.setExpandKeys(),this.detectChange()}},{key:"registerOnChange",value:function(e){this.onModelChange=e}},{key:"registerOnTouched",value:function(e){}},{key:"setDisabledState",value:function(e){}},{key:"collegeList",value:function(){var e=this;this.courseMgService.collegeList("area").subscribe((function(t){if(200===t.status){e.opts=e.formatOpts(t.data).filter((function(e){return e.children.length})),e.dataLength=0,e.dataPLength=e.opts.length,e.opts.forEach((function(t){t.children&&t.children.length&&(e.dataLength+=t.children.length)}));var n=e.opts,i=e.dataLength,a=e.dataPLength;e.schoolZone.emit({opts:n,dataLength:i,dataPLength:a}),e.setExpandKeys(),e.detectChange()}else e.nzMsg.error(t.message)}),(function(t){e.nzMsg.error(JSON.stringify(t))}))}},{key:"formatOpts",value:function(e){return e.map((function(e){return{key:"AREA_"+e.typeCode,value:e.typeCode,title:e.typeName,children:(t=e.chlidren,t&&0!==t.length?t.map((function(e){return{key:e.oCode,value:e.oCode,title:e.orgName,isLeaf:!0}})):[])};var t}))}},{key:"selectedChange",value:function(e){var t=e.every((function(e,t){if(e.indexOf("AREA_")<0)return!0}));this.checkAll.flag=t?this.dataLength===e.length:this.dataPLength===e.length,this.setModalChange(e,!1)}},{key:"setExpandKeys",value:function(){var e=this;if(this.selectedValues&&0!==this.opts.length&&0!==this.selectedValues.length){var t,n=_toConsumableArray(this.selectedValues),i=[],a=_createForOfIteratorHelper(this.opts);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(0!==c.children.length){var r,o=_createForOfIteratorHelper(c.children);try{var s=function(){var t=r.value;if(0===n.length)return{v:void(e.expandKeys=Array.from(new Set(i)))};var a=n.findIndex((function(e){return e===t.key}));-1!==a&&(i.push(c.key),n.splice(a,1))};for(o.s();!(r=o.n()).done;){var l=s();if("object"==typeof l)return l.v}}catch(u){o.e(u)}finally{o.f()}}}}catch(u){a.e(u)}finally{a.f()}}}},{key:"checkAllStatus",value:function(e){if(e){var t=[];this.opts.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){t.push(e.key)}))})),this.selectedValues=t,this.setModalChange(t,!0)}else this.selectedValues=[],this.setModalChange([],!0)}},{key:"setModalChange",value:function(e,t){var n=this;if(t)this.onModelChange(e);else{var i=e.reduce((function(e,t){if(t.startsWith("AREA_")){var i=n.opts.find((function(e){return e.key===t})).children.map((function(e){return e.key}));Array.prototype.push.apply(e,i)}else e.push(t);return e}),[]);this.onModelChange(i)}}},{key:"detectChange",value:function(){this.cdr.markForCheck()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Ub(i.h),i.Ub(c.a),i.Ub(r.e))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-school-zone"]],inputs:{checkAll:"checkAll"},outputs:{schoolZone:"schoolZone"},features:[i.Db([{provide:a.m,useExisting:Object(i.W)((function(){return e})),multi:!0}])],decls:5,vars:10,consts:[["nzShowSearch","","nzCheckable","",2,"width","80%",3,"ngModel","nzNodes","nzExpandedKeys","nzMultiple","nzMaxTagCount","nzMaxTagPlaceholder","nzDropdownStyle","nzHideUnMatched","ngModelChange"],["nz-checkbox","",2,"margin-left","10px",3,"ngModel","ngModelChange"],["omittedPlaceHolder",""]],template:function(e,t){if(1&e&&(i.ac(0,"nz-tree-select",0),i.ic("ngModelChange",(function(e){return t.selectedValues=e}))("ngModelChange",(function(e){return t.selectedChange(e)})),i.Zb(),i.ac(1,"label",1),i.ic("ngModelChange",(function(e){return t.checkAll.flag=e}))("ngModelChange",(function(e){return t.checkAllStatus(e)})),i.Pc(2,"\u5168\u9009"),i.Zb(),i.Nc(3,l,1,1,"ng-template",null,2,i.Oc)),2&e){var n=i.Cc(4);i.tc("ngModel",t.selectedValues)("nzNodes",t.opts)("nzExpandedKeys",t.expandKeys)("nzMultiple",!0)("nzMaxTagCount",10)("nzMaxTagPlaceholder",n)("nzDropdownStyle",i.wc(9,u))("nzHideUnMatched",!0),i.Eb(1),i.tc("ngModel",t.checkAll.flag)}},directives:[o.a,a.o,a.q,s.a],styles:[""],changeDetection:0}),e}()},"i+L+":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n("fXoL"),a=n("Vhue"),c=n("WTGI"),r=n("mhyn"),o=n("4tR+"),s=n("HDdC"),l=n("+O+V"),u=n("tyNb"),d=n("pz6Z"),p=n("PScX"),b=n("uMH2"),f=n("dEAy"),h=n("b5Nk"),g=n("3Pt+"),m=n("iacB"),v=n("2+G5"),z=n("jhN1"),y=n("Wc2E"),k=n("19W7"),S=n("qAZ0"),P=n("D9mS"),C=n("OzZK"),E=n("RwU8"),w=n("C2AL"),x=n("FwiY");function O(e,t){if(1&e){var n=i.bc();i.ac(0,"div"),i.ac(1,"button",7),i.ic("click",(function(){return i.Ec(n),i.lc().cancel()})),i.Pc(2,"\u53d6\u6d88"),i.Zb(),i.ac(3,"button",8),i.ic("click",(function(){return i.Ec(n),i.lc().save()})),i.Pc(4,"\u786e\u5b9a"),i.Zb(),i.Zb()}if(2&e){var a=i.lc();i.Eb(3),i.tc("nzLoading",a.rewardSettingsLoading)}}var M=function(){return{showPreviewIcon:!0,showRemoveIcon:!1,showDownloadIcon:!1}},I=function(){var e=function(){function e(t,n,i,a,r,l,u,d,p,b,f,h,g,m,v,z,y){var k=this;_classCallCheck(this,e),this.route=t,this.menuService=n,this.nzMesService=i,this.courseMgService=a,this.nzModalService=r,this.nzModalRef=l,this.aliOssService=u,this.fb=d,this.modalService=p,this.knowledgeManageService=b,this.renderer2=f,this.trainManageService=h,this.sanitizer=g,this.uploadOssService=m,this.statisticsLogService=v,this.locale=z,this.win=y,this.limitTask=1e4,this.rewardSettingsLoading=!1,this.nzFileList=[],this.nzFileListBak=[],this.beforeUpload=function(e){return new s.a((function(t){return e.name.length>35?(k.nzMesService.error("\u6587\u4ef6\u540d\u5b57\u592a\u957f\u5566\uff0c\u4fdd\u8bc1\u5305\u542b\u6269\u5c55\u540d35\u4e2a\u6587\u5b57\u4ee5\u5185"),t.next(!1),void t.complete()):"jpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,pdf,mp4".indexOf(c.a.getExt(e.name))<0?(k.nzMesService.error("\u8bf7\u4e0a\u4f20\u540e\u7f00\u540d\u4e3ajpg,jpeg,png,doc,docx,xls,xlsx,ppt,pptx,pdf,mp4\u7c7b\u578b\u7684\u6587\u4ef6\uff01"),t.next(!1),void t.complete()):(t.next(!0),void t.complete())}))},this.customRewardRequest=function(e){k.rewardSettingsLoading=!0,k.uploadOssService.uploadOss(e.file,o.a.reward_file).subscribe((function(t){k.rewardSettingsLoading=!1,e.file.url=t,e.onSuccess(Object.assign({},e),e.file,{})}),(function(t){k.rewardSettingsLoading=!1,e.onError(t,e.file),k.nzMesService.error(JSON.stringify(t))}))}}return _createClass(e,[{key:"ngOnInit",value:function(){this.nzFileList=this.currentCard.coursePacketCardRecourseList||[],this.nzFileListBak=JSON.parse(JSON.stringify(this.nzFileList))}},{key:"resourceCall",value:function(){a.a.putScpResourceMaterial({type:"scp-section-handout",professionId:this.professionId,sectionInfo:{courseId:this.courseId,coursePacketId:this.coursePacketId,coursePacketCardId:this.currentCard.id},seq:c.a.getMaxSeq(this.nzFileList),nodes:this.nzFileList?this.nzFileList.map((function(e){return{taskId:e.id,id:e.resourceId}})):[],isStandard:"",limit:this.limitTask}),a.a.removeReadtree(),this.nzModalRef.close(!0),this.menuService.gotoUrl({url:"/m/rm/read",paramUrl:"?from=scp&task=2&reward=1"})}},{key:"diffFileChange",value:function(e,t){return this.nzFileList.length!==this.nzFileListBak.length||!(!this.nzFileList.length||this.nzFileList.filter((function(e){return e.id})).length===this.nzFileList.length)||void 0}},{key:"save",value:function(){var e=this;if(this.nzFileList.length){this.rewardSettingsLoading=!0;var t=[];this.nzFileList.forEach((function(n,i){var a={courseId:e.courseId,coursePacketId:e.coursePacketId,coursePacketCardId:e.currentCard.id,seq:i,id:n.id};n.originFileObj&&(a.attachmentPath=n.originFileObj.url),n.originFileObj&&(a.title=n.originFileObj.name),t.push(a)})),this.courseMgService.levelInformationBatchUpload(t).subscribe((function(n){e.rewardSettingsLoading=!1,201===n.status?(e.diffFileChange(e.nzFileList,e.nzFileListBak)&&e.statisticsLogService.statisticsPacketInfoLog({name:"\u5173\u5361\u5956\u52b1\u8bbe\u7f6e\u672c\u5730\u4e0a\u4f20",actionCode:l.j.packetInfo["otherSet-levelthrough-action"].modify,content:JSON.stringify(t)}),e.nzModalRef.close(!0)):500===n.status&&e.nzMesService.warning(n.message)}),(function(){e.rewardSettingsLoading=!1}))}else this.nzMesService.warning("\u8bf7\u5148\u4e0a\u4f20\u6587\u4ef6")}},{key:"cancel",value:function(){this.nzModalRef.close(!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Ub(u.a),i.Ub(d.a),i.Ub(p.e),i.Ub(b.a),i.Ub(f.e),i.Ub(f.d),i.Ub(h.a),i.Ub(g.d),i.Ub(f.e),i.Ub(m.a),i.Ub(i.E),i.Ub(v.a),i.Ub(z.b),i.Ub(y.a),i.Ub(k.a),i.Ub(i.u),i.Ub(r.b))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-reward-settings"]],inputs:{courseId:"courseId",professionId:"professionId",coursePacketId:"coursePacketId",currentCard:"currentCard"},decls:10,vars:7,consts:[[3,"nzSpinning","nzDelay"],[2,"max-width","100px","margin-right","16px"],["nzMultiple","",3,"nzBeforeUpload","nzShowUploadList","nzFileList","nzCustomRequest","nzFileListChange"],["nz-button","",2,"margin-bottom","20px"],["nz-icon","","nzType","upload",2,"font-size","20px"],["nz-button","",2,"position","absolute","left","220px","top","0",3,"click"],[4,"nzModalFooter"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){1&e&&(i.ac(0,"nz-spin",0),i.ac(1,"span",1),i.Pc(2,"\u672c\u5730\u4e0a\u4f20\uff1a"),i.Zb(),i.ac(3,"nz-upload",2),i.ic("nzFileListChange",(function(e){return t.nzFileList=e})),i.ac(4,"button",3),i.Vb(5,"i",4),i.Pc(6,"\u4e0a\u4f20\u6587\u4ef6 "),i.Zb(),i.Zb(),i.ac(7,"button",5),i.ic("click",(function(){return t.resourceCall()})),i.Pc(8," \u8d44\u6e90\u8c03\u7528 "),i.Zb(),i.Zb(),i.Nc(9,O,5,1,"div",6)),2&e&&(i.tc("nzSpinning",t.rewardSettingsLoading)("nzDelay",0),i.Eb(3),i.tc("nzBeforeUpload",t.beforeUpload)("nzShowUploadList",i.wc(6,M))("nzFileList",t.nzFileList)("nzCustomRequest",t.customRewardRequest))},directives:[S.a,P.a,C.a,E.a,w.a,x.a,f.b],styles:[""]}),e}()},ngz8:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var i=n("3Pt+"),a=n("3JH+"),c=n("+O+V"),r=n("fXoL"),o=n("PScX"),s=n("dEAy"),l=n("uMH2"),u=n("19W7"),d=n("qAZ0"),p=n("ocnv"),b=n("B+r4"),f=n("PTRe"),h=n("ofXK"),g=n("OzZK"),m=n("RwU8"),v=n("C2AL");function z(e,t){1&e&&(r.ac(0,"div"),r.Pc(1,"\u8bfe\u6b21\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a "),r.Zb())}function y(e,t){1&e&&(r.ac(0,"div"),r.Pc(1,"\u8bfe\u6b21\u540d\u79f0\u4e0d\u80fd\u8d85\u8fc725\u4e2a\u5b57\u7b26"),r.Zb())}function k(e,t){if(1&e&&(r.Nc(0,z,2,0,"div",8),r.Nc(1,y,2,0,"div",8)),2&e){var n=t.$implicit;r.tc("ngIf",n.hasError("required")),r.Eb(1),r.tc("ngIf",n.hasError("maxlength"))}}function S(e,t){if(1&e){var n=r.bc();r.ac(0,"div"),r.ac(1,"button",9),r.ic("click",(function(){return r.Ec(n),r.lc().cancel()})),r.Pc(2,"\u53d6\u6d88"),r.Zb(),r.ac(3,"button",10),r.ic("click",(function(){return r.Ec(n),r.lc().save()})),r.Pc(4,"\u786e\u5b9a"),r.Zb(),r.Zb()}if(2&e){var i=r.lc();r.Eb(3),r.tc("nzLoading",i.editLessonLoading)}}var P=function(){var e=function(){function e(t,n,c,r,o,s){_classCallCheck(this,e),this.nzMesService=t,this.nzModalService=n,this.nzModalRef=c,this.fb=r,this.courseManageService=o,this.statisticsLogService=s,this.data={},this.editLessonLoading=!1,this.courseForm=this.fb.group({name:["",[i.w.required,Object(a.b)(),i.w.maxLength(25)]]})}return _createClass(e,[{key:"ngOnInit",value:function(){this.courseForm.patchValue({name:this.data.name})}},{key:"save",value:function(){var e=this;for(var t in this.courseForm.controls)this.courseForm.controls.hasOwnProperty(t)&&(this.courseForm.controls[t].markAsDirty(),this.courseForm.controls[t].updateValueAndValidity());if(!this.courseForm.invalid){this.editLessonLoading=!0;var n=this.data,i=n.id,a=n.courseId,r=n.coursePacketId,o=n.seq,s={id:i,name:this.courseForm.value.name,courseId:a,coursePacketId:r,seq:o};this.courseManageService.saveTable(s).subscribe((function(t){e.editLessonLoading=!1,201===t.status&&(e.statisticsLogService.statisticsPacketInfoLog({name:"\u7f16\u8f91\u8bfe\u6b21",actionCode:c.j.packetInfo["otherSet-lessons-action"].modify,content:JSON.stringify(s)}),e.nzModalRef.close(!0))}),(function(){e.editLessonLoading=!1}))}}},{key:"cancel",value:function(){this.nzModalRef.close(!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(r.Ub(o.e),r.Ub(s.e),r.Ub(s.d),r.Ub(i.d),r.Ub(l.a),r.Ub(u.a))},e.\u0275cmp=r.Ob({type:e,selectors:[["app-edit-lesson"]],inputs:{data:"data"},decls:12,vars:9,consts:[[3,"nzSpinning","nzDelay"],["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSpan"],["nzHasFeedback","",3,"nzSpan","nzErrorTip"],["nz-input","","type","text","formControlName","name","placeholder","\u8bf7\u8f93\u5165",3,"keyup.enter"],[2,"margin-left","10px","margin-top","5px","display","inline-block"],["nameTpl",""],[4,"nzModalFooter"],[4,"ngIf"],["nz-button","",3,"click"],["nz-button","","nzType","primary",3,"nzLoading","click"]],template:function(e,t){if(1&e&&(r.ac(0,"nz-spin",0),r.ac(1,"form",1),r.ac(2,"nz-form-item"),r.ac(3,"nz-form-label",2),r.Pc(4,"\u8bfe\u6b21\u540d\u79f0"),r.Zb(),r.ac(5,"nz-form-control",3),r.ac(6,"input",4),r.ic("keyup.enter",(function(){return t.save()})),r.Zb(),r.Zb(),r.ac(7,"span",5),r.Pc(8),r.Zb(),r.Nc(9,k,2,2,"ng-template",null,6,r.Oc),r.Zb(),r.Zb(),r.Nc(11,S,5,1,"div",7),r.Zb()),2&e){var n=r.Cc(10);r.tc("nzSpinning",t.editLessonLoading)("nzDelay",0),r.Eb(1),r.tc("formGroup",t.courseForm),r.Eb(2),r.tc("nzSpan",5),r.Eb(2),r.tc("nzSpan",18)("nzErrorTip",n),r.Eb(2),r.Mc("color",t.courseForm.controls.name.hasError("maxlength")?"red":"inherit"),r.Eb(1),r.Rc(" ",t.courseForm.value.name.length,"/25")}},directives:[d.a,i.y,i.p,p.b,i.i,b.c,p.c,b.a,p.d,p.a,f.b,i.c,i.o,i.g,s.b,h.n,g.a,m.a,v.a],styles:[""]}),e}()},odmk:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var i=n("3Pt+"),a=n("3JH+"),c=n("fXoL"),r=n("uMH2"),o=n("dEAy"),s=n("ocnv"),l=n("B+r4"),u=n("PTRe"),d=n("OzZK"),p=n("RwU8"),b=n("C2AL"),f=n("ofXK");function h(e,t){1&e&&(c.Yb(0),c.Pc(1," \u8bf7\u8f93\u5165\u8282\u540d\u79f0 "),c.Xb())}function g(e,t){1&e&&(c.Yb(0),c.Pc(1," \u540d\u79f060\u5b57\u4ee5\u5185 "),c.Xb())}function m(e,t){1&e&&(c.Yb(0),c.Pc(1," \u91cd\u590d\u540d\u79f0 "),c.Xb())}function v(e,t){if(1&e&&(c.Nc(0,h,2,0,"ng-container",8),c.Nc(1,g,2,0,"ng-container",8),c.Nc(2,m,2,0,"ng-container",8)),2&e){var n=t.$implicit;c.tc("ngIf",n.hasError("required")),c.Eb(1),c.tc("ngIf",n.hasError("maxlength")),c.Eb(1),c.tc("ngIf",n.hasError("repeatName"))}}var z=function(){return{span:24,offset:0}},y=function(){return{span:16,offset:8}},k=function(){var e=function(){function e(t,n,i){_classCallCheck(this,e),this.fb=t,this.courseMgService=n,this.nzModalRef=i,this.loading=!1,this.lock=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.formGroup=this.fb.group({name:[this.formData?this.formData.name:"",[i.w.required,i.w.maxLength(60),Object(a.a)(this.data.children),Object(a.b)()]]})}},{key:"getSeq",value:function(e){var t=0;return e.forEach((function(e){e.seq>t&&(t=e.seq)})),t+=1}},{key:"save",value:function(){var e=this;if(!this.lock){if(Object.keys(this.formGroup.controls).forEach((function(t){e.formGroup.controls[t].markAsDirty(),e.formGroup.controls[t].updateValueAndValidity()})),this.formGroup.invalid)return;this.lock=!0;var t=this.formData?this.formData.id:"",n=this.formData&&this.formData.seq?this.formData.seq:this.data.children.length?this.getSeq(this.data.children):1,i={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:this.data.id,name:this.data.name,seq:this.data.seq,sections:[{id:t,name:this.formGroup.value.name,seq:n}]}]};this.loading=!0,this.courseMgService.save_courseChapter(i).subscribe((function(t){e.lock=!1,e.loading=!1,200===t.status&&e.nzModalRef.close(t.data)}),(function(){return e.lock=!1}))}}},{key:"cancel",value:function(){this.nzModalRef.close(null)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(c.Ub(i.d),c.Ub(r.a),c.Ub(o.d))},e.\u0275cmp=c.Ob({type:e,selectors:[["app-structure-adjustment-section"]],inputs:{data:"data",formData:"formData",courseId:"courseId",coursePacketId:"coursePacketId"},decls:14,vars:11,consts:[["nz-form","",3,"formGroup"],["nzRequired","",3,"nzSm","nzXs"],[3,"nzSm","nzXs","nzErrorTip"],["nz-input","","formControlName","name","placeholder","\u8bf7\u8f93\u5165\u8282\u540d\u79f0\uff0c60\u5b57\u4ee5\u5185"],["errNameTipsTpl",""],[3,"nzXs","nzSm"],["nz-button","","nzType","primary",3,"nzLoading","click"],["nz-button","","nzType","default",2,"margin-left","20px",3,"click"],[4,"ngIf"]],template:function(e,t){if(1&e&&(c.ac(0,"form",0),c.ac(1,"nz-form-item"),c.ac(2,"nz-form-label",1),c.Pc(3,"\u672c\u8282\u540d\u79f0"),c.Zb(),c.ac(4,"nz-form-control",2),c.Vb(5,"input",3),c.Nc(6,v,3,3,"ng-template",null,4,c.Oc),c.Zb(),c.Zb(),c.ac(8,"nz-form-item"),c.ac(9,"nz-form-control",5),c.ac(10,"button",6),c.ic("click",(function(){return t.save()})),c.Pc(11,"\u4fdd\u5b58"),c.Zb(),c.ac(12,"button",7),c.ic("click",(function(){return t.cancel()})),c.Pc(13,"\u53d6\u6d88"),c.Zb(),c.Zb(),c.Zb(),c.Zb()),2&e){var n=c.Cc(7);c.tc("formGroup",t.formGroup),c.Eb(2),c.tc("nzSm",6)("nzXs",24),c.Eb(2),c.tc("nzSm",16)("nzXs",24)("nzErrorTip",n),c.Eb(5),c.tc("nzXs",c.wc(9,z))("nzSm",c.wc(10,y)),c.Eb(1),c.tc("nzLoading",t.loading)}},directives:[i.y,i.p,s.b,i.i,l.c,s.c,l.a,s.d,s.a,u.b,i.c,i.o,i.g,d.a,p.a,b.a,f.n],styles:[""]}),e}()},qjn6:function(e,t,n){"use strict";n.d(t,"a",(function(){return i.a})),n.d(t,"r",(function(){return a.a})),n.d(t,"m",(function(){return A})),n.d(t,"n",(function(){return q.a})),n.d(t,"p",(function(){return U.a})),n.d(t,"o",(function(){return B.a})),n.d(t,"c",(function(){return R.a})),n.d(t,"f",(function(){return $.a})),n.d(t,"i",(function(){return Q.a})),n.d(t,"k",(function(){return W.a})),n.d(t,"h",(function(){return H.a})),n.d(t,"g",(function(){return J.a})),n.d(t,"d",(function(){return K.a})),n.d(t,"b",(function(){return se})),n.d(t,"e",(function(){return fe})),n.d(t,"l",(function(){return ze})),n.d(t,"j",(function(){return ke})),n.d(t,"q",(function(){return Se.a}));var i=n("WZ4L"),a=n("DzeW"),c=n("fXoL"),r=n("PScX"),o=n("LRne"),s=n("HDdC"),l=n("JFwS"),u=n("tyNb"),d=n("uMH2"),p=n("ofXK"),b=n("qAZ0"),f=n("nxWG"),h=n("Wfee"),g=n("aPPm"),m=n("PTRe"),v=n("3Pt+"),z=n("C2AL"),y=n("FwiY"),k=n("KupA"),S=["treeVar"];function P(e,t){if(1&e&&(c.Yb(0),c.Vb(1,"nz-alert",11),c.Xb()),2&e){var n=t.$implicit;c.Eb(1),c.uc("nzMessage",n+"\u6ca1\u6709\u8282,\u8bf7\u7acb\u5373\u6dfb\u52a0!")}}function C(e,t){if(1&e&&(c.ac(0,"div",9),c.Nc(1,P,2,1,"ng-container",10),c.Zb()),2&e){var n=c.lc();c.Eb(1),c.tc("ngForOf",n.emptyChapter)}}function E(e,t){if(1&e){var n=c.bc();c.ac(0,"qkc-profession-label-add",12),c.ic("showChange",(function(e){return c.Ec(n),c.lc().prefessionLabelShowChange(e)}))("addChange",(function(e){return c.Ec(n),c.lc().addChapter(e)})),c.Zb()}if(2&e){var i=c.lc();c.tc("notPermitedShow",i.isAddModel)("placeholder","\u8bf7\u8f93\u5165\u7ae0\u540d\u79f0")}}function w(e,t){1&e&&c.Wb(0)}function x(e,t){1&e&&c.Wb(0)}var O=function(e){return{$implicit:e}};function M(e,t){if(1&e&&(c.ac(0,"span",18),c.Nc(1,x,1,0,"ng-container",15),c.Zb()),2&e){var n=c.lc().$implicit;c.lc();var i=c.Cc(11);c.Eb(1),c.tc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.xc(2,O,n))}}function I(e,t){1&e&&c.Wb(0)}function T(e,t){if(1&e&&(c.ac(0,"span",18),c.Nc(1,I,1,0,"ng-container",15),c.Zb()),2&e){var n=c.lc().$implicit;c.lc();var i=c.Cc(13);c.Eb(1),c.tc("ngTemplateOutlet",i)("ngTemplateOutletContext",c.xc(2,O,n))}}function Z(e,t){if(1&e&&(c.ac(0,"span",13),c.ac(1,"span",14),c.Nc(2,w,1,0,"ng-container",15),c.Zb(),c.ac(3,"span",16),c.Nc(4,M,2,4,"span",17),c.Nc(5,T,2,4,"span",17),c.Zb(),c.Zb()),2&e){var n=t.$implicit,i=c.lc(),a=c.Cc(9);c.Eb(2),c.tc("ngTemplateOutlet",a)("ngTemplateOutletContext",c.xc(4,O,n)),c.Eb(2),c.tc("ngIf",!n.origin.isEdit&&!i.isStandard),c.Eb(1),c.tc("ngIf",n.origin.isEdit)}}function L(e,t){if(1&e&&(c.ac(0,"span"),c.Pc(1),c.Zb()),2&e){var n=c.lc().$implicit;c.Eb(1),c.Qc(n.title)}}function N(e,t){if(1&e){var n=c.bc();c.ac(0,"input",21),c.ic("ngModelChange",(function(e){return c.Ec(n),c.lc().$implicit.origin.editTitle=e}))("keyup.enter",(function(){c.Ec(n);var e=c.lc().$implicit;return c.lc().confirmEdit(e)})),c.Zb()}if(2&e){var i=c.lc().$implicit;c.tc("ngModel",i.origin.editTitle)}}function _(e,t){if(1&e&&(c.Nc(0,L,2,1,"span",19),c.Nc(1,N,1,1,"input",20)),2&e){var n=t.$implicit;c.tc("ngIf",!n.origin.isEdit),c.Eb(1),c.tc("ngIf",n.origin.isEdit)}}function F(e,t){if(1&e){var n=c.bc();c.Yb(0),c.ac(1,"i",25),c.ic("click",(function(){c.Ec(n);var e=c.lc().$implicit;return c.lc().add(e)})),c.Zb(),c.Xb()}}function V(e,t){if(1&e){var n=c.bc();c.ac(0,"i",22),c.ic("click",(function(){c.Ec(n);var e=t.$implicit;return c.lc().edit(e)})),c.Zb(),c.ac(1,"i",23),c.ic("nzOnConfirm",(function(){c.Ec(n);var e=t.$implicit;return c.lc().delete(e)})),c.Zb(),c.Nc(2,F,2,0,"ng-container",19),c.Vb(3,"i",24)}if(2&e){var i=t.$implicit;c.Eb(2),c.tc("ngIf",!i.isLeaf)}}function j(e,t){if(1&e){var n=c.bc();c.ac(0,"i",26),c.ic("click",(function(){c.Ec(n);var e=t.$implicit;return c.lc().confirmEdit(e)})),c.Zb(),c.ac(1,"i",27),c.ic("click",(function(){c.Ec(n);var e=t.$implicit;return c.lc().cancelEdit(e)})),c.Zb(),c.Vb(2,"i",24)}}var D,A=((D=function(){function e(t,n,i){var a=this;_classCallCheck(this,e),this.injector=t,this.route=n,this.courseMgService=i,this.isLoading=!1,this.nodes=[],this.isDraggable=!0,this.nodeChange=new c.n,this.courseId="",this.coursePacketId="",this.isPermittedDrag=!1,this.emptyChapter=[],this.isAddModel=!1,this.expandedKeys=[],this.isStandard=!1,this.beforeDrop=function(e){var t;return t=null===(e.dragNode.parentNode||e.node.parentNode)?0!==e.pos:null!==(e.dragNode.parentNode&&e.node.parentNode)&&e.dragNode.parentNode.key===e.node.parentNode.key,a.isPermittedDrag=t,Object(o.a)(t)}}return _createClass(e,[{key:"ngOnInit",value:function(){this.courseId=this.route.snapshot.paramMap.get("courseId"),this.coursePacketId=this.route.snapshot.paramMap.get("id"),this.isStandard="1"===this.route.snapshot.paramMap.get("status"),this.getChapter()}},{key:"nzEvent",value:function(e){var t=this;if("click"===e.eventName)this.activedNode&&this.activedNode.key!==e.node.key&&!0===this.activedNode.origin.isEdit&&(this.activedNode.title=this.activedNode.origin.cacheTitle,this.activedNode.origin.isEdit=!1),this.activedNode=e.node;else if("dragend"===e.eventName){if(this.isPermittedDrag){var n=this.treeCom.getTreeNodes(),i=this.resort(n),a=this.transformPostTreeData(i);this.courseMgService.save_courseChapter(a).subscribe((function(e){t.renderTree(e)}),(function(e){}))}}else if("expand"===e.eventName){this.expandedKeys=e.keys;var c=e.node;0===(null==c?void 0:c.getChildren().length)&&(null==c?void 0:c.isExpanded)&&this.getSection(c)}}},{key:"saveNode",value:function(e){var t=this;e.origin.name=e.title;var n=this.transformPostTreeData(this.nodes);this.courseMgService.save_courseChapter(n).subscribe((function(e){t.renderTree(e.data)}))}},{key:"confirmEdit",value:function(e){if(""!==e.origin.editTitle.trim()){var t=e.parentNode?e.parentNode.children:this.nodes;if(this.checkRepeatedName(e.origin.editTitle.trim(),t,[e.key]))return this.isAddModel=!1,void this.nzMesService.error("\u91cd\u590d\u540d\u79f0");this.isAddModel=!1,e.title=e.origin.editTitle.trim(),this.saveNode(e)}else this.nzMesService.error("\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a")}},{key:"cancelEdit",value:function(e){this.isAddModel=!1,e.title=e.origin.cacheTitle,-1!==e.key.indexOf("qkc")&&e.remove(),e.origin.isEdit=!1}},{key:"edit",value:function(e){e.origin.editTitle=e.title,e.origin.isEdit=!0}},{key:"delete",value:function(e){var t=this;1===e.origin._level?this.delTreeNode(e.origin.id,"chapter").subscribe((function(e){t.getCourseChapterTreeNode(t.coursePacketId)})):this.delTreeNode(e.origin.id,"section").subscribe((function(e){t.getCourseChapterTreeNode(t.coursePacketId)}))}},{key:"add",value:function(e){if(this.isPermitAdd()){this.isAddModel=!0;var t={title:"",editTitle:"",key:this.createRandomNodeKey(),isLeaf:!0,isEdit:!0,id:"",seq:e.children.length+1,name:"",_level:e.origin._level+1};this.expandedKeys.includes(e.key)||(this.expandedKeys=[].concat(_toConsumableArray(this.expandedKeys),[e.key])),e.addChildren([t])}}},{key:"resort",value:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].origin);return function e(t){for(var n=0;n<t.length;n++)t[n].seq=n+1,t[n].children&&t[n].children.length>0&&e(t[n].children)}(t),t}},{key:"addChapter",value:function(e){var t=this,n=e.value;if(this.checkRepeatedName(n,this.nodes,[]))return this.isAddModel=!1,void this.nzMesService.error("\u91cd\u590d\u540d\u79f0");this.isAddModel=!1,this.courseMgService.save_courseChapter({courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[{id:"",name:n,seq:this.nodes.length+1}]}).subscribe((function(e){t.getCourseChapterTreeNode(t.coursePacketId)}))}},{key:"createRandomNodeKey",value:function(){return"qkc"+(new Date).getTime()}},{key:"delTreeNode",value:function(e,t){var n=this,i="";switch(t){case"chapter":i="pkg/courseChapter/del";break;case"section":i="pkg/courseSection/del";break;case"secRes":case"secAllRes":i="pkg/courseSectionResource/del";break;default:i=""}return new s.a((function(t){""!==i?n.httpService.post(i,{id:e},{isCommonHttpHeader:!0}).subscribe((function(e){t.next(e),t.unsubscribe()}),(function(e){t.error(e)})):t.error("empty url")}))}},{key:"getCourseChapterTreeNode",value:function(e){var t=this;this.isLoading=!0,this.httpService.post("pkg/courseChapter/courseChapterTreeNode",{coursePacketId:e},{isCommonHttpHeader:!0}).subscribe((function(e){t.isLoading=!1,200===e.status?t.renderTree(e.data):t.nodes=[]}))}},{key:"getChapter",value:function(){var e=this;this.isLoading=!0,this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe((function(t){e.isLoading=!1,200===t.status&&e.renderTree(t.data)}))}},{key:"getSection",value:function(e){var t=this;this.courseMgService.getList_courseSection(e.key).subscribe((function(n){200===n.status?e.addChildren(t.transformSectionTreeNodes(n.data)):e.isLoading=!1}))}},{key:"transformSectionTreeNodes",value:function(e){return e.map((function(e){return Object.assign({title:e.name,cacheTitle:e.name,key:e.id,isEdit:!1,isLeaf:!0,_level:2},e)}))}},{key:"transformTreeNodes",value:function(e){return function e(t,n){for(var i=0;i<t.length;i++)t[i].title=t[i].name,t[i].cacheTitle=t[i].name,t[i].key=t[i].id,t[i].isEdit=!1,-1!==n&&(t[i]._level=n+1),t[i].children&&t[i].children.length>0?(t[i].isLeaf=!1,e(t[i].children,t[i]._level)):t[i].isLeaf=1!==t[i]._level}(e=e.map((function(e){return e._level=1,e})),-1),this.emptyChapter=[],e}},{key:"transformPostTreeData",value:function(e){var t={courseId:this.courseId,coursePacketId:this.coursePacketId,chapters:[]},n=[];return function e(t,i){for(var a=0;a<t.length;a++){var c={};2===t[a]._level?(c={id:t[a].id,name:t[a].name,seq:t[a].seq},i.sections.push(c)):c={id:t[a].id,name:t[a].name,seq:t[a].seq,sections:[]},t[a].children&&t[a].children.length>0?(n.push(c),e(t[a].children,c)):1===t[a]._level&&n.push(c)}}(e,null),t.chapters=n,t}},{key:"prefessionLabelShowChange",value:function(e){this.isAddModel=e}},{key:"isPermitAdd",value:function(){return!this.isAddModel||(this.nzMesService.warning("\u4f60\u5df2\u7ecf\u5728\u6dfb\u52a0\u6a21\u5f0f\u4e86\uff0c\u8bf7\u5904\u7406\u5b8c\u5728\u6dfb\u52a0\uff01"),!1)}},{key:"renderTree",value:function(e){this.nodes=this.transformTreeNodes(e),this.expandedKeys=_toConsumableArray(this.expandedKeys)}},{key:"checkStructure",value:function(){if(0===this.nodes.length)return!1;var e,t=_createForOfIteratorHelper(this.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.children&&0===n.children.length)return!1}}catch(i){t.e(i)}finally{t.f()}return!0}},{key:"checkRepeatedName",value:function(e,t,n){var i,a=_createForOfIteratorHelper(t);try{for(a.s();!(i=a.n()).done;){var c=i.value;if(!n.includes(c.key)&&c.title===e)return!0}}catch(r){a.e(r)}finally{a.f()}return!1}},{key:"nzMesService",get:function(){return this.injector.get(r.e)}},{key:"httpService",get:function(){return this.injector.get(l.a)}}]),e}()).\u0275fac=function(e){return new(e||D)(c.Ub(c.r),c.Ub(u.a),c.Ub(d.a))},D.\u0275cmp=c.Ob({type:D,selectors:[["app-structure-adjust-tree"]],viewQuery:function(e,t){var n;1&e&&c.Vc(S,!0),2&e&&c.Bc(n=c.jc())&&(t.treeCom=n.first)},inputs:{isDraggable:"isDraggable"},outputs:{nodeChange:"nodeChange"},decls:14,vars:9,consts:[["style","margin-bottom: 15px;",4,"ngIf"],[3,"nzSpinning","nzDelay"],["nzAsyncData","",1,"has-bg-tree",3,"nzData","nzExpandedKeys","nzTreeTemplate","nzDraggable","nzBeforeDrop","nzExpandChange","nzOnDragEnd","nzClick"],["treeVar",""],["title","+\u65b0\u589e",3,"notPermitedShow","placeholder","showChange","addChange",4,"ngIf"],["nzTreeTemplate",""],["inputTpl",""],["iconTpl",""],["editTpl",""],[2,"margin-bottom","15px"],[4,"ngFor","ngForOf"],["nzType","warning",3,"nzMessage"],["title","+\u65b0\u589e",3,"notPermitedShow","placeholder","showChange","addChange"],["draggable","",1,"custom-node"],[1,"title"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"icon-container"],["class","icon-row",4,"ngIf"],[1,"icon-row"],[4,"ngIf"],["nz-input","","nzSize","small","class","input-edit","placeholder","\u8bf7\u8f93\u5165\u8282\u540d\u79f0",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],["nz-input","","nzSize","small","placeholder","\u8bf7\u8f93\u5165\u8282\u540d\u79f0",1,"input-edit",3,"ngModel","ngModelChange","keyup.enter"],["nz-icon","","nzType","edit","nzTheme","outline",3,"click"],["nz-icon","","nzType","minus-circle","nzTheme","outline","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u5220\u9664?","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm"],["nz-icon","","nzType","drag","nzTheme","outline","title","\u62d6\u52a8\u8c03\u6574\u7ed3\u6784"],["nz-icon","","nzType","plus-circle","nzTheme","outline",3,"click"],["nz-icon","","nzType","check","nzTheme","outline",3,"click"],["nz-icon","","nzType","close","nzTheme","outline",3,"click"]],template:function(e,t){if(1&e&&(c.Nc(0,C,2,1,"div",0),c.ac(1,"nz-spin",1),c.ac(2,"nz-tree",2,3),c.ic("nzExpandChange",(function(e){return t.nzEvent(e)}))("nzOnDragEnd",(function(e){return t.nzEvent(e)}))("nzClick",(function(e){return t.nzEvent(e)})),c.Zb(),c.Vb(4,"br"),c.Nc(5,E,1,2,"qkc-profession-label-add",4),c.Zb(),c.Nc(6,Z,6,6,"ng-template",null,5,c.Oc),c.Nc(8,_,2,2,"ng-template",null,6,c.Oc),c.Nc(10,V,4,1,"ng-template",null,7,c.Oc),c.Nc(12,j,3,0,"ng-template",null,8,c.Oc)),2&e){var n=c.Cc(7);c.tc("ngIf",0!==t.emptyChapter.length),c.Eb(1),c.tc("nzSpinning",t.isLoading)("nzDelay",0),c.Eb(1),c.tc("nzData",t.nodes)("nzExpandedKeys",t.expandedKeys)("nzTreeTemplate",n)("nzDraggable",t.isDraggable)("nzBeforeDrop",t.beforeDrop),c.Eb(3),c.tc("ngIf",!t.isStandard)}},directives:[p.n,b.a,f.a,p.m,h.a,g.a,p.s,m.b,v.c,v.o,v.q,z.a,y.a,k.a],styles:["[_nghost-%COMP%]     .ant-tree li.drag-over>span[draggable]{color:red;background-color:#8a2be2}[_nghost-%COMP%]     .ant-tree li.drag-over>span[draggable] span{background-color:#8a2be2}[_nghost-%COMP%]     .has-bg-tree .ant-tree li>span{background-color:#f0f1f3!important}[_nghost-%COMP%]     .ant-tree .ant-tree-treenode{align-items:center!important}[_nghost-%COMP%]     .ant-tree .ant-tree-node-content-wrapper{flex:1;background-color:#ddd}.custom-node[_ngcontent-%COMP%]{width:100%;height:40px;display:inline-flex;justify-content:space-between;align-items:center}.custom-node.light-span[_ngcontent-%COMP%]{color:#1890ff}.active[_ngcontent-%COMP%]{background:#1890ff;color:#fff}.title[_ngcontent-%COMP%]{margin-left:4px}.icon-container[_ngcontent-%COMP%], .title[_ngcontent-%COMP%]{display:block}.icon-container[_ngcontent-%COMP%]   .icon-row[_ngcontent-%COMP%]{display:inline-block;color:grey}.icon-container[_ngcontent-%COMP%]   .icon-row[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{cursor:pointer;margin-right:8px}.input-edit[_ngcontent-%COMP%]{width:300px}"]}),D),q=n("ApCc"),U=n("odmk"),B=n("6iFG"),R=n("rb97"),$=n("zGbI"),Q=n("7lsC"),W=n("i+L+"),H=n("BmWY"),J=n("bSaw"),K=n("ngz8"),G=n("Vhue"),X=n("rMZv"),Y=n("xB20");function ee(e,t){1&e&&(c.ac(0,"th"),c.Pc(1,"\u8bb2\u4e49"),c.Zb())}function te(e,t){1&e&&(c.ac(0,"th"),c.Pc(1,"\u5f55\u64ad"),c.Zb())}function ne(e,t){1&e&&(c.ac(0,"th"),c.Pc(1,"\u4efb\u52a1"),c.Zb())}function ie(e,t){if(1&e&&(c.ac(0,"td"),c.Pc(1),c.Zb()),2&e){var n=c.lc().$implicit;c.Eb(1),c.Qc(n.lectureNum)}}function ae(e,t){if(1&e&&(c.ac(0,"td"),c.Pc(1),c.Zb()),2&e){var n=c.lc().$implicit;c.Eb(1),c.Qc(n.videoNum)}}function ce(e,t){if(1&e&&(c.ac(0,"td"),c.Pc(1),c.Zb()),2&e){var n=c.lc().$implicit;c.Eb(1),c.Qc(n.taskNum)}}function re(e,t){if(1&e&&(c.ac(0,"tr"),c.ac(1,"td"),c.Pc(2),c.Zb(),c.ac(3,"td"),c.Pc(4),c.Zb(),c.Nc(5,ie,2,1,"td",5),c.Nc(6,ae,2,1,"td",5),c.Nc(7,ce,2,1,"td",5),c.ac(8,"td"),c.Pc(9),c.Zb(),c.Zb()),2&e){var n=t.$implicit,i=c.lc();c.Eb(2),c.Qc(n.courseChapterName),c.Eb(2),c.Qc(n.courseSectionName),c.Eb(1),c.tc("ngIf","22"!==i.teachType),c.Eb(1),c.tc("ngIf","22"===i.teachType),c.Eb(1),c.tc("ngIf","22"!==i.teachType),c.Eb(2),c.Qc(n.resourseNum)}}var oe,se=((oe=function(){function e(t){_classCallCheck(this,e),this.courseManageService=t,this.listOfData=[],this.lessonCount=0,this.quebankNum=0,this.knowledgeNum=0,this.authorNum=0,this.sectionNum=0,this.teachDemoNum=0}return _createClass(e,[{key:"ngOnInit",value:function(){this.initParams(),this.getDetails()}},{key:"getDetails",value:function(){var e=this;this.courseManageService.getDetails(this.coursePacketId).subscribe((function(t){if(200===t.status){var n=t.data,i=n.studySet,a=n.lessonCount,c=n.quebankNum,r=n.knowledgeNum,o=n.authorNum,s=n.sectionNum,l=n.teachDemoNum;e.listOfData=i||[],e.lessonCount=a||0,e.quebankNum=c||0,e.knowledgeNum=r||0,e.authorNum=o||0,e.sectionNum=s||0,e.teachDemoNum=l||0}}))}},{key:"initParams",value:function(){var e=G.a.getPacketInfo(),t=e.teachType,n=e.preview,i=e.id;this.teachType=t,this.preview=n,this.coursePacketId=i}}]),e}()).\u0275fac=function(e){return new(e||oe)(c.Ub(d.a))},oe.\u0275cmp=c.Ob({type:oe,selectors:[["app-complete-course"]],decls:38,vars:11,consts:[[1,"header"],[1,"content"],[1,"content-title"],[3,"nzData"],["basicTable",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["nzTitle","\u603b\u8bfe\u6b21"],["nzTitle","\u514d\u8d39\u9898\u5e93"],["nzTitle","\u6559\u5b66\u793a\u8303"],["nzTitle","\u6307\u5bfc\u8bb2\u5e08"],["nzTitle","\u7ae0\u8282\u7ed1\u5b9a"]],template:function(e,t){if(1&e&&(c.ac(0,"div",0),c.Pc(1," \u8bfe\u5305\u5185\u5bb9\u7814\u53d1\u7edf\u8ba1\u8868\n"),c.Zb(),c.ac(2,"div",1),c.ac(3,"div",2),c.Pc(4," \u5b66\u4e60\u8bbe\u5b9a "),c.Zb(),c.ac(5,"nz-table",3,4),c.ac(7,"thead"),c.ac(8,"tr"),c.ac(9,"th"),c.Pc(10,"\u7ae0\u540d\u79f0"),c.Zb(),c.ac(11,"th"),c.Pc(12,"\u8282\u540d\u79f0"),c.Zb(),c.Nc(13,ee,2,0,"th",5),c.Nc(14,te,2,0,"th",5),c.Nc(15,ne,2,0,"th",5),c.ac(16,"th"),c.Pc(17,"\u8d44\u6599"),c.Zb(),c.Zb(),c.Zb(),c.ac(18,"tbody"),c.Nc(19,re,10,6,"tr",6),c.Zb(),c.Zb(),c.Zb(),c.ac(20,"div",1),c.ac(21,"div",2),c.Pc(22," \u5176\u4ed6\u8bbe\u7f6e "),c.Zb(),c.ac(23,"nz-descriptions"),c.ac(24,"nz-descriptions-item",7),c.Pc(25),c.Zb(),c.ac(26,"nz-descriptions-item",8),c.Pc(27),c.Zb(),c.ac(28,"nz-descriptions-item",9),c.Pc(29),c.Zb(),c.Zb(),c.Zb(),c.ac(30,"div",1),c.ac(31,"div",2),c.Pc(32," \u667a\u9002\u5e94 "),c.Zb(),c.ac(33,"nz-descriptions"),c.ac(34,"nz-descriptions-item",10),c.Pc(35),c.Zb(),c.ac(36,"nz-descriptions-item",11),c.Pc(37),c.Zb(),c.Zb(),c.Zb()),2&e){var n=c.Cc(6);c.Eb(5),c.tc("nzData",t.listOfData),c.Eb(8),c.tc("ngIf","22"!==t.teachType),c.Eb(1),c.tc("ngIf","22"===t.teachType),c.Eb(1),c.tc("ngIf","22"!==t.teachType),c.Eb(4),c.tc("ngForOf",n.data),c.Eb(6),c.Qc(t.lessonCount),c.Eb(2),c.Rc("",t.quebankNum,"\u4e2a\u9898\u5e93"),c.Eb(2),c.Rc("",t.teachDemoNum,"\u4e2a\u89c6\u9891"),c.Eb(6),c.Rc("",t.authorNum,"\u4f4d"),c.Eb(2),c.Sc("\u5171",t.sectionNum,"\u4e2a\u5c0f\u8282 \u3001",t.knowledgeNum,"\u4e2a\u77e5\u8bc6\u70b9")}},directives:[X.c,X.j,X.k,X.b,X.h,p.n,X.e,p.m,Y.a,Y.b],styles:[".header[_ngcontent-%COMP%]{height:50px;padding-left:20px;line-height:50px;font-size:16px;font-weight:700}.content[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]{border-bottom:1px solid #dfdfdf}.content[_ngcontent-%COMP%]{padding:0 20px 20px}.content[_ngcontent-%COMP%]   .content-title[_ngcontent-%COMP%]{font-weight:700;font-size:15px;line-height:50px;height:50px}"]}),oe);n("duvs");var le,ue,de,pe,be=n("PqYM"),fe=((le=function(){function e(){_classCallCheck(this,e),this.lock=!1,this.limitHeight=60}return _createClass(e,[{key:"ngAfterViewChecked",value:function(){var e=this;if(this.dom){var t=document.getElementById("tableScroll");t&&t.clientHeight-this.limitHeight!==this.height&&(this.lock||(this.lock=!0,t?Object(be.a)(0).subscribe((function(){e.dom=document.getElementById("tableScroll"),e.dom&&(e.height=e.dom.clientHeight-e.limitHeight),e.lock=!1})):this.lock=!1))}else this.lock||(this.lock=!0,document.getElementById("tableScroll")?Object(be.a)(0).subscribe((function(){e.dom=document.getElementById("tableScroll"),e.dom&&(e.height=e.dom.clientHeight-e.limitHeight),e.lock=!1})):this.lock=!1)}}]),e}()).\u0275fac=function(e){return new(e||le)},le.\u0275cmp=c.Ob({type:le,selectors:[["app-flex-table"]],decls:0,vars:0,template:function(e,t){},encapsulation:2}),le),he=n("+O+V"),ge=((ue=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).pageIndex=he.h.page,e.pageSize=he.h.limit,e.searchWord="",e.selectedValue="",e.dateRange=[],e.data=[],e.total=0,e.isLoading=!1,e}return _createClass(n,[{key:"getDataList",value:function(){var e=this;this.isLoading=!0;var t=this.route.routeConfig.path,n={page:this.pageIndex,limit:this.pageSize,searchKey:this.searchWord.trim(),auditStatus:this.selectedValue||"",filterKey:"MANAGER"};"course-list"===t?(n.startTime="",n.endTime="",this.dateRange.length&&(n.startTime=Object(p.y)(this.dateRange[0],"yyyy-MM-dd",this.locale),n.endTime=Object(p.y)(this.dateRange[1],"yyyy-MM-dd",this.locale))):(n.startBillDate="",n.endBillDate="",this.dateRange.length&&(n.startBillDate=Object(p.y)(this.dateRange[0],"yyyy-MM-dd",this.locale),n.endBillDate=Object(p.y)(this.dateRange[1],"yyyy-MM-dd",this.locale)),"i-initiated"===t?n.queryFilterType="I_STARTED":"approve-all"===t&&(n.queryFilterType="ALL_APPROVED")),this.courseMgService.getCourseListNew(n).subscribe((function(t){e.isLoading=!1,200===t.status?(e.data=t.data||[],e.total=t.page?t.page.totalResult:0):e.message.error(t.message)}),(function(t){e.isLoading=!1,e.message.error(JSON.stringify(t))}))}}]),n}(fe)).\u0275fac=function(e){return new(e||ue)},ue.\u0275cmp=c.Ob({type:ue,selectors:[["app-course-data"]],features:[c.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),ue),me=n("XNiG"),ve=n("Kj3r"),ze=((de=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this)).searchWordVal="",e.dateRangeVal=[],e.selectedVal="",e.subject=new me.a,e}return _createClass(n,[{key:"ngOnInit",value:function(){this.subscribeChange(),this.initData()}},{key:"ngOnAttach",value:function(){this.collectParam(),this.sybcParam(),this.initData()}},{key:"ngOnDestroy",value:function(){this.removeData(),this.subject.unsubscribe()}},{key:"initData",value:function(){this.searchData()}},{key:"searchData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];"button"===e?(this.pageIndex=1,this.sybcParam()):"collect"===e?(this.collectParam(),this.sybcParam()):e&&this.resetData(),this.getDataList()}},{key:"getDate",value:function(e){var t=new Date,n=new Date(Object(p.y)(t,"yyyy-MM-dd 00:00:00",this.locale)).getTime(),i=new Date(Object(p.y)(t,"yyyy-MM-dd 23:59:59",this.locale)).getTime();return e?n<e&&e<i?Object(p.y)(e,"HH:mm",this.locale):Object(p.y)(e,"yyyy-MM-dd",this.locale):"--"}},{key:"resetData",value:function(){this.pageIndex=1,this.resetInit(),this.removeData(),this.getDataList()}},{key:"resetInit",value:function(){this.searchWord="",this.dateRange=[],this.selectedValue="",this.searchWordVal="",this.dateRangeVal=[],this.selectedVal=""}},{key:"collectParam",value:function(){var e=G.a.getSearch(this._PAGE_ID_),t=e.searchWordVal,n=e.dateRangeVal,i=e.selectedVal;this.searchWordVal=t||"",this.dateRangeVal=n||[],this.selectedVal=i||""}},{key:"sybcParam",value:function(){this.searchWord=this.searchWordVal,this.dateRange=this.dateRangeVal,this.selectedValue=this.selectedVal}},{key:"storingData",value:function(){var e=this.selectedVal,t=this.dateRangeVal,n=this.searchWordVal;this.passData({selectedVal:e,dateRangeVal:t,searchWordVal:n})}},{key:"passData",value:function(e){this.subject.next(e)}},{key:"subscribeChange",value:function(){var e=this;this.subject.pipe(Object(ve.a)(200)).subscribe((function(t){G.a.putSearch(e._PAGE_ID_,t)}))}},{key:"removeData",value:function(){G.a.clearSearch(this._PAGE_ID_)}}]),n}(ge)).\u0275fac=function(e){return new(e||de)},de.\u0275cmp=c.Ob({type:de,selectors:[["app-search-table"]],features:[c.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),de),ye=n("lJxs"),ke=((pe=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).route=e,i}return _createClass(n,[{key:"initData",value:function(){var e=this;this.data$=this.route.data.pipe(Object(ye.a)((function(e){return e.courseListData}))).subscribe((function(t){var n=t[0];e.data=n.data||[],e.total=n.page?n.page.totalResult:0}))}},{key:"ngOnDetach",value:function(){G.a.putPageInfo(this._PAGE_ID_,JSON.stringify({page:this.pageIndex,limit:this.pageSize})),this.data$.unsubscribe()}},{key:"ngOnDestroy",value:function(){_get(_getPrototypeOf(n.prototype),"ngOnDestroy",this).call(this),G.a.removePageInfo(this._PAGE_ID_)}}]),n}(ze)).\u0275fac=function(e){return new(e||pe)(c.Ub(u.a))},pe.\u0275cmp=c.Ob({type:pe,selectors:[["app-course-data"]],features:[c.Bb],decls:0,vars:0,template:function(e,t){},encapsulation:2}),pe),Se=n("Eb0D")},rb97:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var i=n("fXoL"),a=n("uMH2"),c=n("nxWG"),r=n("ofXK"),o=n("C2AL"),s=n("FwiY"),l=["treeVar"];function u(e,t){if(1&e&&(i.ac(0,"span",6),i.Pc(1),i.Zb()),2&e){var n=i.lc().$implicit;i.Eb(1),i.Rc(" \u5171",n.origin.sectionCount||0,"\u4e2a\u5c0f\u8282 ")}}function d(e,t){if(1&e&&(i.ac(0,"div",4),i.ac(1,"span"),i.Pc(2),i.Zb(),i.Nc(3,u,2,1,"span",5),i.Zb()),2&e){var n=t.$implicit;i.Eb(2),i.Rc(" ",n.origin.title," "),i.Eb(1),i.tc("ngIf",!n.isLeaf)}}function p(e,t){if(1&e&&i.Vb(0,"i",9),2&e){var n=i.lc().$implicit;i.tc("nzType",n.isExpanded?"caret-down":"caret-right")}}function b(e,t){1&e&&i.Vb(0,"i",10)}function f(e,t){if(1&e&&(i.Nc(0,p,1,1,"i",7),i.Nc(1,b,1,0,"i",8)),2&e){var n=t.origin,a=i.lc();i.tc("ngIf",!n.isLeaf),i.Eb(1),i.tc("ngIf",n.isLeaf&&"display"==a.type)}}var h=function(){var e=function(){function e(t){_classCallCheck(this,e),this.courseMgService=t,this.nodes=[],this.expandedKeys=[],this.selectedKeys=[],this.defaultExpandedKeys=[],this.chapterSelectable=!0,this.type="operate",this.nodeChange=new i.n}return _createClass(e,[{key:"ngOnInit",value:function(){this.getChapter()}},{key:"nzEvent",value:function(e){if("click"===e.eventName){var t=e.node;this.sendNodeChange(0===t.level?"chapter":"section",t.origin)}else if("expand"===e.eventName){var n=e.node;0===(null==n?void 0:n.getChildren().length)&&(null==n?void 0:n.isExpanded)&&this.getSection(n)}}},{key:"getChapter",value:function(){var e=this;this.courseMgService.getList_courseChapter(this.coursePacketId).subscribe((function(t){200===t.status&&(e.nodes=e.transformTreeNodes(t.data,!1,0),e.nodes.length>0&&(e.defaultExpandedKeys&&e.defaultExpandedKeys.length?setTimeout((function(){e.expandedKeys=e.defaultExpandedKeys;var t=e.treeCom.getTreeNodeByKey(e.defaultExpandedKeys[0]);e.getSection(t)}),400):(e.expandedKeys=[e.nodes[0].id],setTimeout((function(){var t=e.treeCom.getTreeNodeByKey(e.nodes[0].id);e.getSection(t)}),400))))}))}},{key:"getSection",value:function(e){var t=this;e&&(e.isLoading=!0,this.courseMgService.getList_courseSection(e.key).subscribe((function(n){if(200===n.status){var i=t.transformTreeNodes(n.data,!0,e.origin.index);e.addChildren(i),t.defaultSection?(t.selectedKeys=[t.defaultSection.key],t.sendNodeChange("section",t.defaultSection)):i.length>0&&(t.selectedKeys=[i[0].key],t.sendNodeChange("section",i[0]))}else e.isLoading=!1})))}},{key:"transformTreeNodes",value:function(e,t,n){var i=this;return e.map((function(e,a){return Object.assign({title:t?"".concat(n+1,".").concat(a+1,"\u8282 ").concat(e.name):"\u7b2c".concat(a+1,"\u7ae0   ").concat(e.name),key:e.id,selectable:!!t||i.chapterSelectable,index:a,isLeaf:t},e)}))}},{key:"sendNodeChange",value:function(e,t){("chapter"!==e||this.chapterSelectable)&&this.nodeChange.emit({type:e,data:t})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(i.Ub(a.a))},e.\u0275cmp=i.Ob({type:e,selectors:[["app-course-structure-tree"]],viewQuery:function(e,t){var n;1&e&&i.Vc(l,!0),2&e&&i.Bc(n=i.jc())&&(t.treeCom=n.first)},inputs:{coursePacketId:"coursePacketId",defaultSection:"defaultSection",defaultExpandedKeys:"defaultExpandedKeys",chapterSelectable:"chapterSelectable",type:"type"},outputs:{nodeChange:"nodeChange"},decls:6,vars:7,consts:[["nzBlockNode","","nzAsyncData","",3,"nzData","nzExpandedKeys","nzSelectedKeys","nzTreeTemplate","nzShowIcon","nzExpandedIcon","nzShowLine","nzClick","nzExpandChange"],["treeVar",""],["nzTreeTemplate",""],["multiExpandedIconTpl",""],[1,"node-row"],["style","font-size:12px;color:#999;",4,"ngIf"],[2,"font-size","12px","color","#999"],["nz-icon","","class","ant-tree-switcher-line-icon",3,"nzType",4,"ngIf"],["class","circle",4,"ngIf"],["nz-icon","",1,"ant-tree-switcher-line-icon",3,"nzType"],[1,"circle"]],template:function(e,t){if(1&e&&(i.ac(0,"nz-tree",0,1),i.ic("nzClick",(function(e){return t.nzEvent(e)}))("nzExpandChange",(function(e){return t.nzEvent(e)})),i.Zb(),i.Nc(2,d,4,2,"ng-template",null,2,i.Oc),i.Nc(4,f,2,2,"ng-template",null,3,i.Oc)),2&e){var n=i.Cc(3),a=i.Cc(5);i.tc("nzData",t.nodes)("nzExpandedKeys",t.expandedKeys)("nzSelectedKeys",t.selectedKeys)("nzTreeTemplate","display"==t.type?n:null)("nzShowIcon","display"==t.type)("nzExpandedIcon",a)("nzShowLine","display"==t.type)}},directives:[c.a,r.n,o.a,s.a],styles:[".node-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;min-width:300px}.circle[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;border:1px solid #1890ff}[_nghost-%COMP%]     .ant-tree .ant-tree-node-content-wrapper{overflow:hidden;text-overflow:ellipsis;word-break:break-all;white-space:nowrap}"]}),e}()},wsOq:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return r}));var i=n("WTGI");function a(e){return function(t,n){var i=e.initValue,a=new Array(16).fill(0).reduce((function(e){return e+Math.floor(16*Math.random()).toString(16)}));Object.defineProperty(t,n,{get:function(){return this[a]?e.get?e.get.call(this,i):i:e.get?e.get.call(this,e.initValue):e.initValue},set:function(t){var n,c;this[a]?null===(n=e.set)||void 0===n||n.call(this,t,i):(this[a]=!0,e.initSet?e.initSet.call(this,t,i):null===(c=e.set)||void 0===c||c.call(this,t,i)),i=t}})}}function c(e){return function(t,n,i){var a=i.value;return i.value=function(){for(var t=this,n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];var r=e.title,o=e.content,s=e.type,l=e.replaceXxxField,u=e.conditionField,d=e.conditionResult,p=e.conditionTitleReplace,b=e.conditionContentReplace,f=e.condition,h=void 0!==f?f():u&&d&&i[0][u]===d,g=h?b:o;this.modalService[s]({nzTitle:h&&p||r,nzContent:l?g.replace("xxx",i[0][l]):g,nzMaskClosable:!1,nzWrapClassName:"vertical-center-modal",nzCancelText:"\u53d6\u6d88",nzOkText:"\u786e\u5b9a",nzOnOk:function(e){return a.apply(t,i)},nzOnCancel:function(){return null}})},i}}function r(e){return function(t,n,a){var c=e.title,r=e.content,o=e.type,s=e.nzBodyStyle,l=e.nzWrapClassName,u=e.nzComponentParams,d=e.nzOkText,p=e.nzCancelText,b=e.nzOnCancel,f=a.value;return a.value=function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var h={},g=this.modalService["function"==typeof o?o.call(this,n):o||"info"]({nzTitle:"function"==typeof c?c.call(this,n):c,nzContent:"function"==typeof r?r.call(this,n):r,nzMaskClosable:!1,nzWrapClassName:l,nzComponentParams:u,nzBodyStyle:s,nzOkText:d||"\u786e\u5b9a",nzCancelText:p||"\u53d6\u6d88",nzOnCancel:function(){if(b)return b.apply(e,Array.prototype.concat.call(n,h,g))},nzOnOk:function(){return f.apply(e,Array.prototype.concat.call(n,h,g))}});i.a.watchTool(h,"loading",!1,(function(e){g.updateConfig({nzOkLoading:e})}))},a}}},zGbI:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("mrSG"),a=n("fXoL"),c=n("3Pt+"),r=n("Vhue"),o=n("ofXK"),s=n("PqYM"),l=n("wsOq"),u=n("+O+V"),d=n("uMH2"),p=n("dEAy"),b=n("PScX"),f=n("FwiY"),h=n("tyNb"),g=n("pz6Z"),m=n("19W7"),v=n("0lU3"),z=n("EGpF"),y=n("qAZ0"),k=n("OzZK"),S=n("RwU8"),P=n("C2AL"),C=n("rMZv"),E=n("5vDB"),w=n("nJia"),x=n("TaO5"),O=n("z4wI"),M=n("rb97"),I=n("RpzK"),T=["nzTreeComponent"],Z=["addExam"];function L(e,t){1&e&&(a.ac(0,"span",5),a.Pc(1,"*"),a.Zb())}var N=function(e){return{cursor:e}};function _(e,t){if(1&e){var n=a.bc();a.ac(0,"div",29),a.ic("click",(function(){a.Ec(n);var e=t.index,i=t.$implicit;return a.lc(4).getflag(e,i)})),a.ac(1,"div",30),a.Pc(2),a.Zb(),a.ac(3,"div",31),a.Pc(4),a.Zb(),a.ac(5,"div",32),a.Vb(6,"i",33),a.Zb(),a.Zb()}if(2&e){var i=t.$implicit,c=t.index,r=a.lc(4);a.Kb("active",r.clickFlag[c]),a.tc("ngStyle",a.xc(5,N,"0"===r.preview?"":"not-allowed")),a.Eb(2),a.Rc(" ",i.teacherName," "),a.Eb(2),a.Rc(" \u7f3a\u5c11",i.lackVideoNum,"\u4e2a\u4e3b\u89c6\u9891 ")}}function F(e,t){if(1&e&&(a.Yb(0),a.Nc(1,_,7,7,"div",28),a.Xb()),2&e){var n=a.lc(3);a.Eb(1),a.tc("ngForOf",n.teacherData)}}function V(e,t){1&e&&(a.ac(0,"span",34),a.Pc(1,"\u6682\u65e0\u6570\u636e"),a.Zb())}function j(e,t){if(1&e&&(a.ac(0,"div",1),a.ac(1,"div",2),a.ac(2,"span",5),a.Pc(3,"*"),a.Zb(),a.Pc(4,"\u6307\u5bfc\u8bb2\u5e08\uff1a "),a.Zb(),a.Nc(5,F,2,1,"ng-container",7),a.Nc(6,V,2,0,"span",27),a.Zb()),2&e){var n=a.lc(2);a.Eb(5),a.tc("ngIf",n.teacherData.length),a.Eb(1),a.tc("ngIf",!n.teacherData.length)}}function D(e,t){if(1&e){var n=a.bc();a.ac(0,"tr"),a.ac(1,"td"),a.Pc(2),a.Zb(),a.ac(3,"td",35),a.Pc(4),a.Zb(),a.ac(5,"td"),a.ac(6,"a",36),a.ic("click",(function(){a.Ec(n);var e=t.$implicit;return a.lc(2).modify(e)})),a.Pc(7,"\u4fee\u6539"),a.Zb(),a.ac(8,"a",37),a.ic("click",(function(){a.Ec(n);var e=t.$implicit;return a.lc(2).untie(e)})),a.Pc(9,"\u89e3\u7ed1"),a.Zb(),a.Zb(),a.Zb()}if(2&e){var i=t.$implicit,c=a.lc(2);a.Eb(2),a.Qc(i.sectionName),a.Eb(1),a.tc("nzTooltipTitle",i.knowledgeUnits),a.Eb(1),a.Qc(c.getBingData(i.knowledgeUnits))}}var A=function(){return{"max-width":"255px"}};function q(e,t){if(1&e){var n=a.bc();a.Yb(0),a.ac(1,"div",2),a.ac(2,"span",5),a.Pc(3,"*"),a.Zb(),a.Pc(4,"\u5b66\u4e60\u8ba1\u5212\uff1a"),a.Vb(5,"i",38),a.Zb(),a.ac(6,"nz-table",39),a.ac(7,"thead"),a.ac(8,"tr"),a.ac(9,"th"),a.Pc(10,"\u9002\u7528\u4eba\u7fa4"),a.Zb(),a.ac(11,"th"),a.Pc(12),a.Zb(),a.Zb(),a.Zb(),a.ac(13,"tbody"),a.ac(14,"tr"),a.ac(15,"td"),a.Pc(16," \u9002\u5408\u521d\u5b66 "),a.Zb(),a.ac(17,"td"),a.ac(18,"label",40),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableZeroBasis=e}))("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableChange(e,"juniorWeekNum","applicableZeroBasisWeek")})),a.Zb(),a.Pc(19,"\u8ba1\u52121 "),a.ac(20,"nz-input-number",41),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableZeroBasisWeek=e}))("nzFocus",(function(){return a.Ec(n),a.lc(2).applicableFocus("applicableZeroBasisWeek")}))("nzBlur",(function(e){return a.Ec(n),a.lc(2).applicableWeekChange(e,"juniorWeekNum","applicableZeroBasisWeek")})),a.Zb(),a.Pc(21," \u5468 "),a.Zb(),a.Zb(),a.ac(22,"tr"),a.ac(23,"td"),a.Pc(24," \u9002\u5408\u6709\u57fa\u7840 "),a.Zb(),a.ac(25,"td"),a.ac(26,"label",40),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableHasAFoundation=e}))("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableChange(e,"middleWeekNum","applicableHasAFoundationWeek")})),a.Zb(),a.Pc(27,"\u8ba1\u52122 "),a.ac(28,"nz-input-number",41),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableHasAFoundationWeek=e}))("nzFocus",(function(){return a.Ec(n),a.lc(2).applicableFocus("applicableHasAFoundationWeek")}))("nzBlur",(function(e){return a.Ec(n),a.lc(2).applicableWeekChange(e,"middleWeekNum","applicableHasAFoundationWeek")})),a.Zb(),a.Pc(29," \u5468 "),a.Zb(),a.Zb(),a.ac(30,"tr"),a.ac(31,"td"),a.Pc(32," \u9002\u5408\u901f\u6210 "),a.Zb(),a.ac(33,"td"),a.ac(34,"label",40),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableExperts=e}))("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableChange(e,"seniorWeekNum","applicableExpertsWeek")})),a.Zb(),a.Pc(35,"\u8ba1\u52123 "),a.ac(36,"nz-input-number",41),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).applicableExpertsWeek=e}))("nzFocus",(function(){return a.Ec(n),a.lc(2).applicableFocus("applicableExpertsWeek")}))("nzBlur",(function(e){return a.Ec(n),a.lc(2).applicableWeekChange(e,"seniorWeekNum","applicableExpertsWeek")})),a.Zb(),a.Pc(37," \u5468 "),a.Zb(),a.Zb(),a.Zb(),a.Zb(),a.Vb(38,"nz-divider"),a.Xb()}if(2&e){var i=a.lc(2);a.Eb(5),a.tc("nzTooltipOverlayStyle",a.wc(22,A)),a.Eb(1),a.tc("nzFrontPagination",!1)("nzData",i.dataSet),a.Eb(6),a.Rc("\u5b66\u4e60\u5468\u671f(\u5171",i.totalSectionNum,"\u8282\uff09"),a.Eb(6),a.tc("ngModel",i.applicableZeroBasis)("disabled","1"===i.preview),a.Eb(2),a.tc("disabled",!i.applicableZeroBasis||"1"===i.preview)("ngModel",i.applicableZeroBasisWeek)("nzMin",1)("nzStep",1),a.Eb(6),a.tc("ngModel",i.applicableHasAFoundation)("disabled","1"===i.preview),a.Eb(2),a.tc("disabled",!i.applicableHasAFoundation||"1"===i.preview)("ngModel",i.applicableHasAFoundationWeek)("nzMin",1)("nzStep",1),a.Eb(6),a.tc("ngModel",i.applicableExperts)("disabled","1"===i.preview),a.Eb(2),a.tc("disabled",!i.applicableExperts||"1"===i.preview)("ngModel",i.applicableExpertsWeek)("nzMin",1)("nzStep",1)}}function U(e,t){if(1&e){var n=a.bc();a.ac(0,"div",42),a.ac(1,"div",2),a.ac(2,"span",5),a.Pc(3,"*"),a.Zb(),a.Pc(4,"\u51b2\u523a\u5f00\u59cb\u65e5\u671f\uff1a "),a.Zb(),a.ac(5,"nz-date-picker",4),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).sprintTime=e}))("nzOnOpenChange",(function(e){return a.Ec(n),a.lc(2).timeOpen(e,"sprintTime")}))("ngModelChange",(function(e){return a.Ec(n),a.lc(2).timeChange(e,"sprintTime")})),a.Zb(),a.Zb()}if(2&e){var i=a.lc(2);a.Eb(5),a.tc("ngModel",i.sprintTime)("disabled","1"===i.preview)}}function B(e,t){if(1&e){var n=a.bc();a.ac(0,"div",42),a.ac(1,"div",2),a.ac(2,"span",5),a.Pc(3,"*"),a.Zb(),a.Pc(4,"\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f\uff1a "),a.Zb(),a.ac(5,"nz-date-picker",4),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc(2).finalTime=e}))("nzOnOpenChange",(function(e){return a.Ec(n),a.lc(2).timeOpen(e,"finalTime")}))("ngModelChange",(function(e){return a.Ec(n),a.lc(2).timeChange(e,"finalTime")})),a.Zb(),a.Zb()}if(2&e){var i=a.lc(2);a.Eb(5),a.tc("ngModel",i.finalTime)("disabled","1"===i.preview)}}function R(e,t){if(1&e){var n=a.bc();a.Yb(0),a.Nc(1,j,7,2,"div",20),a.ac(2,"div",1),a.ac(3,"div",2),a.ac(4,"span",5),a.Pc(5,"*"),a.Zb(),a.Pc(6,"\u7ae0\u8282\u7ed1\u5b9a\uff1a "),a.Zb(),a.ac(7,"button",21),a.ic("click",(function(){return a.Ec(n),a.lc().bind()})),a.Pc(8,"\u7ed1\u5b9a "),a.Zb(),a.ac(9,"nz-spin",9),a.ac(10,"nz-table",22,23),a.ac(12,"thead"),a.ac(13,"tr"),a.ac(14,"th"),a.Pc(15,"\u8bfe\u5305\u7ed3\u6784"),a.Zb(),a.ac(16,"th"),a.Pc(17,"\u77e5\u8bc6\u56fe\u8c31"),a.Zb(),a.ac(18,"th"),a.Pc(19,"\u64cd\u4f5c"),a.Zb(),a.Zb(),a.Zb(),a.ac(20,"tbody"),a.Nc(21,D,10,3,"tr",24),a.Zb(),a.Zb(),a.Zb(),a.Vb(22,"nz-divider"),a.Nc(23,q,39,23,"ng-container",7),a.ac(24,"div"),a.ac(25,"div",2),a.ac(26,"span",5),a.Pc(27,"*"),a.Zb(),a.Pc(28,"\u51b2\u523a\u9636\u6bb5\uff1a "),a.Zb(),a.ac(29,"nz-switch",25),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc().isSprintOn=e}))("ngModelChange",(function(){return a.Ec(n),a.lc().isSwitchOnChange("isSprintOn")})),a.Zb(),a.Zb(),a.Nc(30,U,6,2,"div",26),a.Vb(31,"nz-divider"),a.ac(32,"div"),a.ac(33,"div",2),a.ac(34,"span",5),a.Pc(35,"*"),a.Zb(),a.Pc(36,"\u5bc6\u62bc\u9636\u6bb5\uff1a "),a.Zb(),a.ac(37,"nz-switch",6),a.ic("ngModelChange",(function(e){return a.Ec(n),a.lc().isFinalOn=e}))("ngModelChange",(function(){return a.Ec(n),a.lc().isSwitchOnChange("isFinalOn")})),a.Zb(),a.Zb(),a.Nc(38,B,6,2,"div",26),a.Zb(),a.Xb()}if(2&e){var i=a.Cc(11),c=a.lc();a.Eb(1),a.tc("ngIf","22"===c.teachType),a.Eb(6),a.tc("disabled","1"===c.preview),a.Eb(2),a.tc("nzSpinning",c.untieLoading)("nzDelay",0),a.Eb(1),a.tc("nzData",c.listOfData)("nzPageSize",5),a.Eb(11),a.tc("ngForOf",i.data),a.Eb(2),a.tc("ngIf","22"===c.teachType),a.Eb(6),a.tc("nzDisabled","1"===c.preview||c.isStandard)("ngModel",c.isSprintOn),a.Eb(1),a.tc("ngIf",c.isSprintOn),a.Eb(7),a.tc("ngModel",c.isFinalOn)("nzDisabled","1"===c.preview||c.isStandard),a.Eb(1),a.tc("ngIf",c.isFinalOn)}}function $(e,t){if(1&e){var n=a.bc();a.ac(0,"app-course-structure-tree",43),a.ic("nodeChange",(function(e){return a.Ec(n),a.lc().nodeChange(e)})),a.Zb()}if(2&e){var i=a.lc();a.tc("chapterSelectable",!1)("coursePacketId",i.coursePacketId)("defaultSection",i.defaultSection)("defaultExpandedKeys",i.defaultChapter)}}function Q(e,t){if(1&e){var n=a.bc();a.ac(0,"app-simple-knowledgegraph-tree",44),a.ic("nodeChange",(function(e){return a.Ec(n),a.lc().nodeChangeKnowledge(e)})),a.Zb()}if(2&e){var i=a.lc();a.tc("isExpandAll",!1)("professionId",i.knowledgeSubjectId)("defaultCheckedKeys",i.defaultTreeKey)("all",!0)}}var W=function(){return{padding:0,overflow:"auto"}},H=function(){var e=function(){function e(t,n,i,a,c,r,o,s){_classCallCheck(this,e),this.fb=t,this.courseMgService=n,this.modalService=i,this.nzMesService=a,this.route=c,this.menuService=r,this.statisticsLogService=o,this.locale=s,this.nodes=[],this.teacherData=[],this.listOfData=[],this.knowledgeSubjectId="",this.defaultTreeKey=[],this.knowledgePointIds=[],this.clickFlag={},this.isVisible=!1,this.value="",this.chapterBindingVisible=!1,this.now=new Date,this.isDailyOn=!1,this.isSprintOn=!1,this.isFinalOn=!1,this.defaultTeacherId=[],this.isStandard=!1,this.dataSet=[{}],this.applicableZeroBasis=!1,this.applicableExperts=!1,this.applicableHasAFoundation=!1,this.bindList=[],this.bindLoading=!1,this.knowledgeGraphLoading=!1,this.untieLoading=!1,this.totalSectionNum=0,this.knowledgeGraphStructureVisible=!1,this.lessonPackageStructureVisible=!0,this.defaultChapter=[],this.examTimeRequire=!1,this.adaptive={middleWeekNum:!1,juniorWeekNum:!1,seniorWeekNum:!1,listOfData:[],examTime:null,finalTime:null,sprintTime:null,isSprintOn:!1,isFinalOn:!1,examTimeRequire:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.getParams()}},{key:"initIntellectualAdaptationData",value:function(){this.getLessonPackage(),this.getChapterBindList()}},{key:"initFrom",value:function(){this.addExamFrom=this.fb.group({missionName:["",[c.w.required]],formingMethod:[1,[c.w.required]]}),this.examSettingForm=this.fb.group({id:[this.courseId],examLength:[0,c.w.required],isComputer:["1",c.w.required],computerType:["1"],answerTimes:[0,c.w.required],deadTime:[new Date,c.w.required],resultWay:["1",c.w.required]})}},{key:"getLessonPackage",value:function(){var e=this;this.courseMgService.getLessonPackage(this.coursePacketId,this.courseId).subscribe((function(t){if(200===t.status){var n=t.data,i=n.teacherDtoList,a=n.knowledgeSubjectId,c=n.isDailyOn,r=n.isSprintOn,o=n.isFinalOn,s=n.defaultTeacherId,l=n.juniorWeekNum,u=n.middleWeekNum,d=n.seniorWeekNum,p=n.totalSectionNum;e.teacherData=i,e.defaultTeacherId=s?s.split(","):[],e.knowledgeSubjectId=a,e.isDailyOn="1"===c,e.isSprintOn=e.adaptive.isSprintOn="1"===r,e.isFinalOn=e.adaptive.isFinalOn="1"===o,e.totalSectionNum=p||0,(e.isSprintOn||e.isFinalOn)&&e.intellectualAdaptation?(e.examTimeRequire=!0,e.adaptive.examTimeRequire=!0):(e.examTimeRequire=!1,e.adaptive.examTimeRequire=!1),["examTime","sprintTime","finalTime"].forEach((function(n){e[n]=e[n+"Pre"]=e.adaptive[n]=t.data[n]?new Date(t.data[n]):null})),i.length&&i.forEach((function(t,n){e.clickFlag[n]=e.defaultTeacherId.indexOf(t.teacherId)>-1})),l?(e.applicableZeroBasisWeekPre=e.applicableZeroBasisWeek=l,e.applicableZeroBasis=!0,e.adaptive.juniorWeekNum=!0):e.adaptive.juniorWeekNum=!1,u?(e.applicableHasAFoundationWeekPre=e.applicableHasAFoundationWeek=u,e.applicableHasAFoundation=!0,e.adaptive.middleWeekNum=!0):e.adaptive.middleWeekNum=!1,d?(e.applicableExpertsWeekPre=e.applicableExpertsWeek=d,e.applicableExperts=!0,e.adaptive.seniorWeekNum=!0):e.adaptive.seniorWeekNum=!1}}))}},{key:"setLessonPackage",value:function(e){var t=this;return new Promise((function(n){t.courseMgService.setLessonPackage(e).subscribe((function(i){if(201===i.status){(t.isSprintOn||t.isFinalOn)&&t.intellectualAdaptation?(t.examTimeRequire=!0,t.adaptive.examTimeRequire=!0):(t.examTimeRequire=!1,t.adaptive.examTimeRequire=!1);var a=Object.keys(e);["middleWeekNum","seniorWeekNum","juniorWeekNum","isSprintOn","isFinalOn"].filter((function(e){return a.indexOf(e)>-1})).forEach((function(n){t.adaptive[n]=!!Number(e[n])})),n(!0)}else n(!1)}),(function(e){n(!1)}))}))}},{key:"getflag",value:function(e,t){var n=this;"1"!==this.preview&&(Object.keys(this.clickFlag).forEach((function(e,t){n.clickFlag[t]=!1})),this.clickFlag[e]=!0,this.defaultTeacherId=[],this.defaultTeacherId.push(t.teacherId),this.setLessonPackage({id:this.coursePacketId,defaultTeacherId:this.defaultTeacherId.join(",")}))}},{key:"getChapterBindList",value:function(){var e=this;this.courseMgService.getChapterBindList({courseId:this.courseId,coursePacketId:this.coursePacketId}).subscribe((function(t){200===t.status&&(t.data.length>0?(e.listOfData=t.data.map((function(e,t){return{sectionName:e.chapterSeq+"."+e.sectionSeq+" "+e.sectionName,knowledgeUnits:e.knowledgeUnits,sectionId:e.sectionId,chapterId:e.chapterId}})),e.adaptive.listOfData=JSON.parse(JSON.stringify(e.listOfData))):(e.listOfData=[],e.adaptive.listOfData=[]))}))}},{key:"bindKnowledgePoints",value:function(){var e=this;this.bindLoading=!0,this.courseMgService.bindKnowledgePointsBatch(this.bindList).subscribe((function(t){201===t.status&&(e.statisticsLogService.statisticsPacketInfoLog({name:"\u7ae0\u8282\u7ed1\u5b9a"+(e.chapterBindingEdit?"\u4fee\u6539":"\u65b0\u589e"),actionCode:u.j.packetInfo["intellectual-chapterbind-action"][e.chapterBindingEdit?"modify":"addCode"],content:JSON.stringify(e.bindList)}),e.getChapterBindList()),e.bindLoading=!1}),(function(t){e.bindLoading=!1}))}},{key:"bind",value:function(){var e=this;this.bindList=[],this.chapterBindingVisible=!0,this.chapterBindingEdit=!1,this.knowledgeGraphStructureVisible=!1,this.lessonPackageStructureVisible=!1,Object(s.a)(0).subscribe((function(){e.lessonPackageStructureVisible=!0}))}},{key:"nodeChange",value:function(e){var t=this;this.curNode=e;var n,i=e.data,a=i.id,c=i.key,r=a||c||"";this.bindList.every((function(e,t){return e.courseSectionId!==r||void(n=t)}))?(this.knowledgeGraphLoading=!0,this.courseMgService.getKnowledgePoints({courseSectionId:r,courseId:this.courseId,coursePacketId:this.coursePacketId}).subscribe((function(e){t.knowledgeGraphLoading=!1,200===e.status&&(t.defaultTreeKey=e.data.map((function(e){return e.knowledgeUnitId})),t.knowledgeGraphStructureVisible=!0,t.selectId=t.defaultTreeKey,t.bindList.push({courseSectionId:r,courseId:t.courseId,coursePacketId:t.coursePacketId,knowledgeUnitIdList:t.defaultTreeKey}))}),(function(){t.knowledgeGraphLoading=!1}))):(this.defaultTreeKey=this.bindList.filter((function(e,t){return t===n}))[0].knowledgeUnitIdList,this.selectId=this.defaultTreeKey,this.knowledgeGraphStructureVisible=!0)}},{key:"nodeChangeKnowledge",value:function(e){var t=this;e.length?(this.selectId=[],e.forEach((function(e){"2"===e.origin.kType?e.origin.children&&e.origin.children.length&&e.origin.children.forEach((function(e){t.selectId.push(e.id)})):"3"===e.origin.kType?t.selectId.push(e.origin.id):e.origin.children&&e.origin.children.length&&e.origin.children.forEach((function(e){e.children&&e.children.length&&e.children.forEach((function(e){t.selectId.push(e.id)}))}))}))):this.selectId=[],this.bindList.every((function(e,n){return e.courseSectionId!==t.curNode.data.id&&e.courseSectionId!==t.curNode.data.key||void(t.bindList[n].knowledgeUnitIdList=t.selectId)}))}},{key:"applicableChange",value:function(e,t,n){var i=this;if(!e){var a={seniorWeekNum:"applicableExperts",middleWeekNum:"applicableHasAFoundation",juniorWeekNum:"applicableZeroBasis"},c=this.applicableZeroBasisWeek,r=this.applicableExpertsWeek,o=this.applicableHasAFoundationWeek;if("juniorWeekNum"===t&&!o&&!r||"middleWeekNum"===t&&!c&&!r||"seniorWeekNum"===t&&!o&&!c)return this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u4e3a\u5fc5\u586b\u9879,\u8bf7\u4fdd\u7559\u81f3\u5c11\u4e00\u4e2a\u8ba1\u5212"),void Object(s.a)(0).subscribe((function(){i[a[t]]=!0}));this[n]="",this.setLessonPackage(_defineProperty({id:this.coursePacketId},t,0))}}},{key:"getParams",value:function(){var e=r.a.getPacketInfo(),t=e.courseId,n=e.id,i=e.professionId,a=e.code,c=e.teachType,o=e.isSmart,s=e.preview,l=e.isUsed;this.courseId=t,this.coursePacketId=n,this.professionId=i,this.isStandard=l>0,this.code=a,this.teachType=c,this.intellectualAdaptation="1"===o,this.preview=s}},{key:"checkPlan",value:function(){return this.applicableZeroBasis&&!this.applicableZeroBasisWeek?(this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u52fe\u9009\u4e86\u9002\u7528\u96f6\u57fa\u7840\u5fc5\u987b\u586b\u5199\u5177\u4f53\u503c"),!0):this.applicableHasAFoundation&&!this.applicableHasAFoundationWeek?(this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u52fe\u9009\u4e86\u9002\u7528\u6709\u57fa\u7840\u5fc5\u987b\u586b\u5199\u5177\u4f53\u503c"),!0):this.applicableExperts&&!this.applicableExpertsWeek?(this.nzMesService.warning("\u5b66\u4e60\u8ba1\u5212\u52fe\u9009\u4e86\u4f7f\u7528\u4e13\u5bb6\u5fc5\u987b\u586b\u5199\u5177\u4f53\u503c"),!0):void 0}},{key:"checkData",value:function(e){var t=this.isSprintOn,n=this.isFinalOn,i=this.examTime,a=this.sprintTime,c=this.finalTime;if(t){if(i&&a&&i.getTime()<=a.getTime())return this.nzMesService.warning("examTime"===e?"\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f\u5e94\u5927\u4e8e\u51b2\u523a\u5f00\u59cb\u65e5\u671f":"\u51b2\u523a\u5f00\u59cb\u65e5\u671f\u5e94\u5c0f\u4e8e\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f"),!0;if(n&&c&&a&&c.getTime()<=a.getTime())return this.nzMesService.warning("sprintTime"===e?"\u51b2\u523a\u5f00\u59cb\u65e5\u671f\u5e94\u5c0f\u4e8e\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f":"\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f\u5e94\u5927\u4e8e\u51b2\u523a\u5f00\u59cb\u65e5\u671f"),!0}if(n&&i&&c&&i.getTime()<=c.getTime())return this.nzMesService.warning("examTime"===e?"\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f\u5e94\u5927\u4e8e\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f":"\u5bc6\u62bc\u5f00\u59cb\u65e5\u671f\u5e94\u5c0f\u4e8e\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f"),!0}},{key:"timeChange",value:function(e,t){var n=this;this[t+"Pre"]?e&&e.getTime()!==this[t+"Pre"].getTime()?this.checkAndSave(e,t,this[t+"Pre"]):e||(("examTime"!==t||this.examTimeRequire)&&this.intellectualAdaptation?(this.nzMesService.warning("examTime"===t?"\u5f00\u542f\u4e86\u51b2\u523a\u9636\u6bb5\u6216\u8005\u5bc6\u62bc\u9636\u6bb5\uff0c\u56fd\u5bb6\u8003\u8bd5\u65f6\u95f4\u662f\u5fc5\u586b\u9879\uff0c\u8bf7\u4e0d\u8981\u6e05\u9664\u6389\uff01":this.isStandard?"\u8bfe\u5305\u542f\u7528\u540e\u4e0d\u53ef\u6e05\u7a7a":"\u5982\u679c\u9700\u8981\u6e05\u7a7a\u65e5\u671f\u8bf7\u5173\u95ed\u8be5\u9636\u6bb5\u5373\u53ef"),Object(s.a)(0).subscribe((function(){n[t]=n[t+"Pre"]}))):this.checkAndSave(e,t,null)):e&&this.checkAndSave(e,t,null)}},{key:"checkAndSave",value:function(e,t,n){var i=this;this.checkData(t)||this.checkPlan()?Object(s.a)(0).subscribe((function(){i[t]=n})):this.setLessonPackage(_defineProperty({id:this.coursePacketId},t,Object(o.y)(e,"yyyy-MM-dd",this.locale))).then((function(e){e?i[t+"Pre"]=i.adaptive[t]=i[t]:Object(s.a)(0).subscribe((function(){i[t]=n}))}))}},{key:"isSwitchOnChange",value:function(e){var t=_defineProperty({id:this.coursePacketId},e,this[e]?"1":"0");"isSprintOn"!==e||this[e]?"isFinalOn"!==e||this[e]||(this.finalTime=this.finalTimePre=null,t.finalTime=Object(o.y)(null,"yyyy-MM-dd",this.locale)):(this.sprintTime=this.sprintTimePre=null,t.sprintTime=Object(o.y)(null,"yyyy-MM-dd",this.locale)),this.setLessonPackage(t)}},{key:"applicableWeekChange",value:function(e,t,n){var i=this;this[n+"Pre"]?this[n]&&this[n]>0?this[n]!==this[n+"Pre"]&&this.setLessonPackage(_defineProperty({id:this.coursePacketId},t,this[n])):Object(s.a)(0).subscribe((function(){i[n]=i[n+"Pre"]})):this[n]&&this[n]>0&&this.setLessonPackage(_defineProperty({id:this.coursePacketId},t,this[n]))}},{key:"timeOpen",value:function(e,t){e&&(this[t+"Pre"]=this[t])}},{key:"applicableFocus",value:function(e){this[e+"Pre"]=this[e]}},{key:"untie",value:function(e,t){var n=this;this.untieLoading=t.loading=!0,this.courseMgService.unbindKnowledgePoints(e.sectionId).subscribe((function(i){n.untieLoading=t.loading=!1,200===i.status&&(n.statisticsLogService.statisticsPacketInfoLog({name:"\u7ae0\u8282\u7ed1\u5b9a\u89e3\u7ed1",actionCode:u.j.packetInfo["intellectual-chapterbind-action"].delCode,content:JSON.stringify({sectionId:e.sectionId})}),n.bindList.every((function(t,i){if(t.id!==e.sectionId)return!0;n.bindList.splice(i,1)})),n.getChapterBindList())}),(function(){n.untieLoading=t.loading=!1}))}},{key:"modify",value:function(e){var t=this;this.chapterBindingEdit=!0,this.knowledgeGraphStructureVisible=!1,this.lessonPackageStructureVisible=!1,this.chapterBindingVisible=!0,this.bindList=[],setTimeout((function(){t.defaultSection={key:e.sectionId},t.defaultChapter=[e.chapterId.split(",")[0]],t.lessonPackageStructureVisible=!0}))}},{key:"getBingData",value:function(e){var t=e.split(",");return t.length>5?(t.length=5,t.join(",")+",..."):e}},{key:"export",value:function(){var e=this;this.courseMgService.exportExcelKno(this.coursePacketId).subscribe((function(e){var t=document.createElement("a"),n=URL.createObjectURL(e.body);t.setAttribute("href",n),t.setAttribute("download","\u8bfe\u5305\u77e5\u8bc6\u70b9\u9898\u76ee\u96be\u5ea6\u5bfc\u51fa.xls"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}),(function(t){return e.nzMesService.error(t)}))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(a.Ub(c.d),a.Ub(d.a),a.Ub(p.e),a.Ub(b.e),a.Ub(h.a),a.Ub(g.a),a.Ub(m.a),a.Ub(a.u))},e.\u0275cmp=a.Ob({type:e,selectors:[["app-intellectual-adaptation"]],viewQuery:function(e,t){var n;1&e&&(a.Vc(T,!0),a.Vc(Z,!0)),2&e&&(a.Bc(n=a.jc())&&(t.nzTreeComponent=n.first),a.Bc(n=a.jc())&&(t.addExam=n.first))},inputs:{adaptive:"adaptive"},decls:29,vars:18,consts:[[1,"container"],[1,"item"],[1,"item-left"],["style","color:red;margin-right:10px;",4,"ngIf"],[2,"margin-left","20px","width","200px",3,"ngModel","disabled","ngModelChange","nzOnOpenChange"],[2,"color","red","margin-right","10px"],["nzCheckedChildren","\u5f00","nzUnCheckedChildren","\u5173",2,"margin-left","20px",3,"ngModel","nzDisabled","ngModelChange"],[4,"ngIf"],["nzTitle","\u7ae0\u8282\u7ed1\u5b9a","nzClassName","self-modal",3,"nzVisible","nzMaskClosable","nzFooter","nzBodyStyle","nzWidth","nzVisibleChange","nzOnCancel"],[3,"nzSpinning","nzDelay"],[1,"tree-container"],[1,"tree-left"],[1,"tree-title"],[1,"struct-container"],["style","padding-top: 40px;","type","operate",3,"chapterSelectable","coursePacketId","defaultSection","defaultExpandedKeys","nodeChange",4,"ngIf"],[1,"tree-right"],[2,"padding","52px 0 0 20px",3,"nzSpinning","nzDelay"],["model","check",3,"isExpandAll","professionId","defaultCheckedKeys","all","nodeChange",4,"ngIf"],[1,"bind-button"],["nz-button","","nzType","primary",3,"click"],["class","item",4,"ngIf"],["nz-button","","nzType","primary",2,"margin-left","20px",3,"disabled","click"],[2,"margin","20px 0 0 130px",3,"nzData","nzPageSize"],["basicTable",""],[4,"ngFor","ngForOf"],["nzCheckedChildren","\u5f00","nzUnCheckedChildren","\u5173",2,"margin-left","20px",3,"nzDisabled","ngModel","ngModelChange"],["style","margin-top:20px",4,"ngIf"],["style","margin-left: 10px;",4,"ngIf"],["class","instructor-teach",3,"active","ngStyle","click",4,"ngFor","ngForOf"],[1,"instructor-teach",3,"ngStyle","click"],[1,"title"],[1,"sub-title"],[1,"icon-teacher"],["nz-icon","","nzType","check","nzTheme","outline"],[2,"margin-left","10px"],["nz-tooltip","",3,"nzTooltipTitle"],[2,"margin-right","5px",3,"click"],[2,"color","red",3,"click"],["nz-icon","","nzType","question-circle","nzTheme","outline","nz-tooltip","","nzTooltipTitle","\u5b66\u4e60\u5468\u671f\u4e0d\u80fd\u5927\u4e8e\u8bfe\u5305\u4e2d\u5c0f\u8282\u603b\u6570",1,"question-circle",3,"nzTooltipOverlayStyle"],[2,"margin","20px 0 0 130px",3,"nzFrontPagination","nzData"],["nz-checkbox","",2,"margin-right","20px",3,"ngModel","disabled","ngModelChange"],["nzPlaceHolder","\u8bf7\u8f93\u5165\u5468\u671f",2,"margin","0 10px","min-width","120px",3,"disabled","ngModel","nzMin","nzStep","ngModelChange","nzFocus","nzBlur"],[2,"margin-top","20px"],["type","operate",2,"padding-top","40px",3,"chapterSelectable","coursePacketId","defaultSection","defaultExpandedKeys","nodeChange"],["model","check",3,"isExpandAll","professionId","defaultCheckedKeys","all","nodeChange"]],template:function(e,t){1&e&&(a.ac(0,"div",0),a.ac(1,"div",1),a.ac(2,"div",2),a.Nc(3,L,2,0,"span",3),a.Pc(4,"\u56fd\u5bb6\u8003\u8bd5\u65e5\u671f\uff1a "),a.Zb(),a.ac(5,"nz-date-picker",4),a.ic("ngModelChange",(function(e){return t.examTime=e}))("nzOnOpenChange",(function(e){return t.timeOpen(e,"examTime")}))("ngModelChange",(function(e){return t.timeChange(e,"examTime")})),a.Zb(),a.Zb(),a.ac(6,"div",1),a.ac(7,"div",2),a.ac(8,"span",5),a.Pc(9,"*"),a.Zb(),a.Pc(10,"\u667a\u9002\u5e94\uff1a "),a.Zb(),a.ac(11,"nz-switch",6),a.ic("ngModelChange",(function(e){return t.intellectualAdaptation=e})),a.Zb(),a.Zb(),a.Nc(12,R,39,14,"ng-container",7),a.Zb(),a.ac(13,"nz-modal",8),a.ic("nzVisibleChange",(function(e){return t.chapterBindingVisible=e}))("nzOnCancel",(function(){return t.chapterBindingVisible=!1})),a.ac(14,"nz-spin",9),a.ac(15,"div",10),a.ac(16,"div",11),a.ac(17,"span",12),a.Pc(18,"\u8bfe\u5305\u7ed3\u6784"),a.Zb(),a.ac(19,"div",13),a.Nc(20,$,1,4,"app-course-structure-tree",14),a.Zb(),a.Zb(),a.ac(21,"div",15),a.ac(22,"span",12),a.Pc(23,"\u77e5\u8bc6\u56fe\u8c31\u7ed3\u6784"),a.Zb(),a.ac(24,"nz-spin",16),a.Nc(25,Q,1,4,"app-simple-knowledgegraph-tree",17),a.Zb(),a.Zb(),a.Zb(),a.ac(26,"div",18),a.ac(27,"button",19),a.ic("click",(function(){return t.bindKnowledgePoints()})),a.Pc(28,"\u7ed1\u5b9a"),a.Zb(),a.Zb(),a.Zb(),a.Zb()),2&e&&(a.Eb(3),a.tc("ngIf",t.examTimeRequire&&t.intellectualAdaptation),a.Eb(2),a.tc("ngModel",t.examTime)("disabled","1"===t.preview),a.Eb(6),a.tc("ngModel",t.intellectualAdaptation)("nzDisabled","1"===t.preview||t.isStandard),a.Eb(1),a.tc("ngIf",t.intellectualAdaptation),a.Eb(1),a.tc("nzVisible",t.chapterBindingVisible)("nzMaskClosable",!1)("nzFooter",null)("nzBodyStyle",a.wc(17,W))("nzWidth",800),a.Eb(1),a.tc("nzSpinning",t.bindLoading)("nzDelay",0),a.Eb(6),a.tc("ngIf",t.lessonPackageStructureVisible),a.Eb(4),a.tc("nzSpinning",t.knowledgeGraphLoading)("nzDelay",0),a.Eb(1),a.tc("ngIf",t.knowledgeGraphStructureVisible))},directives:[o.n,v.b,c.o,c.q,z.a,p.a,y.a,k.a,S.a,P.a,C.c,C.j,C.k,C.b,C.h,C.e,o.m,E.a,o.o,f.a,w.d,x.a,O.a,M.a,I.a],styles:[".container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:20px 60px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]{background-color:#f5f5f5;overflow:hidden;padding:10px 20px;margin:20px 60px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .icon-del[_ngcontent-%COMP%]{float:right;margin-left:10px;cursor:pointer;color:red}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .item-left[_ngcontent-%COMP%]{display:inline-block;width:130px;text-align:right}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]{cursor:pointer;width:200px;height:80px;border:1px solid grey;text-align:center;display:inline-block;position:relative;border-radius:2px;overflow:hidden;vertical-align:middle;margin-left:20px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach.active[_ngcontent-%COMP%]{background-color:#1890ff;color:#fff;border:none}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach.active[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{color:#fff}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach.active[_ngcontent-%COMP%]   .icon-teacher[_ngcontent-%COMP%]{border-color:#1890ff}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-top:10px;font-size:16px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .sub-title[_ngcontent-%COMP%]{margin-top:10px;color:grey}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .icon-teacher[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;width:0;height:0;border-color:transparent grey grey transparent;border-style:solid;border-width:10px}.container[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .instructor-teach[_ngcontent-%COMP%]   .icon-teacher[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{transform:translate(-27%,-23%);color:#fff;position:absolute;font-size:14px;font-weight:700}.list-container[_ngcontent-%COMP%]{background-color:#f5f5f5;overflow:hidden;padding:10px 20px;margin:20px 60px;cursor:pointer}.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .operat[_ngcontent-%COMP%]{float:right;margin-left:15px;visibility:hidden}.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .operat[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover + span[_ngcontent-%COMP%]{visibility:visible}.list-container[_ngcontent-%COMP%]   .list[_ngcontent-%COMP%]   .operat[_ngcontent-%COMP%]   .icon-del[_ngcontent-%COMP%]{margin-left:5px;visibility:hidden;cursor:pointer;color:red}.list-container[_ngcontent-%COMP%]:hover   .operat[_ngcontent-%COMP%]{visibility:visible!important}.bind-button[_ngcontent-%COMP%]{text-align:right;border-top:1px solid #f0f0f0;padding:10px 20px;position:absolute;bottom:0;width:100%;background:#fff;z-index:9999}.tree-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;padding:0 0 55px}.tree-container[_ngcontent-%COMP%]   .tree-left[_ngcontent-%COMP%]{flex:1;float:left;max-height:400px;overflow:auto}.tree-container[_ngcontent-%COMP%]   .tree-right[_ngcontent-%COMP%]{flex:1;float:right;max-height:400px;overflow:auto}.tree-container[_ngcontent-%COMP%]   .tree-title[_ngcontent-%COMP%]{font-size:16px;position:absolute;height:56px;background:#fff;width:50%;z-index:99999;padding:20px 0 0 20px}.tree-container[_ngcontent-%COMP%]   .struct-container[_ngcontent-%COMP%]{padding-left:20px;padding-top:50px}.question-circle[_ngcontent-%COMP%]{font-size:20px;vertical-align:middle;cursor:pointer;color:#1890ff;border-radius:50%;font-weight:300}app-chapter-structure-tree[_ngcontent-%COMP%]     .ant-tree-title{word-break:break-all;min-width:0;max-width:200px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical}  .self-modal .ant-spin-container,   .self-modal .ant-spin-nested-loading{position:static}"]}),Object(i.b)([Object(l.c)({initSet:function(e){this.initIntellectualAdaptationData()},set:function(e){var t=this,n=e?"1":"0";this.courseMgService.isSmartUpdate(this.coursePacketId,n).subscribe((function(i){201===i.status&&(e&&t.initIntellectualAdaptationData(),r.a.putPacketInfoItem("isSmart",n))}))}})],e.prototype,"intellectualAdaptation",void 0),Object(i.b)([Object(l.b)({title:"\u89e3\u7ed1",content:function(e){return"\u786e\u5b9a\u5bf9\u201c"+e[0].sectionName+"\u5c0f\u8282\u540d\u79f0\u201d\u4e0e\u77e5\u8bc6\u56fe\u8c31\u8fdb\u884c\u89e3\u7ed1\u5417\uff1f"},type:"warning"})],e.prototype,"untie",null),e}()}}]);
//# sourceMappingURL=1-es5.eee09a56a0c9c301c5b5.js.map