(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{QuTh:function(n,t,e){"use strict";e.r(t),e.d(t,"StudyOutlineModule",(function(){return F}));var i=e("mwdn"),c=e("PCNd"),o=e("tyNb"),a=e("R0Ic"),s=e("Vhue"),r=e("cp0P"),l=e("fXoL"),d=e("PScX"),u=e("b5Nk"),h=e("ofXK"),g=e("dEAy"),m=e("FwiY"),p=e("C2AL");function f(n,t){1&n&&l.Vb(0,"i",9)}function b(n,t){1&n&&l.Vb(0,"i",10)}function C(n,t){if(1&n&&(l.ac(0,"span",21),l.Pc(1),l.Zb()),2&n){const n=l.lc().$implicit;l.Eb(1),l.Rc("",n.knowledgePointCount||0,"\u4e2a\u77e5\u8bc6\u70b9")}}function O(n,t){if(1&n){const n=l.bc();l.ac(0,"span",22),l.ic("click",(function(){l.Ec(n);const t=l.lc().$implicit;return l.lc(3).showData(t)})),l.Vb(1,"i",23),l.ac(2,"span"),l.Pc(3,"\u8d44\u6599"),l.Zb(),l.Zb()}}const P=function(){return{color:"#3A3C42"}};function M(n,t){if(1&n){const n=l.bc();l.ac(0,"div",24),l.ic("click",(function(){l.Ec(n);const e=t.$implicit,i=l.lc().$implicit;return l.lc(3).goToBreakthrough(e,i)})),l.Vb(1,"i",25),l.ac(2,"div",26),l.ac(3,"span",27),l.Pc(4),l.Zb(),l.ac(5,"span",28),l.Pc(6),l.Zb(),l.Zb(),l.Zb()}if(2&n){const n=t.$implicit;l.Eb(3),l.tc("ngStyle",l.wc(3,P)),l.Eb(1),l.Qc(n.title),l.Eb(2),l.Rc("",n.videoLength||0,"\u5206\u949f")}}function _(n,t){if(1&n&&(l.ac(0,"div",13),l.ac(1,"div",14),l.ac(2,"span"),l.ac(3,"span",15),l.Pc(4),l.Zb(),l.Nc(5,C,2,1,"span",16),l.Zb(),l.Nc(6,O,4,0,"span",17),l.Zb(),l.ac(7,"div",18),l.ac(8,"div",19),l.Nc(9,M,7,4,"div",20),l.Zb(),l.Zb(),l.Zb()),2&n){const n=t.$implicit,e=t.index,i=l.lc(3);l.Eb(4),l.Sc("\u7b2c",i.chineseNumber[e],"\u8282\uff1a",n.name,""),l.Eb(1),l.tc("ngIf","1"==i.courseData.isSmart),l.Eb(1),l.tc("ngIf",null==n||null==n.handoutsMaterial?null:n.handoutsMaterial.length),l.Eb(3),l.tc("ngForOf",n.handoutsRecording)}}function w(n,t){if(1&n&&(l.ac(0,"div",11),l.Nc(1,_,10,5,"div",12),l.Zb()),2&n){const n=l.lc().$implicit;l.Eb(1),l.tc("ngForOf",n.children)}}const z=function(n){return{close:n}};function y(n,t){if(1&n){const n=l.bc();l.ac(0,"div",4),l.ac(1,"div",5),l.ic("click",(function(){l.Ec(n);const e=t.$implicit,i=t.index;return l.lc().switchChapters(e,i)})),l.ac(2,"span"),l.Pc(3),l.Zb(),l.Nc(4,f,1,0,"i",6),l.Nc(5,b,1,0,"i",7),l.Zb(),l.Nc(6,w,2,1,"div",8),l.Zb()}if(2&n){const n=t.$implicit,e=t.index,i=l.lc();l.Eb(1),l.tc("ngClass",l.xc(6,z,n.open||!n.children)),l.Eb(2),l.Sc("\u7b2c",i.chineseNumber[e],"\u7ae0\uff1a",n.name,""),l.Eb(1),l.tc("ngIf",n.open),l.Eb(1),l.tc("ngIf",!n.open),l.Eb(1),l.tc("ngIf",n.children&&n.children.length>0&&n.open)}}function v(n,t){1&n&&l.Pc(0," \u8d44\u6599 ")}function E(n,t){if(1&n){const n=l.bc();l.ac(0,"li",31),l.ic("click",(function(){l.Ec(n);const e=t.$implicit;return l.lc(2).download(e)})),l.Vb(1,"img",32),l.Pc(2),l.Zb()}if(2&n){const n=t.$implicit;l.Eb(2),l.Rc(" ",n.attachmentName," ")}}function x(n,t){if(1&n&&(l.ac(0,"div",29),l.ac(1,"ul"),l.Nc(2,E,3,1,"li",30),l.Zb(),l.Zb()),2&n){const n=l.lc();l.Eb(2),l.tc("ngForOf",n.handoutsMaterial)}}let k=(()=>{class n{constructor(n,t,e){this.message=n,this.courseMgService=t,this.aliOss=e,this.courseData=s.a.getPacketInfo(),this.outline=[],this.isVisible=!1,this.chineseNumber=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c","\u5341\u4e09","\u5341\u56db","\u5341\u4e94","\u5341\u516d","\u5341\u4e03","\u5341\u516b","\u5341\u4e5d","\u4e8c\u5341","\u4e8c\u5341\u4e00","\u4e8c\u5341\u4e8c","\u4e8c\u5341\u4e09","\u4e8c\u5341\u56db","\u4e8c\u5341\u4e94","\u4e8c\u5341\u516d","\u4e8c\u5341\u4e03","\u4e8c\u5341\u516b","\u4e8c\u5341\u4e5d","\u4e09\u5341"],this.handouts=[],this.handoutsMaterial=[],this.handoutsRecording=[]}ngOnInit(){this.getChapter()}switchChapters(n,t){this.outline[t].open=!this.outline[t].open,n.children||this.chapterChange(this.outline[t])}showData(n){if(this.isVisible=!this.isVisible,!n)return!1;this.handoutsMaterial=n.handoutsMaterial}download(n){this.aliOss.download(n)}goToBreakthrough(n,t){window.open(`#/chapter-study/${t.id}/2${n.attachmentPath?"/"+n.attachmentPath:""}`)}getChapter(){this.courseMgService.getList_courseChapter(this.courseData.id).subscribe(n=>{200===n.status&&(n.data.forEach(n=>{n.open=!1}),this.outline=n.data,this.outline.length>0&&(this.outline[0].open=!0,this.outline[0].children&&0!==this.outline[0].children.length||this.chapterChange(this.outline[0])))})}chapterChange(n){Object(r.a)([this.courseMgService.getList_courseSection(n.id),this.courseMgService.sectionFileList_courseSectionFile(null,n.id)]).subscribe(([t,e])=>{if(200===t.status&&(n.children=t.data||[],n.children.length)){const t=[];n.children.forEach(n=>{t.push(n.id)}),this.courseMgService.countTheNumberOfKnowledgePoints(t).subscribe(t=>{200===t.status&&t.data.forEach((t,e)=>{n.children.every((e,i)=>{if(e.id!==t.courseSectionId)return!0;n.children[i].knowledgePointCount=t.knowledgePointCount})})})}if(200===e.status){const t=e.data||[];n.handoutsMaterial=t.filter(n=>"102"===n.type),n.handoutsRecording=t.filter(n=>"103"===n.type).sort((n,t)=>n.seq>t.seq?-1:n.seq<t.seq?1:0),this.setExtendData(n,"handoutsMaterial"),this.setExtendData(n,"handoutsRecording")}})}setExtendData(n,t){n[t].forEach(e=>{n.children.length&&n.children.every((i,c)=>{if(i.id!==e.courseSectionId)return!0;n.children[c][t]?n.children[c][t].push(e):n.children[c][t]=[e]})})}}return n.\u0275fac=function(t){return new(t||n)(l.Ub(d.e),l.Ub(i.b),l.Ub(u.a))},n.\u0275cmp=l.Ob({type:n,selectors:[["app-study-outline-recorded"]],decls:6,vars:5,consts:[["class","outline-container",4,"ngFor","ngForOf"],["nzClassName","data",3,"nzVisible","nzTitle","nzContent","nzFooter","nzVisibleChange","nzOnCancel"],["modalTitle",""],["modalContent",""],[1,"outline-container"],[1,"item",3,"ngClass","click"],["nz-icon","","nzType","up","nzTheme","outline",4,"ngIf"],["nz-icon","","nzType","down","nzTheme","outline",4,"ngIf"],["class","outline-detail",4,"ngIf"],["nz-icon","","nzType","up","nzTheme","outline"],["nz-icon","","nzType","down","nzTheme","outline"],[1,"outline-detail"],["class","chapters",4,"ngFor","ngForOf"],[1,"chapters"],[1,"section-name"],[1,"name"],["class","size",4,"ngIf"],["class","document",3,"click",4,"ngIf"],[1,""],[1,"section"],["class","item",3,"click",4,"ngFor","ngForOf"],[1,"size"],[1,"document",3,"click"],["nz-icon","","nzType","folder","nzTheme","outline"],[1,"item",3,"click"],["nz-icon","","nzType","play-circle","nzTheme","outline"],[1,"description"],[1,"name",3,"ngStyle"],[1,"time"],[1,"box-inner"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["src","assets/images/file.png","alt",""]],template:function(n,t){if(1&n&&(l.Nc(0,y,7,8,"div",0),l.ac(1,"nz-modal",1),l.ic("nzVisibleChange",(function(n){return t.isVisible=n}))("nzOnCancel",(function(){return t.showData("")})),l.Nc(2,v,1,0,"ng-template",null,2,l.Oc),l.Nc(4,x,3,1,"ng-template",null,3,l.Oc),l.Zb()),2&n){const n=l.Cc(3),e=l.Cc(5);l.tc("ngForOf",t.outline),l.Eb(1),l.tc("nzVisible",t.isVisible)("nzTitle",n)("nzContent",e)("nzFooter",null)}},directives:[h.m,g.a,h.l,h.n,p.a,m.a,h.o],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}h2[_ngcontent-%COMP%]{width:1200px;text-align:left;padding-left:2rem;font-size:26px;color:#3a3c42;margin-top:3rem}.outline-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#000;width:1200px;border-radius:1rem;margin:auto auto 1rem}.outline-container[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]{background:rgba(204,245,223,.63);padding:1rem 2.5rem;font-size:1.2rem;display:flex;align-items:center;justify-content:space-between;border-radius:1rem;cursor:pointer}.outline-container[_ngcontent-%COMP%] > .item.close[_ngcontent-%COMP%]{border-radius:1rem 1rem 0 0}.outline-container[_ngcontent-%COMP%] > .item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#00ab84}.outline-detail[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#fafafa;padding:0 2rem;border-radius:0 0 1rem 1rem;overflow:hidden}.outline-detail[_ngcontent-%COMP%]   .chapters[_ngcontent-%COMP%]:last-child{padding-bottom:1rem}.section-name[_ngcontent-%COMP%]{padding:2rem .5rem 1rem;display:flex;align-items:center;justify-content:space-between}.section-name[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-right:1rem;font-size:1.2rem;color:#555}.section-name[_ngcontent-%COMP%]   .size[_ngcontent-%COMP%]{color:#999}.section-name[_ngcontent-%COMP%]   .document[_ngcontent-%COMP%]{color:#00ab84;cursor:pointer}.section-name[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:.5rem}.section[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;cursor:pointer}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{background-color:#fff;border-radius:.3rem;padding:1rem 2rem;margin:.5rem;box-shadow:0 0 20px hsla(0,0%,88.2%,.522);display:flex;width:calc(33.33333% - 1rem)}.section[_ngcontent-%COMP%]   .item.lock[_ngcontent-%COMP%], .section[_ngcontent-%COMP%]   .item.lock[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{color:#ccc}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding:.3rem .5rem 0 0}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{white-space:nowrap;text-overflow:ellipsis;overflow:hidden;color:#3a3c42}.section[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{margin-top:.5rem;color:#a3abb8}"],data:{animation:[Object(a.l)("collapse",[Object(a.i)("open",Object(a.j)({height:0})),Object(a.i)("close",Object(a.j)({height:"auto"})),Object(a.k)("open <=> close",[Object(a.e)("0.3s")])])]}}),n})();var Z=e("Lfe1");const N=[{path:"outline",pathMatch:"full",component:k},{path:"outline-fl",component:e("CVFo").a},{path:"**",component:Z.a,data:{title:"404"}}];let T=(()=>{class n{}return n.\u0275mod=l.Sb({type:n}),n.\u0275inj=l.Rb({factory:function(t){return new(t||n)},imports:[[o.l.forChild(N)],o.l]}),n})(),F=(()=>{class n{}return n.\u0275mod=l.Sb({type:n}),n.\u0275inj=l.Rb({factory:function(t){return new(t||n)},providers:[i.b],imports:[[T,c.a]]}),n})()}}]);
//# sourceMappingURL=16-es2015.725cf5ae9c0adf1ae2a5.js.map