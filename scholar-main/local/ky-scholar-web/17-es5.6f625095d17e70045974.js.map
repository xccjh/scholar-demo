{"version":3,"sources":["webpack:///src/app/routes/archives-manage/video-preview/video-preview.component.ts","webpack:///src/app/routes/archives-manage/teacher-preview/teacher-preview.component.ts","webpack:///src/app/routes/archives-manage/teacher-preview/teacher-preview.component.html","webpack:///src/app/routes/archives-manage/video-preview/video-preview.component.html","webpack:///src/app/routes/archives-manage/announcement-management/announcement-management.component.html","webpack:///src/app/routes/archives-manage/announcement-management/announcement-management.component.ts","webpack:///src/app/routes/archives-manage/recording-lecturer/recording-lecturer.component.html","webpack:///src/app/routes/archives-manage/recording-lecturer/recording-lecturer.component.ts","webpack:///src/app/routes/archives-manage/archives-manage.module.ts","webpack:///src/app/routes/archives-manage/archives-manage-routing.module.ts"],"names":["VideoPreviewComponent","TeacherPreviewComponent","httpServer","route","desColumn","xxl","xl","lg","md","sm","xs","data","this","paramMap","subscribe","params","id","get","guideTeacherDetails","res","console","log","win","window","document","querySelector","palyVideo","creteScript","scripts","createElement","src","head","append","addEventListener","e","layoutContent","styles","getComputedStyle","w","width","h","height","polyvPlayer","wrap","vid","AnnouncementManagementComponent","fb","modalService","knowledgeManageService","message","locale","super","_PAGE_ID_","allLine","orgCode","getOrgCode","userId","getUserId","isModalLoading","isOwnedLessonPackageLoading","isManager","nodes","title","value","key","children","isLeaf","initializeForm","modalForm","group","name","required","maxLength","announcementContent","ownedLessonPackage","result","i","controls","markAsUntouched","markAsPristine","updateValueAndValidity","param","page","pageIndex","limit","pageSize","searchKey","searchWord","startTime","endTime","filterKey","dateRange","length","isLoading","searchMajor","status","total","totalResult","error","JSON","stringify","err","markAsDirty","patchValue","initializeFormFieldState","showModal","confirm","nzTitle","nzContent","nzOkText","nzCancelText","nzOnOk","modalFormRef","create","modalContent","nzMaskClosable","nzWrapClassName","Promise","resolve","reject","makeFormDirty","invalid","postData","parse","majorTypeName","majorType","saveMajor","searchData","delMajor","$event","storingData","resetData","add","RecordingLecturerComponent","ArchivesManageModule","ArchivesManageRoutingModule","routes","path","component","menuService","notify","courseMgService","isVisible","isAreaLoading","isPreviewpolyway","previewData","isPreviewDetail","previewTitle","previewStart","prefix","environment","OSS_URL","courseList","isEdit","selectedCourseVal","selectedCourseValue","preview","initFrom","getCourseList","then","getDataList","getSearch","searchWordVal","passData","parpms","sort","trim","courseIds","join","guideTeacherTableList","forEach","item","seq","getCourseListTreeNew","polywayID","videoName","introduction","avatar","reset","sybcParam","collectParam","videoId","warning","resourceUrl","course","map","courseId","Object","keys","guideTeacherAddEdit","row","guideTeacherDel","courseName","handlepreVideo","forChild"],"mappings":"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","file":"x","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\n@Component({\r\n  selector: 'app-video-preview',\r\n  templateUrl: './video-preview.component.html',\r\n  styleUrls: ['./video-preview.component.less']\r\n})\r\nexport class VideoPreviewComponent implements OnInit {\r\n  win: any = window\r\n  constructor(\r\n    private route: ActivatedRoute\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    const myPlayer = document.querySelector('#myPlayer')\r\n    if (myPlayer) {\r\n      this.palyVideo()\r\n    } else {\r\n      this.creteScript()\r\n    }\r\n  }\r\n  creteScript () {\r\n    const scripts =  document.createElement('script')\r\n    scripts.id = 'myPlayer'\r\n    scripts.src = '//player.polyv.net/script/player.js'\r\n    document.head.append(scripts)\r\n    scripts.addEventListener('load', (e) => {\r\n      this.palyVideo()\r\n    })\r\n  }\r\n  palyVideo () {\r\n    this.route.paramMap.subscribe(params => {\r\n      const id = params.get('id'); // 88083abbf5535a4d7b4d8614427559e0_8\r\n      console.log(id)\r\n      const layoutContent = document.querySelector('.ant-layout-content')\r\n      const styles = getComputedStyle(layoutContent)\r\n      const w = styles.width\r\n      const h = styles.height\r\n      console.log(h, w);\r\n\r\n      this.win.polyvPlayer({\r\n        wrap: '#player',\r\n        width: w,\r\n        height: h,\r\n        vid: id,\r\n      });\r\n    });\r\n  }\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {ArchivesManageServer} from 'src/app/busi-services/archives-manage.server';\r\nimport {ActivatedRoute} from '@angular/router';\r\n\r\n@Component({\r\n  selector: 'app-teacher-preview',\r\n  templateUrl: './teacher-preview.component.html',\r\n  styleUrls: ['./teacher-preview.component.less']\r\n})\r\nexport class TeacherPreviewComponent implements OnInit {\r\n  desColumn = {xxl: 1, xl: 1, lg: 1, md: 1, sm: 1, xs: 1};\r\n  data: any = {};\r\n\r\n  constructor(\r\n    private httpServer: ArchivesManageServer,\r\n    private route: ActivatedRoute,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.subscribe(params => {\r\n      const id = params.get('id');\r\n      this.httpServer.guideTeacherDetails({id}).subscribe(res => {\r\n        console.log(res);\r\n        if (!res) return\r\n        this.data = res.data\r\n      })\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"teacher-preview\">\r\n  <nz-descriptions nzTitle=\"指导老师详情\" [nzColumn]=\"desColumn\">\r\n    <nz-descriptions-item nzTitle=\"指导讲师姓名: \">{{ data?.name }}</nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"简介: \">{{ data?.introduction }}</nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"创建时间: \">{{  data?.createTime | date:'yyyy-MM-dd HH:mm:ss':'GMT+08:00'}}</nz-descriptions-item>\r\n  </nz-descriptions>\r\n</div>\r\n","<div id=\"player\">\r\n</div>\r\n","<nz-layout class='container'>\r\n  <div class='main-header'>\r\n    公告查询\r\n  </div>\r\n  <div class='header'>\r\n    <label>公告主题：</label>\r\n    <input nz-input placeholder=\"支持主题搜索\"\r\n           (ngModelChange)=\"storingData()\"\r\n           style='margin-right: 20px' (keyup.enter)='searchData(\"button\")'/>\r\n    <label>更新时间：</label>\r\n    <nz-range-picker nzFormat='yyyy-MM-dd' [(ngModel)]=\"dateRangeVal\"\r\n                     (ngModelChange)=\"storingData()\"></nz-range-picker>\r\n    <button nz-button nzType=\"primary\" style='margin-left:20px;' (click)=\"searchData('button')\">查询</button>\r\n    <button nz-button nzType=\"primary\" style='margin-left:20px;' (click)=\"resetData()\">重置</button>\r\n  </div>\r\n  <nz-content style='padding: 15px 20px 20px;'>\r\n    <div class=\"course-header\">\r\n      <button nz-button nzType=\"primary\" (click)=\"add()\"\r\n              style=\"margin-bottom:20px;\">新增公告\r\n      </button>\r\n    </div>\r\n    <div class='table-container' id='tableScroll' [class.no-scoll]='!data.length'>\r\n      <nz-table #ajaxTable [nzData]=\"data\" [nzFrontPagination]=\"false\" [nzShowSizeChanger]=\"true\"\r\n                [nzScroll]='{y : height+\"px\"}'\r\n                [nzPageSizeOptions]='[15, 20, 30, 40, 50]'\r\n                [nzShowTotal]=\"totalTemplate\" [nzLoading]=\"isLoading\" [nzTotal]=\"total\" [(nzPageIndex)]=\"pageIndex\"\r\n                [(nzPageSize)]=\"pageSize\" (nzPageIndexChange)=\"searchData()\" (nzPageSizeChange)=\"searchData()\">\r\n        <thead>\r\n        <tr>\r\n          <th>主题</th>\r\n          <th>内容</th>\r\n          <th>所属课包</th>\r\n          <th>创建者</th>\r\n          <th>更新时间</th>\r\n          <th>状态</th>\r\n          <th>操作</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr *ngFor=\"let data of ajaxTable.data\">\r\n          <td>{{ data?.code }}</td>\r\n          <td>{{ data?.name }}</td>\r\n          <td>{{ data?.productLineName }}</td>\r\n          <td>{{ data?.leaderName }}</td>\r\n          <td>{{ data?.finalApproverName }}</td>\r\n          <td>{{ data?.createrName }}</td>\r\n          <td>\r\n            <a (click)=\"edit(data)\" style='margin-right:10px;padding:0;'\r\n               nz-button nzType=\"link\">编辑</a>\r\n            <a (click)=\"send(data)\" style='margin-right:10px;padding:0;'\r\n               nz-button nzType=\"link\">发送</a>\r\n            <a (click)=\"del(data)\" style='color:red;padding:0;' nz-button nzType=\"link\">删除</a>\r\n          </td>\r\n        </tr>\r\n        </tbody>\r\n      </nz-table>\r\n    </div>\r\n  </nz-content>\r\n  <ng-template #totalTemplate let-total>共 {{ total }} 条记录</ng-template>\r\n</nz-layout>\r\n<ng-template #modalContent>\r\n  <nz-spin [nzSpinning]=\"isModalLoading\" [nzDelay]=\"0\">\r\n    <form nz-form [formGroup]=\"modalForm\">\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>公告主题</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"nameTpl\" style='max-width: 316px;'>\r\n          <input nz-input formControlName=\"name\" placeholder=\"请输入公告主题\"\r\n                 (keyup.enter)='confirm()'/>\r\n        </nz-form-control>\r\n        <span style=\"margin-left: 10px;\" [style.color]='modalForm.controls.name.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{modalForm.value.name.length}}/25</span>\r\n        <ng-template #nameTpl let-control>\r\n          <div\r\n            *ngIf=\"control.hasError('required')\">公告主题不能为空\r\n          </div>\r\n          <div\r\n            *ngIf=\"control.hasError('maxlength')\">公告主题不能超过25个字符\r\n          </div>\r\n        </ng-template>\r\n      </nz-form-item>\r\n\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired>所属课包</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"所属课包不能为空\">\r\n          <nz-spin [nzSpinning]=\"isOwnedLessonPackageLoading\" [nzDelay]=\"0\">\r\n            <nz-tree-select\r\n              style=\"width: 316px\"\r\n              formControlName=\"ownedLessonPackage\"\r\n              [nzNodes]=\"nodes\"\r\n              (ngModelChange)=\"onPacketChange($event)\"\r\n              nzShowSearch\r\n              nzCheckable\r\n              nzAllowClear\r\n              nzPlaceHolder=\"请选择在所属课包\"\r\n            >\r\n            </nz-tree-select>\r\n          </nz-spin>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\">公告内容</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"announcementContentTpl\" style='max-width: 316px;'>\r\n          <textarea\r\n            nz-input\r\n            formControlName=\"announcementContent\" placeholder=\"请输入公告内容\"\r\n            (keyup.enter)='confirm()'\r\n            [nzAutosize]=\"{ minRows: 2, maxRows: 6 }\"\r\n          ></textarea>\r\n        </nz-form-control>\r\n        <span style=\"margin-left: 10px;\" [style.color]='modalForm.controls.announcementContent.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{modalForm.value.name.length}}/200</span>\r\n        <ng-template #announcementContentTpl let-control>\r\n          <div\r\n            *ngIf=\"control.hasError('required')\">公告内容不能为空\r\n          </div>\r\n          <div\r\n            *ngIf=\"control.hasError('maxlength')\">公告内容不能超过200个字符\r\n          </div>\r\n        </ng-template>\r\n      </nz-form-item>\r\n\r\n\r\n    </form>\r\n  </nz-spin>\r\n</ng-template>\r\n\r\n\r\n\r\n\r\n","import {Component, Inject, LOCALE_ID, OnInit, TemplateRef, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NzMessageService, NzModalRef, NzModalService} from 'ng-zorro-antd';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {KnowledgeManageService} from 'src/app/busi-services/knowledge-manag.service';\r\nimport {spaceValidator} from 'src/app/shared/validators/atr-validtors';\r\nimport {LocalStorageUtil} from 'core/utils/localstorage.util';\r\nimport {formatDate} from '@angular/common';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\nimport {ProfessionalParams} from 'core/base/common';\r\nimport {SearchTableComponent} from '../../course-manage/components';\r\n\r\n@Component({\r\n  selector: 'app-announcement-management',\r\n  templateUrl: './announcement-management.component.html',\r\n  styleUrls: ['./announcement-management.component.less']\r\n})\r\nexport class AnnouncementManagementComponent extends SearchTableComponent implements OnInit {\r\n  _PAGE_ID_ = 'AnnouncementManagementComponent';\r\n  modalForm: FormGroup;\r\n  modalFormRef: NzModalRef;\r\n  allLine = [];\r\n  orgCode = ToolsUtil.getOrgCode();\r\n  userId = LocalStorageUtil.getUserId();\r\n  isModalLoading = false;\r\n  isOwnedLessonPackageLoading = false;\r\n  isManager: any = '0';\r\n  nodes = [\r\n    {\r\n      title: 'Node1',\r\n      value: '0-0',\r\n      key: '0-0',\r\n      children: [\r\n        {\r\n          title: 'Child Node1',\r\n          value: '0-0-0',\r\n          key: '0-0-0',\r\n          isLeaf: true\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      title: 'Node2',\r\n      value: '0-1',\r\n      key: '0-1',\r\n      children: [\r\n        {\r\n          title: 'Child Node3',\r\n          value: '0-1-0',\r\n          key: '0-1-0',\r\n          isLeaf: true\r\n        },\r\n        {\r\n          title: 'Child Node4',\r\n          value: '0-1-1',\r\n          key: '0-1-1',\r\n          isLeaf: true\r\n        },\r\n        {\r\n          title: 'Child Node5',\r\n          value: '0-1-2',\r\n          key: '0-1-2',\r\n          isLeaf: true\r\n        }\r\n      ]\r\n    }\r\n  ]\r\n  @ViewChild('modalContent') modalContent: TemplateRef<any>;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private modalService: NzModalService,\r\n    private knowledgeManageService: KnowledgeManageService,\r\n    public message: NzMessageService,\r\n    @Inject(LOCALE_ID) public locale: string\r\n  ) {\r\n    super();\r\n    this.initializeForm();\r\n  }\r\n\r\n  initializeForm(): void {\r\n    this.modalForm = this.fb.group({\r\n      id: [''],\r\n      name: ['', [Validators.required, spaceValidator(), Validators.maxLength(25)]],\r\n      announcementContent: ['', [Validators.required, spaceValidator(), Validators.maxLength(200)]],\r\n      ownedLessonPackage: [[], [Validators.required]], // 产品线\r\n    });\r\n  }\r\n\r\n  onChange(result: Date): void {\r\n    console.log('onChange: ', result);\r\n  }\r\n\r\n  initializeFormFieldState(): void {\r\n    // tslint:disable-next-line:forin\r\n    for (const i in this.modalForm.controls) {\r\n      this.modalForm.controls[i].markAsUntouched();\r\n      this.modalForm.controls[i].markAsPristine();\r\n      this.modalForm.controls[i].updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n\r\n  /*\r\n  * @Override\r\n  * @*/\r\n  getDataList() {\r\n    const param: ProfessionalParams = {\r\n      page: this.pageIndex,\r\n      limit: this.pageSize,\r\n      orgCode: ToolsUtil.getOrgCode(),\r\n      searchKey: this.searchWord,\r\n      startTime: '',\r\n      endTime: '',\r\n      filterKey: 'MANAGER'\r\n    };\r\n\r\n    if (this.dateRange.length) {\r\n      param.startTime = formatDate(this.dateRange[0], 'yyyy-MM-dd', this.locale);\r\n      param.endTime = formatDate(this.dateRange[1], 'yyyy-MM-dd', this.locale);\r\n    }\r\n\r\n    this.isLoading = true;\r\n    const success = (res) => {\r\n      this.isLoading = false;\r\n      if (res.status === 200) {\r\n        this.data = res.data;\r\n        this.total = res.page.totalResult;\r\n      } else {\r\n        this.message.error(JSON.stringify(res));\r\n      }\r\n    };\r\n\r\n    const error = (err) => {\r\n      this.isLoading = false;\r\n      this.message.error(JSON.stringify(err));\r\n    };\r\n    this.knowledgeManageService.searchMajor(param).subscribe(success, error);\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  makeFormDirty(): void {\r\n    // tslint:disable-next-line:forin\r\n    for (const i in this.modalForm.controls) {\r\n      this.modalForm.controls[i].markAsDirty();\r\n      this.modalForm.controls[i].updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n\r\n  add(): void {\r\n    this.modalForm.patchValue({\r\n      id: '',\r\n      name: '', // 学科名称\r\n      announcementContent: '',\r\n      ownedLessonPackage: [] // 产品线\r\n    });\r\n    this.initializeFormFieldState();\r\n    this.showModal('新增公告');\r\n  }\r\n\r\n  edit(data: any): void {\r\n    this.modalForm.patchValue({\r\n      id: data.id,\r\n      name: data.name,\r\n      announcementContent: data.announcementContent,\r\n      ownedLessonPackage: data.ownedLessonPackage, //  终审人\r\n    });\r\n    this.initializeFormFieldState();\r\n    this.showModal('编辑公告');\r\n  }\r\n\r\n\r\n  send(data) {\r\n    this.modalService.confirm({\r\n      nzTitle: '发送',\r\n      nzContent: `确定马上发送“${data.name}”公告吗？`,\r\n      nzOkText: '确定',\r\n      nzCancelText: '取消',\r\n      nzOnOk: () => {\r\n      }\r\n    });\r\n  }\r\n\r\n  showModal(title: string) {\r\n    this.modalFormRef = this.modalService.create({\r\n      nzTitle: title,\r\n      nzContent: this.modalContent,\r\n      nzMaskClosable: false,\r\n      nzWrapClassName: 'vertical-center-modal',\r\n      nzCancelText: '取消',\r\n      nzOkText: '保存',\r\n      nzOnOk: (e) => {\r\n        return this.confirm();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  confirm() {\r\n    return new Promise((resolve, reject) => {\r\n      this.makeFormDirty();\r\n      if (this.modalForm.invalid) {\r\n        resolve(false);\r\n        return;\r\n      }\r\n      const success = (res) => {\r\n        if (res.status === 201) {\r\n          this.pageIndex = 1;\r\n          this.searchData();\r\n          this.isModalLoading = false;\r\n          resolve(true);\r\n        } else {\r\n          this.isModalLoading = false;\r\n          resolve(false);\r\n        }\r\n      };\r\n      const error = (err) => {\r\n        this.isModalLoading = false;\r\n        resolve(false);\r\n      };\r\n      this.isModalLoading = true;\r\n      const postData = JSON.parse(JSON.stringify(this.modalForm.value));\r\n      if (postData.majorType === '1') {\r\n        postData.majorTypeName = '财会证书';\r\n      } else {\r\n        postData.majorTypeName = '会计实操';\r\n      }\r\n      this.knowledgeManageService.saveMajor(postData).subscribe(success, error);\r\n    });\r\n  }\r\n\r\n  del(data: any) {\r\n    this.modalService.confirm({\r\n      nzTitle: '删除公告',\r\n      nzContent: `你确定删除“${data.name}”公告吗？`,\r\n      nzOkText: '确定',\r\n      nzCancelText: '取消',\r\n      nzOnOk: () => {\r\n        this.knowledgeManageService.delMajor({id: data.id}).subscribe((res) => {\r\n          this.searchData();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onPacketChange($event: any) {\r\n\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"resource-container\">\r\n    <div class=\"header\">\r\n      <div class=\"title\">\r\n        指导讲师\r\n      </div>\r\n      <div class='search-content'>\r\n        <div class='search-item'>\r\n          <div class='search-label pt5'>\r\n            讲师姓名 ：\r\n          </div>\r\n          <input nz-input placeholder=\"支持讲师姓名\" [(ngModel)]=\"searchWordVal\" (ngModelChange)='storingData()'\r\n                 (keyup.enter)='searchData(\"button\")' class='item-select' nzAllowClear style='max-width:calc(100% - 75px)'/>\r\n        </div>\r\n        <div class='search-item'>\r\n          <div class='search-label pt5'>\r\n            所属课程 ：\r\n          </div>\r\n          <nz-select class='item-select' [(ngModel)]=\"selectedCourseVal\" nzShowSearch style='max-width:calc(100% - 75px)'\r\n                     (ngModelChange)='storingData()' nzMode=\"multiple\">\r\n            <nz-option [nzValue]=\"item.id\" [nzLabel]=\"item.name\"\r\n                       *ngFor='let item of courseList;let i=index'></nz-option>\r\n          </nz-select>\r\n        </div>\r\n        <button nz-button nzType=\"primary\" (click)=\"searchData('button')\" style='margin-left:20px;'>查询</button>\r\n        <button nz-button nzType=\"primary\" style='margin:0 20px;' (click)=\"resetData()\">重置</button>\r\n      </div>\r\n    </div>\r\n    <nz-content style='padding: 15px 20px 20px;'>\r\n      <div class=\"course-header\" *ngIf='!preview'>\r\n        <div>\r\n          <button nz-button nzType=\"primary\" (click)=\"questionConfiguration()\">新增讲师</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"table-container\" id='tableScroll' [class.no-scoll]='!data.length'>\r\n        <nz-table #basicTable [nzData]=\"data\" [nzFrontPagination]=\"false\"\r\n                  [nzPageSizeOptions]='[15, 20, 30, 40, 50]'\r\n                  [nzShowSizeChanger]=\"true\"\r\n                  [nzScroll]='{y : height+\"px\",x:930+\"px\"}'\r\n                  [nzShowTotal]=\"totalTemplate\" [nzLoading]=\"isLoading\" [nzTotal]=\"total\"\r\n                  [(nzPageIndex)]=\"pageIndex\"\r\n                  [(nzPageSize)]=\"pageSize\" (nzPageIndexChange)=\"searchData()\"\r\n                  (nzPageSizeChange)=\"searchData()\">\r\n          <thead>\r\n          <tr>\r\n            <th nzWidth='50px'>序号</th>\r\n            <th nzWidth='100px'>讲师头像</th>\r\n            <th nzWidth='120px'>姓名</th>\r\n            <th nzWidth='150px'>所属课程</th>\r\n            <th nzWidth=\"200px\">讲师简介</th>\r\n            <th nzWidth='150px'>试讲视频</th>\r\n            <th nzWidth='150px'>操作</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          <tr *ngFor=\"let data of basicTable.data;let idx=index;\">\r\n            <td>{{ data.seq }}</td>\r\n            <td>\r\n              <img [src]='prefix + data.avatar' style='width:50px;height:50px;border-radius:50%;' *ngIf='data.avatar'>\r\n              <nz-avatar nzIcon=\"user\" *ngIf='!data.avatar'></nz-avatar>\r\n            </td>\r\n            <td><span class='synopsis-text'>{{ data.name }}</span></td>\r\n            <td><span class='synopsis-text'>{{ getCourseName(data) }}</span></td>\r\n            <td><span class='synopsis-text'>{{ data.introduction}}</span></td>\r\n            <td>\r\n              <span class='synopsis-text blc' (click)=\"handlepreVideo(data)\">\r\n                 <i nz-icon nzType=\"folder-view\" nzTheme=\"outline\" *ngIf=\"data.videoId\"></i>\r\n                {{data.videoName}}\r\n              </span>\r\n            </td>\r\n            <td>\r\n              <a class='operating ml0' (click)=\"previewItem(data)\">预览</a>\r\n              <a class='operating' (click)=\"questionConfiguration(data)\" *ngIf='!preview'>编辑</a>\r\n              <a class=\"light-color operating\" (click)=\"handleTableRowDel(data)\" *ngIf='!preview'>删除</a>\r\n            </td>\r\n          </tr>\r\n          </tbody>\r\n        </nz-table>\r\n      </div>\r\n      <ng-template #totalTemplate let-total>共 {{ total }} 条记录</ng-template>\r\n    </nz-content>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #modalContent>\r\n  <nz-spin [nzSpinning]=\"isModalLoading\" [nzDelay]=\"0\">\r\n    <form nz-form [formGroup]=\"modalForm\">\r\n      <!--      <nz-form-item style='margin:0'>-->\r\n      <!--        <nz-form-label [nzSm]=\"3\" [nzXs]=\"24\" nzFor=\"coverArr\" style='min-width: 100px;'-->\r\n      <!--                       nzRequired>头像-->\r\n      <!--        </nz-form-label>-->\r\n      <!--        <nz-form-control [nzSm]=\"21\" [nzXs]=\"24\"-->\r\n      <!--                         nzHasFeedback-->\r\n      <!--                         [nzExtra]=\"courseTpl\"-->\r\n      <!--                         nzErrorTip=\"请上传文件\">-->\r\n      <!--          <qkc-upload-->\r\n      <!--            uploadDir=\"user/phone\"-->\r\n      <!--            limit=\"1\"-->\r\n      <!--            listType=\"picture-card\"-->\r\n      <!--            acceptType=\"jpg,jpeg,png\"-->\r\n      <!--            formControlName=\"coverPath\">-->\r\n      <!--            <i nz-icon nzType=\"plus\"></i>-->\r\n      <!--            <div class=\"ant-upload-text\">上传</div>-->\r\n      <!--          </qkc-upload>-->\r\n      <!--          <ng-template #courseTpl>-->\r\n      <!--            <div style='height: 45px;'>仅限一个，支持扩展名：jpg .png</div>-->\r\n      <!--          </ng-template>-->\r\n      <!--        </nz-form-control>-->\r\n      <!--      </nz-form-item>-->\r\n\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired style='min-width: 100px;'>头像\r\n        </nz-form-label>\r\n        <!--          [nzExtra]=\"courseTpl\"-->\r\n        <nz-form-control\r\n          nzHasFeedback\r\n          nzErrorTip=\"请上传文件\">\r\n          <qkc-upload\r\n            uploadDir=\"user/phone\"\r\n            limit=\"1\"\r\n            maxSize='2'\r\n            listType=\"picture-card\"\r\n            acceptType=\"jpg,jpeg,png\"\r\n            formControlName=\"avatar\"\r\n          >\r\n            <i nz-icon nzType=\"plus\"></i>\r\n            <div class=\"ant-upload-text\">上传</div>\r\n          </qkc-upload>\r\n          <!--            <ng-template #courseTpl>-->\r\n          <!--              <div style='position:absolute;top: 0;left: 112px;'>-->\r\n          <!--                <div style='height: 45px;'>仅限一个，支持扩展名：jpg .png</div>-->\r\n          <!--                <div>最佳设计尺寸大于1080*608 ，大小小于2M</div>-->\r\n          <!--              </div>-->\r\n          <!--            </ng-template>-->\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired style='min-width: 100px;'>姓名</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"nameTpl\" style='max-width: 316px;'>\r\n          <input nz-input type=\"text\" formControlName=\"name\" placeholder=\"请输入姓名\" (keyup.enter)='searchData()'/>\r\n        </nz-form-control>\r\n        <span style=\"margin-left: 10px;\" [style.color]='modalForm.controls.name.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{modalForm?.value?.name.length}}/25</span>\r\n        <ng-template #nameTpl let-control>\r\n          <div *ngIf=\"control.hasError('required')\">\r\n            姓名不能为空\r\n          </div>\r\n          <div *ngIf=\"control.hasError('maxlength')\">姓名不能超过25个字符</div>\r\n        </ng-template>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" nzRequired style='min-width: 100px;'>所属课程</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback nzErrorTip=\"所属课程不能为空\" style='max-width: 316px;'>\r\n          <nz-select formControlName='courseIds' nzShowSearch nzMode=\"multiple\">\r\n            <nz-option [nzValue]=\"item.id\" [nzLabel]=\"item.name\"\r\n                       *ngFor='let item of courseList;let i=index'></nz-option>\r\n          </nz-select>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" style='min-width: 100px;'>保利威ID</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"polywayIDControl\" style='max-width: 316px;'>\r\n          <input nz-input type=\"text\" formControlName=\"polywayID\" placeholder=\"请输入保利威ID\" (keyup.enter)='searchData()'/>\r\n        </nz-form-control>\r\n        <ng-template #polywayIDControl let-control>\r\n          <div *ngIf=\"control.hasError('required')\">\r\n            保利威ID不能为空\r\n          </div>\r\n          <div *ngIf=\"control.hasError('maxlength') || control.hasError('minlength')\">请填写正确的保利威ID</div>\r\n        </ng-template>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"5\" style='min-width: 100px;'>视频名称</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzHasFeedback [nzErrorTip]=\"videoNameTpl\" style='max-width: 316px;'>\r\n          <input nz-input type=\"text\" formControlName=\"videoName\" placeholder=\"请输入视频名称\" (keyup.enter)='searchData()'/>\r\n        </nz-form-control>\r\n        <span style=\"margin-left: 10px;\"\r\n              [style.color]='modalForm.controls.videoName.hasError(\"maxlength\")?\"red\":\"inherit\"'>\r\n          {{modalForm.value?.videoName?.length}}/25</span>\r\n        <ng-template #videoNameTpl let-control>\r\n          <div *ngIf=\"control.hasError('required')\">\r\n            视频名称不能为空\r\n          </div>\r\n          <div *ngIf=\"control.hasError('maxlength')\">视频名称不能超过25个字符</div>\r\n        </ng-template>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSm]=\"3\" [nzXs]=\"24\" nzRequired style='min-width: 100px;'>讲师简介\r\n        </nz-form-label>\r\n        <nz-form-control [nzSm]=\"21\" [nzXs]=\"24\" nzHasFeedback [nzErrorTip]=\"introductionTpl\">\r\n      <textarea rows=\"4\" nz-input\r\n                formControlName=\"introduction\"\r\n                class=\"input-width\">\r\n      </textarea>\r\n          <span style=\"margin-left: 10px;\">{{modalForm.value?.introduction?.length || 0}}/100</span>\r\n          <ng-template #introductionTpl let-control>\r\n            <ng-container *ngIf=\"control.hasError('maxlength')\">讲师简介不能超过100个字</ng-container>\r\n            <ng-container *ngIf=\"control.hasError('required')\">讲师简介不能为空</ng-container>\r\n          </ng-template>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n    </form>\r\n  </nz-spin>\r\n</ng-template>\r\n\r\n\r\n<!--保利威预览-->\r\n<!--<nz-modal [(nzVisible)]=\"isPreviewpolyway\" (nzOnCancel)=\"isPreviewpolyway=false\" [nzFooter]='null' [nzTitle]='null'-->\r\n<!--          nzWidth='600' [nzBodyStyle]='{padding:0,height:\"500px\"}' *ngIf='isPreviewpolyway'>-->\r\n<!--  <iframe-->\r\n<!--    allowfullscreen='true'-->\r\n<!--    [src]=\"resourceUrl\"-->\r\n<!--    style=\"width: 100%;border: none;height: 100%\">-->\r\n<!--  </iframe>-->\r\n<!--</nz-modal>-->\r\n\r\n<app-resource-preview-modal [isPreviewpolyway]='isPreviewpolyway' [previewTitle]='previewTitle'\r\n                            [resourceUrl]='resourceUrl' *ngIf='previewStart'\r\n                            (closePreview)='closePreview()'></app-resource-preview-modal>\r\n\r\n<nz-modal [(nzVisible)]=\"isPreviewDetail\" (nzOnCancel)=\"isPreviewDetail=false\" [nzFooter]='null' nzTitle='讲师介绍'>\r\n  <div class=\"teacher-preview\">\r\n    <div class='list-item'>\r\n      <div class='list-label'>\r\n        <img [src]='prefix+previewData.avatar' alt='previewData.avatar'\r\n             style='display:inline-block;width: 80px;height: 80px;border-radius:50%;' *ngIf='previewData.avatar'>\r\n        <nz-avatar nzIcon=\"user\" *ngIf='!previewData.avatar'\r\n                   style='width: 80px;height: 80px;font-size:72px;'></nz-avatar>\r\n      </div>\r\n      <div class='list-content pl25'>\r\n        <span style='font-size:20px' [title]='previewData?.name'>{{ previewData?.name }}</span>\r\n      </div>\r\n    </div>\r\n    <div class='list-item'>\r\n      <div class='list-label pl10'>\r\n        讲师简介 :\r\n      </div>\r\n      <div class='list-content numRom'>\r\n        <span class='numRom' [title]='previewData?.introduction'>\r\n        {{ previewData?.introduction }}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class='list-item'>\r\n      <div class='list-label pl10 mt10'>\r\n        试讲视频 :\r\n      </div>\r\n      <div class='list-content'>\r\n        <i nz-icon nzType=\"folder-view\" nzTheme=\"outline\"\r\n           *ngIf=\"previewData.videoId\"></i>\r\n        <span class=\"blue-text\" (click)=\"handlepreVideo(previewData)\">\r\n          {{previewData.videoName}}\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</nz-modal>\r\n","import {Component, Inject, Input, LOCALE_ID, OnInit, TemplateRef, ViewChild} from '@angular/core';\r\nimport {LocalStorageUtil} from 'core/utils/localstorage.util';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NzModalRef, NzModalService} from 'ng-zorro-antd/modal';\r\nimport {ToolsUtil} from 'core/utils/tools.util';\r\nimport {MenuService} from 'core/services/menu.service';\r\nimport {ArchivesManageServer, CourseManageService, KnowledgeManageService} from 'src/app/busi-services';\r\nimport {NzMessageService} from 'ng-zorro-antd/message';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {NotifyService} from 'core/services/notify.service';\r\nimport {spaceValidator} from '@app/shared/validators/atr-validtors';\r\nimport {environment} from '../../../../environments/environment';\r\nimport {SearchTableComponent} from '@app/routes/course-manage/components';\r\nimport {SessionStorageUtil} from 'core/utils/sessionstorage.util';\r\n\r\n@Component({\r\n  selector: 'app-recording-lecturer',\r\n  templateUrl: './recording-lecturer.component.html',\r\n  styleUrls: ['./recording-lecturer.component.less']\r\n})\r\n\r\nexport class RecordingLecturerComponent extends SearchTableComponent implements OnInit {\r\n  _PAGE_ID_ = 'RecordingLecturerComponent';\r\n  id = -1;\r\n  userId = LocalStorageUtil.getUserId();\r\n  modalForm: FormGroup;\r\n  modalFormRef: NzModalRef;\r\n  isVisible = false;\r\n  orgCode = ToolsUtil.getOrgCode();\r\n  checked: any;\r\n  isModalLoading = false;\r\n  isAreaLoading = false;\r\n  isPreviewpolyway = false;\r\n  resourceUrl;\r\n  previewData: any = {};\r\n  isPreviewDetail = false;\r\n  desColumn = {xxl: 1, xl: 1, lg: 1, md: 1, sm: 1, xs: 1};\r\n  previewTitle = '';\r\n  previewStart = false;\r\n  prefix = environment.OSS_URL;\r\n  courseList = [];\r\n  isEdit = false;\r\n  selectedCourseVal = [];\r\n  selectedCourseValue = [];\r\n\r\n\r\n  @Input() preview = false;\r\n  @ViewChild('modalContent') modalContent: TemplateRef<any>;\r\n  @ViewChild('nailingTmp') nailingTmp: TemplateRef<any>;\r\n\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private modalService: NzModalService,\r\n    private menuService: MenuService,\r\n    private notify: NotifyService,\r\n    private knowledgeManageService: KnowledgeManageService,\r\n    private httpServer: ArchivesManageServer,\r\n    public courseMgService: CourseManageService,\r\n    public route: ActivatedRoute,\r\n    public message: NzMessageService,\r\n    @Inject(LOCALE_ID) public locale: string,\r\n  ) {\r\n    super();\r\n    this.initFrom();\r\n  }\r\n\r\n  /*\r\n * @Override\r\n * */\r\n  initData(): void {\r\n    this.getCourseList().then(courseList => {\r\n      if (courseList) {\r\n        this.getDataList();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  /*\r\n * @Override\r\n * */\r\n  resetInit() {\r\n    super.resetInit();\r\n    this.selectedCourseVal = [];\r\n    this.selectedCourseValue = [];\r\n  }\r\n\r\n  /*\r\n  * @Override\r\n  * */\r\n  collectParam() {\r\n    super.collectParam();\r\n    const {selectedCourseVal} = SessionStorageUtil.getSearch(this._PAGE_ID_);\r\n    this.selectedCourseVal = selectedCourseVal || [];\r\n  }\r\n\r\n  /*\r\n  * @Override\r\n  * */\r\n  sybcParam() {\r\n    super.sybcParam();\r\n    this.selectedCourseValue = this.selectedCourseVal;\r\n  }\r\n\r\n  /*\r\n  * @Override\r\n  * */\r\n  storingData() {\r\n    const {searchWordVal, selectedCourseVal} = this;\r\n    this.passData({searchWordVal, selectedCourseVal});\r\n  }\r\n\r\n\r\n  /*\r\n    * @Override\r\n    * @*/\r\n  getDataList() {\r\n    const parpms = {\r\n      limit: this.pageSize,\r\n      page: this.pageIndex,\r\n      sort: 'createTime|desc',\r\n      name: this.searchWordVal.trim(),\r\n      courseIds: this.selectedCourseVal.join(',')\r\n    };\r\n    this.isLoading = true;\r\n    this.httpServer.guideTeacherTableList(parpms).subscribe(res => {\r\n      this.isLoading = false;\r\n      if (!res) {\r\n        return;\r\n      }\r\n      if (res.data && res.data.length > 0) {\r\n        res.data.forEach((item, i) => {\r\n          item.seq = (i + 1) + (this.pageIndex - 1) * this.pageSize;\r\n        });\r\n        this.data = res.data;\r\n      } else {\r\n        this.data = [];\r\n      }\r\n      // tslint:disable-next-line:no-unused-expression\r\n      res.page && (this.total = res.page.totalResult);\r\n    }, () => {\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  private getCourseList() {\r\n    return new Promise((resolve => {\r\n      this.courseMgService.getCourseListTreeNew().subscribe(res => {\r\n        if (res.status === 200) {\r\n          if (res.data.length) {\r\n            this.courseList = res.data;\r\n            // res.data.forEach(item => {\r\n            //   if (item.courseList && item.courseList.length) {\r\n            //     this.courseList = this.courseList.concat(item.courseList);\r\n            //   }\r\n            // });\r\n          } else {\r\n            this.courseList = [];\r\n          }\r\n          resolve(true);\r\n          // if (this.selectedCourseVal && this.selectedCourseVal.length) {\r\n          //   resolve(true);\r\n          // } else {\r\n          //   if (this.courseList[0] && this.courseList[0].id) {\r\n          //     this.selectedCourseValue = this.selectedCourseVal = [this.courseList[0].id];\r\n          //     resolve(true);\r\n          //   } else {\r\n          //     this.message.warning('未检测到有你的课程，请先新建课程后再进行课包操作');\r\n          //     resolve(false);\r\n          //   }\r\n          // }\r\n        } else {\r\n          resolve(false);\r\n        }\r\n      }, () => {\r\n        resolve(false);\r\n      });\r\n    }));\r\n  }\r\n\r\n  private initFrom() {\r\n    this.modalForm = this.fb.group({\r\n      id: [''],\r\n      polywayID: ['', []], // [Validators.required, spaceValidator(), Validators.maxLength(34), Validators.minLength(34)]\r\n      videoName: ['', [Validators.maxLength(25)]], // [Validators.required, spaceValidator(), Validators.maxLength(25)]\r\n      introduction: ['', [Validators.required, spaceValidator(), Validators.maxLength(100)]],\r\n      name: ['', [Validators.required, spaceValidator(), Validators.maxLength(25)]],\r\n      avatar: [[], [Validators.required]],\r\n      courseIds: [[], [Validators.required]]\r\n    });\r\n  }\r\n\r\n  searchData(reset: boolean | string = false) {\r\n    if (reset === 'button') {\r\n      this.pageIndex = 1;\r\n      this.sybcParam();\r\n    } else if (reset === 'collect') {\r\n      this.collectParam();\r\n      this.sybcParam();\r\n    } else if (reset) {\r\n      this.resetData();\r\n    }\r\n    this.getDataList();\r\n  }\r\n\r\n\r\n  handlepreVideo(data: any) {\r\n    if (!data.videoId) {\r\n      return this.message.warning('抱歉, 当前id为空, 无法观看');\r\n    }\r\n    this.resourceUrl = data.videoId;\r\n    this.previewTitle = '';\r\n    this.isPreviewpolyway = true;\r\n    this.previewStart = true;\r\n  }\r\n\r\n  closePreview() {\r\n    this.isPreviewpolyway = false;\r\n    this.resourceUrl = '';\r\n    this.previewTitle = '';\r\n    this.previewStart = false;\r\n  }\r\n\r\n\r\n  questionConfiguration(data?) {\r\n    // tslint:disable-next-line:forin\r\n    for (const i in this.modalForm.controls) {\r\n      this.modalForm.controls[i].markAsUntouched();\r\n      this.modalForm.controls[i].markAsPristine();\r\n      this.modalForm.controls[i].updateValueAndValidity();\r\n    }\r\n    if (data) {\r\n      this.modalForm.patchValue({\r\n        id: data.id,\r\n        polywayID: data.videoId,\r\n        videoName: data.videoName,\r\n        introduction: data.introduction,\r\n        name: data.name,\r\n        avatar: [{path: data.avatar, title: '个人头像', name: '个人头像', seq: 0}],\r\n        courseIds: data.course.map(item => item.courseId)\r\n      });\r\n    } else {\r\n      this.modalForm.patchValue({\r\n        id: '',\r\n        polywayID: '',\r\n        videoName: '',\r\n        introduction: '',\r\n        name: '',\r\n        avatar: [],\r\n        courseIds: []\r\n      });\r\n    }\r\n\r\n    this.modalFormRef = this.modalService.create({\r\n      nzTitle: data ? '编辑讲师' : '新增讲师',\r\n      nzContent: this.modalContent,\r\n      nzMaskClosable: false,\r\n      nzWrapClassName: 'vertical-center-modal',\r\n      nzCancelText: '取消',\r\n      nzOkText: '保存',\r\n      nzOnOk: () => {\r\n        return new Promise((resolve) => {\r\n          Object.keys(this.modalForm.controls).forEach(key => {\r\n            this.modalForm.controls[key].markAsDirty();\r\n            this.modalForm.controls[key].updateValueAndValidity();\r\n          });\r\n          if (this.modalForm.invalid) {\r\n            resolve(false);\r\n            return;\r\n          }\r\n          const {\r\n            videoName,\r\n            introduction,\r\n            polywayID,\r\n            name,\r\n            avatar,\r\n            courseIds\r\n          } = this.modalForm.value;\r\n          const params = {\r\n            name,\r\n            introduction,\r\n            videoId: polywayID,\r\n            videoName,\r\n            id: this.modalForm.value.id || '',\r\n            avatar: avatar[0].path,\r\n            courseIds\r\n          };\r\n          this.httpServer.guideTeacherAddEdit(params).subscribe((res) => {\r\n            if (res.status === 201) {\r\n              this.pageIndex = 1;\r\n              this.searchData();\r\n              resolve(true);\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  previewItem(data: any) {\r\n    this.httpServer.guideTeacherDetails({id: data.id}).subscribe(res => {\r\n      if (!res) {\r\n        return;\r\n      }\r\n      this.previewData = res.data;\r\n      this.isPreviewDetail = true;\r\n    });\r\n  }\r\n\r\n  handleTableRowDel(row): void {\r\n    this.modalService.warning({\r\n      nzTitle: '提示',\r\n      nzContent: '确认删除吗? ',\r\n      nzCancelText: '取消',\r\n      nzOnOk: () => {\r\n        return new Promise((resolve) => {\r\n          this.httpServer.guideTeacherDel({\r\n            id: row.id\r\n          }).subscribe((res) => {\r\n            if (res.status === 204) {\r\n              resolve(true);\r\n              this.searchData();\r\n            } else {\r\n              resolve(false);\r\n              if (res.status === 500) {\r\n                this.message.error('服务器业务异常');\r\n              }\r\n            }\r\n          }, () => resolve(false));\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  getCourseName(data: any) {\r\n    return data.course.length > 0 ? data.course.map(e => e.courseName).join(',') : '--';\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from 'src/app/shared/shared.module';\r\nimport { ArchivesManageRoutingModule } from './archives-manage-routing.module';\r\nimport { GuideTeacherComponent } from './guide-teacher/guide-teacher.component';\r\nimport { AddEditComponent } from './guide-teacher/add-edit/add-edit.component';\r\nimport { BatchUploadComponent } from './guide-teacher/batch-upload/batch-upload.component';\r\nimport { TeacherPreviewComponent } from './teacher-preview/teacher-preview.component';\r\nimport { VideoPreviewComponent } from './video-preview/video-preview.component';\r\nimport {AnnouncementManagementComponent} from './announcement-management/announcement-management.component';\r\nimport {RecordingLecturerComponent} from './recording-lecturer/recording-lecturer.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [GuideTeacherComponent, AddEditComponent, RecordingLecturerComponent,\r\n    BatchUploadComponent, TeacherPreviewComponent, VideoPreviewComponent, AnnouncementManagementComponent],\r\n  imports: [\r\n    SharedModule,\r\n    ArchivesManageRoutingModule\r\n  ]\r\n})\r\nexport class ArchivesManageModule { }\r\n","import {NgModule} from '@angular/core';\r\nimport {Routes, RouterModule} from '@angular/router';\r\nimport {TeacherPreviewComponent} from './teacher-preview/teacher-preview.component';\r\nimport {VideoPreviewComponent} from './video-preview/video-preview.component';\r\nimport {NoFoundComponent} from '../../../../layout/404/404.component';\r\nimport {AnnouncementManagementComponent} from './announcement-management/announcement-management.component';\r\nimport {RecordingLecturerComponent} from './recording-lecturer/recording-lecturer.component';\r\n\r\nconst routes: Routes = [\r\n  {path: 'guide-teacher', component: RecordingLecturerComponent},\r\n  {path: 'announcement-management', component: AnnouncementManagementComponent},\r\n  {path: 'teacher-preview/:id', component: TeacherPreviewComponent},\r\n  {path: 'video-preview/:id', component: VideoPreviewComponent},\r\n  {\r\n    path: '**',\r\n    component: NoFoundComponent,\r\n    data: {title: '404'}\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ArchivesManageRoutingModule {\r\n}\r\n"]}